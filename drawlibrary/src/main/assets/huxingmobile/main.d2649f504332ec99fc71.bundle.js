webpackJsonp([0],{"+6Ri":function(t,e,n){"use strict";var o=n("Dvc5");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.close=function(){},e}(o.a)},"+Biz":function(t,e,n){"use strict";var o=n("SScf"),i=n("KLn3");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,!1,!1)||this;return o.width=e,o.height=n,o.scene=new i.a,o.addChild(o.scene),o}return r(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"FacadeViewPort"},enumerable:!0,configurable:!0}),e.prototype.open=function(t,e){this.scene.open(t,e),this.center(.8),this.scene.createRuler(),this.scene.createTag()},e.prototype.center=function(t){var e=this.scene.bound,n=this.width/e.width*t;this.scene.setScale(n,n),this.scene.setXY(this.width/2+15,this.height/2)},e}(o.a)},"+ByO":function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("WFe8"),a=n("Yyq6"),s=n("YihH"),l=n("CW6F");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(n,o){var i=t.call(this,n,o)||this;return e._instance=i,i}return u(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.prototype.open=function(t){this.target=t,this.visible="true",t instanceof r.a?(this.wallSettingBar.visible="true",this.openingSettingBar.visible="false",this.structSettingBar.visible="false",this.wallSettingBar.setTargetWall(t)):t instanceof a.a?(this.wallSettingBar.visible="false",this.openingSettingBar.visible="true",this.structSettingBar.visible="false",this.openingSettingBar.setTargetOpening(t)):t instanceof l.a&&(this.wallSettingBar.visible="false",this.openingSettingBar.visible="false",this.structSettingBar.visible="true",this.structSettingBar.setTargetStruct(t)),this.moveCenter(!1)},e.prototype.close=function(){this.visible="false",this.wallSettingBar.visible="false",this.openingSettingBar.visible="false",this.structSettingBar.visible="false"},e.prototype.moveLeft=function(){this.transition(this.dom,"left 0.25s ease-out");var t=s.a.inst.totalWidth,e=Math.round((window.innerWidth-this.totalWidth)/2);if(window.innerWidth-e-this.totalWidth-t<25){var n=window.innerWidth-t-this.totalWidth-25;this.left=Math.max(0,n)}},e.prototype.moveCenter=function(t){void 0===t&&(t=!0),1==t?this.transition(this.dom,"left 0.25s ease-out"):this.transition(this.dom,""),this.left=Math.round((window.innerWidth-this.totalWidth)/2)},Object.defineProperty(e.prototype,"totalWidth",{get:function(){return"true"==this.wallSettingBar.visible?this.wallSettingBar.widthNumber:"true"==this.openingSettingBar.visible?this.openingSettingBar.widthNumber:"true"==this.structSettingBar.visible?this.structSettingBar.widthNumber:0},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},"+Hrd":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".mask[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:rgba(0,0,0,.5)}.window[_ngcontent-%COMP%]{position:relative;width:100%;height:500px;background-color:#f6f6f6}.head[_ngcontent-%COMP%]{top:0;height:48px;background-color:#fff;border-bottom:1px solid #e3e3e3}.body[_ngcontent-%COMP%], .head[_ngcontent-%COMP%]{position:absolute;left:0;width:100%}.body[_ngcontent-%COMP%]{top:49px;bottom:0}.foot[_ngcontent-%COMP%]{position:absolute;left:0;bottom:54px;width:100%;height:36px;border-top:1px solid #f6f6f6}.title[_ngcontent-%COMP%]{float:none;margin:14px auto;width:40px;height:20px;line-height:20px;text-align:center;vertical-align:middle;font-size:19px;color:#333;letter-spacing:0}.left[_ngcontent-%COMP%]{top:0;padding-top:10px;border-right:1px solid #e3e3e3}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:100%}.right[_ngcontent-%COMP%]{top:10px;display:none;overflow-x:hidden;overflow-y:scroll}option-navigation-item[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px;margin-right:10px;border-radius:8px;background-color:#fff}option-input[_ngcontent-%COMP%]{margin-bottom:8px;border-radius:4px}option-input[_ngcontent-%COMP%], radio-button[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px;background-color:#fff}radio-button[_ngcontent-%COMP%]{margin-bottom:1px}.version[_ngcontent-%COMP%]{position:absolute;top:14px;right:10px}.backButton[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-top:9px}.defaultButton[_ngcontent-%COMP%], .finishButton[_ngcontent-%COMP%]{position:absolute}"]},"+N0H":function(t,e,n){"use strict";var o=n("DLyt"),i=n("InW/"),r=n("w9Am"),a=n("KE74"),s=n("Yyq6"),l=n("PSoK"),u=n("WFe8"),h=n("r4QP"),c=n("Yhhh"),p=n("/T2q"),d=n("UPT1"),f=n("ZvbM"),g=n("SJcU"),m=n("PbJf"),_=n("ezNz"),y=n("Xx/s"),b=n("CW6F"),v=n("fqCj"),w=n("jDyV"),O=n("aJ2T"),x=n("Eezr"),E=n("SScf"),P=n("lpfp"),C=n("/LiK"),A=n("MGNB"),N=n("X7Gc"),S=n("WYR6"),M=n("J78+"),T=n("0/et"),L=n("H6Kx"),R=n("gn8q"),I=n("75Fo"),D=n("Atgq"),k=n("EE9o"),j=n("BM0e"),U=n("eUeh"),W=n("matE");n.d(e,"a",function(){return F});var H=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(t){function e(){var n=t.call(this)||this;return n.no=null,n._newBuilt=null,n._contentChanged=null,n.backup=null,n.tmpBoard=null,n.grid=null,n._tmpPoint=new P.a,n._boundRect=new S.a,n._centerScale=0,n._centerPoint=new P.a(0,0),e._instance=n,f.a.MSCENE=n,n.no=C.a.createPureUID(),n.newBuilt=!0,n.contentChanged=!0,n.backup=i.a.getInstance(),n.createChildren(),n.setScale(1,1),n}return H(e,t),e.prototype.createChildren=function(){this.grid=new o.a(e.MAX_SIZE),this.addChild(this.grid),this.tmpBoard=new E.a(!0,!0),this.tmpBoard.width=e.MAX_SIZE>>1,this.tmpBoard.height=e.MAX_SIZE>>1,this.tmpBoard.visible=!1,this.tmpBoard.gpu=!0,this.addChild(this.tmpBoard),t.prototype.createChildren.call(this),this.addExtraLayers()},Object.defineProperty(e,"inst",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"MScene"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),A.a.inst.addEvent(N.a.DRAG_ENTER,this.dragEnterHandler,this),A.a.inst.addEvent(N.a.DRAG_MOVE,this.dragMoveHandler,this)},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),A.a.inst.removeEvent(N.a.DRAG_ENTER,this.dragEnterHandler,this),A.a.inst.removeEvent(N.a.DRAG_MOVE,this.dragMoveHandler,this)},e.prototype.propertyChangeHandler=function(){d.a.inst.update(),r.a.inst.update(),_.a.inst.update()},e.prototype.clear=function(){this.clearContent(),this.backup.clear(),this.contentChanged=!0},e.prototype.clearData=function(){this.clearContent(),this.change(!0,!0)},e.prototype.clearModels=function(){for(var t in this.models)this.removeModel(this.getModelByName(t));this.change()},e.prototype.clearContent=function(){_.a.inst.clear(),t.prototype.clearContent.call(this)},e.prototype.open=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.clear(),t?(this.no=t,this.newBuilt=!1):(this.no=C.a.createPureUID(),this.newBuilt=!0);var n=!0;if(e)try{this.loadData(e),n=!0}catch(t){n=!1}return this.change(!0,!0),this.center(),0==this.empty&&this.dispatchEvent(new p.a(p.a.MSCENE_DRAW_CLOSED),this),n},Object.defineProperty(e.prototype,"boundRect",{get:function(){if(0==this.getLength(this.rooms))return this._boundRect.x=-300,this._boundRect.y=-300,this._boundRect.width=600,this._boundRect.height=600,this._boundRect;var t,e,n=Number.MAX_VALUE,o=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=-Number.MAX_VALUE;for(var a in this.rooms){t=this.rooms[a];for(var s=0;s<t.boundPolygon.vertexCount;s++)e=t.boundPolygon.getPointAt(s),n=Math.min(e.x,n),o=Math.min(e.y,o),i=Math.max(e.x,i),r=Math.max(e.y,r)}for(var a in this.openings)for(var l=this.openings[a],h=l.getBoudaryPolygon(),c=0,p=h.points;c<p.length;c++){var d=p[c];e=l.localToScene(d),n=Math.min(e.x,n),o=Math.min(e.y,o),i=Math.max(e.x,i),r=Math.max(e.y,r)}return n-=u.a.DEFAULT_LENGTH,o-=u.a.DEFAULT_LENGTH,i+=u.a.DEFAULT_LENGTH,r+=u.a.DEFAULT_LENGTH,this._boundRect.x=n,this._boundRect.y=o,this._boundRect.width=i-n,this._boundRect.height=r-o,this._boundRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerScale",{get:function(){return this._centerScale},set:function(t){this._centerScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRect",{get:function(){this._viewRect||(this._viewRect=new S.a);var t=new P.a(-e.MAX_SIZE/2,-e.MAX_SIZE/2),n=new P.a(e.MAX_SIZE/2,e.MAX_SIZE/2);return this._viewRect.setTo(t.x,t.y,n.x-t.x,n.y-t.y),this._viewRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){var t=this.boundRect;return this._centerPoint.setTo(t.x+.5*t.width,t.y+.5*t.height),this._centerPoint},enumerable:!0,configurable:!0}),e.prototype.calcArea=function(){var t=0;for(var e in this.rooms){t+=this.rooms[e].calcArea()}return t},e.prototype.calcPureArea=function(){var t=0;for(var e in this.rooms){t+=this.rooms[e].calcPureArea()}return t},e.prototype.setPureArea=function(t){if(t!=this.calcPureArea()){var e,n,o,i,r=this.calcArea(),a=0,s=this.centerPoint;for(e in this.walls)n=this.walls[e],o=.01*n.realWidth,i=.5*n.realLength*.01,2==n.adjacentRoomCount?a+=o*i*2:0==n.adjacentRoomCount?a+=o*i*2:a+=o*i;var l=a+Math.sqrt(a*a-4*r*-t);l/=2*r;var u,h,c=[];for(e in this.rooms){u=this.rooms[e];var p=u.boundPolygon.center;p.x=(p.x-s.x)*l+s.x,p.y=(p.y-s.y)*l+s.y,h={},h.arbitraryPoint=p,h.name=u.name,h.itemNo=u.itemNo,h.tag=u.tag,c.push(h)}var d;for(e in this.corners)d=this.corners[e],d.realX=(d.realX-s.x)*l+s.x,d.realY=(d.realY-s.y)*l+s.y;for(e in this.corners)d=this.corners[e],d.calculateTransform(),d.calcWallCorner();for(e in this.walls)n=this.walls[e],n.setPolygonChangeFlag(!0),n.calculateTransform();var f;for(e in this.openings){for(f=this.openings[e],f.realWidth*=l,f.realX=(f.realX-s.x)*l+s.x,f.realY=(f.realY-s.y)*l+s.y,f.x=f.realX,f.y=f.realY;0==f.isLegal();)f.realWidth*=.9,f.realX+=.1*(f.wall.realX-f.realX),f.realY+=.1*(f.wall.realY-f.realY),f.x=f.realX,f.y=f.realY;f.calculateTransform()}var g;for(e in this.structs)g=this.structs[e],g.realX=(g.realX-s.x)*l+s.x,g.realY=(g.realY-s.y)*l+s.y,g.calculateTransform();this.rebuildScene();for(var m=[],_=0,y=c;_<y.length;_++){h=y[_];var b=[];for(e in this.rooms){u=this.rooms[e];var v=h.arbitraryPoint,w=u.boundPolygon;1==T.a.isPointInPolygon(v,w.vertices)&&b.push(u)}var O;if(0!=b.length){if(1==b.length)O=b[0];else if(b.length>1)for(var x=Number.MAX_VALUE,E=0;E<b.length;E++){u=b[E];var P=u.calcArea();P<x&&(x=P,O=u)}O.name=h.name,O.tag=h.tag,O.itemNo=h.itemNo,1==this.contains(O)&&this.removeChild(O),m.push(O)}else console.debug("找不到对应的房间")}this.rooms=new U.a;for(var C=0,A=m;C<A.length;C++)u=A[C],this.addRoom(u);this.change(!0,!0)}},e.prototype.dumpString=function(){var t=this.dumpData();return JSON.stringify(t)},e.prototype.loadString=function(t){var e=JSON.parse(t);this.loadData(e)},e.prototype.dumpData=function(){var t,e=new Object;e.setting=this.setting.dumpData(),e.corners=new Array;for(var n in this.corners){t=this.corners[n].dumpData(),t&&e.corners.push(t)}e.walls=new Array;for(var n in this.walls){t=this.walls[n].dumpData(),t&&e.walls.push(t)}e.rooms=new Array;for(var n in this.rooms){t=this.rooms[n].dumpData(),t&&e.rooms.push(t)}e.openings=new Array;for(var n in this.openings){t=this.openings[n].dumpData(),t&&e.openings.push(t)}e.models=new Array;for(var n in this.models){t=this.models[n].dumpData(),t&&e.models.push(t)}e.structs=new Array;for(var n in this.structs){t=this.structs[n].dumpData(),t&&e.walls.push(t)}e.notes=new Array;for(var o=_.a.inst.notes,i=0,r=o;i<r.length;i++){t=r[i].dumpData(),t&&e.notes.push(t)}return e},e.prototype.loadData=function(t,e){void 0===e&&(e=!1);var n;t.hasOwnProperty("setting")&&this.setting.loadData(t.setting);var o,i;for(o in t.corners)n=t.corners[o],(i=l.a.loadData(n))&&this.addCorner(i);for(var r,h,c=0,p=t.walls;c<p.length;c++)if(n=p[c],1==n.hasOwnProperty("structType")&&n.structType!=w.a.WALL){if(!(h=b.a.loadData(n)))continue;this.addStruct(h)}else{if(!(r=u.a.loadData(n)))continue;this.addWall(r)}for(o in this.corners)i=this.corners[o],i.calcWallCorner();for(o in this.walls)r=this.walls[o],r.setPolygonChangeFlag(!0),r.calculateTransform();var d;for(o in t.rooms)n=t.rooms[o],(d=a.a.loadData(n))&&this.addRoom(d);var f=t.openings;for(o in f){n=f[o];var g=s.a.loadData(n);g&&this.addOpening(g)}var m;if(t.hasOwnProperty("notes"))for(o in t.notes)n=t.notes[o],(m=y.a.loadData(n))&&_.a.inst.addNote(m)},e.prototype.undo=function(){var t=this.backup.popUndoObject();t&&(this.clearContent(),this.loadData(t,!1),this.change(!1,!0))},e.prototype.redo=function(){var t=this.backup.popRedoObject();t&&(this.clearContent(),this.loadData(t,!1),this.change(!1,!0))},e.prototype.change=function(e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),t.prototype.change.call(this),n&&(this.rebuildScene(),this.correctionContent(),r.a.inst.update(),d.a.inst.update()),1==e&&this.backup.backup(this.dumpData()),this.contentChanged=!0,this.dispatchEvent(new p.a(p.a.MSCENE_CONTENT_CHANGED),this)},e.prototype.drawTmpBoard=function(){this.tmpBoard.graphics.clear();var t;for(t in this.rooms){this.rooms[t].drawToCanvas(this.tmpBoard.graphics)}for(t in this.walls){this.walls[t].drawToCanvas(this.tmpBoard.graphics)}},Object.defineProperty(e.prototype,"newBuilt",{get:function(){return this._newBuilt},set:function(t){this._newBuilt=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentChanged",{get:function(){return this._contentChanged},set:function(t){this._contentChanged=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"savable",{get:function(){return!this.empty},enumerable:!0,configurable:!0}),e.prototype.addPaths=function(e,n){if(void 0===n&&(n=!1),!(e.length<2)){for(var o=n?e.length:e.length-1,i=0;i<o;i++){var r=e[i],a=e[T.a.nextIndex(i,e.length)];this.addPath(r,a)}this.change(!0,!0);for(var s in this.corners){this.corners[s].calcWallCorner()}for(var s in this.walls){var l=this.walls[s];l.setPolygonChangeFlag(!0),l.calculateTransform()}t.prototype.addPaths.call(this,e,n)}},e.prototype.addPath=function(t,e,n){if(void 0===n&&(n=0),null==this.getWallByEnds(t,e)){var o=this.createWallByEnds(t,e,n);o&&(o.realHeight=this.setting.getStoreyHeight(m.a.CM),this.addWall(o))}},e.prototype.snapshot=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),1==j.a.isIOS?this.snapshotIOS(t,e,n):1==j.a.isAndroid?this.snapshotAndroid(t,e,n):this.snapshotIOS(t,e,n)},e.prototype.snapshotIOS=function(t,n,o){var i=this;void 0===n&&(n=null),void 0===o&&(o=null);for(var r in this.rooms){this.rooms[r].addColorFloor()}this.removeChild(d.a.inst.rulerGroup),this.removeChild(_.a.inst),this.grid.visible=!1;var a=this.boundRect,s=Math.max(a.width,a.height),l=t-160,u=s/l,h=a.width>=a.height?a.x:a.x-(a.height-a.width)/2;h-=80*u,h+=e.MAX_SIZE/2;var c=a.height>=a.width?a.y:a.y-(a.width-a.height)/2;c-=80*u,c+=e.MAX_SIZE/2;var p=s+160*u,f=new P.a(this.x,this.y),g=this.scale;this.setScale(1,1),this.setXY(e.MAX_SIZE/2,e.MAX_SIZE/2),html2canvas(this.viewPort.dom,{useCORS:!0,allowTaint:!0,scale:1,x:0,y:0,width:p,height:p,scrollX:h,scrollY:c,windowWidth:e.MAX_SIZE,windowHeight:e.MAX_SIZE}).then(function(e){var r=Canvas2Image.convertToJPEG(e,t,t);n&&n.call(o,r),i.addChild(d.a.inst.rulerGroup),i.addChild(_.a.inst),i.grid.visible=!0,i.setXY(f.x,f.y),i.setScale(g,g);for(var a in i.rooms){i.rooms[a].removeColorFloor()}})},e.prototype.snapshotAndroid=function(t,e,n){var o=this;void 0===e&&(e=null),void 0===n&&(n=null),this.center();for(var i in this.rooms){this.rooms[i].addColorFloor()}this.removeChild(d.a.inst.rulerGroup),this.removeChild(_.a.inst),this.grid.visible=!1;var r=Math.min(window.innerWidth,window.innerHeight),a=Math.round((window.innerWidth-r)/2);a=Math.max(a,0);var s=Math.round((window.innerHeight-r)/2);s=Math.max(s,0),html2canvas(this.viewPort.dom,{useCORS:!0,allowTaint:!0,scale:2,x:a,y:s,width:r,height:r}).then(function(i){var r=Canvas2Image.convertToJPEG(i,t,t);e&&e.call(n,r),o.addChild(d.a.inst.rulerGroup),o.addChild(_.a.inst),o.grid.visible=!0;for(var a in o.rooms){o.rooms[a].removeColorFloor()}})},e.prototype.rebuildScene=function(){var t,e,n,o,i;for(o in this.walls)e=this.walls[o],1==e.empty&&this.removeWall(e,!0);var r=new I.a;for(o in this.walls)e=this.walls[o],r.addEdge(e.start,e.stop);r.processEdgeClean(),r.polygonize();var s=L.a.getInstance();s.clear();for(o in this.walls)e=this.walls[o],n=e.dumpData(),i=new R.a(e.start,e.stop),i.mark=JSON.stringify(n),s.inputMarkedEdges.push(i);for(var l=r.getEdges(),u=0,h=l;u<h.length;u++)i=h[u],s.inputFreshEdges.push(i);s.merge();for(var c=0,d=s.outputCreateEdges;c<d.length;c++)i=d[c],e=this.createWallByEnds(i.start,i.stop),""!=i.mark&&(n=JSON.parse(i.mark),e.parapet=Boolean(n.parapet),e.bearing=Boolean(n.bearing),e.realLength=n.length,e.realHeight=n.height),e&&this.addWall(e);for(var f=0,g=s.outputDeleteEdges;f<g.length;f++)i=g[f],n=JSON.parse(i.mark),(e=this.getWallByName(n.name))&&this.removeWall(e,!1);var m=D.a.getInstance();m.clear();for(o in this.rooms){var t=this.rooms[o];t.boundPolygon.mark=t.name,m.inputMarkedPolys.push(t.boundPolygon)}for(var _=0;_<r.shapeCount;_++)m.inputFreshPolys.push(M.a.createByPath(r.getShapeAt(_)));m.merge();for(var y,b,v=0,w=m.outputUpdatePolys;v<w.length;v++)if(b=w[v],t=this.getRoomByName(b.mark)){t.clearWallRelation(),t.boundPolygon.clear();for(var O=0,E=b.vertices;O<E.length;O++)y=E[O],t.boundPolygon.addVertex(y);t.computeOverrideBoundPolygon(),t.setPolygonChangeFlag(!0),t.createWallRelation(),t.calculateTransform()}for(var P=0,C=m.outputDeletePolys;P<C.length;P++)b=C[P],(t=this.getRoomByName(b.mark))&&this.removeRoom(t);for(var A=0,N=m.outputCreatePolys;A<N.length;A++){b=N[A],t=new a.a;for(var S=0,T=b.vertices;S<T.length;S++)y=T[S],t.boundPolygon.addVertex(y);t.computeOverrideBoundPolygon(),this.addRoom(t)}m.outputCreatePolys.length>0&&this.dispatchEvent(new p.a(p.a.MSCENE_DRAW_CLOSED),this);for(var o in this.corners){this.corners[o].calculateTransform()}var t,k,j=[];for(var o in this.rooms)t=this.rooms[o],k={area:t.calcArea(),room:t},j.push(k);j.sort(function(t,e){return t.area<e.area?1:-1});for(var U=0,W=0,H=j;W<H.length;W++)k=H[W],t=k.room,t.depth=x.a.ROOM+U,U+=1},e.prototype.correctionContent=function(){var t;for(var e in this.openings){if(t=this.getOpeningByName(e),null==t.wall){var n=this.calcOpeningAttachWall(new P.a(t.realX,t.realY));n&&(t.wallName=n.name)}t&&!t.isLegal()&&this.removeOpening(t)}},e.prototype.dragEnterHandler=function(t){var e=t.data,n=e.sourceData,o=n;o.type==v.a.OPENING?this.dragOpeningDropHandler(t):o.type==v.a.STRUCT&&this.dragStructDropHandler(t),this.dragAttachWall&&(this.dragAttachWall.fillColor=this.dragAttachWall.normalFillColor,this.dragAttachWall.drawStraightWall(),this.dragAttachWall=null)},e.prototype.dragOpeningDropHandler=function(t){var e=t.data,n=e.sourceData,o=n.subType;this._tmpPoint.setTo(e.mouseX,e.mouseY);var i=this.globalToLocal(this._tmpPoint),r=this.calcOpeningAttachWall(i);if(r){var a=T.a.calcFoot(r.start,r.stop,i),l=new s.a(o);l.wallName=r.name;var u=a.x,c=a.y,p=0,d=r.realRotationZ;l.wallName=r.name;var f,g=r.sceneToLocal(a).x,m=r.getLegalOpeningPosition(g,l),_=m[0],y=m[1];f=s.a.MIN_WIDTH;var b=y-_,v=(y+_)/2,w=90;if(l.type==h.a.DOOR_COMMON?(w=90,210):l.type==h.a.DOOR_DOUBLE?(w=160,210):l.type==h.a.DOOR_SLIDING?(w=140,210):l.type==h.a.WINDOW_COMMON?(w=120,150,p=80):l.type==h.a.WINDOW_FRENCH?(w=180,210,p=0):l.type==h.a.WINDOW_BAY&&(w=120,140,p=70),T.a.less(b,w)&&T.a.less(f,b)&&b>=f)u=r.localToScene(new P.a(v,0)).x,c=r.localToScene(new P.a(v,0)).y,w=b;else{g=r.sceneToLocal(new P.a(u,c)).x;var O=r.getLegalRange(g);O.minX+w/2>g?(g=O.minX+w/2,u=r.localToScene(new P.a(g,0)).x,c=r.localToScene(new P.a(g,0)).y):O.maxX-w/2<g&&(g=O.maxX-w/2,u=r.localToScene(new P.a(g,0)).x,c=r.localToScene(new P.a(g,0)).y)}if(l.realX=u,l.realY=c,l.realZ=p,l.type==h.a.WINDOW_BAY?r.forwardRoom?l.realRotationZ=d:l.realRotationZ=d+180:l.realRotationZ=d,l.realWidth=w,this.addOpening(l),!l.wall||!l.isLegal())return void this.removeOpening(l);this.change()}},e.prototype.dragStructDropHandler=function(t){var e=t.data,n=e.sourceData,o=n.subType;this._tmpPoint.setTo(e.mouseX,e.mouseY);var i=this.globalToLocal(this._tmpPoint),r=new b.a;r.create(65,65),r.structType=o,r.realX=i.x,r.realY=i.y,r.calculateTransform(),this.addStruct(r),this.change(!0,!1)},e.prototype.dragMoveHandler=function(t){var e=t.data;if(e.sourceData.type==v.a.OPENING){this.dragAttachWall&&(this.dragAttachWall.fillColor=this.dragAttachWall.normalFillColor,this.dragAttachWall.drawStraightWall(),this.dragAttachWall=null),this._tmpPoint.setTo(e.mouseX,e.mouseY);var n=this.globalToLocal(this._tmpPoint);this.dragAttachWall=this.calcOpeningAttachWall(n),this.dragAttachWall&&(this.dragAttachWall.fillColor=W.a.WALL_HOVER_FILL_COLOR,this.dragAttachWall.drawStraightWall())}},e.prototype.createNote=function(){var t=new y.a,e=Math.round(window.innerWidth/2)-40,n=Math.round(window.innerHeight/2),o=40*(Math.random()-.5),i=40*(Math.random()-.5),r=this.globalToLocal(new P.a(e+o,n+i));t.x=r.x,t.y=r.y,_.a.inst.addNote(t),this.change(!0,!1)},e.prototype.removeNote=function(t){_.a.inst.removeNote(t)},e.prototype.moveHuxingToCenter=function(){var t,n,o=e.inst.centerPoint.reverse();for(t in this.corners)n=this.corners[t],n.realX+=o.x,n.realY+=o.y;for(t in this.corners)n=this.corners[t],n.calculateTransform(),n.calcWallCorner();var i;for(t in this.walls)i=this.walls[t],i.realX+=o.x,i.realY+=o.y,i.calculateTransform();var r;for(t in this.openings)r=this.openings[t],r.realX+=o.x,r.realY+=o.y,r.calculateTransform();var a;for(t in this.structs)a=this.structs[t],a.realX+=o.x,a.realY+=o.y,a.calculateTransform();var s;for(t in this.models)s=this.models[t],s.realX+=o.x,s.realY+=o.y,s.calculateTransform();var l;for(t in this.rooms){l=this.rooms[t],l.clearWallRelation();for(var u=0,h=l.boundPolygon.vertices;u<h.length;u++){var c=h[u];c.x+=o.x,c.y+=o.y}l.computeOverrideBoundPolygon(),l.setPolygonChangeFlag(!0),l.createWallRelation(),l.calculateTransform()}for(var p=_.a.inst.notes,d=0,f=p;d<f.length;d++){var g=f[d];g.x+=o.x,g.y+=o.y}},e.prototype.center=function(){var t=this.boundRect,n=Math.round(window.innerWidth),o=(Math.round(window.innerHeight-28),Math.max(t.width,t.height)),i=n/o;i=Math.min(e.SCALE_MAX_VALUE,Math.max(e.SCALE_MIN_VALUE,i)),i*=.9,i*=10,i=Math.round(i)/10,this.scaleScene(i,new P.a(0,0));var a=new P.a;a.setTo(t.x+.5*t.width,t.y+.5*t.height-28),this.viewPort.lookAt(a),r.a.inst.update(),d.a.inst.update()},e.prototype.scaleScene=function(t,n){if(!(t>e.SCALE_MAX_VALUE||t<e.SCALE_MIN_VALUE)){var o=this.scaleX,i=n.clone(),r=new k.a;r.scale(t/o,t/o);var a=r.transformPoint(n),s=i.x-a.x,l=i.y-a.y;s*=o,l*=o,this.setPositionAndScale(this.x+s,this.y+l,t,t)}},e.prototype.setPositionAndScale=function(t,e,n,o){this._x=t,this._y=e,this._scaleX=n,this._scaleY=o,this.updateTransform()},e.prototype.setPosition=function(t,e){this._x=t,this._y=e,this.updateTransform()},e.prototype.addExtraLayers=function(){0==this.contains(d.a.inst.rulerGroup)&&(this.addChild(d.a.inst.rulerGroup),this.addChild(r.a.inst),this.addChild(_.a.inst),_.a.inst.update())},e.prototype.removeExtraLayers=function(){this.removeChild(d.a.inst.rulerGroup),this.removeChild(r.a.inst),this.removeChild(_.a.inst)},e.prototype.addTempLayers=function(){1==this.tmpBoard.visible&&(this.tmpBoard.visible=!1,this.objectContainer.visible=!0,1==d.a.inst.isShow&&(d.a.inst.rulerGroup.visible=!0),r.a.inst.visible=!0,_.a.inst.visible=!0)},e.prototype.removeTempLayers=function(){0==this.tmpBoard.visible&&(this.drawTmpBoard(),this.tmpBoard.visible=!0,this.objectContainer.visible=!1,d.a.inst.rulerGroup.visible=!1,r.a.inst.visible=!1,_.a.inst.visible=!1)},e.prototype.showTargetRuler=function(t){t instanceof u.a?d.a.inst.showWallInputRuler(t):t instanceof s.a?d.a.inst.showOpeningRuler(t):t instanceof l.a?d.a.inst.showCornerRuler(t):t instanceof c.a&&d.a.inst.showModelRuler(t)},e.prototype.updateRuler=function(){d.a.inst.update()},e.prototype.unfocus=function(){O.a.inst.unfocus()},e}(g.a);F.SCALE_MAX_VALUE=2.5,F.SCALE_MIN_VALUE=.2,F.MAX_SIZE=3e3,F._instance=null},"+h1B":function(t,e,n){"use strict";var o=n("/oeL"),i=n("aR8+"),r=n("wQAS"),a=n("0g8q"),s=n("Ivjm"),l=n("6SXR"),u=n("nXSw"),h=n("Ucot"),c=n("42Ej"),p=n("q4dy"),d=n("qbdv"),f=n("fc+i"),g=n("XKz0");n.d(e,"a",function(){return m});var m=o.b(i.a,[r.a],function(t){return o.c([o.d(512,o.e,o.f,[[8,[a.a,s.a,l.a,u.a,h.a,c.a,p.a]],[3,o.e],o.g]),o.d(5120,o.h,o.i,[[3,o.h]]),o.d(4608,d.a,d.b,[o.h]),o.d(4608,o.j,o.j,[]),o.d(5120,o.k,o.l,[]),o.d(5120,o.m,o.n,[]),o.d(5120,o.o,o.p,[]),o.d(4608,f.b,f.c,[d.c]),o.d(6144,o.q,null,[f.b]),o.d(4608,f.d,f.e,[]),o.d(5120,f.f,function(t,e,n,o){return[new f.g(t),new f.h(e),new f.i(n,o)]},[d.c,d.c,d.c,f.d]),o.d(4608,f.j,f.j,[f.f,o.r]),o.d(135680,f.k,f.k,[d.c]),o.d(4608,f.l,f.l,[f.j,f.k]),o.d(6144,o.s,null,[f.l]),o.d(6144,f.m,null,[f.k]),o.d(4608,o.t,o.t,[o.r]),o.d(4608,f.n,f.n,[d.c]),o.d(4608,f.o,f.o,[d.c]),o.d(4608,g.a,g.b,[d.c,o.u,g.c]),o.d(4608,g.d,g.d,[g.a,g.e]),o.d(5120,g.f,function(t){return[t]},[g.d]),o.d(4608,g.g,g.g,[]),o.d(6144,g.h,null,[g.g]),o.d(4608,g.i,g.i,[g.h]),o.d(6144,g.j,null,[g.i]),o.d(5120,g.k,g.l,[g.j,[2,g.f]]),o.d(4608,g.m,g.m,[g.k]),o.d(512,d.d,d.d,[]),o.d(1024,o.v,f.p,[]),o.d(1024,o.w,function(t,e){return[f.q(t,e)]},[[2,f.r],[2,o.x]]),o.d(512,o.y,o.y,[[2,o.w]]),o.d(131584,o.z,o.z,[o.r,o.A,o.B,o.v,o.e,o.y]),o.d(2048,o.C,null,[o.z]),o.d(512,o.D,o.D,[o.C]),o.d(512,f.s,f.s,[[3,f.s]]),o.d(512,g.n,g.n,[]),o.d(512,g.o,g.o,[]),o.d(512,i.a,i.a,[]),o.d(256,g.c,"XSRF-TOKEN",[]),o.d(256,g.e,"X-XSRF-TOKEN",[])])})},"/5Oe":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["huxing-struct-view[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:100%;height:180px;background-color:#f6f6f6;box-shadow:0 -1px 7px 0 hsla(0,0%,71%,.5);overflow-x:hidden;overflow-y:hidden}"]},"/LiK":function(t,e,n){"use strict";var o=n("Etka");n.d(e,"a",function(){return i});var i=function(){function t(){}return t.createPureUID=function(){return o.a.replace(t.createUID(),"-","").toLowerCase()},t.createUID=function(){var e,n,o=[],i=0;for(e=0;e<8;e++)o[i++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];for(e=0;e<3;e++)for(o[i++]=45,n=0;n<4;n++)o[i++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];o[i++]=45;var r=(new Date).getTime(),a=("0000000"+r.toString(16).toUpperCase()).substr(-8);for(e=0;e<8;e++)o[i++]=a.charCodeAt(e);for(e=0;e<4;e++)o[i++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];return String.fromCharCode.apply(null,o)},t}();i.ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70]},"/T2q":function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.MSCENE_CONTENT_CHANGED="MSCENE_CONTENT_CHANGED",r.MSCENE_RULER_CHANGED="MSCENE_RULER_CHANGED",r.MSCENE_NOTE_CHANGED="MSCENE_NOTE_CHANGED",r.MSCENE_ITEM_SELECTED="MSCENE_ITEM_SELECTED",r.MSCENE_ITEM_UNSELECTED="MSCENE_ITEM_UNSELECTED",r.MSCENE_DRAW_CLOSED="MSCENE_DRAW_CLOSED"},"/gn8":function(t,e,n){"use strict";var o=n("MPvg");n.d(e,"a",function(){return i});var i=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._x=0,this._y=0,this._z=0,this._x=t,this._y=e,this._z=n}return t.prototype.clone=function(){return new t(this._x,this._y,this._z)},t.prototype.setTo=function(t,e,n){this.x=t,this.y=e,this.z=n},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)},t.prototype.scaleBy=function(t){this._x*=t,this._y*=t,this._z*=t},t.prototype.dotProd=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.crossProd=function(e){var n=new t;return n.x=this.y*e.z-e.y*this.z,n.y=this.z*e.x-this.x*e.z,n.z=this.x*e.y-e.x*this.y,n},t.prototype.normalize=function(){if(0==this.length)return this._x=0,this._y=0,this._z=0,this;var t=this.length;return this.x/=t,this.y/=t,this.z/=t,this},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y+this._z*this._z},enumerable:!0,configurable:!0}),t.prototype.dist=function(t){return t.subtract(this).length},Object.defineProperty(t.prototype,"vector3",{get:function(){return new o.b(this.x,this.y,this.z)},enumerable:!0,configurable:!0}),t}();i.X_AXIS=new i(1,0,0),i.Y_AXIS=new i(0,1,0),i.Z_AXIS=new i(0,0,1)},"/hM2":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["p[_ngcontent-%COMP%]{margin-top:5px;height:12;text-align:center;font-size:12;color:#333}div[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{width:40px}div[_ngcontent-%COMP%]{height:40px}"]},"/lk0":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{labelRef:0}),(t()(),a._15(0,[[1,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""]))],null,function(t,e){t(e,2,0,e.component.text)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"label",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("GkYX"),a=n("/oeL"),s=n("HiNH");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("label",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",radius:"radius",colorStyle:"colorStyle",backUpColor:"backUpColor",backOverColor:"backOverColor",backDownColor:"backDownColor",backUpAlpha:"backUpAlpha",backOverAlpha:"backOverAlpha",backDownAlpha:"backDownAlpha",strokeUpColor:"strokeUpColor",strokeOverColor:"strokeOverColor",strokeDownColor:"strokeDownColor",strokeUpAlpha:"strokeUpAlpha",strokeOverAlpha:"strokeOverAlpha",strokeDownAlpha:"strokeDownAlpha",textUpColor:"textUpColor",textOverColor:"textOverColor",textDownColor:"textDownColor",textSize:"textSize",textWeight:"textWeight",text:"text",textAlign:"textAlign"},{},[])},"/m+Y":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.wallName="",this.reversed=!1,this.mirror=!0,this.x=0,this.y=0,this.width=0}return t.prototype.OpeningBackup=function(){},t.prototype.backup=function(t){this.wallName=t.wallName,this.reversed=t.reversed,this.mirror=t.mirror,this.x=t.realX,this.y=t.realY,this.width=t.realWidth},t.prototype.rollback=function(t){var e=t.scene.getWallByName(this.wallName);e&&(t.wallName=this.wallName,t.realWidth=this.width,t.realX=this.x,t.realY=this.y,t.mirror=this.mirror,t.realRotationZ=e.realRotationZ,this.reversed&&(t.realRotationZ+=180))},t}()},0:function(t,e,n){t.exports=n("cDNt")},"0/et":function(t,e,n){"use strict";var o=n("lpfp"),i=n("/gn8"),r=n("oSDI"),a=n("aNcW"),s=n("60hF");n.d(e,"a",function(){return l});var l=function(){function t(){}return t.prototype.GMath=function(){},t.preIndex=function(t,e){return(t+e-1)%e},t.nextIndex=function(t,e){return(t+1)%e},t.indexAdjacent=function(e,n,o){return e==t.preIndex(n,o)||e==t.nextIndex(n,o)},t.pointIndex=function(e,n){for(var o=0;o<e.length;o++)if(t.isPointEqual(e[o],n))return o;return t.NONE_INDEX},t.isNumberEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),Math.abs(e-n)<o},t.greaterEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e>n||t.isNumberEqual(e,n,o)},t.lessEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e<n||t.isNumberEqual(e,n,o)},t.greater=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e>n&&!t.isNumberEqual(e,n,o)},t.less=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),e<n&&!t.isNumberEqual(e,n,o)},t.isPointEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),t.isNumberEqual(e.x,n.x,o)&&t.isNumberEqual(e.y,n.y,o)},t.isDegreeAngleEqual=function(e,n,o){return void 0===o&&(o=t.TOLERANCE),t.isNumberEqual((e-n)%360,0,o)},t.reversePoint=function(t,e){return void 0===e&&(e=!0),e?(t.x*=-1,t.y*=-1,t):new o.a(-t.x,-t.y)},t.isLineEndsEqual=function(e,n,o,i){return!(!t.isPointEqual(e,o)||!t.isPointEqual(n,i))||!(!t.isPointEqual(e,i)||!t.isPointEqual(n,o))},t.isPolygonEqual=function(e,n){if(e.length!=n.length)return!1;var o,i=e.length,r=-1,a=-1;for(o=0;o<i;o++)for(var s=0;s<i;s++)if(t.isPointEqual(e[o],n[s])){r=o,a=s;break}if(-1==a)return!1;for(o=0;o<i;o++)if(!t.isPointEqual(e[(r+o)%i],n[(a+o)%i]))return!1;return!0},t.vectorOrthogonal=function(e,n){return t.isNumberEqual(e.dotProd(n),0)},t.vectorParallel=function(e,n){return t.isNumberEqual(Math.abs(e.dotProd(n)),e.length*n.length)},t.degreeToRadian=function(t){return t/180*Math.PI},t.radianToDegree=function(t){return t/Math.PI*180},t.acos=function(t){return t>1&&(t=1),t<-1&&(t=-1),Math.acos(t)},t.asin=function(t){return t>1&&(t=1),t<-1&&(t=-1),Math.asin(t)},t.rotateVector=function(t,e,n){void 0===n&&(n=!0);var i=Math.sin(e),r=Math.cos(e),a=new o.a(t.x*r-t.y*i,t.y*r+t.x*i);return n&&a.normalize(1),a},t.rotateByZ=function(t,e){var n=new o.a(t.x,t.y);n.normalize();var i=Math.sin(e),r=Math.cos(e),a=new o.a;return a.x=n.x*r-n.y*i,a.y=n.y*r+n.x*i,a},t.segmentIntersectInLine=function(e,n,o,i){var r=Math.min(e,n),a=Math.max(e,n),s=Math.min(o,i),l=Math.max(o,i);return!t.isNumberEqual(a,s)&&!t.isNumberEqual(r,l)&&!(a<s||r>l)},t.intersect=function(e,n,o,i){if(this.p0p1.setTo(n.x-e.x,n.y-e.y),this.p0p2.setTo(o.x-e.x,o.y-e.y),this.p0p3.setTo(i.x-e.x,i.y-e.y),this.p2p3.setTo(i.x-o.x,i.y-o.y),this.p2p0.setTo(e.x-o.x,e.y-o.y),this.p2p1.setTo(n.x-o.x,n.y-o.y),this.isNumberEqual(this.p0p1.crossProd(this.p0p2),0))return!1;if(this.isNumberEqual(this.p0p1.crossProd(this.p0p3),0))return!1;if(this.isNumberEqual(this.p2p3.crossProd(this.p2p0),0))return!1;if(this.isNumberEqual(this.p2p3.crossProd(this.p2p1),0))return!1;var r=this.p0p1.crossProd(this.p0p2)*this.p0p1.crossProd(this.p0p3),a=this.p2p3.crossProd(this.p2p0)*this.p2p3.crossProd(this.p2p1);return r<0&&!t.isNumberEqual(r,0)&&a<0&&!t.isNumberEqual(a,0)},t.intersectPlus=function(e,n,o,i){return!!this.intersect(e,n,o,i)||(!!(t.isPointEqual(e,o)&&t.isPointEqual(n,i)||t.isPointEqual(e,i)&&t.isPointEqual(n,o))||(!(!t.isPointOnSegment(o,i,e)||t.isPointEqual(e,o)||t.isPointEqual(e,i))||(!(!t.isPointOnSegment(o,i,n)||t.isPointEqual(n,o)||t.isPointEqual(n,i))||(!(!t.isPointOnSegment(e,n,o)||t.isPointEqual(o,e)||t.isPointEqual(o,n))||!(!t.isPointOnSegment(e,n,i)||t.isPointEqual(i,e)||t.isPointEqual(i,n))))))},t.intersectPlus2=function(e,n,o,i,r){return void 0===r&&(r=t.TOLERANCE),this._tmpP0.setTo(n.x-e.x,n.y-e.y),this._tmpP1.setTo(o.x-e.x,o.y-e.y),this._tmpP2.setTo(i.x-e.x,i.y-e.y),this._tmpN0=this._tmpP0.crossProd(this._tmpP1)*this._tmpP0.crossProd(this._tmpP2),this._tmpP0.setTo(i.x-o.x,i.y-o.y),this._tmpP1.setTo(e.x-o.x,e.y-o.y),this._tmpP2.setTo(n.x-o.x,n.y-o.y),this._tmpN1=this._tmpP0.crossProd(this._tmpP1)*this._tmpP0.crossProd(this._tmpP2),t.less(this._tmpN0,0,r)&&t.less(this._tmpN1,0,r)},t.segmentIntersect=function(e,n,o,i){return!!t.intersect(e,n,o,i)||!(!t.isPointOnLine(e,n,o)||!t.isPointOnLine(e,o,i))&&(!(!t.isPointEqual(e,o)||!t.isPointEqual(n,i))||(!(!t.isPointEqual(e,i)||!t.isPointEqual(n,o))||(!!t.isPointInSegment(e,n,o)||(!!t.isPointInSegment(e,n,i)||(!!t.isPointInSegment(o,i,e)||!!t.isPointInSegment(o,i,n))))))},t.isPointOnSegment_EX=function(e,n,o){if(t.isPoint2DEqual(e,o)||t.isPoint2DEqual(n,o))return!0;var i=e.subtract(o);i.normalize();var r=n.subtract(o);r.normalize();var a=i.crossProd(r);return!!t.isNumberEqual(a,0)},t.isPointOnSegment=function(e,n,o){return!!t.isPointOnLine(e,n,o)&&(!(!t.isNumberEqual(o.x,Math.max(e.x,n.x))&&o.x>Math.max(e.x,n.x))&&(!(!t.isNumberEqual(o.x,Math.min(e.x,n.x))&&o.x<Math.min(e.x,n.x))&&(!(!t.isNumberEqual(o.y,Math.max(e.y,n.y))&&o.y>Math.max(e.y,n.y))&&!(!t.isNumberEqual(o.y,Math.min(e.y,n.y))&&o.y<Math.min(e.y,n.y)))))},t.isPointInSegment=function(e,n,o){return!t.isPointEqual(e,o)&&!t.isPointEqual(n,o)&&t.isPointOnSegment(e,n,o)},t.isPointOnPolygon=function(e,n,o){void 0===o&&(o=-1);var i,r,a=!1;for(o<0&&(o=n.length),i=0;i<o;i++)if(t.isPointOnSegment(n[i],n[(i+1)%o],e))return!0;for(i=0,r=o-1;i<o;r=i++)(n[i].y<=e.y&&e.y<n[r].y||n[r].y<=e.y&&e.y<n[i].y)&&e.x<(n[r].x-n[i].x)*(e.y-n[i].y)/(n[r].y-n[i].y)+n[i].x&&(a=!a);return a},t.isPointInPolygon=function(e,n,o){void 0===o&&(o=-1);var i,r,a=!1;for(o<0&&(o=n.length),i=0;i<o;i++)if(t.isPointOnSegment(n[i],n[(i+1)%o],e))return!1;for(i=0,r=o-1;i<o;r=i++)(n[i].y<=e.y&&e.y<n[r].y||n[r].y<=e.y&&e.y<n[i].y)&&e.x<(n[r].x-n[i].x)*(e.y-n[i].y)/(n[r].y-n[i].y)+n[i].x&&(a=!a);return a},t.simplifyPolygon=function(e){for(var n=new s.a,o=e.points,i=o.length,r=0;r<i;r++){var a=o[r],l=o[t.nextIndex(r,i)];n.addEdge(a,l,!0)}n.boundary();for(var u=n.polygons,h=-1e9,c=null,p=0,d=u;p<d.length;p++){var f=d[p];Math.abs(f.area)>=h&&(h=Math.abs(f.area),c=f)}return c},t.isPoint3DEqual=function(e,n,o){return void 0===o&&(o=NaN),t.isNumberEqual(e.x,n.x,o)&&t.isNumberEqual(e.y,n.y,o)&&t.isNumberEqual(e.z,n.z,o)},t.isPoint3DInPolygon3D=function(t,e){var n,o,i=!1;for(n=0,o=e.length-1;n<e.length;o=n++)(e[n].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[n].y)&&t.x<(e[o].x-e[n].x)*(t.y-e[n].y)/(e[o].y-e[n].y)+e[n].x&&(i=!i);return i},t.insidePolygon=function(t,e){var n,o,i,r,a=0,s=e.length;for(i=e[0],n=1;n<=s;n++)r=e[n%s],t.y>Math.min(i.y,r.y)&&t.y<=Math.max(i.y,r.y)&&t.x<=Math.max(i.x,r.x)&&i.y!=r.y&&(o=(t.y-i.y)*(r.x-i.x)/(r.y-i.y)+i.x,(i.x==r.x||t.x<=o)&&a++),i=r.clone();return a%2!=0},t.isConvex=function(t,e,n){var o=new i.a(e.x-t.x,e.y-t.y,0),r=new i.a(n.x-t.x,n.y-t.y,0);return o.crossProd(r).z>0},t.isConvex2=function(t,e,n){var o=new i.a(e.x-t.x,e.y-t.y,0),r=new i.a(n.x-t.x,n.y-t.y,0);return o.crossProd(r).z},t.dragVectorCaculate=function(t,e){var n,i=t.crossProd(e);if(this.isNumberEqual(i,0))return new o.a(0,0);i>0?n=this.rotateByZ(t,Math.PI/2):i<0&&(n=this.rotateByZ(t,-Math.PI/2)),n.normalize();var r=Math.abs(e.crossProd(n)/e.length/n.length),a=e.length*r;return new o.a(n.x*a,n.y*a)},t.calcSegmentIntersection=function(e,n,o,i){return i<e||t.isNumberEqual(i,e)?null:o>n||t.isNumberEqual(o,n)?null:[Math.max(e,o),Math.min(n,i)]},t.calculateIntersectPoint=function(e,n,i,r){var a=e.y-n.y,s=n.x-e.x,l=e.x*n.y-n.x*e.y,u=i.y-r.y,h=r.x-i.x,c=i.x*r.y-r.x*i.y,p=a*h-u*s;return t.isNumberEqual(p,0)?null:new o.a((s*c-h*l)/p,(u*l-a*c)/p)},t.calculateIntersectPoint2=function(e,n,o,i){return t.calculateIntersectPoint(e,e.add(n),o,o.add(i))},t.calculateIntersectPointOnSegment=function(e,n,i,r,a){void 0===a&&(a=!0);var s=e.y-n.y,l=n.x-e.x,u=e.x*n.y-n.x*e.y,h=i.y-r.y,c=r.x-i.x,p=i.x*r.y-r.x*i.y,d=s*c-h*l;if(t.isNumberEqual(d,0))return null;var f=(l*p-c*u)/d,g=(h*u-s*p)/d;if(t.lessEqual(Math.min(e.x,n.x),f)&&t.lessEqual(f,Math.max(e.x,n.x))&&t.lessEqual(Math.min(i.x,r.x),f)&&t.lessEqual(f,Math.max(i.x,r.x))&&t.lessEqual(Math.min(e.y,n.y),g)&&t.lessEqual(g,Math.max(e.y,n.y))&&t.lessEqual(Math.min(i.y,r.y),g)&&t.lessEqual(g,Math.max(i.y,r.y))){var m=new o.a(f,g);if(a)return m;if(!(t.isPointEqual(m,e)||t.isPointEqual(m,n)||t.isPointEqual(m,i)||t.isPointEqual(m,r)))return m}return null},t.calcFoot=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,a=((n.y-t.y)*i*r+i*i*n.x+r*r*t.x)/(i*i+r*r),s=((n.x-t.x)*i*r+r*r*n.y+i*i*t.y)/(i*i+r*r);return new o.a(a,s)},t.calculateFootPointOnSegment=function(e,n,o){var i=n.subtract(e);if(t.isNumberEqual(i.length,0))return null;var r=o.subtract(e),a=r.dotProd(i);if((a/=i.length)<0||a>i.length)return null;var s=i.clone();return s=s.normalize().multiply(a),s.add(e)},t.calculateFootPointOnLine=function(t,e,n){if(!t||!e)return null;var o=e.subtract(t),i=n.subtract(t),r=i.dotProd(o);r/=o.length;var a=o.clone();return a=a.normalize().multiply(r),a.add(t)},t.intersect3=function(e,n,o,i){var r=180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI,a=180*Math.atan2(i.y-o.y,i.x-o.x)/Math.PI;if(!t.isNumberEqual(Math.abs((r-a)%360),180))return!1;var s;return s=t.calcFoot(e,n,o),!!t.isPointOnSegment(e,n,s)||(s=t.calcFoot(e,n,i),!!t.isPointOnSegment(e,n,s)||(s=t.calcFoot(o,i,e),!!t.isPointOnSegment(o,i,s)||(s=t.calcFoot(o,i,n),!!t.isPointOnSegment(o,i,s))))},t.isPointOnLine=function(e,n,o){return t.isNumberEqual((e.x-o.x)*(n.y-o.y)-(n.x-o.x)*(e.y-o.y),0)},t.cornerOffset=function(e,n){if(t.isPointEqual(e,n))return e;var i=e.x*n.y-n.x*e.y;if(t.isNumberEqual(i,0))return null;var r=e.x*e.x+e.y*e.y,a=n.x*n.x+n.y*n.y,s=(r*n.y-a*e.y)/i,l=(a*e.x-r*n.x)/i;return new o.a(s,l)},t.isFootPointInLine=function(e,n,o,i){return void 0===i&&(i=null),i&&t.isNumberEqual(e.x,n.x)?!(i.y<Math.min(e.y,n.y)||i.y>Math.max(e.y,n.y)):i&&t.isNumberEqual(e.y,n.y)?!(i.x<Math.min(e.x,n.x)||i.x>Math.max(e.x,n.x)):!!t.isNumberEqual((e.x-o.x)*(n.y-o.y)-(n.x-o.x)*(e.y-o.y),0)&&(!(o.x>e.x&&o.x>n.x||o.x<e.x&&o.x<n.x)&&!(o.y>e.y&&o.y>n.y||o.y<e.y&&o.y<n.y))},t.vectorMovement=function(e,n,o){var i=e.clone();return t.isNumberEqual(n.length,0)?i:(i.x+=n.x*o/n.length,i.y+=n.y*o/n.length,i)},t.moveInclinedWall=function(e,n,i,r){var a=r.length,s=e.subtract(n);if(t.isPointEqual(e,n))return n.add(r);s.normalize();var l=i.subtract(n);l.normalize();var u=s.crossProd(l),h=a/Math.abs(u);return u>0?l.crossProd(r)>0?new o.a(n.x-h*s.x,n.y-h*s.y):new o.a(n.x+h*s.x,n.y+h*s.y):u<0?l.crossProd(r)>0?new o.a(n.x+h*s.x,n.y+h*s.y):new o.a(n.x-h*s.x,n.y-h*s.y):new o.a},t.formatAngle=function(e){return!t.isNumberEqual(e,180)&&e>180?(e%=360,!t.isNumberEqual(e,180)&&e>180&&(e-=360)):!t.isNumberEqual(e,-180)&&e<-180&&(e%=360,!t.isNumberEqual(e,-180)&&e<-180&&(e=360+e)),e},t.vectorsAngle=function(e,n){if(t.isNumberEqual(e.length,0)||this.isNumberEqual(n.length,0))return 180;e.normalize(),n.normalize();var o=e.dotProd(n),i=e.crossProd(n),r=this.acos(o);return this.asin(i)<0&&(r*=-1),this.radianToDegree(r)},t.vectorAngle=function(e,n){return 180*t.vectorRadian(e,n)/Math.PI},t.vectorRadian=function(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x);return this.isNumberEqual(n,-Math.PI)&&(n=Math.PI),n},t.segmentSplit=function(e,n,o){for(var i,r=new Array,a=0,s=o;a<s.length;a++)if(i=s[a],t.isPointInSegment(e,n,i)){for(var l=!1,u=0,h=r;u<h.length;u++){var c=h[u];if(t.isPointEqual(i,c)){l=!0;break}}l||r.push(i.clone())}if(o=r,o.length<=1)return o;var p,d;for(p=0;p<o.length;p++)for(d=p+1;d<o.length;d++)o[d].subtract(e).length<o[p].subtract(e).length&&(i=o[p],o[p]=o[d],o[d]=i);return o},t.calculatePolyArea=function(e){if(e.length<2)return 0;if(2==e.length)return e[0].crossProd(e[1])/2;for(var n,o,i=0,r=0;r<e.length;r++)n=e[r],o=e[t.nextIndex(r,e.length)],i+=n.crossProd(o);return.5*i},t.calculatePolyCenter=function(t){for(var e=Number.MAX_VALUE,n=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=-Number.MAX_VALUE,a=0,s=t;a<s.length;a++){var l=s[a];e=Math.min(l.x,e),i=Math.max(l.x,i),n=Math.min(l.y,n),r=Math.max(l.y,r)}return new o.a(.5*(e+i),.5*(n+r))},t.calculatePolyCentroid=function(t){if(0==t.length)return new o.a;for(var e=0,n=0,i=0,r=t;i<r.length;i++){var a=r[i];e+=a.x,n+=a.y}return new o.a(e/t.length,n/t.length)},t.computeAreaByPointArray=function(t){if(t.length<2)return 0;if(2==t.length)return t[0].crossProd(t[1])/2;var e,n,o,i=0,r=t.length;for(o=0;o<t.length;o++)e=t[o%r],n=t[(o+1)%r],i+=e.crossProd(n);return i/=2},t.randomColor=function(){return 16777215*Math.random()},t.transformPath=function(t,e){for(var n=new Array,o=0,i=t;o<i.length;o++){var r=i[o];n.push(e.transformPoint(r))}return n},t.clipLineWithPoints=function(e,n,o){for(var i=new Array,r=0,a=o;r<a.length;r++){var s=a[r];t.isPointInSegment(e,n,s)&&(t.pointIndex(i,s)==t.NONE_INDEX&&i.push(s))}return i.sort(function(t,n){return t.subtract(e).length-n.subtract(e).length}),i},t.clipLineWithSegments=function(e,n,o){for(var i=new Array,r=0,a=o;r<a.length;r++){var s=a[r];i.push(s.start),i.push(s.stop);var l=t.calculateIntersectPointOnSegment(e,n,s.start,s.stop);l&&i.push(l)}return t.clipLineWithPoints(e,n,i)},t.cleanPath=function(e){for(var n=new Array,o=0;o<e.length;o++){var i=e[t.preIndex(o,e.length)],r=e[t.nextIndex(o,e.length)];t.isPointInSegment(i,r,e[o])||(t.isPointEqual(e[o],i)||n.push(e[o]))}return n},t.vectorIncludedAngle=function(t,e,n){var o=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);return n?o<0&&(o+=2*Math.PI):o<-Math.PI&&(o+=2*Math.PI),o},t.vectorIncludedRadian=function(t,e,n){void 0===n&&(n=!0);var o=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);return n?o<0&&(o+=2*Math.PI):o<-Math.PI&&(o+=2*Math.PI),o},t.analysisFileExtentionFromURL=function(e){var n,o,i,r,a;if(n=e,-1!=n.indexOf("?")&&(r=n.split("?"),n=r[0],a=r[1]),-1!=n.indexOf("#")&&(n=n.split("#")[0]),-1!=n.indexOf("@!")&&(n=n.split("@!")[0]),-1!=n.indexOf("/")?(r=n.split("/"),o=r[r.length-1]):o=n,-1==o.indexOf("."))return null;if(i=t.analysisFileExtentionFromFileName(o),""==i&&(i=null),a){var s=a;if(s.name&&""!=s.name)return t.analysisFileExtentionFromFileName(s.name)}return i},t.analysisFileExtentionFromFileName=function(t){var e=t.split(".");return e.length>=2?e[e.length-1]:null},t.analysisParameters=function(t){var e,n,o={},i=t.split("&");for(n=0;n<i.length;n++)e=i[n].split("="),o[e[0]]=e[1];return o},t.isPoint2DEqual=function(e,n,o){return void 0===o&&(o=1e-4),e==n||t.isNumberEqual(e.x,n.x,o)&&t.isNumberEqual(e.y,n.y,o)},t.raySegmentIntersection=function(e,n,o,i){if(t.isPoint2DEqual(o,i))return null;if(this.ab.setTo(i.x-o.x,i.y-o.y),t.isNumberEqual(this.ab.crossProd(n)/this.ab.length,0))return null;if(this.ca.setTo(o.x-e.x,o.y-e.y),t.isNumberEqual(this.ca.crossProd(this.ab)/this.ab.length,0))this.k=-this.ca.dotProd(this.ab)/this.ab.length/this.ab.length;else{this.p0p1.setTo(i.x-e.x,i.y-e.y);var r=this.ca.crossProd(n);this.k=r/(r+n.crossProd(this.p0p1))}return this.k<0&&!t.isNumberEqual(this.k,0)||this.k>1&&!t.isNumberEqual(this.k,1)?null:(this.p.setTo(o.x+this.k*this.ab.x,o.y+this.k*this.ab.y),this.cd.setTo(this.p.x-e.x,this.p.y-e.y),t.isNumberEqual(this.cd.dotProd(n),this.cd.length)?{point:this.p.clone(),dist:this.cd.length}:null)},t.isPointInTriangle=function(e,n,o,i){var r=e.subtract(n),a=o.subtract(n),s=i.subtract(n),l=r.crossProd(a)*r.crossProd(s);if(l>0&&!t.isNumberEqual(l,0))return!1;var u=e.subtract(o),h=n.subtract(o),c=i.subtract(o),p=u.crossProd(h)*u.crossProd(c);if(p>0&&!t.isNumberEqual(p,0))return!1;var d=e.subtract(i),f=n.subtract(i),g=o.subtract(i),m=d.crossProd(f)*d.crossProd(g);return!(m>0&&!t.isNumberEqual(m,0))},t.getGrayOfPixel=function(t){return 16777215*(.3*(t>>16&255)+.59*(t>>8&255)+.11*(255&t))/255},t.normalToRGB=function(t){return.5*(t.x+1)*255<<16|.5*(t.y+1)*255<<8|.5*(t.z+1)*255},t.isStringEmptyOrNull=function(t){return null==t||""==t},t.calcCircle=function(t,e,n){var o=new r.a,i=t.x*t.x+t.y*t.y,a=e.x*e.x+e.y*e.y,s=n.x*n.x+n.y*n.y,l=(n.y-e.y)*t.x+(t.y-n.y)*e.x+(e.y-t.y)*n.x;return o.center.x=((a-s)*t.y+(s-i)*e.y+(i-a)*n.y)/(2*l),o.center.y=((s-a)*t.x+(i-s)*e.x+(a-i)*n.x)/(2*l),o.radius=t.subtract(o.center).length,o},t.calcArcPath=function(e,n,i,r){void 0===r&&(r=4);var a,s=i.subtract(e).crossProd(n.subtract(i)),l=t.calcCircle(e,n,i),u=e.subtract(l.center),h=n.subtract(l.center),c=t.vectorRadian(l.center,e);a=s>0?2*Math.PI-t.vectorIncludedRadian(h,u,!0):t.vectorIncludedRadian(h,u,!0);var p=r/l.radius,d=Math.floor(a/p);s<0&&(p*=-1);for(var f=new Array,g=0;g<d;g++){var m=l.radius*Math.cos(c+g*p)+l.center.x,_=l.radius*Math.sin(c+g*p)+l.center.y;f.push(new o.a(m,_))}return f.push(n),f},t.lineCircleIntersection=function(e,n){var o=this.pointToLine2DDistance(e,n.center);if(o>n.radius+.001)return[];var i=t.calculateFootPointOnLine(e.p0,e.p0.add(e.dir),n.center);if(t.isNumberEqual(o,n.radius))return[i];var r=e.dir.clone(),a=Math.sqrt(n.radius*n.radius-o*o);return r=r.normalize().multiply(a),[i.add(r),i.subtract(r)]},t.circleCircleIntersection=function(e,n){var o=e.center.subtract(n.center).length;if(o>e.radius+n.radius+.001)return[];if(o<Math.abs(e.radius-n.radius)+.001)return[];var i;if(t.isNumberEqual(o,e.radius+n.radius,.001)){i=n.center.subtract(e.center);var r=e.radius;return i=i.normalize().multiply(r),[e.center.add(i)]}if(t.isNumberEqual(o,Math.abs(e.radius-n.radius),.001)){i=e.radius>n.radius?n.center.subtract(e.center):e.center.subtract(n.center);var a=e.radius;return i=i.normalize().multiply(a),[e.center.add(i)]}var s=[],l=(o*o+e.radius*e.radius-n.radius*n.radius)/(2*o*e.radius),u=t.acos(l);i=n.center.subtract(e.center),i.normalize();var h=t.rotateByZ(i,u),c=e.radius;h=h.normalize().multiply(c),s.push(e.center.add(h));var p=t.rotateByZ(i,-u);return c=e.radius,p=p.normalize().multiply(c),s.push(e.center.add(p)),s},t.pointToLine2DDistance=function(t,e){return Math.abs(e.subtract(t.p0).crossProd(t.dir))},t.rayRectFaceIntersect=function(e,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1);var s=new Array(16);s[0]=e.p0.x-e.p1.x,s[1]=e.p0.y-e.p1.y,s[2]=e.p0.z-e.p1.z,s[4]=n.p1.x-n.p0.x,s[5]=n.p1.y-n.p0.y,s[6]=n.p1.z-n.p0.z,s[8]=n.p2.x-n.p0.x,s[9]=n.p2.y-n.p0.y,s[10]=n.p2.z-n.p0.z,s[15]=1;var l,u,h,c,p=new a.a(s),d=new i.a(e.p0.x-n.p0.x,e.p0.y-n.p0.y,e.p0.z-n.p0.z);if(p.invert())if(c=p.transformPoint(d),l=c.x,u=c.y,h=c.z,o){if((u>0||t.isNumberEqual(u,0))&&(h>0||t.isNumberEqual(h,0))&&(u+h<1||t.isNumberEqual(u+h,1))&&(l>0||l<0&&r))return new i.a(e.p0.x+e.dir.x*l,e.p0.y+e.dir.y*l,e.p0.z+e.dir.z*l)}else if((u>0||t.isNumberEqual(u,0))&&(u<1||t.isNumberEqual(u,1))&&(h>0||t.isNumberEqual(h,0))&&(h<1||t.isNumberEqual(h,1))&&(l>0||l<0&&r))return new i.a(e.p0.x+e.dir.x*l,e.p0.y+e.dir.y*l,e.p0.z+e.dir.z*l);return null},t.composeMatrix3D=function(t,e,n,o){var i=[t.x,t.y,t.z,0,e.x,e.y,e.z,0,n.x,n.y,n.z,0,o.x,o.y,o.z,1];return new a.a(i)},t.computeTwoVectorAngle=function(e,n){var o=e.clone(),i=n.clone();o.normalize(),i.normalize();var r=o.dotProd(i);return r>=1?r=1:r<=-1&&(r=-1),isNaN(t.acos(r)),t.acos(r)},t.calculateExcenter=function(e,n,i){if(t.isThreePointsOnOneLine(e,n,i))return null;var r=e.x,a=n.x,s=i.x,l=e.y,u=n.y,h=i.y,c=r*r+l*l,p=a*a+u*u,d=s*s+h*h,f=r*u+a*h+s*l-r*h-a*l-s*u,g=(p*h+c*u+d*l-p*l-d*u-c*h)/f/2,m=(d*a+p*r+c*s-c*a-p*s-d*r)/f/2,_=new o.a;return _.x=g,_.y=m,_},t.calculateCircumcircleRadius=function(e,n,o){if(t.isThreePointsOnOneLine(e,n,o))return-1;var i=e.x,r=n.x,a=o.x,s=e.y,l=n.y,u=o.y,h=Math.pow((i-r)*(i-r)+(s-l)*(s-l),.5),c=Math.pow((i-a)*(i-a)+(s-u)*(s-u),.5),p=Math.pow((r-a)*(r-a)+(l-u)*(l-u),.5),d=(h+c+p)/2;return h*c*p/(4*Math.pow(d*(d-h)*(d-c)*(d-p),.5))},t.isThreePointsOnOneLine=function(t,e,n){var o=Math.pow(1/t.dist(e),.5);return Math.abs(o*(e.x-t.x)*n.y-o*(e.y-t.y)*n.x-o*t.y*e.x+o*t.x*e.y)<1e-8},t.prototype.splitVertex=function(e,n,o,i,r,a){var s,l,u,h,c=new Array(e.length/3*2),p=new Array(e.length/3),d=new Array(e.length/3),f=new Array(e.length/3);for(s=0;s<f.length;s++)f[s]=new Array(0);for(s=0;s<o.length;s++)if(u=o[s],h=i[s],d[u]){if(!t.isNumberEqual(c[2*u+0],n[2*h+0])||!t.isNumberEqual(c[2*u+1],n[2*h+1])||p[u]!=a[s/3]){var g=!1;for(l=0;l<f[u].length;l++)if(t.isNumberEqual(c[2*f[u][l]+0],n[2*h+0])&&t.isNumberEqual(c[2*f[u][l]+1],n[2*h+1])&&p[2*f[u][l]+1]==a[s/3]){o[s]=f[u][l],g=!0;break}if(!g){var m=e.length/3;f[u].push(m),f.push(new Array(0)),c.push(n[2*h+0],n[2*h+1]),p.push(a[s/3]),o[s]=m,e.push(e[3*u+0],e[3*u+1],e[3*u+2]),r.push(r[3*u+0],r[3*u+1],r[3*u+2])}}}else d[u]=!0,c[2*u+0]=n[2*h+0],c[2*u+1]=n[2*h+1],p[u]=a[s/3];return c},t.convert2OBJ=function(t,e,n){var o="";o+="\n\n\n";var i;for(i=0;i<t.length/3;i++)o=o+"v "+t[3*i]+" "+t[3*i+1]+" "+t[3*i+2]+"\n";for(i=0;i<e.length/2;i++)o=o+"vt "+e[2*i]+e[2*i+1]+" 0\n";o+="g Box001\n";var r,a,s;for(i=0;i<n.length/3;i++)r=n[3*i]+1,a=n[3*i+1]+1,s=n[3*i+2]+1,o=o+"f "+r+"/"+r+" "+a+"/"+a+" "+s+"/"+s+"\n";return o+="\n\n\n\n"},t.mergeTwoArray=function(t,e,n){var o;if(!n){var i=t.slice();for(o=0;o<e.length;o++)i.push(e[o]);return i}for(o=0;o<e.length;o++)t.push(e[o]);return null},t.decimalToFix=function(t,e,n){if(n){var o=t.toString(),i=o.split(/\./);if(2==i.length){var r=i[1];r.length>e&&(r=r.substr(0,e),o=i[0]+"."+r,t=Number(o))}return t}var a=Math.pow(10,e);return t*a/a},t.sortSegmentPoints=function(t){if(t.length<2)return t.concat([]);for(var e=[],n=t[1].subtract(t[0]),o=1;o<t.length;o++){var i={point:t[o]};i.d=n.dotProd(t[o].subtract(t[0])),e.push(i)}e.sort(function(t,e){var n=t.d,o=e.d;return n>o?1:n<o?-1:0});var r=[];r.push(t[0]);for(var a=0,s=e;a<s.length;a++){var l=s[a];r.push(l.point)}return r},t.lineLineIntersection=function(e,n){var o=t.calculateIntersectPoint(e.p0,e.p1,n.p0,n.p1);return o?[o]:[]},t.calcProjectionDistP2E=function(t,e,n){var o=n.subtract(e),i=t.subtract(e),r=o.length;return o.dotProd(i)/r/r},t.base64toBytes=function(t){for(var e=t.split(","),n=(e[0].match(/:(.*?);/)[1],atob(e[1])),o=n.length,i=new Uint8Array(o);o--;)i[o]=n.charCodeAt(o);return i},t}();l.TOLERANCE=1e-5,l.NONE_INDEX=-1,l._tmpP0=new o.a,l._tmpP1=new o.a,l._tmpP2=new o.a,l._tmpP3=new o.a,l._tmpN0=0,l._tmpN1=0,l._tmpN2=0,l._tmpN3=0,l.p0p1=new o.a,l.p0p2=new o.a,l.p0p3=new o.a,l.p2p3=new o.a,l.p2p0=new o.a,l.p2p1=new o.a,l.ab=new o.a,l.ca=new o.a,l.p=new o.a,l.cd=new o.a,l.k=0},"0Itk":function(t,e,n){"use strict";var o=n("6xdJ"),i=n("bj9w"),r=n("whOH"),a=n("9zqf"),s=n("vcEh"),l=n("TAs0"),u=n("Ol+x"),h=n("0/et"),c=n("BGKY"),p=n("eUeh"),d=n("lpfp"),f=n("WYR6"),g=n("/LiK");n.d(e,"a",function(){return _});var m=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(t){function e(){var e=t.call(this)||this;return e._view2D=!1,e._view3D=!1,e._viewRoof=!1,e._showRoofModelsAt2D=!1,e.enterFrameId=null,e.enterFrameHandlerLambda=function(){e.enterFrameHandler()},e._boundRectangle=new f.a,e._centerPoint=new d.a(0,0),e.historyList=new Array,e.stepCount=10,e.isUndoable=!1,e.isRedoable=!1,e.isSavable=!1,e.cornerObjects=new p.a,e.wallObjects=new p.a,e.roomObjects=new p.a,e.openingObjects=new p.a,e.modelObjects=new p.a,e._selectedRoomName="",e}return m(e,t),e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e.prototype.start=function(){null==this.enterFrameId&&(this.enterFrameId=setInterval(this.enterFrameHandlerLambda,200))},e.prototype.stop=function(){this.enterFrameId&&clearInterval(this.enterFrameId),this.enterFrameId=null},e.prototype.enterFrameHandler=function(){for(var t in this.modelObjects){var e=this.modelObjects[t];e.changeFlag.rotation&&(e.dispatchEvent(new c.a(c.a.ROTATION_CHANGE),e),e.changeFlag.rotation=!1),e.changeFlag.scale&&(e.dispatchEvent(new c.a(c.a.SCALE_CHANGE),e),e.changeFlag.scale=!1),e.changeFlag.position&&(e.updateRoom(),e.dispatchEvent(new c.a(c.a.POSOITION_CHANGE),e),e.changeFlag.position=!1)}for(var t in this.openingObjects){var n=this.openingObjects[t];n.changeFlag.rotation&&(n.dispatchEvent(new c.a(c.a.ROTATION_CHANGE),n),n.changeFlag.rotation=!1),n.changeFlag.scale&&(n.dispatchEvent(new c.a(c.a.SCALE_CHANGE),n),n.changeFlag.scale=!1),n.changeFlag.position&&(n.dispatchEvent(new c.a(c.a.POSOITION_CHANGE),n),n.changeFlag.position=!1)}},e.prototype.open=function(t,e,n,o,i){this.clear(),this._selectedRoomName="",this._replacingTarget=null,this._no=t,this._huxingNo=e,this._huxingData=o,this.huxingName=i,this.loadData(n),this.resetHistory()},e.prototype.dumpString=function(t){void 0===t&&(t=null);var e=h.a.isStringEmptyOrNull(t)?null:u.a.loadString(t);return JSON.stringify(this.dumpData(e))},e.prototype.loadSettingsData=function(t){this._settingsWallHeight=280,t&&1==t.hasOwnProperty("wallHeight")&&(this._settingsWallHeight=t.wallHeight),this._settingsWallLength=12,t&&1==t.hasOwnProperty("wallLength")&&(this._settingsWallLength=t.wallLength)},e.prototype.dumpData=function(t){void 0===t&&(t=null);var e,n={};n.settings={wallHeight:this.settingsWallHeight,wallLength:this.settingsWallLength},n.corners=[];for(e in this.cornerObjects){var o=this.cornerObjects[e];n.corners.push(o.dumpData())}n.walls=[];for(e in this.wallObjects){var i=this.wallObjects[e];t&&!t.isWallNeedRender(i)||n.walls.push(i.dumpData())}n.rooms=[];for(e in this.roomObjects){var r=this.roomObjects[e];t&&!t.isRoomNeedRender(r)||n.rooms.push(r.dumpData())}n.openings=[];for(e in this.openingObjects){var a=this.openingObjects[e];t&&!t.isOpeningNeedRender(a)||n.openings.push(a.dumpData())}n.models=[];for(e in this.modelObjects){var s=this.modelObjects[e];t&&!t.isModelNeedRender(s)||n.models.push(s.dumpData())}return n.hardwares=[],n},e.prototype.loadData=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var o,u;e&&this.loadSettingsData(t.settings);var h;for(u in t.corners)o=t.corners[u],(h=l.a.loadData(o))&&this.addCornerObject(h);var c;for(u in t.walls)o=t.walls[u],(c=s.a.loadData(o))&&this.addWallObject(c);for(u in this.cornerObjects)h=this.cornerObjects[u],h.calculateWallCorner();var p;for(u in t.rooms)o=t.rooms[u],(p=a.a.loadData(o))&&this.addRoomObject(p);var d;for(u in t.openings)o=t.openings[u],(d=r.a.loadData(o))&&this.addOpeningObject(d);var f;for(u in t.models)o=t.models[u],(f=i.a.loadData(o))&&this.addModelObject(f);for(u in this.wallObjects)c=this.wallObjects[u],c.updateBoundPolygon(),c.findAloneRoom();for(u in this.modelObjects)f=this.modelObjects[u],f.updateRoom()},e.prototype.clear=function(){this.roomObjects=new p.a,this.wallObjects=new p.a,this.cornerObjects=new p.a,this.openingObjects=new p.a,this.modelObjects=new p.a},e.prototype.clearModels=function(t){void 0===t&&(t=null);var e=!1;for(var n in this.modelObjects){var o=this.getModelObjectByName(n);null!=t&&o.roomName!=t.name||(this.removeModelObject(o),e=!0)}return e},Object.defineProperty(e.prototype,"no",{get:function(){return this._no},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"huxingNo",{get:function(){return this._huxingNo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"huxingData",{get:function(){return this._huxingData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settingsWallLength",{get:function(){return this._settingsWallLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settingsWallHeight",{get:function(){return this._settingsWallHeight},enumerable:!0,configurable:!0}),e.prototype.getCornerObjectByName=function(t){return this.cornerObjects[t]},e.prototype.getCornerObjectByXY=function(t,e,n){void 0===n&&(n=!1);var o=null;for(var i in this.cornerObjects)if(o=this.getCornerObjectByName(i),h.a.isNumberEqual(t,o.x)&&h.a.isNumberEqual(e,o.y))return o;return o=null,n&&(o=new l.a(t,e),this.addCornerObject(o)),o},e.prototype.addCornerObject=function(t){this.cornerObjects[t.name]=t},e.prototype.removeCornerObject=function(t){t.connectedWallObjects.length>0||(t.clear(),delete this.cornerObjects[t.name])},e.prototype.getWallObjectByName=function(t){return this.wallObjects[t]},e.prototype.getWallByEnds=function(t,e){for(var n in this.wallObjects){var o=this.wallObjects[n];if(h.a.isPointEqual(o.start,t)&&h.a.isPointEqual(o.stop,e))return o;if(h.a.isPointEqual(o.start,e)&&h.a.isPointEqual(o.stop,t))return o}return null},e.prototype.getWallObjectByCornerObjects=function(t,e){if(t.name==e.name)return null;for(var n in this.wallObjects){var o=this.wallObjects[n];if(o.startCornerName==t.name&&o.stopCornerName==e.name)return o;if(o.stopCornerName==t.name&&o.startCornerName==e.name)return o}return null},e.prototype.getWallObjectsByCornerObject=function(t){var e=new Array;for(var n in this.wallObjects){var o=this.wallObjects[n];o.startCornerName!=t&&o.stopCornerName!=t||e.push(o)}return e},e.prototype.addWallObject=function(t){this.wallObjects[t.name]=t},e.prototype.removeWallObject=function(t,e){void 0===e&&(e=!0),t.clear(),delete this.wallObjects[t.name],e&&(this.removeCornerObject(t.startCorner),this.removeCornerObject(t.stopCorner))},e.prototype.getRoomObjectByName=function(t){return this.roomObjects[t]},e.prototype.addRoomObject=function(t){this.roomObjects[t.name]=t},e.prototype.removeRoomObject=function(t){t.clear(),delete this.roomObjects[t.name]},e.prototype.getOpeningObjectByName=function(t){return this.openingObjects[t]},e.prototype.addOpeningObject=function(t){this.openingObjects[t.name]=t},e.prototype.removeOpeningObject=function(t){t.clear(),delete this.openingObjects[t.name]},e.prototype.getModelObjectByName=function(t){return this.modelObjects[t]},e.prototype.addModelObject=function(t){this.modelObjects[t.name]=t},e.prototype.removeModelObject=function(t){t.clear(),delete this.modelObjects[t.name],t.dispatchEvent(new c.a(c.a.REMOVED),this)},Object.defineProperty(e.prototype,"selectedRoomName",{get:function(){return this._selectedRoomName},set:function(t){this._selectedRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedRoom",{get:function(){return this.getRoomObjectByName(this._selectedRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundRectangle",{get:function(){if(0==this.roomCount)return this._boundRectangle.x=-100,this._boundRectangle.y=-100,this._boundRectangle.width=200,this._boundRectangle.height=200,this._boundRectangle;var t,e,n=Number.MAX_VALUE,o=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=-Number.MAX_VALUE;for(var a in this.roomObjects){t=this.roomObjects[a];for(var s=0;s<t.polygon.vertexCount;s++)e=t.polygon.getPointAt(s),n=Math.min(e.x,n),o=Math.min(e.y,o),i=Math.max(e.x,i),r=Math.max(e.y,r)}var l;for(var a in this.wallObjects)l=this.wallObjects[a],l.isArcwall&&1==l.roomCount&&(e=l.localToScene(l.anchor),n=Math.min(e.x,n),o=Math.min(e.y,o),i=Math.max(e.x,i),r=Math.max(e.y,r));return n-=this.settingsWallLength,o-=this.settingsWallLength,i+=this.settingsWallLength,r+=this.settingsWallLength,this._boundRectangle.x=n,this._boundRectangle.y=o,this._boundRectangle.width=i-n,this._boundRectangle.height=r-o,this._boundRectangle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){var t=this.boundRectangle;return this._centerPoint.setTo(t.x+.5*t.width,t.y+.5*t.height),this._centerPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomCount",{get:function(){var t=[];for(var e in this.roomObjects)t.push(e);return t.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){var t=0;for(var e in this.roomObjects){t+=this.roomObjects[e].area}return Math.round(100*t)/100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doesHuxingChange",{get:function(){if(null==this.huxingData.openings||0==this.huxingData.openings.length)return!1;var t=!1;for(var e in this.huxingData.openings){var n=this.huxingData.openings[e],o=this.getOpeningObjectByName(n.name);h.a.isNumberEqual(o.x,n.x)&&h.a.isNumberEqual(o.y,n.y)&&h.a.isNumberEqual(o.z,n.z)&&h.a.isNumberEqual(o.width,n.width)&&h.a.isNumberEqual(o.length,n.length)&&h.a.isNumberEqual(o.height,n.height)&&h.a.isNumberEqual(o.rotationZ,n.rotationZ)&&(1==o.mirror?1:0)==n.mirror&&o.type==n.type||(t=!0,n.x=o.x,n.y=o.y,n.z=o.z,n.width=o.width,n.length=o.length,n.height=o.height,n.rotationZ=o.rotationZ,n.mirror=1==o.mirror?1:0,n.type=o.type)}return t},enumerable:!0,configurable:!0}),e.prototype.getRoomObjectByXY=function(t,e){for(var n in this.roomObjects){var o=this.roomObjects[n];if(o.polygon.containsInXY(t,e))return o}return null},e.prototype.copyModelObject=function(t){var e=i.a.loadData(t.dumpData());return e.name=g.a.createPureUID(),this.addModelObject(e),e},e.prototype.matchSampleRoom2=function(t,e){void 0===e&&(e="");var n,o,r,a=JSON.parse(t);if(h.a.isStringEmptyOrNull(e))for(r in this.modelObjects)n=this.modelObjects[r],this.removeModelObject(n);else for(r in this.modelObjects)n=this.modelObjects[r],n.roomName==e&&this.removeModelObject(n);for(r in a.models)o=a.models[r],this.getRoomObjectByName(o.roomName)&&(n=i.a.loadData(o),n.roomName=o.roomName,this.addModelObject(n));for(r in a.walls)o=a.walls[r],this.getWallObjectByName(o.name)&&this.getWallObjectByName(o.name).copyFromData(o);for(r in a.rooms)o=a.rooms[r],this.getRoomObjectByName(o.name)&&this.getRoomObjectByName(o.name).copyFromData(o)},Object.defineProperty(e.prototype,"undoable",{get:function(){return this.currentIndex+this.stepCount>this.historyList.length&&this.currentIndex>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoable",{get:function(){return this.currentIndex<this.historyList.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"savable",{get:function(){return this.currentIndex!=this.lastSaveIndex},enumerable:!0,configurable:!0}),e.prototype.updateFlag=function(){this.isUndoable=this.undoable,this.isRedoable=this.redoable,this.isSavable=this.savable},e.prototype.undo=function(){this.currentIndex--,this.updateScene(this.historyList[this.currentIndex-1]),this.updateFlag(),this.dispatchEvent(new c.a(c.a.SCENE_CHANGE),this)},e.prototype.redo=function(){this.currentIndex++,this.updateScene(this.historyList[this.currentIndex-1]),this.updateFlag(),this.dispatchEvent(new c.a(c.a.SCENE_CHANGE),this)},e.prototype.add=function(t){void 0===t&&(t=!1),this.historyList.length>this.currentIndex?(this.historyList[this.currentIndex]=this.dumpData(),this.currentIndex++,this.historyList.length=this.currentIndex):(this.historyList.push(this.dumpData()),this.currentIndex=this.historyList.length),this.updateFlag(),t||this.dispatchEvent(new c.a(c.a.SCENE_CHANGE),this)},e.prototype.afterSaveSuccess=function(){this.lastSaveIndex=this.currentIndex,this.isSavable=this.savable},e.prototype.resetHistory=function(){this.historyList.length=0,this.currentIndex=0,this.lastSaveIndex=0,this.add(!0)},e.prototype.updateScene=function(t){var e,n;for(n in t.rooms)e=t.rooms[n],this.getRoomObjectByName(e.name).copyFromData(e);for(n in t.walls)e=t.walls[n],this.getWallObjectByName(e.name).copyFromData(e);for(n in t.openings)e=t.openings[n],this.getOpeningObjectByName(e.name).copyFromData(e);for(n in this.modelObjects){var o=this.modelObjects[n];(function(e){for(var n in t.models){if(t.models[n].name==e)return!0}return!1})(o.name)||this.removeModelObject(o)}for(n in t.models)e=t.models[n],this.getModelObjectByName(e.name)?this.getModelObjectByName(e.name).copyFromData(e):this.addModelObject(i.a.loadData(e));for(n in this.modelObjects){this.modelObjects[n].updateRoom()}},e}(o.a)},"0NNx":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{bgRef:0}),a._13(402653184,2,{iconRef:0}),(t()(),a._15(0,[[1,0],["bg",1]],null,0,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._15(0,[[2,0],["icon",1]],null,0,"div",[["class","icon"]],null,null,null,null,null))],null,null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"icon-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,1).touchEnd(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("If4c"),a=n("/oeL"),s=n("bO4n");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("icon-button",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",iconUp:"iconUp",iconOver:"iconOver",iconDown:"iconDown",isShowBg:"isShowBg",bgColor:"bgColor",bgOverColor:"bgOverColor",bgDownColor:"bgDownColor",borderWidth:"borderWidth",borderColor:"borderColor"},{},[])},"0g8q":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{imageRef:0}),a._13(402653184,2,{labelRef:0}),a._13(402653184,3,{arrowRef:0}),(t()(),a._15(0,[[1,0],["image",1]],null,0,"div",[["class","image"]],null,null,null,null,null)),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[2,0],["lb",1]],null,1,"p",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[3,0],["arrow",1]],null,0,"div",[["class","arrow"]],null,null,null,null,null))],null,function(t,e){t(e,6,0,e.component.label)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"v-tool-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,1).touchEnd(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("AFYf"),a=n("/oeL"),s=n("nVSV");n.d(e,"c",function(){return u}),e.b=o,n.d(e,"a",function(){return h});var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}}),h=a._19("v-tool-button",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",iconUp:"iconUp",iconOver:"iconOver",iconDown:"iconDown",textUp:"textUp",textOver:"textOver",textDown:"textDown",label:"label",hasArrow:"hasArrow"},{},[])},"0q51":function(t,e,n){"use strict";var o=n("0/et"),i=n("gn8q");n.d(e,"a",function(){return r});var r=function(){function t(t,e){this.pointAdsorbLength=t,this.edgeAdsorbLength=e,this.points=new Array,this.edges=new Array}return t.prototype.point2EdgeAdsorb=function(t){for(var e,n,i=this.pointAdsorbLength,r=null,a=0,s=this.edges;a<s.length;a++){var l=s[a],u=this.points[l.startIndex],h=this.points[l.stopIndex];n=o.a.calcFoot(u,h,t),o.a.isPointOnSegment(u,h,n)&&(e=t.subtract(n).length,o.a.less(e,this.edgeAdsorbLength)&&o.a.less(e,i)&&(l,i=e,r=n))}return r?r.clone():null},t.prototype.point2PointAdsorb=function(t){for(var e,n,i=this.pointAdsorbLength,r=null,a=0,s=this.points;a<s.length;a++)e=s[a],n=t.subtract(e).length,o.a.less(n,i)&&(i=n,r=e);return r?r.clone():null},t.prototype.edgeAdsorb=function(t,e,n,r){for(var a,s=null,l=null,u=0,h=this.points;u<h.length;u++){var c=h[u];if(s||(a=c.subtract(t),o.a.less(a.length,this.edgeAdsorbLength)&&o.a.isNumberEqual(a.crossProd(n),0)&&(s=c)),l||(a=c.subtract(e),o.a.less(a.length,this.edgeAdsorbLength)&&o.a.isNumberEqual(a.crossProd(r),0)&&(l=c)),s&&l)break}var p,d=new i.a(t.clone(),e.clone()),f=t.subtract(e);if(!s&&!l)return d;if(s){if(!(p=o.a.calculateIntersectPoint2(s,f,e,r)))return d;l=p}else{if(!(p=o.a.calculateIntersectPoint2(l,f,t,n)))return d;s=p}return d.start.copyFrom(s),d.stop.copyFrom(l),d},t.prototype.addPath=function(t,e){if(void 0===e&&(e=!1),0!=t.length){if(1==t.length)return void this.addPoint(t[0]);for(var n=0;n<t.length-1;n++)this.addEdge(t[n],t[o.a.nextIndex(n,t.length)]);e&&this.addEdge(t[t.length-1],t[0])}},t.prototype.addEdge=function(t,e){var n=this.addPoint(t),o=this.addPoint(e);this.edges.push(new a(n,o))},t.prototype.addPoint=function(t){for(var e=0;e<this.points.length;e++)if(o.a.isPointEqual(t,this.points[e]))return e;return this.points.push(t),this.points.length-1},t.prototype.dispose=function(){this.points.length=0,this.edges.length=0},t}();r.DEFAULT_ADSORB_LENGTH=12;var a=function(){function t(t,e){this.startIndex=t,this.stopIndex=e}return t}()},"1/cj":function(t,e,n){"use strict";var o=n("enh+");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n,o,i){return t.call(this,e,n,o,i)||this}return i(e,t),e}(o.a)},"12Og":function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("Yyq6"),a=n("WFe8"),s=n("lpfp"),l=n("0/et"),u=n("BM0e"),h=n("j8JM"),c=n("matE");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(e){void 0===e&&(e=!0);var n=t.call(this,!0,!0)||this;return n._opening=null,n._isStart=!1,n.borderColor=0,n.fillColor=0,n.dragTouchMoveHandlerLamda=function(t){return n.dragTouchMoveHandler(t)},n.dragTouchEndHandlerLamda=function(t){return n.dragTouchEndHandler(t)},n.depth=i.a.OPENING_CTRL,n.opening=null,n.isStart=e,n}return p(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"OpeningCtrl"},enumerable:!0,configurable:!0}),e.getStartInstance=function(){return null==e._startInstance&&(e._startInstance=new e(!0)),e._startInstance},e.getStopInstance=function(){return null==e._stopInstance&&(e._stopInstance=new e(!1)),e._stopInstance},e.prototype.onAdd=function(){t.prototype.onAdd.call(this),0==u.a.isMobile?this.mouseEnable=!0:this.touchEnable=!0,this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),e.getStartInstance().close(),e.getStopInstance().close()},e.prototype.dragTouchStartHandler=function(t){this.opening&&(this.stage.addEventListener(h.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(h.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.opening.backup.backup(this.opening))},e.prototype.dragTouchMoveHandler=function(t){if(this.opening&&0!=this.hasMouseDown&&!(t.touches.length>1)){var n=t.touches[0],o=this.scene.globalToLocal(new s.a(n.clientX,n.clientY)),i=l.a.calcFoot(this.opening.start,this.opening.stop,o);if(this.isLegal(i)){this.setRealPositionTo(i),this.calculateTransform();var r=new s.a;this.isStart?r.setTo(e.getStopInstance().realX,e.getStopInstance().realY):r.setTo(e.getStartInstance().realX,e.getStartInstance().realY),this.opening.realX=.5*(this.realX+r.x),this.opening.realY=.5*(this.realY+r.y),this.opening.realWidth=i.subtract(r).length,this.opening.calculateTransform()}}},e.prototype.dragTouchEndHandler=function(t){this.hasMouseDown=!1,this.stage.removeEventListener(h.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(h.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.scene.change()},e.prototype.isLegal=function(t){if(!this.opening)return!1;if(!this.opening.wall)return!1;var n=new s.a;if(this.isStart?n.setTo(e.getStopInstance().realX,e.getStopInstance().realY):n.setTo(e.getStartInstance().realX,e.getStartInstance().realY),t.subtract(n).length<=r.a.MIN_WIDTH)return!1;var o=this.opening.wall,i=o.sceneToLocal(t).x,a=o.sceneToLocal(n).x;if(l.a.less(i,o.minOpeningStartX))return!1;if(l.a.less(o.maxOpeningStopX,i))return!1;for(var u,h=o.openings,c=0,p=h;c<p.length;c++)if(u=p[c],(u=this.scene.getOpeningByName(u.name))&&u.name!=this.opening.name){if(l.a.isNumberEqual(i,u.startWallX))return!1;if(l.a.isNumberEqual(i,u.stopWallX))return!1;if(l.a.greater(i,u.startWallX)&&l.a.less(i,u.stopWallX))return!1;if(l.a.greater(u.startWallX,Math.min(i,a))&&l.a.less(u.startWallX,Math.max(i,a)))return!1}return!0},e.prototype.clear=function(){t.prototype.clear.call(this),this.opening=null},e.prototype.open=function(t){this.close(),this.opening=t,this.scene.addChild(this)},e.prototype.close=function(){this.scene.contains(this)&&this.scene.removeChild(this),this.clear()},Object.defineProperty(e.prototype,"opening",{get:function(){return this._opening},set:function(t){this._opening=t,this.realX=this.position.x,this.realY=this.position.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){if(!this.opening)return new s.a;new s.a;return this.isStart?this.opening.start:this.opening.stop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStart",{get:function(){return this._isStart},set:function(t){this._isStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return.5*a.a.DEFAULT_LENGTH},enumerable:!0,configurable:!0}),e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.draw()},e.prototype.draw=function(){this.stage&&(this.graphics.clear(),this.graphics.width=this.radius,this.graphics.height=this.radius,this.graphics.lineStyle(2,c.a.OPENING_CTRL_BORDER_COLOR),this.graphics.beginFill(c.a.OPENING_CTRL_FILL_COLOR),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill())},e}(o.a);d._startInstance=null,d._stopInstance=null},"1DbD":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.records=[{trim_length:12,spu_id:"",sku_id:"",height:0,create_time:1500563977,system_type:0,top_url:"assets/local/3d/models/c9c9418c6d1b11e79f8200163e0e72dc/top.png",av:0,id:299,unit:1,user_id:1261,no:"c9c9418c6d1b11e79f8200163e0e72dc",salable:1,length:12,inner_type:4,render_status:3,width:50,state:0,favorite_count:0,trim_width:50,price:0,scalable:1,is_public:1,sale_count:0,sub_type:410,name:"踢脚线",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1707/25/8a5bf4e0712111e7b60300163e0e72dc.jpg",asset_no:"35c9108e712111e790be00163e0e72dc",trim_height:0,flat_height:0,modify_time:1506340639,photo_scale:2},{trim_length:23,spu_id:"",sku_id:"",height:214.308289,create_time:1500561727,system_type:0,top_url:"assets/local/3d/models/8cd725966d1611e79f8200163e0e72dc/top.png",av:0,id:278,unit:1,user_id:1261,no:"8cd725966d1611e79f8200163e0e72dc",salable:0,length:23.0322018,inner_type:2,render_status:0,width:140.616455,state:1,favorite_count:0,trim_width:140,price:0,scalable:1,is_public:1,sale_count:0,sub_type:202,name:"双开门",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1708/03/c9e508a2781711e7996c00163e0e72dc.jpg",asset_no:"15708bf6c5df11e7a22200163e0e72dc",trim_height:214,flat_height:214.308289,modify_time:1510323558,photo_scale:2},{trim_length:40,spu_id:"",sku_id:"",height:0,create_time:1500563212,system_type:0,top_url:"assets/local/3d/models/01ca25266d1a11e7b62200163e0e72dc/top.png",av:0,id:296,unit:1,user_id:1309,no:"01ca25266d1a11e7b62200163e0e72dc",salable:1,length:40,inner_type:4,render_status:3,width:40,state:0,favorite_count:1,trim_width:40,price:0,scalable:1,is_public:1,sale_count:0,sub_type:401,name:"白色乳胶漆",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1712/04/1e3c8362d8d011e7a8e300163e0e72dc.jpg",asset_no:"f8aa7096d8cf11e79c3500163e0e72dc",trim_height:0,flat_height:0,modify_time:1512406203,photo_scale:2},{trim_length:27,spu_id:"",sku_id:"",height:120.875961,create_time:1500568883,system_type:0,top_url:"assets/local/3d/models/3621f4d66d2711e79f8200163e0e72dc/top.png",av:0,id:347,unit:1,user_id:1261,no:"3621f4d66d2711e79f8200163e0e72dc",salable:0,length:27.9680328,inner_type:3,render_status:3,width:106.80616,state:0,favorite_count:0,trim_width:106,price:0,scalable:1,is_public:1,sale_count:0,sub_type:302,name:"飘窗",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1708/03/d01f73cc781911e7850100163e0e72dc.jpg",asset_no:"84bba8a6781911e7996c00163e0e72dc",trim_height:120,flat_height:120.875961,modify_time:1520360119,photo_scale:2},{trim_length:4,spu_id:"",sku_id:"",height:82.6771927,create_time:1500564046,system_type:0,top_url:"assets/local/3d/models/f2c36fc26d1b11e7b62200163e0e72dc/top.png",av:0,id:300,unit:1,user_id:1261,no:"f2c36fc26d1b11e7b62200163e0e72dc",salable:1,length:4.29140568,inner_type:3,render_status:3,width:87.1653748,state:0,favorite_count:1,trim_width:74,price:0,scalable:1,is_public:1,sale_count:0,sub_type:301,name:"窗",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1709/25/f86e4b3ca1a911e7baa900163e0e72dc.jpg",asset_no:"d39232eaa1a611e7b49500163e0e72dc",trim_height:93,flat_height:82.6771927,modify_time:1520360129,photo_scale:2},{trim_length:21,spu_id:"",sku_id:"",height:221.593811,create_time:1500561812,system_type:0,top_url:"assets/local/3d/models/bf954ad06d1611e7b62200163e0e72dc/top.png",av:0,id:280,unit:1,user_id:1261,no:"bf954ad06d1611e7b62200163e0e72dc",salable:1,length:21.2299385,inner_type:2,render_status:3,width:141.299988,state:0,favorite_count:1,trim_width:141,price:0,scalable:1,is_public:1,sale_count:0,sub_type:203,name:"移门",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1708/03/3ab5284e781a11e7850100163e0e72dc.jpg",asset_no:"19f92fa6781a11e7996c00163e0e72dc",trim_height:221,flat_height:221.593811,modify_time:1520359790,photo_scale:2},{trim_length:60,spu_id:"",sku_id:"",height:0,create_time:1500564984,system_type:0,top_url:"assets/local/3d/models/223e41266d1e11e79f8200163e0e72dc/top.png",av:0,id:302,unit:1,user_id:1261,no:"223e41266d1e11e79f8200163e0e72dc",salable:0,length:60,inner_type:4,render_status:3,width:60,state:0,favorite_count:0,trim_width:60,price:0,scalable:1,is_public:1,sale_count:0,sub_type:401,name:"浅色木地板",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1707/20/422484826d1e11e79f8200163e0e72dc.jpg",asset_no:"223e41266d1e11e79f8200163e0e72dc",trim_height:0,flat_height:0,modify_time:1506340619,photo_scale:2},{trim_length:12,spu_id:"",sku_id:"",height:270.000031,create_time:1500562419,system_type:0,top_url:"assets/local/3d/models/292827e66d1811e79f8200163e0e72dc/top.png",av:0,id:286,unit:1,user_id:1261,no:"292827e66d1811e79f8200163e0e72dc",salable:1,length:12.0000849,inner_type:3,render_status:3,width:300.000061,state:0,favorite_count:0,trim_width:300,price:0,scalable:1,is_public:1,sale_count:0,sub_type:303,name:"落地窗",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1708/03/980c97fa781c11e7850100163e0e72dc.jpg",asset_no:"5f85d720781c11e7850100163e0e72dc",trim_height:270,flat_height:270.000031,modify_time:1520360140,photo_scale:2},{trim_length:21,spu_id:"",sku_id:"",height:212.295502,create_time:1500561619,system_type:0,top_url:"assets/local/3d/models/4c6f640a6d1611e79f8200163e0e72dc/top.png",av:0,id:277,unit:1,user_id:1261,no:"4c6f640a6d1611e79f8200163e0e72dc",salable:1,length:21.4348526,inner_type:2,render_status:3,width:97.5256042,state:0,favorite_count:1,trim_width:97,price:0,scalable:1,is_public:1,sale_count:0,sub_type:201,name:"单开门",product_link:"",preview_url:"http://img.jiandanhome.com/deco/1708/03/6c4e9464781811e7996c00163e0e72dc.jpg",asset_no:"dafa2e2a781611e7850100163e0e72dc",trim_height:212,flat_height:212.295502,modify_time:1520359796,photo_scale:2}]},"1LGZ":function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.DESIGN_ITEM_ASSET_READY="DESIGN_ITEM_ASSET_READY",r.DESIGN_ITEM_ASSET_FAILED="DESIGN_ITEM_ASSET_FAILED",r.DESIGN_ITEM_DETAIL_READY="DESIGN_ITEM_DETAIL_READY",r.DESIGN_ITEM_MESH_READY="DESIGN_ITEM_MESH_READY",r.DESIGN_ITEM_CATEGORY_ID_READY="DESIGN_ITEM_CATEGORY_ID_READY"},"1iia":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".areaIcon[_ngcontent-%COMP%]{left:15px;top:72px}.areaIcon[_ngcontent-%COMP%], .areaLabel[_ngcontent-%COMP%]{position:absolute;z-index:10}.areaLabel[_ngcontent-%COMP%]{left:32px;top:68px;width:200px;height:20px;color:#333;font-size:15px;line-height:20px}.quitDrawButton[_ngcontent-%COMP%]{position:absolute;right:20px;bottom:40px;z-index:20}"]},"1jxk":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{bgRef:0}),a._13(402653184,2,{iconRef:0}),a._13(402653184,3,{labelRef:0}),a._13(402653184,4,{line:0}),a._13(671088640,5,{buttonQueryList:1}),(t()(),a._15(0,[[1,0],["bg",1]],null,15,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,[[2,0],["icon",1]],null,0,"div",[["class","icon"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,[[3,0],["label",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""])),(t()(),a._14(null,["\n\n    "])),(t()(),a._15(16777216,null,null,1,"color-button",[["colorStyle","4"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,13)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,13).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,13).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,13).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,13).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,13).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,13).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,13).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.click1()&&o}return o},l.a,l.b)),a._17(4308992,[[5,4]],0,u.a,[a.Q,a._18],{colorStyle:[0,"colorStyle"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"line",[["height","18px"],["visible","false"],["width","1px"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,16)._touchMove(n)&&o}return o},h.a,h.b)),a._17(4308992,[[4,4],["line",4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],visible:[2,"visible"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"color-button",[["colorStyle","4"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,19)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,19).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,19).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,19).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,19).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,19).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,19).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,19).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.click2()&&o}return o},l.a,l.b)),a._17(4308992,[[5,4]],0,u.a,[a.Q,a._18],{colorStyle:[0,"colorStyle"]},null),(t()(),a._14(null,["\n"]))],function(t,e){t(e,13,0,"4");t(e,16,0,"1px","18px","false");t(e,19,0,"4")},function(t,e){t(e,10,0,e.component.message)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"alert",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,d)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("GMHY"),a=n("/oeL"),s=n("sA2y"),l=n("D7lW"),u=n("cmpz"),h=n("nPVZ"),c=n("j5mp");n.d(e,"b",function(){return d}),e.a=o;var p=[r.a],d=a._11({encapsulation:0,styles:p,data:{}});a._19("alert",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"1z8p":function(t,e,n){"use strict";var o=n("7vVH");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){var e=t.call(this)||this;return e.childs=[],e}return i(e,t),e.prototype.addChild=function(t){return this.getChildIndex(t)<0&&(this.childs.push(t),this._dom&&this._dom.appendChild(t.dom),t.setParent(this),t.setStage(this._stage),t.onAdd(),!0)},e.prototype.addChildAt=function(t,e){if(this.getChildIndex(t)<0){if(this.getChildAt(e)){for(var n=this.childs.length,o=n-1;o>=e;o--)this.childs[o+1]=this.childs[o];this.childs[e]=t,this._dom&&this._dom.insertBefore(t.dom,this.childs[e+1].dom)}else this.childs.push(t),this._dom&&this._dom.appendChild(t.dom);return t.setParent(this),t.setStage(this._stage),t.onAdd(),!0}return!1},e.prototype.removeChild=function(t){var e=this.getChildIndex(t);return e>=0&&(this.childs.splice(e,1),this._dom&&this._dom.removeChild(t.dom),t.processOnRemove(),!0)},e.prototype.removeChildAt=function(t){if(this.childs.length>t){var e=this.childs[t];return this._dom&&this._dom.removeChild(e.dom),this.childs.splice(t,1),e.processOnRemove(),!0}return!1},e.prototype.removeChildren=function(){for(var t=this.childs.length,e=0;e<t;e++){var n=this.childs[e];this._dom&&this._dom.removeChild(n.dom),n.processOnRemove()}this.childs=[]},e.prototype.processOnRemove=function(){t.prototype.processOnRemove.call(this);for(var e=this.numChildren,n=0;n<e;n++){this.getChildAt(n).processOnRemove()}},e.prototype.getChildAt=function(t){return this.childs.length>t?this.childs[t]:null},e.prototype.setChildIndex=function(t,e){var n=this.childs.indexOf(t);if(n>=0){null!=this.getChildAt(e)?this.swapChildrenAt(n,e):(this.childs[n]=null,this.childs[e]=t);for(var o=void 0;o<this.childs.length;o++)null==this.childs[o]&&(this.childs.splice(o,1),o--);return!0}return!1},e.prototype.getChildIndex=function(t){return this.childs.indexOf(t)},e.prototype.contains=function(t){return this.childs.indexOf(t)>=0},e.prototype.swapChildrenAt=function(t,e){var n=this.childs[t],o=this.childs[e];this.childs[t]=o,this.childs[e]=n},Object.defineProperty(e.prototype,"numChildren",{get:function(){return this.childs.length},enumerable:!0,configurable:!0}),e.prototype.setParent=function(t){this.parent=t;for(var e=this.numChildren,n=0;n<e;n++){this.getChildAt(n).setParent(this)}},e.prototype.setStage=function(t){this._stage=t;for(var e=this.numChildren,n=0;n<e;n++){this.getChildAt(n).setStage(t)}},e.prototype.getEventTargetRef=function(e){var n=t.prototype.getEventTargetRef.call(this,e);if(null==n)for(var o=this.numChildren,i=0;i<o;i++){var r=this.getChildAt(i);if(n=r.getEventTargetRef(e))return n}return n},e}(o.a)},"2fuc":function(t,e,n){"use strict";function o(t){return u._12(0,[(t()(),u._20(0,null,null,0))],null,null)}function i(t){return u._12(0,[(t()(),u._20(0,null,null,0))],null,null)}function r(t){return u._12(0,[(t()(),u._20(0,null,null,0))],null,null)}function a(t){return u._12(0,[u._13(671088640,1,{labelQueryList:1}),u._13(402653184,2,{door:0}),u._13(402653184,3,{listDoorView:0}),u._13(402653184,4,{window:0}),u._13(402653184,5,{listWindowView:0}),u._13(402653184,6,{struct:0}),u._13(402653184,7,{listStructView:0}),(t()(),u._15(0,null,null,10,"div",[["class","title"]],null,null,null,null,null)),(t()(),u._14(null,["\n    "])),(t()(),u._15(16777216,null,null,1,"label",[["class","titleButton"],["colorStyle","4"],["height","24px"],["text","门"],["textSize","14"],["width","42px"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==u._16(t,10)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.navigate(0)&&o}return o},c.a,c.b)),u._17(4308992,[[1,4]],0,p.a,[u.Q,u._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],text:[4,"text"]},null),(t()(),u._14(null,["\n    "])),(t()(),u._15(16777216,null,null,1,"label",[["class","titleButton"],["colorStyle","4"],["height","24px"],["text","窗"],["textSize","14"],["width","42px"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==u._16(t,13)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.navigate(1)&&o}return o},c.a,c.b)),u._17(4308992,[[1,4]],0,p.a,[u.Q,u._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],text:[4,"text"]},null),(t()(),u._14(null,["\n    "])),(t()(),u._15(16777216,null,null,1,"label",[["class","titleButton"],["colorStyle","4"],["height","24px"],["text","结构部件"],["textSize","14"],["width","76px"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==u._16(t,16)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.navigate(2)&&o}return o},c.a,c.b)),u._17(4308992,[[1,4]],0,p.a,[u.Q,u._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],text:[4,"text"]},null),(t()(),u._14(null,["\n"])),(t()(),u._14(null,["\n\n"])),(t()(),u._15(0,[[2,0],["door",1]],null,6,"div",[["class","view"]],null,null,null,null,null)),(t()(),u._14(null,["\n    "])),(t()(),u._15(0,null,null,3,"div",[["class","container"]],null,null,null,null,null)),(t()(),u._14(null,["\n        "])),(t()(),u._20(16777216,[[3,3],["listDoor",2]],null,0,null,o)),(t()(),u._14(null,["\n    "])),(t()(),u._14(null,["\n"])),(t()(),u._14(null,["\n\n"])),(t()(),u._15(0,[[4,0],["window",1]],null,6,"div",[["class","view"]],null,null,null,null,null)),(t()(),u._14(null,["\n    "])),(t()(),u._15(0,null,null,3,"div",[["class","container"]],null,null,null,null,null)),(t()(),u._14(null,["\n        "])),(t()(),u._20(16777216,[[5,3],["listWindow",2]],null,0,null,i)),(t()(),u._14(null,["\n    "])),(t()(),u._14(null,["\n"])),(t()(),u._14(null,["\n\n"])),(t()(),u._15(0,[[6,0],["struct",1]],null,6,"div",[["class","view"]],null,null,null,null,null)),(t()(),u._14(null,["\n    "])),(t()(),u._15(0,null,null,3,"div",[["class","container"]],null,null,null,null,null)),(t()(),u._14(null,["\n        "])),(t()(),u._20(16777216,[[7,3],["listStruct",2]],null,0,null,r)),(t()(),u._14(null,["\n    "])),(t()(),u._14(null,["\n"])),(t()(),u._14(null,["\n\n"]))],function(t,e){t(e,10,0,"42px","24px","4","14","门");t(e,13,0,"42px","24px","4","14","窗");t(e,16,0,"76px","24px","4","14","结构部件")},null)}function s(t){return u._12(0,[(t()(),u._15(16777216,null,null,1,"huxing-struct-view",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==u._16(t,1).touchMove(n)&&o}if("touchstart"===e){o=!1!==u._16(t,1).touchStart(n)&&o}return o},a,f)),u._17(4308992,null,0,h.a,[u.Q,u._18],null,null)],function(t,e){t(e,1,0)},null)}var l=n("rFe8"),u=n("/oeL"),h=n("UOls"),c=n("/lk0"),p=n("HiNH");n.d(e,"b",function(){return f}),e.a=a;var d=[l.a],f=u._11({encapsulation:0,styles:d,data:{}});u._19("huxing-struct-view",h.a,s,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"3+Wm":function(t,e,n){"use strict";var o=n("MPvg"),i=n("YSA8"),r=n("3Gk7"),a=n("/gn8"),s=n("C+EA");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(n,o){var i=t.call(this)||this;i.uvs=[],i.name=n,i.wall=o,i.mouseEnabled=!0;var l=i.wall.openingPolygons,u=[],h=[];return n==e.FORWARD_SKIRTING?(u=i.wall.forwardPolygon(16).triangulate(l),h=r.a.polygon3ds2vertices(u),i.geometry=r.a.createGeomtry(h,null,null,r.a.createTriangleIndices(h.length/9))):n==e.BACKWARD_SKIRTING?(u=i.wall.backwardPolygon(16).triangulate(l),h=r.a.polygon3ds2vertices(u),i.geometry=r.a.createGeomtry(h,null,null,r.a.createTriangleIndices(h.length/9))):n==e.START_SKIRTING?(u=i.wall.startPolygon(16).triangulate(l),h=r.a.polygon3ds2vertices(u),i.geometry=r.a.createGeomtry(h,null,null,r.a.createTriangleIndices(h.length/9))):n==e.STOP_SKIRTING&&(u=i.wall.stopPolygon(16).triangulate(l),h=r.a.polygon3ds2vertices(u),i.geometry=r.a.createGeomtry(h,null,null,r.a.createTriangleIndices(h.length/9))),i.uvs=r.a.polygon3ds2uvs(u,1,1,a.a.Z_AXIS),i.material=s.a.defaultColorMaterial,i}return l(e,t),e.prototype.updateUV=function(t,e,n,i){i=16;var a=r.a.calculateUVs(this.uvs,n,i);this.geometry.addAttribute("uv",new o.j(new Float32Array(a),2));var l=s.a.getTextureResourceByKey(e).resource,u=s.a.createStandardMaterial(l);u.needsUpdate=!0,this.material=u},Object.defineProperty(e.prototype,"item",{get:function(){return this.name==e.FORWARD_SKIRTING?this.wall.forwardSkirting:this.name==e.BACKWARD_SKIRTING?this.wall.backwardSkirting:this.name==e.START_SKIRTING?this.wall.startSkirting:this.name==e.STOP_SKIRTING?this.wall.stopSkirting:null},enumerable:!0,configurable:!0}),e}(i.a);u.FORWARD_SKIRTING="FORWARD_SKIRTING",u.BACKWARD_SKIRTING="BACKWARD_SKIRTING",u.START_SKIRTING="START_SKIRTING",u.STOP_SKIRTING="STOP_SKIRTING"},"397s":function(t,e,n){"use strict";var o=n("MPvg"),i=n("/gn8"),r=n("FIP8"),a=n("lpfp"),s=n("aNcW");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(){var e=t.call(this)||this;return e.sceneWidth=1,e.sceneHeight=1,e.resize(window.innerWidth,window.innerHeight),e}return l(e,t),e.prototype.resize=function(t,e){this.sceneWidth=t,this.sceneHeight=e},e.prototype.calculateRay3D=function(t,e,n){void 0===n&&(n=null);var a=new o.k,s=t/window.innerWidth*2-1,l=-e/window.innerHeight*2+1;a.setFromCamera(new o.r(s,l),this);var u=a.ray,h=u.origin,c=u.direction;return n&&(h=n.worldToLocal(h),c=n.worldToLocal(c)),new r.a(new i.a(h.x,h.y,h.z),new i.a(c.x,c.y,c.z))},Object.defineProperty(e.prototype,"horizontalFov",{get:function(){var t=this.fov*Math.PI/180,e=2*Math.atan(1*Math.tan(t/2));return e*=180/Math.PI},set:function(t){var e=t*Math.PI/180,n=2*Math.atan(Math.tan(e/2)/1);n*=180/Math.PI,this.fov=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position3D",{get:function(){var t=this.position;return new i.a(t.x,t.y,t.z)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrix3D",{get:function(){return null==this._matrix3D&&(this._matrix3D=new s.a(this.matrix.toArray())),this._matrix3D},enumerable:!0,configurable:!0}),e.prototype.globalToLocal=function(t){var e=new o.b(t.x,t.y,t.z),n=this.worldToLocal(e);return new i.a(n.x,n.y,n.z)},e.prototype.localToGlobal=function(t){var e=new o.b(t.x,t.y,t.z),n=this.localToWorld(e);return new i.a(n.x,n.y,n.z)},e.prototype.projectGlobal=function(t){var e=new o.b(t.x,t.y,t.z);return e=e.project(this),e.z<0||e.z>1?new a.a(-1e4,-1e4):new a.a((e.x+1)*this.sceneWidth/2,(1-e.y)*this.sceneHeight/2)},e}(o.y)},"39l8":function(t,e,n){"use strict";function o(t){return s._12(0,[(t()(),s._20(0,null,null,0))],null,null)}function i(t){return s._12(0,[s._13(402653184,1,{container:0}),(t()(),s._15(0,null,null,3,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._20(16777216,[[1,3],["container",2]],null,0,null,o)),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n"]))],null,null)}function r(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"operator",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},i,h)),s._17(4308992,null,0,l.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var a=n("Jrol"),s=n("/oeL"),l=n("qJEM");n.d(e,"b",function(){return h}),e.a=i;var u=[a.a],h=s._11({encapsulation:0,styles:u,data:{}});s._19("operator",l.a,r,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"39qE":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{labelRef:0}),a._13(402653184,2,{numberRef:0}),(t()(),a._15(0,[[1,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,null,null,0,"img",[["class","arrow"],["src","/assets/view/option/right_arrow_3x.png"]],null,null,null,null,null)),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[2,0],["num",1]],null,1,"div",[["class","number"]],null,null,null,null,null)),(t()(),a._14(null,["",""])),(t()(),a._14(null,["\n"]))],null,function(t,e){var n=e.component;t(e,3,0,n.label),t(e,8,0,n.number)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"option-navigation-item",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,1).touchEnd(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("cMBn"),a=n("/oeL"),s=n("Dsuh");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("option-navigation-item",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",label:"label",number:"number"},{},[])},"3BIX":function(t,e,n){"use strict";var o=n("MPvg"),i=n("YSA8"),r=n("aVAF"),a=n("lSRa"),s=n("3Gk7"),l=n("/gn8"),u=n("C+EA"),h=n("feMm"),c=n("v7PY");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(e){var n=t.call(this)||this;return n.mouseEnabled=!0,n.room=e,n.init(),n}return p(e,t),e.prototype.init=function(){for(var t,e=new a.a,n=0;n<this.room.polygon.vertexCount;n++)t=this.room.polygon.getPointAt(n),e.addVertexXYZ(t.x,-t.y,0);var i=e.triangulate();this.geom=new r.a,this.geom.vertices=s.a.polygon3ds2vertices(i),this.geom.indices=s.a.createTriangleIndices(i.length),this.geom.uvsDist=s.a.polygon3ds2uvs(i,1,1,l.a.Y_AXIS,new l.a),this.geometry=s.a.createGeomtry(this.geom.vertices,null,null,this.geom.indices),this.material=new o.i({color:13745570}),this.updateMaterials()},e.prototype.updateUV=function(t,e,n,i){var r=this.geom.calculateUVs(n,i);t.geometry.addAttribute("uv",new o.j(new Float32Array(r),2));var a=u.a.getTextureResourceByKey(e),s={map:a.resource,alphaMap:u.a.defaultNormalResource},l=new o.h(s);l.needsUpdate=!0,t.material=l},e.prototype.updateMaterials=function(){h.a.getInstance().add(this,this.room.floorMaterialNo,this.updateUV,null,this)},Object.defineProperty(e.prototype,"centerPoint",{get:function(){var t=this.room.polygon.center;return new l.a(t.x,-t.y,0)},enumerable:!0,configurable:!0}),e.prototype.getWireFrame=function(){var t=new o.i({color:c.a.MASTER2,opacity:.4,transparent:!0}),e=new o.l(this.geometry,t);return e.position.set(this.position.x,this.position.y,this.position.z),e},Object.defineProperty(e.prototype,"item",{get:function(){return this.room.floorMaterial},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.room=null},e}(i.a)},"3Gk7":function(t,e,n){"use strict";var o=n("hcJx"),i=n("YSA8"),r=n("/gn8"),a=n("MPvg"),s=n("v7PY"),l=n("C+EA"),u=n("0/et");n.d(e,"a",function(){return h});var h=function(){function t(){}return t.polygon3ds2vertices=function(t){for(var e=new Array,n=0,o=t;n<o.length;n++)for(var i=o[n],r=0,a=i.vertices;r<a.length;r++){var s=a[r];e.push(s.x,s.y,s.z)}return e},t.polygon3ds2uvs=function(t,e,n,o,i){void 0===o&&(o=null),void 0===i&&(i=null);for(var r=new Array,a=0,s=t;a<s.length;a++){var l=s[a];r=r.concat(l.generateVertexUVs(e,n,o,i))}return r},t.createGeomtry=function(t,e,n,i,r){if(void 0===r&&(r=1),!e&&n)throw new Error("illegal input");var s=new o.a;if(t){var l=new Float32Array(t),u=new a.j(l,3);s.addAttribute("position",u)}return e&&s.addAttribute("uv",new a.j(new Float32Array(e),2)),i&&s.setIndex(new a.j(new Uint32Array(i),1)),s.computeBoundingBox(),s.computeBoundingSphere(),s.computeVertexNormals(),s},t.createMesh=function(e,n,o,r,a){void 0===a&&(a=null);var s=t.createGeomtry(e,n,o,r),u=new i.a;return u.geometry=s,u.material=l.a.defaultColorMaterial,a&&(u.name=a),u},t.createTriangleIndices=function(t){for(var e=new Array,n=0;n<t;n++)e.push(3*n,3*n+1,3*n+2);return e},t.createQuadGeometryIndicesByNumVertices=function(t){var e,n=new Array;for(e=0;e<t/4;e++)n.push(0+4*e,1+4*e,2+4*e,0+4*e,2+4*e,3+4*e);return n},t.createBox=function(t,e,n,o,i){void 0===o&&(o=1),void 0===i&&(i=null);var r,l=t/2+1,u=e/2+1,h=n,c=[l,u,h,l,-u,h,l,-u,0,l,u,0,-l,u,h,-l,u,0,-l,-u,0,-l,-u,h,l,u,0,l,-u,0,-l,-u,0,-l,u,0,l,u,h,-l,u,h,-l,-u,h,l,-u,h,l,-u,h,-l,-u,h,-l,-u,0,l,-u,0,l,u,h,l,u,0,-l,u,0,-l,u,h],p=new Array;for(r=0;r<6;r++)p.push(0+4*r,1+4*r,2+4*r,0+4*r,2+4*r,3+4*r);var d=this.createMesh(c,null,null,p,i),f=new a.i({color:s.a.BLUE_GREEN,opacity:o});return d.material=f,d},t.calculateUVs=function(t,e,n){for(var o=[],i=0;i<t.length/2;i++)o.push(t[2*i]/e,t[2*i+1]/n);return o},t.calculateNormals=function(t,e){var n,o,i,a,s=t.length/3,l=e.length/3,h=[];for(a=0;a<l;a++){n=e[3*a],o=e[3*a+1],i=e[3*a+2];var c=t[3*n],p=t[3*n+1],d=t[3*n+2],f=t[3*o],g=t[3*o+1],m=t[3*o+2],_=t[3*i],y=t[3*i+1],b=t[3*i+2],v=new r.a(f-c,g-p,m-d).crossProd(new r.a(_-c,y-p,b-d));v.normalize();for(var w=0,O=[n,o,i];w<O.length;w++){var x=O[w];if(h[x]){for(var E=!1,P=0,C=h[x];P<C.length;P++){var A=C[P];if(u.a.isPoint3DEqual(A,v)){E=!0;break}}E||h[x].push(v)}else h[x]=[v]}}var N=new Array,S=new r.a;for(a=0;a<s;a++)if(null==h[a])N.push(0,0,1);else{S.setTo(0,0,0);for(var M=0,T=h[a];M<T.length;M++){var L=T[M];S.x+=L.x,S.y+=L.y,S.z+=L.z}S.normalize(),N.push(S.x,S.y,S.z)}return N},t}()},"3Mh4":function(t,e,n){"use strict";var o=n("SScf"),i=n("MPvg"),r=n("YSA8"),a=n("3V/0"),s=n("BM0e");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var l=t.call(this,!1,!1)||this;return l.renderUpdateId=null,l.renderFrameRate=16,l.resizeLambda=function(t){l.resize(t)},l.renderUpdateLambda=function(){l.renderUpdate()},l.canvasDom=e,0==s.a.isMobile&&window.addEventListener(a.a.RESIZE,l.resizeLambda),l.level1=new r.a,l.level1.name="level1",l.level2=new r.a,l.level2.name="level2",l.stage3D=new i.t,l.stage3D.add(l.level1),l.stage3D.add(l.level2),0==n||0==o?(l.width=window.innerWidth,l.height=window.innerHeight):(l.width=n,l.height=o),l.initCamera(),l.camera&&l.stage3D.add(l.camera),l.initWebGL(),l.initMaterial(),l.initBehavior(),l.resize(),l}return l(e,t),e.prototype.resize=function(t){void 0===t&&(t=null);var e=this.width,n=this.height;this.camera&&(this.camera.aspect=e/n,this.camera.resize(e,n),this.camera.updateProjectionMatrix()),this.renderer&&(this.renderer.setSize(e,n),1==s.a.isMobile&&this.renderer.setPixelRatio(2))},e.prototype.start=function(){if(null==this.renderUpdateId){var t=Math.round(1e3/this.renderFrameRate);this.renderUpdateId=setInterval(this.renderUpdateLambda,t),this.renderUpdate()}},e.prototype.stop=function(){this.renderUpdateId&&clearInterval(this.renderUpdateId),this.renderUpdateId=null},e.prototype.initWebGL=function(){},e.prototype.initCamera=function(){},e.prototype.initMaterial=function(){},e.prototype.renderUpdate=function(){this.renderer.render(this.stage3D,this.camera)},e.prototype.initBehavior=function(){},e.prototype.clear=function(){this.level1.removeChildren(),this.level2.removeChildren(),this.renderer.clear(),i.s.clear()},e}(o.a)},"3NP2":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.PATH="path",o.RECT="rect"},"3V/0":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.RESIZE="resize",o.CONTEXT_MENU="contextmenu",o.IMAGE_LOADED="load"},"3arc":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{structView:0}),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"huxing-struct-view",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,3).touchMove(n)&&o}if("touchstart"===e){o=!1!==a._16(t,3).touchStart(n)&&o}return o},s.a,s.b)),a._17(4308992,[[1,4],["structView",4]],0,l.a,[a.Q,a._18],null,null)],function(t,e){t(e,3,0)},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"huxing-resource",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,u.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("/5Oe"),a=n("/oeL"),s=n("2fuc"),l=n("UOls"),u=n("wzWt");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("huxing-resource",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"3cEh":function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("YihH"),a=n("FtES"),s=n("+ByO");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.closeIconUp="assets/view/settingbars/close_3x.png",o.closeIconDown="assets/view/settingbars/close_3x.png",o}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.width="255px",r.a.inst.addEvent(a.a.SETTINGS_CONFIRM,this.onConfirm,this)},e.prototype.setTargetStruct=function(t){this.targetStruct=t,this.structWidthInput.finalLabel=Math.round(10*t.realWidth).toString(),this.structLengthInput.finalLabel=Math.round(10*t.realLength).toString(),this.structWidthInput.selected=!1,this.structLengthInput.selected=!1},e.prototype.showWallWidthSetting=function(){1==this.structWidthInput.editable&&(this.structWidthInput.selected=!0,this.currentInput=this.structWidthInput,this.structLengthInput.selected=!1,this.structLengthInput.resetLabel(),r.a.inst.open(this.targetStruct,Math.round(10*this.targetStruct.realWidth)))},e.prototype.showWallLengthSetting=function(){1==this.structLengthInput.editable&&(this.structLengthInput.selected=!0,this.currentInput=this.structLengthInput,this.structWidthInput.selected=!1,this.structWidthInput.resetLabel(),r.a.inst.open(this.targetStruct,Math.round(10*this.targetStruct.realLength)))},e.prototype.close=function(){s.a.inst.close()},e.prototype.onConfirm=function(t){var e=t.data,n=e.target,o=e.value;this.targetStruct==n&&this.currentInput&&(this.currentInput==this.structWidthInput?this.targetStruct.doChangeWidth(Math.round(o/10)):this.currentInput==this.structLengthInput&&this.targetStruct.doChangeLength(Math.round(o/10)),this.setTargetStruct(this.targetStruct))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},"3mMQ":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.ROTATE="OperatorActionRotate",o.DELETE="OperatorActionDelete",o.SPLIT="OperatorActionSplit",o.CLEAR="OperatorActionClear",o.NAME="OperatorActionName",o.MIRROR="OperatorActionMirror",o.HOLE="OperatorActionHole"},"3qcR":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){this.p0=null,this.dir=null,this.p0=t,this.dir=e}return Object.defineProperty(t.prototype,"p1",{get:function(){return this.p0.add(this.dir)},enumerable:!0,configurable:!0}),t.prototype.output=function(){console.debug("Line2D.output"),console.debug("    ",this.p0,this.dir)},t}()},"42Ej":function(t,e,n){"use strict";function o(t){return a._12(0,[(t()(),a._15(0,null,null,6,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),a._14(null,["墙面面积：","m²"])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,0,"img",[["class","close"],["src","/assets/view/windows/facadewindow/close_3x.png"]],null,[[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchstart"===e){o=!1!==i.close()&&o}return o},null,null)),(t()(),a._14(null,["\n"]))],null,function(t,e){t(e,3,0,e.component.area)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"facade-elevation-window",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("81jS"),a=n("/oeL"),s=n("FthM");n.d(e,"a",function(){return h});var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}}),h=a._19("facade-elevation-window",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"4L4I":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{wallSettingBar:0}),a._13(402653184,2,{openingSettingBar:0}),a._13(402653184,3,{structSettingBar:0}),(t()(),a._15(0,null,null,10,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"wall-setting-bar",[["class","settingbar"],["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,6)._touchMove(n)&&o}return o},s.a,s.b)),a._17(4308992,[[1,4],["wallSettingBar",4]],0,l.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"opening-setting-bar",[["class","settingbar"],["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,9)._touchMove(n)&&o}return o},u.a,u.b)),a._17(4308992,[[2,4],["openingSettingBar",4]],0,h.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"struct-setting-bar",[["class","settingbar"],["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,12)._touchMove(n)&&o}return o},c.a,c.b)),a._17(4308992,[[3,4],["structSettingBar",4]],0,p.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n"]))],function(t,e){t(e,6,0,"false");t(e,9,0,"false");t(e,12,0,"false")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"setting-bars",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,g)),a._17(4308992,null,0,d.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("xBDO"),a=n("/oeL"),s=n("PRZ3"),l=n("CQOF"),u=n("ZlQW"),h=n("kUfx"),c=n("Kmjt"),p=n("3cEh"),d=n("+ByO");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=a._11({encapsulation:0,styles:f,data:{}});a._19("setting-bars",d.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"4Y86":function(t,e,n){"use strict";var o=n("/oeL"),i=n("+N0H"),r=n("sA2y"),a=n("+6Ri"),s=n("LF0A");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){return t.call(this,e,n)||this}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.position="absolute";var t=window.innerWidth;this.left=Math.floor((t-335)/2),this.top=115,this.updateComponentProperty(),this.areaInput=this.areaInputRef.nativeElement,this.openData&&this.open(this.openData)},e.prototype.open=function(t){var e=t;this.areaInput.value=e.toFixed(0)+"",this.areaInput.focus()},e.prototype.close=function(){i.a.inst.dom.focus(),s.a.inst.closeAll()},e.prototype.clear=function(){this.areaInput.value="",this.areaInput.focus()},e.prototype.finish=function(){var t=this.areaInput.value;if(""==t||"0"==t)return r.a.inst.warning("内容不能为空"),void this.areaInput.focus();var e=Number(t);e=Math.min(e,500),e>0&&i.a.inst.getLength(i.a.inst.rooms)>0&&i.a.inst.setPureArea(e),this.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(a.a)},"4aTh":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.MOVE_TO=0,o.LINE_TO=1},"4s6R":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:100%;height:100%;background-color:rgba(0,0,0,.6)}"]},"4tk/":function(t,e,n){"use strict";var o=n("/gn8"),i=n("0/et"),r=n("lg9f");n.d(e,"a",function(){return a});var a=function(){function t(t,e){this._p0=null,this._dir=null,this._p0=t,this._dir=e}return t.prototype.whichSideIsPointAt=function(t,e){void 0===e&&(e=NaN);var n=t.subtract(this._p0);n.normalize();var o=n.dotProd(this._dir);return i.a.isNumberEqual(o,0,e)?0:o>0?1:-1},t.prototype.whichSideIsVectorAt=function(t){var e=t.dotProd(this._dir);return i.a.isNumberEqual(e,0)?0:e>0?1:-1},Object.defineProperty(t.prototype,"p0",{get:function(){return this._p0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),t.prototype.transform=function(e){return new t(e.transformPoint(this._p0),e.deltaTransformPoint(this._dir))},t.prototype.pointPlaneDistance=function(t){var e=t.subtract(this.p0);return Math.abs(e.dotProd(this.dir))},t.calculateIntersectionLineOfTwoPlane=function(t,e){if(i.a.isNumberEqual(t.dir.dotProd(e.dir),0))return null;var n,a=t.dir.add(e.dir),s=t.dir.dotProd(t.p0)+e.dir.dotProd(e.p0),l=i.a.isNumberEqual(a.x,0),u=i.a.isNumberEqual(a.y,0),h=i.a.isNumberEqual(a.z,0);if(l)if(u){if(h)return null;n=new o.a(0,0,s/a.z)}else n=h?new o.a(0,s/a.y,0):new o.a(0,1,(s-a.y)/a.z);else n=u?h?new o.a(s/a.x,0,0):new o.a(1,0,(s-a.x)/a.z):h?new o.a(1,(s-a.x)/a.y,0):new o.a(1,1,(s-a.x-a.y)/a.z);return n?new r.a(n,t.dir.crossProd(e.dir)):null},t}()},"4zkP":function(t,e,n){"use strict";var o=n("7vHI");n.d(e,"a",function(){return i});var i=function(){function t(){var e=this;this.callbacks=new o.a,this.sequence=0,"undefined"!=typeof Worker&&(this.worker=new Worker(t.PATH),this.worker.addEventListener("message",function(t){return e.receiveMessage(t)}))}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!=this.worker},enumerable:!0,configurable:!0}),t.prototype.receiveMessage=function(t){var e=t.data,n=e.method,o=e.sequence,i=e.data,r=this.callbacks.getValue(n+o);r&&(r(i),this.callbacks.remove(n+o))},t.prototype.sendMessage=function(t,e,n){if(void 0===n&&(n=null),1==this.supported){var o={};o.method=t,o.sequence=this.sequence,o.data=e,n&&this.callbacks.add(t+this.sequence,n),this.worker.postMessage(o),this.sequence++}},t}();i.PATH="libs/worker/ChildWorker.js"},"5Xko":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(671088640,1,{buttonQueryList:1}),(t()(),a._15(0,null,null,36,"div",[["class","btnContainer"]],null,null,null,null,null)),(t()(),a._14(null,["\n    \n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","画房间"],["textDown","#3d4de6"],["width","52px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,5)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,5).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,5).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,5).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,5).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,5).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,5).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,5).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.drawRoomHandler()&&o}return o},l.b,l.c)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","画墙"],["textDown","#3d4de6"],["width","52px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,10)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,10).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,10).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,10).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,10).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,10).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,10).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,10).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.drawWallHandler()&&o}return o},l.b,l.c)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","添加部件"],["textDown","#3d4de6"],["width","52px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,15)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,15).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,15).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,15).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,15).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,15).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,15).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,15).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.addStructHandler()&&o}return o},l.b,l.c)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n\n    "])),(t()(),a._15(16777216,null,null,1,"line",[["class","line"],["height","24px"],["width","2px"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,19)._touchMove(n)&&o}return o},h.a,h.b)),a._17(4308992,null,0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","标尺"],["textDown","#3d4de6"],["width","52px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,23)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,23).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,23).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,23).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,23).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,23).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,23).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,23).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.rulerHandler()&&o}return o},l.b,l.c)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","居中"],["textDown","#3d4de6"],["width","52px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,28)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,28).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,28).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,28).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,28).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,28).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,28).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,28).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.centerHandler()&&o}return o},l.b,l.c)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,2,"v-tool-button",[["class","VToolButton"],["label","设置"],["textDown","#3d4de6"],["width","52px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,33)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,33).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,33).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,33).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,33).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,33).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,33).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,33).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.optionHandler()&&o}return o},l.b,l.c)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],iconUp:[1,"iconUp"],iconDown:[2,"iconDown"],textDown:[3,"textDown"],label:[4,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    \n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n"]))],function(t,e){var n=e.component;t(e,5,0,"52px",n.drawRoomUp,n.drawRoomDown,"#3d4de6","画房间");t(e,10,0,"52px",n.drawWallUp,n.drawWallDown,"#3d4de6","画墙");t(e,15,0,"52px",n.addStructUp,n.addStructDown,"#3d4de6","添加部件");t(e,19,0,"2px","24px");t(e,23,0,"52px",n.rulerUp,n.rulerDown,"#3d4de6","标尺");t(e,28,0,"52px",n.centerUp,n.centerDown,"#3d4de6","居中");t(e,33,0,"52px",n.optionUp,n.optionDown,"#3d4de6","设置")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"huxing-toolbar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,d)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("HNIp"),a=n("/oeL"),s=n("X973"),l=n("0g8q"),u=n("nVSV"),h=n("nPVZ"),c=n("j5mp");n.d(e,"b",function(){return d}),e.a=o;var p=[r.a],d=a._11({encapsulation:0,styles:p,data:{}});a._19("huxing-toolbar",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"5ZTi":function(t,e,n){"use strict";var o=n("Dvc5"),i=n("BM0e");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o._enabled=!0,o._selected=!1,o.buttonMode=!0,o}return r(e,t),e.prototype.upStyle=function(){},e.prototype.overStyle=function(){},e.prototype.downStyle=function(){},e.prototype.mouseOver=function(t){void 0===t&&(t=null),1!=i.a.isMobile&&0==this.selected&&1==this.enabled&&this.overStyle()},e.prototype.mouseOut=function(t){void 0===t&&(t=null),1!=i.a.isMobile&&0==this.selected&&1==this.enabled&&this.upStyle()},e.prototype.mouseDown=function(t){void 0===t&&(t=null),1!=i.a.isMobile&&0==this.selected&&1==this.enabled&&this.downStyle()},e.prototype.mouseUp=function(t){void 0===t&&(t=null),1!=i.a.isMobile&&0==this.selected&&1==this.enabled&&this.overStyle()},e.prototype.mouseClick=function(t){void 0===t&&(t=null),i.a.isMobile},e.prototype.touchStart=function(t){void 0===t&&(t=null),0!=i.a.isMobile&&0==this.selected&&1==this.enabled&&this.downStyle()},e.prototype.touchEnd=function(t){void 0===t&&(t=null),0!=i.a.isMobile&&0==this.selected&&1==this.enabled&&this.upStyle()},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){1==t?(this._enabled=!0,this.filter=""):(this.filter="grayscale(1)",this._enabled=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,1==t?this.downStyle():this.upStyle()},enumerable:!0,configurable:!0}),e}(o.a)},"5mVj":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{commonSetting:0}),a._13(402653184,2,{roomSetting:0}),a._13(402653184,3,{rulerSetting:0}),(t()(),a._15(0,null,null,10,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"common-setting",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,6)._touchMove(n)&&o}return o},s.a,s.b)),a._17(4308992,[[1,4],["commonSetting",4]],0,l.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"room-setting",[["visible","false"]],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,9).touchMove(n)&&o}if("touchstart"===e){o=!1!==a._16(t,9).touchStart(n)&&o}return o},u.a,u.b)),a._17(4308992,[[2,4],["roomSetting",4]],0,h.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"ruler-setting",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,12)._touchMove(n)&&o}return o},c.a,c.b)),a._17(4308992,[[3,4],["rulerSetting",4]],0,p.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n"]))],function(t,e){t(e,6,0,"false");t(e,9,0,"false");t(e,12,0,"false")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"settings",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,g)),a._17(4308992,null,0,d.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("E2K4"),a=n("/oeL"),s=n("e/zD"),l=n("MgL2"),u=n("jCBq"),h=n("JCpi"),c=n("8zhN"),p=n("CGmY"),d=n("YihH");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=a._11({encapsulation:0,styles:f,data:{}});a._19("settings",d.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"60hF":function(t,e,n){"use strict";var o=n("eUeh"),i=n("J78+"),r=n("0/et");n.d(e,"a",function(){return a});var a=function(){function t(){this.points=null,this.nodeLength=0,this.nodes=null,this.edges={},this.polygonLength=0,this.polygons=[],this.points=new Array,this.nodeLength=0,this.nodes=new Array,this.edges=new o.a,this.polygonLength=0,this.polygons=[]}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.clear=function(){this.points.length=0,this.nodeLength=0,this.edges={},this.polygonLength=0},t.prototype.getPolygonAt=function(t){return t<this.polygonLength?this.polygons[t]:null},t.prototype.addPolygon=function(){return this.polygonLength<=this.polygons.length&&this.polygons.push(new i.a),this.polygonLength+=1,this.polygons[this.polygonLength-1].clear(),this.polygons[this.polygonLength-1]},t.prototype.removePolygon=function(t){t<0||t>=this.polygonLength||(this.polygons.splice(t,1),this.polygonLength-=1)},t.prototype.addPoint=function(t){var e=r.a.pointIndex(this.points,t);return e!=r.a.NONE_INDEX?e:(this.points.push(t),this.nodes.length<this.points.length?this.nodes.push(new s(this.points.length-1)):this.nodes[this.points.length-1].clear(),this.nodeLength=this.points.length,this.points.length-1)},t.prototype.connect=function(t,e){return this.edges[this.edgeKey(t,e)]},t.prototype.edgeKey=function(t,e){return t+"-"+e},Object.defineProperty(t.prototype,"edgeArray",{get:function(){var t=[];for(var e in this.edges)t.push(this.edges[e]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeArray2",{get:function(){for(var t=this.edgeArray,e=[],n=0,o=t;n<o.length;n++){var i=o[n];if(!(e.indexOf(i)>=0))for(var r=0,a=t;r<a.length;r++){var s=a[r];if(i!=s&&i.startIndex==s.stopIndex&&s.startIndex==i.stopIndex){e.push(s);break}}}for(var l=0,u=e;l<u.length;l++){var h=u[l],c=t.indexOf(h);c>=0&&t.splice(c,1)}return t},enumerable:!0,configurable:!0}),t.prototype.addEdge=function(t,e,n){if(void 0===n&&(n=!1),1==n){for(var o=!0,i=this.edgeArray2,a=0,s=i;a<s.length;a++){var u=s[a],h=this.points[u.startIndex],c=this.points[u.stopIndex],p=r.a.calculateIntersectPointOnSegment(t,e,h,c);if(p){if(!(1!=r.a.isPointEqual(t,p)&&1!=r.a.isPointEqual(e,p)||1!=r.a.isPointEqual(h,p)&&1!=r.a.isPointEqual(c,p)))continue;1==r.a.isPointEqual(t,p)||1==r.a.isPointEqual(e,p)?(this.addEdge(h,p,!1),this.addEdge(p,c,!1),this.removeEdge(u.startIndex,u.stopIndex),this.removeEdge(u.stopIndex,u.startIndex)):1==r.a.isPointEqual(h,p)||1==r.a.isPointEqual(c,p)?(this.addEdge(t,p,!1),this.addEdge(p,e,!1),o=!1):(this.addEdge(t,p,!1),this.addEdge(p,e,!1),this.addEdge(h,p,!1),this.addEdge(p,c,!1),this.removeEdge(u.startIndex,u.stopIndex),this.removeEdge(u.stopIndex,u.startIndex),o=!1)}}if(0==o)return!1}var d=this.addPoint(t),f=this.addPoint(e);if(-1==d||-1==f||d==f)return!1;var u;return null==this.connect(d,f)&&(this.nodes[d].connectedNodes.push(this.nodes[f]),u=new l(d,f),this.edges[u.key]=u),1!=this.edges[this.edgeKey(f,d)]&&(this.nodes[f].connectedNodes.push(this.nodes[d]),u=new l(f,d),this.edges[u.key]=u),!0},t.prototype.removeEdge=function(t,e){var n=this.connect(t,e);n&&(this.edges[n.key]=null,delete this.edges[n.key])},t.prototype.cropLeafNodes=function(t){var e,n=null;0!=t.connectedNodes.length&&1==t.connectedNodes.length&&(n=t.connectedNodes[0],e=n.connectedNodes.indexOf(t),-1!=e&&n.connectedNodes.splice(e,1),t.connectedNodes.length=0,t.exclude=!0,this.cropLeafNodes(n))},t.prototype.searchPolygon=function(t){var e,n,o,i,a,s,l,u,h;for(e=0;e<t.connectedNodes.length;e++){for(i=t.connectedNodes[e],i.parentNode=t;;){if(null==this.connect(i.parentNode.index,i.index))break;if(i.index==t.index)break;for(a=null,s=this.points[i.parentNode.index].subtract(this.points[i.index]),h=Number.MAX_VALUE,n=0;n<i.connectedNodes.length;n++){var c=i.connectedNodes[n];c.index!=i.parentNode.index&&(i.exclude||null!=this.connect(i.index,c.index)&&(l=this.points[c.index].subtract(this.points[i.index]),(u=r.a.vectorIncludedAngle(s,l,!0))<h&&(h=u,a=c)))}if(null==a)break;if(null!=a.parentNode)break;a.parentNode=i,i=a}if(i.index==t.index){var p=this.addPolygon();for(o=i;;){if(p.addPointXY(this.points[o.index].x,this.points[o.index].y,!0),o.parentNode.index==t.index)break;if(null==o.parentNode)break;o=o.parentNode}if(p.vertexCount>=3&&p.area<0)for(o=i;;){if(this.edges[this.edgeKey(o.parentNode.index,o.index)]=null,o.parentNode.index==t.index)break;if(null==o.parentNode)break;o=o.parentNode}else for(this.polygonLength-=1,o=i;;){if(this.edges[this.edgeKey(o.parentNode.index,o.index)]=null,o.parentNode.index==t.index)break;if(null==o.parentNode)break;o=o.parentNode}}o=i;for(var d;;){if(null==o.parentNode)break;if(o.parentNode.index==t.index){o.parentNode=null;break}d=o,o=o.parentNode,d.parentNode=null}}},t.prototype.boundary=function(t){void 0===t&&(t=!0);var e;for(e=0;e<this.nodeLength;e++)this.cropLeafNodes(this.nodes[e]);for(e=0;e<this.nodeLength;e++)this.nodes[e].exclude||this.searchPolygon(this.nodes[e]);if(!t){var n,o=[];for(e=0;e<this.polygonLength;e++)for(n=0;n<this.polygonLength;n++)e!=n&&this.polygons[e].surround(this.polygons[n])&&o.push(n);for(;o.length>0;)this.removePolygon(o[o.length-1]),o.length-=1}},t}();a._instance=null;var s=function(){function t(t){this.index=t,this.connectedNodes=[],this.parentNode=null,this.exclude=!1}return t.prototype.clear=function(){this.connectedNodes.length=0,this.parentNode=null,this.exclude=!1},t}(),l=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.startIndex=0,this.stopIndex=0,this.startIndex=t,this.stopIndex=e}return Object.defineProperty(t.prototype,"key",{get:function(){return this.startIndex+"-"+this.stopIndex},enumerable:!0,configurable:!0}),t}()},"6SXR":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{areaInputRef:0}),(t()(),a._15(0,null,null,16,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),a._14(null,["户型面积/m²"])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,0,"img",[["class","close"],["src","/assets/view/windows/areaeditorwindow/close_3x.png"]],null,[[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchstart"===e){o=!1!==i.close()&&o}return o},null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,1,"div",[["class","desc"]],null,null,null,null,null)),(t()(),a._14(null,["真实的户型面积，有助于让户型图更精准"])),(t()(),a._14(null,["\n\n    "])),(t()(),a._15(0,[[1,0],["areaInput",1]],null,0,"input",[["class","areaInput"],["type","number"],["value",""]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,0,"img",[["class","clearInput"],["src","/assets/view/windows/areaeditorwindow/clear_3x.png"]],null,[[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchstart"===e){o=!1!==i.clear()&&o}return o},null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","saveButton"],["colorStyle","1"],["height","40px"],["label","保存"],["radius","8"],["textSize","16"],["width","112px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,16)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,16).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,16).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,16).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,16).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,16).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,16).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,16).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.finish()&&o}return o},l.a,l.b)),a._17(4308992,null,0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n"]))],function(t,e){t(e,16,0,"112px","40px","8","1","16","保存")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"area-editor-window",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("q3oq"),a=n("/oeL"),s=n("4Y86"),l=n("Esur"),u=n("IO5Z");n.d(e,"a",function(){return p});var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}}),p=a._19("area-editor-window",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"6p4A":function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("+N0H"),a=n("wRF1"),s=n("PbJf"),l=n("WFe8");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.navigationItems=[],i.radioButtons=[],i.optionInputs=[],i.wallThicknessInputOn=!1,i.storeyHeightInputOn=!1,i._tempWallThickness=0,i.finalWallThickness=0,i._tempStoreyHeight=0,i.finalStoreyHeight=0,e._instance=i,i}return u(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.navigationItems=this.navigationQueryList.toArray(),this.radioButtons=this.radioButtonQueryList.toArray(),this.optionInputs=this.optionInputQueryList.toArray(),this.window=this.windowRef.nativeElement,this.leftDiv=this.leftDivRef.nativeElement,this.rightDiv=this.rightDivRef.nativeElement,this.rightContent0=this.rightContent0Ref.nativeElement,this.rightContent1=this.rightContent1Ref.nativeElement,this.optionInputs[0].addEvent(a.a.OPTION_SETTING_INPUT_CHANGE,this.onWallThicknessInputChange,this),this.optionInputs[1].addEvent(a.a.OPTION_SETTING_INPUT_CHANGE,this.onStoreyHeightInputChange,this);var t=window.innerHeight-500;this.renderer.setStyle(this.window,"top",t+"px"),this.init()},e.prototype.open=function(){this.visible="true";for(var t=0,e=this.optionInputs;t<e.length;t++){e[t].startCheckLegalTimer()}},e.prototype.close=function(){this.visible="false";for(var t=0,e=this.optionInputs;t<e.length;t++){e[t].stopCheckLegalTimer()}},e.prototype.back=function(){this.renderer.setStyle(this.leftDiv,"display","block"),this.renderer.setStyle(this.rightDiv,"display","none"),this.backButton.visible="false"},e.prototype.changeView=function(t){this.renderer.setStyle(this.leftDiv,"display","none"),this.renderer.setStyle(this.rightDiv,"display","block"),this.backButton.visible="true",0==t?(this.renderer.setStyle(this.rightContent0,"display","block"),this.renderer.setStyle(this.rightContent1,"display","none")):(this.renderer.setStyle(this.rightContent0,"display","none"),this.renderer.setStyle(this.rightContent1,"display","block"))},e.prototype.selectWallThickness=function(t){for(var n=0,o=this.radioButtons;n<o.length;n++){o[n].selected=!1}this.radioButtons[t].selected=!0,this.tempWallThickness=e.WALL_THICKNESS_LIST[t],this.wallThicknessInputOn=!1,this.optionInputs[0].showInput(!1)},e.prototype.onWallThicknessInputChange=function(t){var e=t.data;if(this.wallThicknessInputOn=e.on,1==this.wallThicknessInputOn){for(var n=0,o=this.radioButtons;n<o.length;n++){o[n].selected=!1}this.tempWallThickness=parseInt(e.value)}},e.prototype.onStoreyHeightInputChange=function(t){var e=t.data;this.storeyHeightInputOn=e.on,1==this.storeyHeightInputOn&&(this.tempStoreyHeight=parseInt(e.value))},e.prototype.init=function(){var t=r.a.inst.setting;this.tempWallThickness=t.getWallThickness(s.a.MM),this.finalWallThickness=this.tempWallThickness,this.tempStoreyHeight=t.getStoreyHeight(s.a.MM),this.finalStoreyHeight=this.tempStoreyHeight;var n=e.WALL_THICKNESS_LIST.indexOf(this.tempWallThickness);n>=0&&(this.radioButtons[n].selected=!0)},e.prototype.wallThicknessDefault=function(){this.optionInputs[0].showInput(!1);for(var t=0,e=this.radioButtons;t<e.length;t++){e[t].selected=!1}this.radioButtons[1].selected=!0,this.tempWallThickness=10*l.a.DEFAULT_LENGTH,this.finalWallThickness=this.tempWallThickness},e.prototype.storeyHeightDefault=function(){this.optionInputs[1].showInput(!1),this.tempStoreyHeight=10*l.a.DEFAULT_HEIGHT,this.finalStoreyHeight=this.tempStoreyHeight},e.prototype.finish=function(){this.finalWallThickness=this.tempWallThickness,this.finalStoreyHeight=this.tempStoreyHeight,this.saveWallThickness(this.finalWallThickness),this.saveStoreyHeight(this.finalStoreyHeight),this.close()},Object.defineProperty(e.prototype,"tempWallThickness",{get:function(){return this._tempWallThickness},set:function(t){var e=Math.max(10*l.a.MIN_LENGTH,t);e=Math.min(10*l.a.MAX_LENGTH,e),this._tempWallThickness=e,this.navigationItems[0].number=e.toString(),this.optionInputs[0].value=t.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tempStoreyHeight",{get:function(){return this._tempStoreyHeight},set:function(t){var e=Math.max(10*l.a.MIN_HEIGHT,t);e=Math.min(10*l.a.MAX_HEIGHT,e),this._tempStoreyHeight=e,this.navigationItems[1].number=e.toString(),this.optionInputs[1].value=t.toString()},enumerable:!0,configurable:!0}),e.prototype.saveStoreyHeight=function(t){t=Math.round(t/10),window.localStorage.setItem("storeyHeight",t.toString()),r.a.inst.setting.setStoreyHeight(t)},e.prototype.saveWallThickness=function(t){t=Math.round(t/10),window.localStorage.setItem("wallThickness",t.toString()),r.a.inst.setting.setWallThickness(t)},e.prototype.maskTouch=function(){this.finish()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);h.WALL_THICKNESS_LIST=[100,120,180,200,240]},"6xdJ":function(t,e,n){"use strict";var o=n("Ldlf");n.d(e,"a",function(){return i});var i=function(){function t(){this.eventManager=o.a.inst}return t.prototype.addEvent=function(t,e,n){void 0===n&&(n=null),null==n&&(n=this),this.eventManager.addEvent(t,e,n,this)},t.prototype.removeEvent=function(t,e,n){void 0===n&&(n=null),null==n&&(n=this),this.eventManager.removeEvent(t,e,n,this)},t.prototype.dispatchEvent=function(t,e){void 0===e&&(e=null),e?this.eventManager.trigger(t,e):this.eventManager.trigger(t,this)},t}()},"7/ty":function(t,e,n){"use strict";var o=n("lpfp");n.d(e,"a",function(){return i});var i=function(){function t(){this.commands=new Array,this.points=new Array,this.drawPoints=new Array,this.init()}return t.prototype.init=function(){this.commands=new Array,this.points=new Array},t.prototype.destroy=function(){this.commands=null,this.points=null},t.prototype.addPointAndCommand=function(t,e){this.points.push(t),this.commands.push(e)},t.prototype.addPointXYAndCommand=function(t,e,n){this.points.push(new o.a(t,e)),this.commands.push(n)},t.prototype.addPoint=function(t){this.drawPoints.push(t)},t}()},"75Fo":function(t,e,n){"use strict";var o=n("J78+"),i=n("lpfp"),r=n("eUeh"),a=n("gn8q"),s=n("0/et"),l=n("60hF");n.d(e,"a",function(){return u});var u=function(){function t(){this.restrictPolygon=null,this.points=null,this.edges=null,this.shapes=null,this.points=[],this.edges=new r.a,this.shapes=[],this.restrictPolygon=new o.a}return Object.defineProperty(t.prototype,"pointCount",{get:function(){return this.points.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeCount",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shapeCount",{get:function(){return this.shapes.length},enumerable:!0,configurable:!0}),t.prototype.getPointAt=function(t){return this.points[t]},t.prototype.getEdges=function(){var t=[];for(var e in this.edges){var n=this.edges[e];t.push(new a.a(this.points[n.startIndex],this.points[n.stopIndex]))}return t},t.prototype.getShapeAt=function(t){return this.indexShapeToPolygon(this.shapes[t])},t.prototype.indexShapeToPolygon=function(t){for(var e=[],n=0,o=t.vertexIndexes;n<o.length;n++){var i=o[n];e.push(this.points[i])}return e},t.prototype.addEdge=function(t,e){var n=this.addPoint(t),o=this.addPoint(e),i=this.getEdgeByPointIndex(n,o);return i||(i=new h(n,o),this.edges[this.edgeKey(i.startIndex,i.stopIndex)]=i),i},t.prototype.addPath=function(t,e){if(void 0===e&&(e=!1),!(t.length<2)){for(var n=0;n<t.length-1;n++)this.addEdge(t[n],t[n+1]);e&&this.addEdge(t[t.length-1],t[0])}},t.prototype.deleteEdge=function(t,e,n){void 0===n&&(n=!1),delete this.edges[this.edgeKey(t,e)],n||delete this.edges[this.edgeKey(e,t)]},t.prototype.addShape=function(t){for(var e=new c,n=0;n<t.length;n++){var o=t[n],i=t[s.a.nextIndex(n,t.length)];this.addEdge(o,i),e.vertexIndexes.push(this.getPointIndex(o))}return this.shapes.push(e),e},t.prototype.buildEdgeShapeRelation=function(){for(var t in this.edges){var e=this.edges[t];e.relatedShapes.length=0}for(var n=0,o=this.shapes;n<o.length;n++)for(var i=o[n],r=0;r<i.vertexIndexes.length;r++){var a=i.vertexIndexes[r],l=i.vertexIndexes[s.a.nextIndex(r,i.vertexIndexes.length)];e=this.getEdgeByPointIndex(a,l,!0),e&&e.relatedShapes.push(i),e=this.getEdgeByPointIndex(l,a,!0),e&&e.relatedShapes.push(i)}},t.prototype.processEdgeClean=function(){var t=this.getEdges(),e=[],n=[];for(var o in this.edges){var r=this.edges[o],l=this.getPointAt(r.startIndex),u=this.getPointAt(r.stopIndex),h=s.a.clipLineWithSegments(l,u,t);if(0!=h.length){h.unshift(l),h.push(u);for(var c=0;c<h.length-1;c++)e.push(new a.a(h[c],h[c+1]));n.push(r)}}for(var p=0,d=n;p<d.length;p++){var r=d[p];this.deleteEdge(r.startIndex,r.stopIndex)}for(var f=0,g=e;f<g.length;f++){var m=g[f];this.addEdge(m.start,m.stop)}var _=new i.a;for(var o in this.edges){var r=this.edges[o],y=r.startIndex,b=r.stopIndex;if(this.edges[this.edgeKey(y,b)]&&this.edges[this.edgeKey(b,y)]&&this.deleteEdge(b,y,!0),s.a.isPointEqual(this.points[y],this.points[b]))this.deleteEdge(y,b);else if(this.restrictPolygon&&this.restrictPolygon.points.length>3){if(_.setTo(.5*(this.points[y].x+this.points[b].x),.5*(this.points[y].y+this.points[b].y)),!this.restrictPolygon.containsOn(this.points[y])||!this.restrictPolygon.containsOn(this.points[b])||!this.restrictPolygon.containsOn(_)){this.deleteEdge(y,b);continue}if(this.restrictPolygon.holeCount>0){for(var v=!1,w=0,O=this.restrictPolygon.holes;w<O.length;w++){var x=O[w];if(x.containsIn(_)){v=!0;break}}if(v){this.deleteEdge(y,b);continue}}}}},t.prototype.mergeEnd=function(t){var e=this.getPointIndex(t);if(e==s.a.NONE_INDEX)return!1;var n,o=[];for(var i in this.edges){var n=this.edges[i];n.startIndex!=e&&n.stopIndex!=e||o.push(n)}if(2!=o.length)return!1;var r=o[0],a=o[1],l=r.startIndex!=e?r.startIndex:r.stopIndex,u=a.startIndex!=e?a.startIndex:a.stopIndex,h=this.getPointAt(l),c=this.getPointAt(u),p=h.subtract(c).length,d=t.subtract(h).length,f=t.subtract(c).length;if(!s.a.isNumberEqual(p,d+f))return!1;this.addEdge(h,c),this.deleteEdge(r.startIndex,r.stopIndex),this.deleteEdge(a.startIndex,a.stopIndex);for(var g=0,m=this.shapes;g<m.length;g++){var _=m[g],y=_.vertexIndexes.indexOf(e);y!=s.a.NONE_INDEX&&_.vertexIndexes.splice(y,1)}return!0},t.prototype.mergeEnds=function(){for(var t=0,e=this.points;t<e.length;t++){var n=e[t];this.mergeEnd(n)}},t.prototype.polygonize=function(t){void 0===t&&(t=!0);var e=l.a.getInstance();e.clear();for(var n in this.edges){var o=this.edges[n];e.addEdge(this.points[o.startIndex],this.points[o.stopIndex])}e.boundary(t),this.shapes.length=0;for(var i,r=0;r<e.polygonLength;r++)if(i=e.getPolygonAt(r)){for(var a=!1,s=0,u=this.restrictPolygon.holes;s<u.length;s++){var h=u[s];if(i.shapeEqual(h)){a=!0;break}}a||this.addShape(i.points)}},t.prototype.deleteLeafEdges=function(){this.buildEdgeShapeRelation();for(var t=this.edges.values,e=0,n=t;e<n.length;e++){var o=n[e];0==o.relatedShapes.length&&this.deleteEdge(o.startIndex,o.stopIndex)}},t.prototype.addPoint=function(t){var e=this.getPointIndex(t);return e!=s.a.NONE_INDEX?e:(this.points.push(t),this.points.length-1)},t.prototype.edgeKey=function(t,e){return t.toString()+"-"+e.toString()},t.prototype.getEdgeByPointIndex=function(t,e,n){return void 0===n&&(n=!1),this.edges[this.edgeKey(t,e)]?this.edges[this.edgeKey(t,e)]:n?null:this.edges[this.edgeKey(e,t)]?this.edges[this.edgeKey(e,t)]:null},t.prototype.getPointIndex=function(t){return this.getPointIndexByXY(t.x,t.y)},t.prototype.getPointIndexByXY=function(t,e){for(var n=0;n<this.points.length;n++)if(s.a.isNumberEqual(t,this.points[n].x)&&s.a.isNumberEqual(e,this.points[n].y))return n;return-1},t}(),h=function(){function t(t,e){this.startIndex=t,this.stopIndex=e,this.relatedShapes=[]}return t}(),c=function(){function t(){this.vertexIndexes=[]}return t}()},"7Lpl":function(t,e,n){"use strict";var o=n("0/et");n.d(e,"a",function(){return i});var i=function(){function t(e,n){void 0===n&&(n=t.DEFAULT_OFFSET),this.points=null,this.edges=null,this.points=e,this.edges=[];for(var i=0;i<this.points.length;i++)this.edges.push(new r(i,o.a.nextIndex(i,this.points.length),n))}return t.prototype.setEdgeOffset=function(t,e,n){var o=this.findEdgeByPoint(t,e);return!!o&&(o.offset=n,!0)},t.prototype.deflate=function(){for(var t=[],e=0;e<this.points.length;e++){var n=o.a.preIndex(e,this.points.length),i=o.a.nextIndex(e,this.points.length),r=this.points[n],a=this.points[e],s=this.points[i],l=this.findEdgeByPointIndex(n,e),u=this.findEdgeByPointIndex(e,i),h=o.a.rotateVector(r.subtract(a),.5*Math.PI);h=h.normalize().multiply(l.offset);var c=o.a.rotateVector(s.subtract(a),-.5*Math.PI);c=c.normalize().multiply(u.offset);var p=o.a.cornerOffset(h,c);p?t.push(a.add(p)):(t.push(a.add(h)),t.push(a.add(c)))}return t},t.prototype.findEdgeByPoint=function(t,e){var n=this.getPointIndex(t),i=this.getPointIndex(e);return n==o.a.NONE_INDEX||i==o.a.NONE_INDEX?null:this.findEdgeByPointIndex(n,i)},t.prototype.findEdgeByPointIndex=function(t,e){for(var n=0,o=this.edges;n<o.length;n++){var i=o[n];if(i.startIndex==t&&i.stopIndex==e)return i;if(i.startIndex==e&&i.stopIndex==t)return i}return null},t.prototype.getPointIndex=function(t){for(var e=0;e<this.points.length;e++)if(o.a.isPointEqual(this.points[e],t))return e;return o.a.NONE_INDEX},t}();i.DEFAULT_OFFSET=0;var r=function(){function t(t,e,n){this.startIndex=t,this.stopIndex=e,this.offset=n}return t}()},"7Vs3":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.FAST=0,o.REAL=1,o.OFFLINE=2},"7vHI":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.dataList=[]}return t.prototype.add=function(t,e){var n=this.getVO(t);n?n.value=e:(n=new i,n.key=t,n.value=e,this.dataList.push(n))},t.prototype.remove=function(t){for(var e=0;e<this.dataList.length;e++){this.dataList[e].key==t&&this.dataList.splice(e,1)}},t.prototype.getVO=function(t){for(var e=0,n=this.dataList;e<n.length;e++){var o=n[e];if(o.key==t)return o}return null},t.prototype.getKey=function(t){for(var e=0,n=this.dataList;e<n.length;e++){var o=n[e];if(o.value==t)return o.key}return null},t.prototype.getValue=function(t){var e=this.getVO(t);return e?e.value:null},Object.defineProperty(t.prototype,"keys",{get:function(){for(var t=[],e=0,n=this.dataList;e<n.length;e++){var o=n[e];t.push(o.key)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){for(var t=[],e=0,n=this.dataList;e<n.length;e++){var o=n[e];t.push(o.value)}return t},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.dataList=[]},t}(),i=function(){function t(){}return t}()},"7vVH":function(t,e,n){"use strict";var o=n("6xdJ");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){var e=t.call(this)||this;return e.name="",e._x=0,e._y=0,e._width=0,e._height=0,e._scaleX=1,e._scaleY=1,e._rotation=0,e._depth=1,e._alpha=1,e._visible=!0,e._gpu=!1,e.createDom(),e}return i(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return""},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){""!=this.tagName&&(this._dom=document.createElement(this.tagName),this._dom.style.position="absolute"),this.x=0,this.y=0},e.prototype.onAdd=function(){},e.prototype.processOnAdd=function(){this.onAdd()},e.prototype.onRemove=function(){this.parent=null,this._stage=null},e.prototype.processOnRemove=function(){this.onRemove()},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this.updateTransform()},enumerable:!0,configurable:!0}),e.prototype.setXY=function(t,e){this._x=t,this._y=e,this.updateTransform()},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._dom&&(this._dom.style.width=t.toString()+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._dom&&(this._dom.style.height=t.toString()+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.updateTransform()},enumerable:!0,configurable:!0}),e.prototype.setScale=function(t,e){this._scaleX=t,this._scaleY=e,this.updateTransform()},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gpu",{set:function(t){this._gpu=t,this.updateTransform()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t,this._dom&&(this._dom.style.zIndex=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t,this._dom&&(this._dom.style.opacity=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this._dom&&(this._dom.style.display=0==t?"none":"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{set:function(t){this._dom&&this._dom.setAttribute("title",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this._dom&&(this._dom.style.cursor=t)},enumerable:!0,configurable:!0}),e.prototype.updateTransform=function(){if(this._dom){var t=void 0;t=1==this._gpu?"translateZ(0) ":"";var e="translate("+this._x+"px,"+this._y+"px) ",n="scale("+this._scaleX+","+this._scaleY+") ",o="rotate("+this._rotation+"deg) ",i=e+n+o+t;this._dom.style.webkitTransform=i,this._dom.style.transform=i}},e.prototype.setParent=function(t){this.parent=t},e.prototype.setStage=function(t){this._stage=t},Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dom",{get:function(){return this._dom},enumerable:!0,configurable:!0}),e.prototype.drawToRenderStage=function(t){},e.prototype.addEventListener=function(t,e,n){void 0===n&&(n=!1),this._dom&&this._dom.addEventListener(t,e,n)},e.prototype.removeEventListener=function(t,e){void 0===e&&(e=null),this._dom&&this._dom.removeEventListener(t,e)},e.prototype.getEventTargetRef=function(t){return t==this._dom?this.dom instanceof HTMLCanvasElement?this.parent:this:null},Object.defineProperty(e.prototype,"mouseEventEnable",{set:function(t){this.dom.style.pointerEvents=1==t?"auto":"none"},enumerable:!0,configurable:!0}),e}(o.a)},"81jS":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{height:100%;background:#fff;border-radius:20px}.bg[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{position:absolute;width:100%}.title[_ngcontent-%COMP%]{left:0;top:50px;height:35px;line-height:35px;text-align:center;font-size:18px;font-family:PingFang SC;font-weight:400;color:#666}.close[_ngcontent-%COMP%]{position:absolute;right:12px;top:12px;width:30px;height:30px}"]},"8UFV":function(t,e,n){"use strict";var o=n("SScf"),i=n("mxvy"),r=n("lpfp"),a=n("+N0H");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n){var o=t.call(this,!1,!1)||this;return o.lastMousePoint=new r.a,o.lastMousePoints=[],o.lastScenePoint=new r.a,o.lastScale=1,o.hasMouseDown=!1,o.gpu=!0,o.scene2d=new i.a,o.scene2d.viewPort=o,o.scene2d.open(),o.addChild(o.scene2d),o.width=e,o.height=n,o}return s(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"viewPort2d"},enumerable:!0,configurable:!0}),e.prototype.center=function(t){void 0===t&&(t=.9);var e=this.width,n=this.height,o=a.a.inst.centerPoint,i=a.a.inst.boundRect;if(i.height/i.width>n/e)var r=n/i.height*t;else var r=e/i.width*t;this.scene2d.setScale(r,r);var s=e/2-o.x*r,l=n/2-o.y*r;this.scene2d.setXY(s,l)},e}(o.a)},"8gSQ":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{titleBg:0}),a._13(402653184,2,{targetInput:0}),a._13(402653184,3,{bluetoothButton:0}),a._13(402653184,4,{key0:0}),a._13(402653184,5,{key1:0}),a._13(402653184,6,{key2:0}),a._13(402653184,7,{key3:0}),a._13(402653184,8,{key4:0}),a._13(402653184,9,{key5:0}),a._13(402653184,10,{key6:0}),a._13(402653184,11,{key7:0}),a._13(402653184,12,{key8:0}),a._13(402653184,13,{key9:0}),a._13(402653184,14,{removeKey:0}),a._13(402653184,15,{confirmKey:0}),(t()(),a._15(0,[[1,0],["titleBg",1]],null,9,"div",[["class","titleBg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","34px"],["textalign","left"],["width","240px"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,19)._touchMove(n)&&o}return o},s.a,s.b)),a._17(4308992,[[2,4],["input",4]],0,l.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],textalign:[2,"textalign"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","bluetoothButton"],["colorStyle","1"],["height","26px"],["label","测量"],["textSize","16"],["width","64px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,23)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,23).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,23).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,23).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,23).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,23).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,23).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,23).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.measure()&&o}return o},h.a,h.b)),a._17(4308992,[[3,4],["bluetoothButton",4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col1"],["colorStyle","2"],["label","1"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,28)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,28).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,28).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,28).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,28).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,28).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,28).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,28).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("1")&&o}return o},h.a,h.b)),a._17(4308992,[[5,4],["key1",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col2"],["colorStyle","2"],["label","2"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,31)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,31).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,31).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,31).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,31).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,31).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,31).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,31).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("2")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4],["key2",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col3"],["colorStyle","2"],["label","3"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,34)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,34).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,34).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,34).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,34).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,34).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,34).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,34).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("3")&&o}return o},h.a,h.b)),a._17(4308992,[[7,4],["key3",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"icon-button",[["bgColor","#FFFFFF"],["bgDownColor","#EEEEEE"],["class","removeButton col4"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,37)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,37).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,37).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,37).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,37).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,37).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,37).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,37).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.remove()&&o}return o},p.a,p.b)),a._17(4308992,[[14,4],["removeKey",4]],0,d.a,[a.Q,a._18],{iconUp:[0,"iconUp"],iconDown:[1,"iconDown"],bgColor:[2,"bgColor"],bgDownColor:[3,"bgDownColor"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col1"],["colorStyle","2"],["label","4"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,40)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,40).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,40).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,40).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,40).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,40).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,40).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,40).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("4")&&o}return o},h.a,h.b)),a._17(4308992,[[8,4],["key4",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col2"],["colorStyle","2"],["label","5"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,43)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,43).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,43).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,43).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,43).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,43).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,43).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,43).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("5")&&o}return o},h.a,h.b)),a._17(4308992,[[9,4],["key5",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col3"],["colorStyle","2"],["label","6"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,46)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,46).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,46).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,46).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,46).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,46).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,46).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,46).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("6")&&o}return o},h.a,h.b)),a._17(4308992,[[10,4],["key6",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col4"],["colorStyle","2"],["label","0"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,49)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,49).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,49).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,49).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,49).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,49).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,49).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,49).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("0")&&o}return o},h.a,h.b)),a._17(4308992,[[4,4],["key0",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col1"],["colorStyle","2"],["label","7"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,52)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,52).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,52).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,52).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,52).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,52).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,52).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,52).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("7")&&o}return o},h.a,h.b)),a._17(4308992,[[11,4],["key7",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col2"],["colorStyle","2"],["label","8"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,55)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,55).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,55).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,55).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,55).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,55).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,55).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,55).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("8")&&o}return o},h.a,h.b)),a._17(4308992,[[12,4],["key8",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","numberButton col3"],["colorStyle","2"],["label","9"],["radius","0"],["textSize","24"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,58)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,58).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,58).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,58).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,58).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,58).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,58).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,58).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.add("9")&&o}return o},h.a,h.b)),a._17(4308992,[[13,4],["key9",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["border","false"],["class","confirmButton col4"],["colorStyle","4"],["label","确定"],["radius","0"],["textSize","20"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,61)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,61).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,61).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,61).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,61).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,61).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,61).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,61).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.confirm()&&o}return o},h.a,h.b)),a._17(4308992,[[15,4],["confirmKey",4]],0,c.a,[a.Q,a._18],{radius:[0,"radius"],colorStyle:[1,"colorStyle"],border:[2,"border"],textSize:[3,"textSize"],label:[4,"label"]},null)],function(t,e){var n=e.component;t(e,19,0,"240px","34px","left");t(e,23,0,"64px","26px","1","16","测量");t(e,28,0,"0","2","false","24","1");t(e,31,0,"0","2","false","24","2");t(e,34,0,"0","2","false","24","3");t(e,37,0,n.removeIconUp,n.removeIconDown,"#FFFFFF","#EEEEEE");t(e,40,0,"0","2","false","24","4");t(e,43,0,"0","2","false","24","5");t(e,46,0,"0","2","false","24","6");t(e,49,0,"0","2","false","24","0");t(e,52,0,"0","2","false","24","7");t(e,55,0,"0","2","false","24","8");t(e,58,0,"0","2","false","24","9");t(e,61,0,"0","4","false","20","确定")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"virtual-number-board",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,g)),a._17(4308992,null,0,u.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("RH69"),a=n("/oeL"),s=n("nhaO"),l=n("Jj2e"),u=n("vqfy"),h=n("Esur"),c=n("IO5Z"),p=n("0NNx"),d=n("bO4n");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=a._11({encapsulation:0,styles:f,data:{}});a._19("virtual-number-board",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"8kJt":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;margin:0 auto}"]},"8zhN":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{virtualNumberBoard:0}),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"virtual-number-board",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,3)._touchMove(n)&&o}return o},s.a,s.b)),a._17(4308992,[[1,4],["virtualNumberBoard",4]],0,l.a,[a.Q,a._18],null,null)],function(t,e){t(e,3,0)},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"ruler-setting",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,u.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("r4pW"),a=n("/oeL"),s=n("8gSQ"),l=n("vqfy"),u=n("CGmY");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("ruler-setting",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},"9AqS":function(t,e,n){"use strict";var o=n("/xq4");n.n(o);n.d(e,"a",function(){return i});var i=function(){function t(){}return t.encrypt=function(e){var n=pako.deflate(e),i=o.lib.WordArray.create(n),r=o.enc.Utf8.parse(t.KEY),a=o.enc.Utf8.parse(t.IV);return o.DES.encrypt(i,r,{iv:a,mode:o.mode.CBC,padding:o.pad.Pkcs7}).toString()},t.decrypt=function(e){var n=o.enc.Utf8.parse(t.KEY),i=o.enc.Utf8.parse(t.IV),r=o.DES.decrypt(e,n,{iv:i,mode:o.mode.CBC,padding:o.pad.Pkcs7}),a=t.Int32ToUint8(r.words,r.sigBytes);return pako.inflate(a,{to:"string"})},t.Uint8ToInt32=function(t){for(var e=t.byteLength,n=[],o=0;o<e;o++)n[o>>>2]|=t[o]<<24-o%4*8;return n},t.Int32ToUint8=function(t,e){e||(e=4*t.length);for(var n=[],o=Math.ceil(e/4),i=0;i<o;i++)n[4*i]=t[i]>>24&255,n[4*i+1]=t[i]>>16&255,n[4*i+2]=t[i]>>8&255,n[4*i+3]=t[i]>>0&255;return n=n.splice(0,e),new Uint8Array(n)},t}();i.KEY="f056380ed970b169",i.IV="912467427a354o9x"},"9GFw":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.unionArrayArrays=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=!1);for(var i,r=new e,a=0,s=t;a<s.length;a++)i=s[a],r=r.concat(i);if(o)for(var l,u=0,h=0,c=0;c<t.length;c++){for(i=t[c],l=u+i.length,h=u;h<l;h++)r[h]+=n[c];u=l}return r},t.getReversedIndices=function(t){for(var e=new Array(t.length),n=0;n<t.length/3;n++)e[3*n]=t[3*n],e[3*n+1]=t[3*n+2],e[3*n+2]=t[3*n+1];return e},t.getElementEX=function(t,e){return e%=t.length,e<0&&(e+=t.length),t[e]},t.getModIndex=function(t,e){return t%=e,t<0&&(t+=e),t},t}()},"9zqf":function(t,e,n){"use strict";var o=n("FC3T"),i=n("J78+"),r=n("lpfp"),a=n("BGKY"),s=n("WYR6"),l=n("7Lpl"),u=n("0/et"),h=n("GJSB");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(){var e=t.call(this)||this;return e.funcName="未命名",e.hasCustomLight=!1,e._centerPoint=new r.a(0,0),e._walls=new Array,e._boundRectangle=new s.a,e.polygon=new i.a,e._floorMaterialNo="223e41266d1e11e79f8200163e0e72dc",e._ceilingMaterialNo="01ca25266d1a11e7b62200163e0e72dc",e}return c(e,t),Object.defineProperty(e.prototype,"innerPolygon",{get:function(){return this.polygon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this.polygon.getCenterPoint(this._centerPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.centerPoint.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.centerPoint.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floorMaterialNo",{get:function(){return this._floorMaterialNo},set:function(t){this._floorMaterialNo!=t&&(this._floorMaterialNo=t,this.dispatchEvent(new a.a(a.a.FLOOR_MATERIAL_CHANGE),this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floorRotation",{get:function(){return this._floorRotation},set:function(t){this._floorRotation!=t&&(this._floorRotation=t,this.dispatchEvent(new a.a(a.a.FLOOR_UV_CHANGE),this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ceilingMaterialNo",{get:function(){return this._ceilingMaterialNo},set:function(t){this._ceilingMaterialNo!=t&&(this._ceilingMaterialNo=t,this.dispatchEvent(new a.a(a.a.CEILING_MATERIAL_CHANGE),this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"floorMaterial",{get:function(){return h.a.getInstance().getItemByNo(this.floorMaterialNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ceilingMaterial",{get:function(){return h.a.getInstance().getItemByNo(this.ceilingMaterialNo)},enumerable:!0,configurable:!0}),e.prototype.createWallRelation=function(){var t,e,n,o=this.polygon.vertexCount;for(t=0;t<o;t++)e=this.polygon.points[t],n=this.polygon.points[(t+1)%o],this.sceneObject.getWallByEnds(e,n)},e.prototype.getLocalPolygon=function(t){if(void 0===t&&(t=!0),this._localPolygon||(this._localPolygon=new i.a),0==this._localPolygon.vertexCount||t){this._localPolygon.clear();for(var e=this.sceneToLocalMatrix,n=0,o=this.polygon.points;n<o.length;n++){var r=o[n];this._localPolygon.addPoint(e.transformPoint(r))}}return this._localPolygon},e.prototype.getInnerPolygon=function(){for(var t=new l.a(this.getLocalPolygon(!1).vertices,.5*this.sceneObject.settingsWallLength),e=0;e<this.polygon.vertexCount;e++){var n=this.polygon.getVertexAt(e),o=this.polygon.getVertexNextAt(e),r=this.sceneObject.getWallByEnds(n,o);r&&t.setEdgeOffset(this.sceneToLocal(n),this.sceneToLocal(o),.5*r.length)}for(var a=t.deflate(),s=new i.a,u=0,h=a;u<h.length;u++){var c=h[u];s.addVertexXY(c.x,c.y)}return s},Object.defineProperty(e.prototype,"walls",{get:function(){this._walls.length=0;for(var t in this.sceneObject.wallObjects){var e=this.sceneObject.wallObjects[t];e.forwardRoomName!=this.name&&e.backwardRoomName!=this.name&&e.aloneRoomName!=this.name||this._walls.push(e)}return this._walls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return Math.abs(this.polygon.area/1e4)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundRectangle",{get:function(){if(0==this.polygon.vertexCount)return this._boundRectangle.x=-100,this._boundRectangle.y=-100,this._boundRectangle.width=200,this._boundRectangle.height=200,this._boundRectangle;for(var t,e=Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,i=-Number.MAX_VALUE,r=0;r<this.polygon.vertexCount;r++)t=this.polygon.getPointAt(r),e=Math.min(t.x,e),n=Math.min(t.y,n),o=Math.max(t.x,o),i=Math.max(t.y,i);var a;for(var s in this.sceneObject.wallObjects)a=this.sceneObject.wallObjects[s],a.isArcwall&&1==a.roomCount&&(t=a.localToScene(a.anchor),e=Math.min(t.x,e),n=Math.min(t.y,n),o=Math.max(t.x,o),i=Math.max(t.y,i));return e-=this.sceneObject.settingsWallLength,n-=this.sceneObject.settingsWallLength,o+=this.sceneObject.settingsWallLength,i+=this.sceneObject.settingsWallLength,this._boundRectangle.x=e,this._boundRectangle.y=n,this._boundRectangle.width=o-e,this._boundRectangle.height=i-n,this._boundRectangle},enumerable:!0,configurable:!0}),e.prototype.connect=function(t){var e;for(var n in this.sceneObject.openingObjects){var o=this.sceneObject.openingObjects[n];if(o.transparent&&((e=o.wall)&&2==e.roomCount)){if(e.forwardRoomName==this.name&&e.backwardRoomName==t.name)return!0;if(e.forwardRoomName==t.name&&e.backwardRoomName==this.name)return!0}}for(var n in this.sceneObject.wallObjects)if(e=this.sceneObject.wallObjects[n],u.a.less(e.height,this.sceneObject.settingsWallHeight)&&(e.forwardRoomName==this.name&&e.backwardRoomName==t.name||e.forwardRoomName==t.name&&e.backwardRoomName==this.name))return!0;return!1},e.prototype.copyFromData=function(t){this.floorMaterialNo!=t.floorMaterialNo&&(this.floorMaterialNo=t.floorMaterialNo),t.hasOwnProperty("floorRotation")&&this.floorRotation!=t.floorRotation&&(this.floorRotation=t.floorRotation),this.ceilingMaterialNo!=t.ceilingMaterialNo&&(this.ceilingMaterialNo=t.ceilingMaterialNo)},e.prototype.dumpData=function(){var t=new Object;t.points=[];for(var e=0;e<this.polygon.vertexCount;e++)t.points.push({x:this.polygon.points[e].x,y:this.polygon.points[e].y});return t.name=this.name,t.floorMaterialNo=this.floorMaterialNo,t.floorRotation=this.floorRotation,t.ceilingMaterialNo=this.ceilingMaterialNo,t.tag=this.funcName,t},e.loadData=function(t){var n=new e;n.name=t.name;var o=t.points;for(var i in o){var r=o[i];n.polygon.addVertexXY(r.x,r.y)}return t.hasOwnProperty("floorMaterialNo")&&(n._floorMaterialNo=t.floorMaterialNo),t.hasOwnProperty("floorRotation")&&(n._floorRotation=t.floorRotation),t.hasOwnProperty("ceilingMaterialNo")&&(n._ceilingMaterialNo=t.ceilingMaterialNo),t.hasOwnProperty("tag")&&(n.funcName=t.tag),n},e}(o.a)},AFYf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".image[_ngcontent-%COMP%]{width:20px;height:20px;margin:0 auto;background-size:contain}.label[_ngcontent-%COMP%]{float:left;margin-top:3px;text-align:center;font-size:12;color:#000}.arrow[_ngcontent-%COMP%]{float:left;width:6px;height:4px;margin-top:7px;margin-left:3px}"]},ARHu:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{float:left;margin-left:15px;font-size:14px}#slide[_ngcontent-%COMP%]{float:right;margin-top:10px;margin-right:15px;width:40px;height:22px;border-radius:11px}.slideOn[_ngcontent-%COMP%]{border:1px solid #00c0c7}#point[_ngcontent-%COMP%], .slideOff[_ngcontent-%COMP%]{border:1px solid #e3e3e3}#point[_ngcontent-%COMP%]{margin-top:-1px;width:22px;height:22px;background:#fff;box-shadow:0 2px 4px 0 hsla(0,0%,73%,.5);border-radius:11px}.pointOn[_ngcontent-%COMP%]{margin-left:20px}.pointOff[_ngcontent-%COMP%]{margin-left:-1px}"]},Atgq:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.inputMarkedPolys=null,this.inputFreshPolys=null,this.outputReservedPolys=null,this.outputUpdatePolys=null,this.outputCreatePolys=null,this.outputDeletePolys=null,this.inputMarkedPolys=[],this.inputFreshPolys=[],this.outputReservedPolys=[],this.outputUpdatePolys=[],this.outputCreatePolys=[],this.outputDeletePolys=[]}return t.prototype.clear=function(){this.inputMarkedPolys.length=0,this.inputFreshPolys.length=0,this.outputReservedPolys.length=0,this.outputUpdatePolys.length=0,this.outputCreatePolys.length=0,this.outputDeletePolys.length=0},t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.merge=function(){var t,e,n,o,i;for(t=0;t<this.inputFreshPolys.length;){for(n=this.inputFreshPolys[t],i=!1,e=0;e<this.inputMarkedPolys.length;e++){if(o=this.inputMarkedPolys[e],n.equal(o)){n.mark=o.mark,this.outputReservedPolys.push(n),this.inputMarkedPolys.splice(e,1),i=!0;break}if(n.shapeEqual(o)){n.mark=o.mark,this.outputUpdatePolys.push(n),this.inputMarkedPolys.splice(e,1),i=!0;break}}i?this.inputFreshPolys.splice(t,1):t+=1}for(t=0;t<this.inputFreshPolys.length;){for(n=this.inputFreshPolys[t],i=!1,e=0;e<this.inputMarkedPolys.length;e++)if(o=this.inputMarkedPolys[e],n.adjacent(o)){n.mark=o.mark,this.outputUpdatePolys.push(n),this.inputMarkedPolys.splice(e,1),i=!0;break}i?this.inputFreshPolys.splice(t,1):t+=1}for(var r=0,a=this.inputMarkedPolys;r<a.length;r++)o=a[r],this.outputDeletePolys.push(o);for(var s=0,l=this.inputFreshPolys;s<l.length;s++)n=l[s],this.outputCreatePolys.push(n)},t}();o._instance=null},BGKY:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.ROTATION_CHANGE="RotationChange",r.SCALE_CHANGE="ScaleChange",r.POSOITION_CHANGE="PositionChange",r.BEFORE_ITEM_NO_CHANGE="BeforeItemNoChange",r.AFTER_ITEM_NO_CHANGE="AfterItemNoChange",r.SCENE_CHANGE="SceneChange",r.REPLACING_TARGET_CHANGE="ReplacingTargetChange",r.REMOVED="Removed",r.FLOOR_MATERIAL_CHANGE="FloorMaterialChange",r.FLOOR_UV_CHANGE="FloorUVChange",r.CEILING_MATERIAL_CHANGE="FloorMaterialChange",r.FORWARD_MATERIAL_CHANGE="ForwardMaterialChange",r.BACKWARD_MATERIAL_CHANGE="BackwardMaterialChange",r.SKIRTING_MATERIAL_CHANGE="SkirtingMaterialChange",r.OPENING_MATERIAL_CHANGE="OpeningMaterialChange"},BM0e:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return Object.defineProperty(t,"isIOS",{get:function(){var t=navigator.userAgent.toLowerCase(),e=t.indexOf("ipad"),n=t.indexOf("iphone");return e>=0||n>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return navigator.userAgent.toLowerCase().indexOf("android")>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMobile",{get:function(){if(null==t._isMobile){var e=navigator.userAgent.toLowerCase();t._isMobile=/Android|webOS|iPhone|iPod|ipad|BlackBerry/i.test(e)}return t._isMobile},enumerable:!0,configurable:!0}),t.isWeiXin=function(){return navigator.userAgent.indexOf("MicroMessenger")>-1},t}();o._isMobile=null},"C+EA":function(t,e,n){"use strict";var o=n("MPvg"),i=n("7vHI"),r=n("YDFo");n.d(e,"a",function(){return a});var a=function(){function t(){}return t.createColorTexture=function(t,e){void 0===e&&(e=1);var n=new r.a;return n.isPivotCenter=!1,n.width=4,n.height=4,n.beginFill(t,e),n.lineStyle(0,0,0),n.drawRect(0,0,4,4),n.endFill(),new o.g(n.canvasDom)},t.createStandardMaterial=function(t){var e={map:t,normalMap:this.defaultNormalResource};return new o.h(e)},Object.defineProperty(t,"defaultNormalResource",{get:function(){var e=this.textureDict.getValue(t.DEFAULT_NORMAL_RESOURCE);return null==e&&(e=this.createColorTexture(8355839),this.textureDict.add(t.DEFAULT_NORMAL_RESOURCE,e)),e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultColorMaterial",{get:function(){return new o.i({color:13421772})},enumerable:!0,configurable:!0}),t.addTextureResource=function(t,e,n,i){if(void 0===n&&(n=0),void 0===i&&(i=0),null==this.textureDict.getValue(t)){e.wrapS=o.f,e.wrapT=o.f;var r={resource:e,width:120,height:120};this.textureDict.add(t,r)}},t.removeResoruce=function(t){var e=this.textureDict.getValue(t);e&&(e.resource=null,this.textureDict.remove(t))},t.getTextureResourceByKey=function(t){return this.textureDict.getValue(t)},t.addDiffuseMtl=function(t,e){this.mtlDict.getValue(t)||this.mtlDict.add(t,e)},t.removeDiffuseMtl=function(t){var e=this.mtlDict.getValue(t);e&&(e.dispose(),this.mtlDict.remove(t))},t.getDiffuseMtlByKey=function(t){return this.mtlDict.getValue(t)},t.dispose=function(){var t;for(t in this.textureDict){this.textureDict.getValue(t).resource=null}this.textureDict.dispose(),this.mtlDict.dispose()},t}();a.textureDict=new i.a,a.mtlDict=new i.a,a.DEFAULT_NORMAL_RESOURCE="default_noraml_resource"},CGmY:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("Qb7I"),a=n("lpfp"),s=n("+N0H"),l=n("Yhhh"),u=n("YihH"),h=n("+ByO"),c=n("CW6F"),p=n("bDfz");n.d(e,"a",function(){return f});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=0,e=window.innerWidth;e<=512?t=Math.round(.586*e):(e=512,t=300),this.width=e+"px",this.height=t+"px",this.updateComponentProperty(),this.virtualNumberBoard.updateSize(this.widthNumber,this.heightNumber),this.virtualNumberBoard.addEvent(p.a.VIRTUAL_NUMBER_BOARD_CONFIRM,this.onConfirm,this)},e.prototype.setData=function(t,e){this.rulerInput&&this.rulerInput!=t&&(this.rulerInput.selected=!1),this.rulerInput=t,this.virtualNumberBoard.open(e)},e.prototype.onConfirm=function(t){var e,n,o,i=s.a.inst,p=t.data/10,d=this.rulerInput.inputData,f=d.value/10,g=this.rulerInput.inputData.direct;(o=d.maxValue?Math.min(p,d.maxValue)-f:p-f)<0&&(g.x*=-1,g.y*=-1);var m=Math.abs(o);switch(g.normalize(m),d.mode){case r.a.OPENING_LENGTH:var _=d.target;e=new a.a(_.realX,_.realY),n=e.add(g),_.moveOpening(n),i.updateRuler(),i.change(!0,!1);break;case r.a.NEIGHBOR_WALL_LENGTH:var y=d.target;e=new a.a(y.realX,y.realY),n=e.add(g);1==y.moveWall(n,!1)&&i.change(!0,!0);break;case r.a.MODEL_LENGTH:var b=d.target;e=new a.a(b.realX,b.realY),n=e.add(g),b.realX=n.x,b.realY=n.y,b instanceof l.a?b.calculateTransform():b instanceof c.a&&b.calculateTransform(),i.change(!0,!1),i.updateRuler();break;case r.a.CORNER_LENGTH:var v=d.target;e=new a.a(v.realX,v.realY),n=e.add(g),v.moveCorner(n),i.change(!0,!0)}u.a.inst.close(),h.a.inst.moveCenter()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},CQOF:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("WFe8"),a=n("YihH"),s=n("FtES"),l=n("sA2y");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e,n){return t.call(this,e,n)||this}return u(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.width="255px",a.a.inst.addEvent(s.a.SETTINGS_CONFIRM,this.onConfirm,this)},e.prototype.setTargetWall=function(t){this.targetWall=t,this.wallWidthInput.finalLabel=Math.round(10*t.realWidth).toString(),this.wallLengthInput.finalLabel=Math.round(10*t.realLength).toString(),this.wallWidthInput.selected=!1,this.wallLengthInput.selected=!1;var e=t.startCorner,n=t.stopCorner;e.connectedWalls.length<=1||n.connectedWalls.length<=1?this.wallWidthInput.editable=!0:this.wallWidthInput.editable=!1},e.prototype.showWallWidthSetting=function(){1==this.wallWidthInput.editable&&(this.wallWidthInput.selected=!0,this.currentInput=this.wallWidthInput,this.wallLengthInput.selected=!1,this.wallLengthInput.resetLabel(),a.a.inst.open(this.targetWall,Math.round(10*this.targetWall.realWidth)))},e.prototype.showWallLengthSetting=function(){1==this.wallLengthInput.editable&&(this.wallLengthInput.selected=!0,this.currentInput=this.wallLengthInput,this.wallWidthInput.selected=!1,this.wallWidthInput.resetLabel(),a.a.inst.open(this.targetWall,Math.round(10*this.targetWall.realLength)))},e.prototype.onConfirm=function(t){var e=t.data,n=e.target,o=e.value;if(this.targetWall==n&&this.currentInput){if(this.currentInput==this.wallWidthInput)this.targetWall.doChangeWidth(Math.round(o/10));else if(this.currentInput==this.wallLengthInput){var i=Math.round(o/10);(i>r.a.MAX_LENGTH||i<r.a.MIN_LENGTH)&&l.a.inst.warning("超出范围"),this.targetWall.doChangeLength(i)}this.setTargetWall(this.targetWall)}},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},CUWI:function(t,e,n){"use strict";var o=n("/oeL"),i=n("VwJn"),r=n("+N0H"),a=n("r4QP"),s=n("1DbD"),l=n("MIhx"),u=n("Dvc5"),h=n("0Itk"),c=n("/LiK"),p=n("GJSB"),d=n("0/et"),f=n("ot+B");n.d(e,"a",function(){return m});var g=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(t){function e(e,n){return t.call(this,e,n)||this}return g(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.sceneObject=h.a.getInstance(),this.scene3D=new i.a(this.webglCanvas.nativeElement),this.view.element.nativeElement.appendChild(this.scene3D.dom)},e.prototype.show=function(t){"true"==this.visible!=t&&(1==t?(this.visible="true",this.scene3D.start(),this.loadHuxing()):(this.visible="false",this.scene3D.clear(),this.scene3D.stop()))},e.prototype.loadHuxing=function(){for(var t,e=c.a.createPureUID(),n=this.dumpDesignData(),o=r.a.inst.no,i=r.a.inst.dumpData(),a=p.a.getInstance(),l=[],u=0,h=n.models;u<h.length;u++){t=h[u].itemNo,0==d.a.isStringEmptyOrNull(t)&&l.indexOf(t)<0&&0==a.hasItem(t)&&l.push(t)}for(var g=0,m=n.openings;g<m.length;g++){t=m[g].itemNo,0==d.a.isStringEmptyOrNull(t)&&l.indexOf(t)<0&&0==a.hasItem(t)&&l.push(t)}for(var _=0,y=n.rooms;_<y.length;_++){var b=y[_];t=b.floorMaterialNo,0==d.a.isStringEmptyOrNull(t)&&l.indexOf(t)<0&&0==a.hasItem(t)&&l.push(t),t=b.skirtingMaterialNo,0==d.a.isStringEmptyOrNull(t)&&l.indexOf(t)<0&&0==a.hasItem(t)&&l.push(t)}for(var v=0,w=n.walls;v<w.length;v++){var O=w[v];t=O.forwardMaterialNo,0==d.a.isStringEmptyOrNull(t)&&l.indexOf(t)<0&&0==a.hasItem(t)&&l.push(t),t=O.backwardMaterialNo,0==d.a.isStringEmptyOrNull(t)&&l.indexOf(t)<0&&0==a.hasItem(t)&&l.push(t)}if(l.length>0)for(var x=s.a.records,E=0,P=x;E<P.length;E++){var C=P[E];0==a.hasItem(C.no)&&a.addItem(new f.a(C.no,!0,C))}this.sceneObject.open(e,o,n,i,""),this.scene3D.initCameraController(),this.scene3D.rebuild()},e.prototype.dumpDesignData=function(){for(var t=r.a.inst.dumpData(),e=r.a.inst.centerPoint.reverse(),n=t.corners,o=0,i=n;o<i.length;o++){var s=i[o];s.x+=e.x,s.y+=e.y}for(var u=t.walls,h=0,c=u;h<c.length;h++){var p=c[h];p.forwardMaterialNo=l.a.DEFAULT_MATERIAL_3D_NO,p.backwardMaterialNo=l.a.DEFAULT_MATERIAL_3D_NO}for(var d=t.rooms,f=0,g=d;f<g.length;f++){var m=g[f];m.itemNo=l.a.DEFAULT_ROOM_3D_NOS[m.tag],m.ceilingMaterialNo=l.a.DEFAULT_MATERIAL_3D_NO,m.skirtingMaterialNo=l.a.DEFAULT_SKIRTING_MATERIAL_3D_NO,m.skirtingHeight=12,m.floorMaterialNo=l.a.DEFAULT_FLOOR_BOARD_MATERIAL_3D_NO,m.skirtingOn=1;for(var _=m.points,y=0,b=_;y<b.length;y++){var v=b[y];v.x+=e.x,v.y+=e.y}}for(var w=t.openings,O=0,x=w;O<x.length;O++){var E=x[O];switch(E.x+=e.x,E.y+=e.y,E.type){case a.a.DOOR_COMMON:E.itemNo=l.a.DEFAULT_DOOR_3D_NO,E.materialNo="";break;case a.a.DOOR_DOUBLE:E.itemNo=l.a.DEFAULT_DOUBLE_DOOR_3D_NO,E.materialNo="";break;case a.a.DOOR_SLIDING:E.itemNo=l.a.DEFAULT_SLIDING_DOOR_3D_NO,E.materialNo="";break;case a.a.WINDOW_COMMON:E.itemNo=l.a.DEFAULT_WINDOW_3D_NO,E.materialNo="";break;case a.a.WINDOW_FRENCH:E.itemNo=l.a.DEFAULT_FRENCH_WINDOW_3D_NO,E.materialNo="";break;case a.a.WINDOW_BAY:E.itemNo=l.a.DEFAULT_BAY_WINDOW_3D_NO,E.materialNo=""}}return t.models=[],t},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(u.a)},CW6F:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("/LiK"),a=n("PSoK"),s=n("lpfp"),l=n("EE9o"),u=n("0q51"),h=n("0/et"),c=n("UPT1"),p=n("PbJf"),d=n("jDyV"),f=n("/T2q"),g=n("aJ2T"),m=n("j8JM"),_=n("matE");n.d(e,"a",function(){return b});var y=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(){var e=t.call(this,!0,!0)||this;return e.structType=0,e.borderColor=0,e._drawMatrix=new l.a,e._mouseLastPoint=new s.a,e._mouseMovePoint=new s.a,e.dragTouchMoveHandlerLamda=function(t){e.dragTouchMoveHandler(t)},e.dragTouchEndHandlerLamda=function(t){e.dragTouchEndHandler(t)},e.borderColor=_.a.STRUCT_BORDER_COLOR,e.depth=i.a.STRUCT,e.forwardName=r.a.createPureUID(),e.backwardName=r.a.createPureUID(),e.startName=r.a.createPureUID(),e.stopName=r.a.createPureUID(),e}return y(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Struct"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.create=function(t,e){this.realWidth=t,this.realLength=e;var n=new a.a(0,0);this.scene.addCorner(n);var o=new a.a(0,0);this.scene.addCorner(o),this.startCornerName=n.name,this.stopCornerName=o.name},e.prototype.createFromCorner=function(t,e,n){this.startCornerName=e,this.stopCornerName=n;var o=this.scene.getCornerByName(e),i=this.scene.getCornerByName(n),r=i.point.subtract(o.point),a=r.length;this.realWidth=a,this.realLength=t,r=i.point.add(o.point),r.x/=2,r.y/=2,this.realX=r.x,this.realY=r.y,r=i.point.subtract(o.point);var s=Math.atan2(r.y,r.x);s*=180/Math.PI,this.rotation=s},e.prototype.clear=function(){var e=this.scene.getCornerByName(this.startCornerName);e&&this.scene.removeCorner(e);var n=this.scene.getCornerByName(this.stopCornerName);n&&this.scene.removeCorner(n),t.prototype.clear.call(this)},Object.defineProperty(e.prototype,"mirror",{get:function(){return this._mirror},set:function(t){this._mirror=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCornerName",{get:function(){return this._startCornerName},set:function(t){this._startCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCornerName",{get:function(){return this._stopCornerName},set:function(t){this._stopCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startName",{get:function(){return this._startName},set:function(t){this._startName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopName",{get:function(){return this._stopName},set:function(t){this._stopName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardName",{get:function(){return this._forwardName},set:function(t){this._forwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardName",{get:function(){return this._backwardName},set:function(t){this._backwardName=t},enumerable:!0,configurable:!0}),e.prototype.draw=function(){if(this.stage){this.graphics.clear();var t=this.realWidth,e=this.realLength;this.graphics.width=Math.floor(t/2)+2,this.graphics.height=Math.floor(e/2)+2,this.structType==d.a.PILLAR?(this.graphics.lineStyle(1,this.borderColor),this.graphics.beginFill(14211288),this.graphics.drawRect(-t>>1,-e>>1,t,e)):this.structType==d.a.FLUE&&(this.graphics.lineStyle(1,this.borderColor),this.graphics.beginFill(16777215),this.graphics.drawRect(-t>>1,-e>>1,t,e),t-=8,e-=8,this.graphics.lineStyle(1,this.borderColor),this.graphics.beginFill(14211288),this.graphics.drawRect(-t>>1,-e>>1,t,e),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor),this.graphics.moveTo(-t>>1,-e>>1),this.graphics.lineTo(1*t/3,1*-e/3),this.graphics.lineTo(t>>1,e>>1)),this.graphics.endFill()}},e.prototype.calculatePolygon=function(){this.polygon.clear(),this.polygon.addVertex(new s.a(-.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new s.a(.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new s.a(.5*this.realWidth,.5*this.realLength)),this.polygon.addVertex(new s.a(-.5*this.realWidth,.5*this.realLength))},e.prototype.updateCorners=function(){var t=new s.a(-this.realWidth>>1,0),e=new s.a(this.realWidth>>1,0);t=this.localToScene(t),e=this.localToScene(e);var n=this.scene.getCornerByName(this.startCornerName);n.realX=t.x,n.realY=t.y,n.calculateTransform(),n.visible=!1;var o=this.scene.getCornerByName(this.stopCornerName);o.realX=e.x,o.realY=e.y,o.calculateTransform(),o.visible=!1},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.calculatePolygon(),this.updateCorners(),this.draw()},e.prototype.touchStart=function(e){t.prototype.touchStart.call(this,e);var n=e.touches[0];this._tmpPoint.setTo(n.clientX,n.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseLastPoint.setTo(this._tmpPoint.x,this._tmpPoint.y),g.a.inst.focusTarget==this&&(this.stage.addEventListener(m.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(m.a.TOUCH_END,this.dragTouchEndHandlerLamda))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){g.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.borderColor=_.a.STRUCT_FOCUS_BORDER_COLOR,this.calculateTransform();var e={selectedItem:this,selectedPoint:new s.a};this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),null!=this.parent&&(this.borderColor=_.a.STRUCT_BORDER_COLOR,this.calculateTransform(),this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_UNSELECTED),this.scene))},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseMovePoint.setTo(this._tmpPoint.x,this._tmpPoint.y);var n=new s.a(this.realX,this.realY);n.x+=this._mouseMovePoint.x-this._mouseLastPoint.x,n.y+=this._mouseMovePoint.y-this._mouseLastPoint.y,n=this.calculateAdsorbVector2D(n.x,n.y,this.scene.scale,4),this.realX=n.x,this.realY=n.y,this._mouseLastPoint.copyFrom(this._mouseMovePoint),this.calculateTransform(),c.a.inst.showModelRuler(this,!1)}},e.prototype.dragTouchEndHandler=function(t){this.stage.removeEventListener(m.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(m.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.calculateTransform(),this.scene.change(),c.a.inst.showModelRuler(this,!0)},e.prototype.calculateAdsorbVector2D=function(t,e,n,o){void 0===n&&(n=1),void 0===o&&(o=6);var i=new u.a(o*Math.SQRT2/n,o/n);for(var r in this.scene.walls){var a=this.scene.walls[r];a.forwardRoom&&i.addEdge(a.localToScene(a.topLeft),a.localToScene(a.topRight)),a.backwardRoom&&i.addEdge(a.localToScene(a.bottomLeft),a.localToScene(a.bottomRight))}var c=new l.a;c.rotate(this.rotation/180*Math.PI),c.translate(t,e);for(var p,d,f=[c.transformPoint(new s.a(this.realWidth/2,this.realLength/2)),c.transformPoint(new s.a(-this.realWidth/2,this.realLength/2)),c.transformPoint(new s.a(-this.realWidth/2,-this.realLength/2)),c.transformPoint(new s.a(this.realWidth/2,-this.realLength/2))],g=Number.MAX_VALUE,m=null,_=0,y=f;_<y.length;_++)p=y[_],(d=i.point2PointAdsorb(p))&&h.a.less(d.subtract(p).length,g)&&(g=d.subtract(p).length,m=d.subtract(p));if(m)return new s.a(m.x+t,m.y+e);g=Number.MAX_VALUE;for(var b=0,v=f;b<v.length;b++)p=v[b],(d=i.point2EdgeAdsorb(p))&&h.a.less(d.subtract(p).length,g)&&(g=d.subtract(p).length,m=d.subtract(p));return m?new s.a(m.x+t,m.y+e):new s.a(t,e)},e.prototype.actionDelete=function(t){void 0===t&&(t=!0),this.scene.removeStruct(this),t&&this.scene.change(),c.a.inst.update()},e.prototype.actionRotate=function(){this.realRotationZ+=90,this.calculateTransform(),this.scene.change()},e.prototype.doChangeWidth=function(t){this.realWidth=t,this.scene.change(),this.calculateTransform()},e.prototype.doChangeLength=function(t){this.realLength=t,this.scene.change(),this.calculateTransform()},e.prototype.render=function(){this.scene.change(),this.calculateTransform()},e.prototype.isLegal=function(){return!0},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.structType=this.structType,t.forwardName=this.forwardName,t.backwardName=this.backwardName,t.startName=this.startName,t.stopName=this.stopName,t.startCornerName=this.startCornerName,t.stopCornerName=this.stopCornerName,t.bearing=0,t.parapet=0,t.length=this.realLength,t.height=this.scene.setting.getStoreyHeight(p.a.CM),t.forwardRoomName="",t.backwardRoomName="",t},e.loadData=function(t){var n=t.startCornerName,o=t.stopCornerName;if(n==o)return null;var i;return""!=o&&""!=o&&(i=new e,i.name=t.name,i.structType=t.structType,i.forwardName=t.forwardName,i.backwardName=t.backwardName,i.startName=t.startName,i.stopName=t.stopName,i.createFromCorner(t.length,n,o)),i},e}(o.a);b.MIN_LENGTH=12,b.MAX_LENGTH=200,b.MIN_WIDTH=12,b.MAX_WIDTH=200},D7lW:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{labelRef:0}),(t()(),a._15(0,[[1,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""]))],null,function(t,e){t(e,2,0,e.component.label)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"color-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,1).touchEnd(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("Q2Ol"),a=n("/oeL"),s=n("cmpz");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("color-button",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",radius:"radius",colorStyle:"colorStyle",backUpColor:"backUpColor",backOverColor:"backOverColor",backDownColor:"backDownColor",backUpAlpha:"backUpAlpha",backOverAlpha:"backOverAlpha",backDownAlpha:"backDownAlpha",border:"border",strokeUpColor:"strokeUpColor",strokeOverColor:"strokeOverColor",strokeDownColor:"strokeDownColor",strokeUpAlpha:"strokeUpAlpha",strokeOverAlpha:"strokeOverAlpha",strokeDownAlpha:"strokeDownAlpha",textUpColor:"textUpColor",textOverColor:"textOverColor",textDownColor:"textDownColor",textSize:"textSize",label:"label"},{},[])},DLyt:function(t,e,n){"use strict";var o=n("SScf");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n,o,i){void 0===n&&(n=15790579),void 0===o&&(o=13422031),void 0===i&&(i=12566463);var r=t.call(this,!0,!0)||this;return r.size=0,r.gpu=!0,r.size=e,r.backgroundColor=n,r.gridColor=o,r.axisColor=i,r}return i(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Grid"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.calcTransform()},e.prototype.draw=function(){this.graphics.clear();var t=this.size>>1;this.graphics.beginFill(this.backgroundColor,1),this.graphics.drawRect(-t,-t,this.size,this.size),this.graphics.endFill();var e,n=0;for(this.graphics.lineStyle(1,this.gridColor,1),e=-t;e<=t;e+=50)this.graphics.moveTo(-t,e),this.graphics.lineTo(t,e),this.graphics.moveTo(e,-t),this.graphics.lineTo(e,t),n++;this.graphics.endStroke(),this.graphics.lineStyle(2,this.axisColor,1),this.graphics.moveTo(-t,0),this.graphics.lineTo(t,0),this.graphics.moveTo(0,-t),this.graphics.lineTo(0,t),this.graphics.endStroke()},e.prototype.calcTransform=function(){this.width=this.size>>1,this.height=this.size>>1,this.draw()},e.prototype.clear=function(){this.graphics.clear(),this.draw()},e}(o.a)},DMQW:function(t,e,n){"use strict";var o=n("lpfp"),i=n("0/et"),r=n("J78+"),a=n("j23w");n.d(e,"a",function(){return s});var s=function(){function t(t){this.rooms=[];for(var e=0,n=t;e<n.length;e++){var o=n[e],r=new l(i.a.cleanPath(o));this.rooms.push(r)}}return t.prototype.makeupWalls=function(){for(var t=0,e=this.rooms;t<e.length;t++){var n=e[t];n.calculateWallLength(this.rooms)}for(var o=0,i=this.rooms;o<i.length;o++){var n=i[o];n.expand()}},t.prototype.correct=function(){for(var t=0,e=this.rooms;t<e.length;t++){e[t].correct(this.rooms)}},t.prototype.dumpData=function(){for(var t=[],e=0,n=this.rooms;e<n.length;e++){var o=n[e],i=o.dumpData();t.push(i)}return t},t}(),l=function(){function t(t){this.points=[],this.edges=[],this.points=t,this.polygon=new r.a;for(var e=t.length,n=0;n<e;n++){var o=t[n];this.polygon.addVertex(o);var a=new u(n,i.a.nextIndex(n,e));a.room=this,this.edges.push(a)}this.polygon.setClockSize()}return t.prototype.calculateWallLength=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var i=o[n];this!=i&&(e=e.concat(i.edges))}for(var r=0,a=this.edges;r<a.length;r++){a[r].findNearestEdge(e)}},t.prototype.expand=function(){for(var t=0,e=this.edges;t<e.length;t++){e[t].expand()}},t.prototype.correct=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var i=o[n];this!=i&&(e=e.concat(i.edges))}for(var r=0,a=this.edges;r<a.length;r++){a[r].correct(e)}},t.prototype.dumpData=function(){for(var t=[],e=0,n=this.edges;e<n.length;e++){var o=n[e],i=o.dumpData();t.push(i)}return t},t}(),u=function(){function t(e,n){this.wallLength=t.DEFAULT_WALL_LENGTH,this.expandLength=t.MIN_WALL_LENGTH,this.startIndex=e,this.stopIndex=n}return Object.defineProperty(t.prototype,"start",{get:function(){return this.room.polygon.getVertexAt(this.startIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stop",{get:function(){return this.room.polygon.getVertexAt(this.stopIndex)},enumerable:!0,configurable:!0}),t.prototype.findNearestEdge=function(e){for(var n=[],o=0,i=e;o<i.length;o++){var r=i[o];1==this.checkParallel(r)&&1==this.checkOpposite(r)&&n.push(r)}for(var a,s=99999999,l=0,u=n;l<u.length;l++){var h=u[l],c=this.calculateDistanceFromAnotherEdge(h);c<=t.MAX_WALL_LENGTH&&c<s&&(a=h,s=c)}a&&(s<t.MIN_WALL_LENGTH?this.wallLength=t.DEFAULT_WALL_LENGTH:this.wallLength=Math.round(s),this.expandLength=s/2)},t.prototype.checkParallel=function(t){var e=this.stop.subtract(this.start),n=t.stop.subtract(t.start),r=o.a.angleBetween(e,n);return 1==i.a.isNumberEqual(r%Math.PI,0)},t.prototype.checkOpposite=function(t){var e=i.a.calcFoot(t.start,t.stop,this.start),n=i.a.calcFoot(t.start,t.stop,this.stop);return 1==i.a.isPointOnSegment(t.start,t.stop,e)||1==i.a.isPointOnSegment(t.start,t.stop,n)},t.prototype.calculateDistanceFromAnotherEdge=function(t){var e=new o.a(1e5,1e5),n=e.getVerticalLine(this.start,this.stop).length,i=e.getVerticalLine(t.start,t.stop).length;return Math.abs(i-n)},t.prototype.expand=function(){var t=this.room.polygon,e=this.expandPoint(this.startIndex,!0),n=t.getVertexAt(this.startIndex);n.x=e.x,n.y=e.y,e=this.expandPoint(this.stopIndex,!1);var o=t.getVertexAt(this.stopIndex);o.x=e.x,o.y=e.y},t.prototype.expandPoint=function(t,e){var n,o=this.room.polygon,r=o.vertexCount,a=o.getVertexAt(t),s=i.a.preIndex(t,r),l=o.getVertexAt(s),u=i.a.nextIndex(t,r),h=o.getVertexAt(u),c=h.subtract(a),p=l.subtract(a),d=i.a.vectorIncludedAngle(c,p,!0);return n=1==e?p.clone():c.clone(),n.length=Math.abs(this.expandLength/Math.sin(d)),d<Math.PI&&n.reverse(),a.add(n)},t.prototype.correct=function(t){for(var e,n=this.start,o=this.stop,i=0,r=t;i<r.length;i++){var a=r[i];1==a.vertical?(e=n.getVerticalLine(a.start,a.stop).length,e<=3&&(n.x=a.start.x),(e=o.getVerticalLine(a.start,a.stop).length)<=3&&(o.x=a.stop.x)):1==a.horizantal&&(e=n.getVerticalLine(a.start,a.stop).length,e<=3&&(n.y=a.start.y),(e=o.getVerticalLine(a.start,a.stop).length)<=3&&(o.y=a.stop.y))}},Object.defineProperty(t.prototype,"horizantal",{get:function(){var t=this.start,e=this.stop;return i.a.isNumberEqual(t.y,e.y,.5)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertical",{get:function(){var t=this.start,e=this.stop;return i.a.isNumberEqual(t.x,e.x,.5)},enumerable:!0,configurable:!0}),t.prototype.dumpData=function(){var t=this.start;t.x=Math.ceil(t.x),t.y=Math.ceil(t.y);var e=this.stop;e.x=Math.ceil(e.x),e.y=Math.ceil(e.y);var n=new a.a;return n.start=t,n.stop=e,n.wallLength=this.wallLength,n},t}();u.MAX_WALL_LENGTH=36,u.MIN_WALL_LENGTH=12,u.DEFAULT_WALL_LENGTH=24},Dsuh:function(t,e,n){"use strict";var o=n("/oeL"),i=n("5ZTi"),r=n("v7PY"),a=n("matE");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.label="",o.number="",o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.labelDom=this.labelRef.nativeElement,this.numberDom=this.numberRef.nativeElement},e.prototype.upStyle=function(){this.renderer.setStyle(this.labelDom,"color","#666666"),this.renderer.setStyle(this.numberDom,"color",r.a.toString(r.a.FONT2)),this.renderer.setStyle(this.dom,"background-color",r.a.toString(r.a.WHITE)),t.prototype.upStyle.call(this)},e.prototype.downStyle=function(){this.renderer.setStyle(this.labelDom,"color",r.a.toString(r.a.BLACK)),this.renderer.setStyle(this.numberDom,"color",r.a.toString(r.a.BLACK)),this.renderer.setStyle(this.dom,"background-color",r.a.toString(a.a.MASTER)),t.prototype.downStyle.call(this)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Dvc5:function(t,e,n){"use strict";var o=n("6xdJ"),i=n("v7PY");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this)||this;return o._position="",o._width="",o._height="",o._left=0,o._right=0,o._top=0,o._bottom=0,o._visible="true",o._alpha=1,o._depth=0,o._rotation=0,o._scaleX=1,o._scaleY=1,o._tooltip="",o._backgroundColor=0,o._filter="",o.scrollable=!1,o.lastAnimationHandler=null,o.view=e,o.renderer=n,o.dom=e.element.nativeElement,o.visible="true",o}return r(e,t),e.prototype.updateComponentProperty=function(){if(this.position&&this.renderer.setStyle(this.dom,"position",this.position),this.width&&this.renderer.setStyle(this.dom,"width",this.width),this.height&&this.renderer.setStyle(this.dom,"height",this.height),this.left){var t=this.left+"px";this.renderer.setStyle(this.dom,"left",t)}if(this.top){var e=this.top+"px";this.renderer.setStyle(this.dom,"top",e)}if(this.right){var n=this.right+"px";this.renderer.setStyle(this.dom,"right",n)}if(this.bottom){var o=this.bottom+"px";this.renderer.setStyle(this.dom,"bottom",o)}if(this.visible){var r="true"==this.visible?"block":"none";this.renderer.setStyle(this.dom,"display",r)}if(this.alpha){var a=this.alpha.toString();this.renderer.setStyle(this.dom,"opacity",a)}if(this.depth){var s=this.depth.toString();this.renderer.setStyle(this.dom,"z-index",s)}if(this.rotation){var l="rotate("+this.rotation+"deg)";this.renderer.setStyle(this.dom,"-webkit-transform",l),this.renderer.setStyle(this.dom,"transform",l)}if(this.scalex&&this.scaley){var u="scale("+this.scalex+","+this.scaley+")";this.renderer.setStyle(this.dom,"-webkit-transform",u),this.renderer.setStyle(this.dom,"transform",u)}this.tooltip&&this.renderer.setAttribute(this.dom,"title",this.tooltip),this.backgroundcolor&&this.renderer.setStyle(this.dom,"background-color",i.a.toString(this.backgroundcolor))},e.prototype.addEventListener=function(t,e,n){void 0===n&&(n=!1),this.dom&&this.dom.addEventListener(t,e,n)},e.prototype.removeEventListener=function(t,e){void 0===e&&(e=null),this.dom&&this.dom.removeEventListener(t,e)},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.dom&&this.renderer.setStyle(this.dom,"position",this._position)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.dom&&this.renderer.setStyle(this.dom,"width",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widthNumber",{get:function(){if(void 0==this._width)return 0;var t=this._width.replace("px","");return Number.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.dom&&this.renderer.setStyle(this.dom,"height",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightNumber",{get:function(){if(void 0==this._height)return 0;var t=this._height.replace("px","");return Number.parseFloat(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){if(this._left=t,this.dom){var e=this._left+"px";this.renderer.setStyle(this.dom,"left",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},set:function(t){if(this._top=t,this.dom){var e=this._top+"px";this.renderer.setStyle(this.dom,"top",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){if(this._right=t,this.dom){var e=this._right+"px";this.renderer.setStyle(this.dom,"right",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},set:function(t){if(this._bottom=t,this.dom){var e=this._bottom+"px";this.renderer.setStyle(this.dom,"bottom",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible=t,this.dom){var e="true"==this._visible?"block":"none";this.renderer.setStyle(this.dom,"display",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){if(this._alpha=t,this.dom){var e=this._alpha.toString();this.renderer.setStyle(this.dom,"opacity",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){if(this._depth=t,this.dom){var e=this._depth.toString();this.renderer.setStyle(this.dom,"z-index",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){if(this._rotation=t,this.dom){var e="rotate("+this._rotation+"deg)";this.renderer.setStyle(this.dom,"-webkit-transform",e),this.renderer.setStyle(this.dom,"transform",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scalex",{get:function(){return this._scaleX},set:function(t){if(this._scaleX=t,void 0==this._scaleY&&(this._scaleY=1),this.dom){var e="scale("+this._scaleX+","+this._scaleY+")";this.renderer.setStyle(this.dom,"-webkit-transform",e),this.renderer.setStyle(this.dom,"transform",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaley",{get:function(){return this._scaleY},set:function(t){if(this._scaleY=t,void 0==this._scaleX&&(this._scaleX=1),this.dom){var e="scale("+this._scaleX+","+this._scaleY+")";this.renderer.setStyle(this.dom,"-webkit-transform",e),this.renderer.setStyle(this.dom,"transform",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t,this.dom&&this.renderer.setAttribute(this.dom,"title",this._tooltip)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundcolor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this.dom&&this.renderer.setStyle(this.dom,"background-color",i.a.toString(this._backgroundColor))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},set:function(t){this._filter=t,this.dom&&(this.dom.style.filter=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonMode",{set:function(t){},enumerable:!0,configurable:!0}),e.prototype._touchMove=function(t){0==this.scrollable&&t.preventDefault()},e.prototype.transition=function(t,e){this.renderer.setStyle(t,"transition",e),this.renderer.setStyle(t,"-moz-transition",e),this.renderer.setStyle(t,"-webkit-transition",e),this.renderer.setStyle(t,"-o-transition",e)},e.prototype.animation=function(t,e,n,o){var i=this;void 0===n&&(n=null),void 0===o&&(o=null),this.lastAnimationHandler&&(t.removeEventListener("animationend",this.lastAnimationHandler),this.lastAnimationHandler=null),this.renderer.setStyle(t,"animation",e),this.renderer.setStyle(t,"-moz-animation",e),this.renderer.setStyle(t,"-webkit-animation",e),this.renderer.setStyle(t,"-o-animation",e),n&&(this.lastAnimationHandler=function(e){t.removeEventListener("animationend",i.lastAnimationHandler),i.lastAnimationHandler=null,n.call(o)},t.addEventListener("animationend",this.lastAnimationHandler))},e}(o.a)},E2K4:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:100%;height:100%}common-setting[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;background-color:#fff;box-shadow:0 -1px 7px 0 hsla(0,0%,71%,.5)}room-setting[_ngcontent-%COMP%]{width:100%;height:180px;overflow-x:hidden;overflow-y:hidden}room-setting[_ngcontent-%COMP%], ruler-setting[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;background-color:#fff}@keyframes hideSettings{0%{bottom:0;opacity:1}to{bottom:-200px;opacity:0}}@-webkit-keyframes hideSettings{0%{bottom:0;opacity:1}to{bottom:-200px;opacity:0}}@keyframes showSettings{0%{bottom:-200px;opacity:0}to{bottom:0;opacity:1}}@-webkit-keyframes showSettings{0%{bottom:-200px;opacity:0}to{bottom:0;opacity:1}}"]},ECac:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(e){if(void 0===e&&(e=null),this._position=0,this.endian=t.LITTLE_ENDIAN,e)this.bytes=new DataView(e,0,e.byteLength);else{var n=new ArrayBuffer(1e5);this.bytes=new DataView(n,0,n.byteLength)}}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this._position=Math.max(0,this._position),this._position=Math.min(this.bytes.byteLength,this._position)},enumerable:!0,configurable:!0}),t.prototype.readBoolean=function(){if(this.position+1<=this.bytes.byteLength){var t=this.bytes.getUint8(this.position);return this.position+=1,1==t}return!1},t.prototype.readByte=function(){if(this.position+1<=this.bytes.byteLength){var t=this.bytes.getInt8(this.position);return this.position+=1,t}return 0},t.prototype.readDouble=function(){if(this.position+8<=this.bytes.byteLength){var t=this.bytes.getFloat64(this.position,this.endian);return this.position+=8,t}return 0},t.prototype.readFloat=function(){if(this.position+4<=this.bytes.byteLength){var t=this.bytes.getFloat32(this.position,this.endian);return this.position+=4,t}return 0},t.prototype.readInt=function(){if(this.position+4<=this.bytes.byteLength){var t=this.bytes.getInt32(this.position,this.endian);return this.position+=4,t}return 0},t.prototype.readShort=function(){if(this.position+2<=this.bytes.byteLength){var t=this.bytes.getInt16(this.position,this.endian);return this.position+=2,t}return 0},t.prototype.readUnsignedByte=function(){if(this.position+1<=this.bytes.byteLength){var t=this.bytes.getUint8(this.position);return this.position+=1,t}return 0},t.prototype.readUnsignedInt=function(){if(this.position+4<=this.bytes.byteLength){var t=this.bytes.getUint32(this.position,this.endian);return this.position+=4,t}return 0},t.prototype.readUnsignedShort=function(){if(this.position+2<=this.bytes.byteLength){var t=this.bytes.getUint16(this.position,this.endian);return this.position+=2,t}return 0},t.prototype.readUTFBytes=function(t){if(this.position+2*t<=this.bytes.byteLength){for(var e="",n=2*t,o=0;o<n;o+=2){var i=this.bytes[this.position+o];e+=String.fromCharCode(i)}return this.position+=2*t,e}return""},t.prototype.writeByte=function(t){this.position+1<=this.bytes.byteLength&&(this.bytes.setInt8(this.position,t),this.position+=1)},t.prototype.writeBoolean=function(t){this.position+1<=this.bytes.byteLength&&(this.bytes.setUint8(this.position,1==t?1:0),this.position+=1)},t.prototype.writeDouble=function(t){this.position+8<=this.bytes.byteLength&&(this.bytes.setFloat64(this.position,t,this.endian),this.position+=8)},t.prototype.writeFloat=function(t){this.position+4<=this.bytes.byteLength&&(this.bytes.setFloat32(this.position,t,this.endian),this.position+=4)},t.prototype.writeInt=function(t){this.position+4<=this.bytes.byteLength&&(this.bytes.setInt32(this.position,t,this.endian),this.position+=4)},t.prototype.writeShort=function(t){this.position+2<=this.bytes.byteLength&&(this.bytes.setInt16(this.position,t,this.endian),this.position+=2)},t.prototype.writeUnsignedInt=function(t){this.position+4<=this.bytes.byteLength&&(this.bytes.setUint32(this.position,t,this.endian),this.position+=4)},t.prototype.writeUTF=function(t){if(this.position+2*t.length<=this.bytes.byteLength)for(var e=t.length,n=0;n<e;n++){var o=t.charCodeAt(n);this.bytes[this.position]=o,this.position+=2}},Object.defineProperty(t.prototype,"bytesAvailable",{get:function(){return this.bytes.byteLength-this.position},enumerable:!0,configurable:!0}),t.prototype.clear=function(){var t=new ArrayBuffer(1e5);this.bytes=new DataView(t,0,t.byteLength),this.position=0},t}();o.BIG_ENDIAN=!1,o.LITTLE_ENDIAN=!0},EE9o:function(t,e,n){"use strict";var o=n("gdOB");n.d(e,"a",function(){return i});var i=function(){function t(t){void 0===t&&(t=[]),this.propertys=[],this.propertys=t}return t.prototype.translate=function(t,e){var n=new o.a;n.tx+=t,n.ty+=e,this.propertys.push(n)},t.prototype.scale=function(t,e){var n=new o.a;n.a*=t,n.d*=e,this.propertys.push(n)},t.prototype.rotate=function(t){var e=new o.a;e.angle+=t,e.a=Math.cos(e.angle),e.b=Math.sin(e.angle),e.c=-Math.sin(e.angle),e.d=Math.cos(e.angle),this.propertys.push(e)},t.prototype.transformPoint=function(t){for(var e=t.clone(),n=0;n<this.propertys.length;n++)e=this.propertys[n].transformPoint(e);return e},t.prototype.deltaTransformPoint=function(t){for(var e=t.clone(),n=0;n<this.propertys.length;n++)e=this.propertys[n].deltaTransformPoint(e);return e},t.prototype.identity=function(){this.propertys=[]},t.prototype.concat=function(e){return new t(this.propertys.concat(e.propertys))},t.prototype.clone=function(){return new t(this.propertys)},t}()},EGQA:function(t,e,n){"use strict";var o=n("/oeL"),i=n("mGOc"),r=n("+N0H"),a=n("WFe8"),s=n("KE74"),l=n("Yyq6"),u=n("Yhhh"),h=n("/T2q"),c=n("+ByO"),p=n("YihH"),d=n("wzWt"),f=n("CW6F"),g=n("PSoK"),m=n("IKKv"),_=n("RxX8"),y=n("Dvc5"),b=n("ic9J"),v=n("yPN6"),w=n("rvvW"),O=n("3mMQ"),x=n("qJEM"),E=n("LF0A"),P=n("ZdJq");n.d(e,"a",function(){return A});var C=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),A=function(t){function e(e,n){return t.call(this,e,n)||this}return C(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty();var t=new i.a;t.setStage(new b.a),t.depth=0,this.dom.appendChild(t.dom),this.renderer.setStyle(this.quitDrawButton.labelDom,"line-height","16px"),this.renderer.setStyle(this.quitDrawButton.labelDom,"width","32px"),this.renderer.setStyle(this.quitDrawButton.labelDom,"height","32px"),this.renderer.setStyle(this.quitDrawButton.labelDom,"margin-top","9px"),r.a.inst.open(),this.scene=r.a.inst,this.scene.addEvent(h.a.MSCENE_CONTENT_CHANGED,this.sceneContentChangedHandler,this),this.scene.addEvent(h.a.MSCENE_ITEM_SELECTED,this.sceneItemSelectedHandler,this),this.scene.addEvent(h.a.MSCENE_ITEM_UNSELECTED,this.sceneItemUnSelectedHandler,this),this.scene.addEvent(h.a.MSCENE_RULER_CHANGED,this.sceneRulerChangedHandler,this),this.scene.addEvent(h.a.MSCENE_NOTE_CHANGED,this.sceneNoteChangedHandler,this),m.a.inst.addEvent(_.a.DRAW_OPEN,this.onDrawOpen,this),m.a.inst.addEvent(_.a.DRAW_CLOSE,this.onDrawClose,this),this.operator=x.a.inst,this.operator.addEvent(v.a.OPERATOR_ACTION,this.operatorActionHandler,this)},e.prototype.show=function(t){this.visible=1==t?"true":"false",x.a.inst.close(),p.a.inst.close(),c.a.inst.close()},e.prototype.onHuxingLoadedSuccess=function(t){var e=t.record;r.a.inst.open(e.no,JSON.parse(e.data))},e.prototype.onHuxingLoadedError=function(t){},e.prototype.sceneContentChangedHandler=function(t){var e=this.scene.calcPureArea();this.areaLabel.text="户型面积："+e.toFixed(2)+"m²",this.areaLabel.update()},e.prototype.sceneItemSelectedHandler=function(t){var e=t.data,n=e.selectedItem,o=e.selectedPoint;this.handleClick(n,o),this.scene.showTargetRuler(n)},e.prototype.sceneItemUnSelectedHandler=function(t){x.a.inst.close(),p.a.inst.close(),c.a.inst.close(),this.scene.updateRuler()},e.prototype.handleClick=function(t,e){var n=x.a.inst,o=c.a.inst,i=[];t instanceof a.a?(i.push(new w.a(O.a.DELETE)),n.open(e,t,i),o.open(t)):t instanceof s.a?p.a.inst.open(t):t instanceof l.a?(1==t.allowRotate&&i.push(new w.a(O.a.ROTATE)),i.push(new w.a(O.a.DELETE)),n.open(e,t,i),o.open(t)):t instanceof u.a||(t instanceof f.a?(i.push(new w.a(O.a.ROTATE)),i.push(new w.a(O.a.DELETE)),n.open(e,t,i),o.open(t)):t instanceof g.a&&1==t.eraseWallAble()&&(i.push(new w.a(O.a.DELETE)),n.open(e,t,i)))},e.prototype.operatorActionHandler=function(t){var e=t.data,n=e.actionTarget,o=e.actionType;if(n instanceof a.a)switch(o){case O.a.SPLIT:n.actionSplit();break;case O.a.HOLE:n.actionHole();break;case O.a.DELETE:n.actionDelete()}else if(n instanceof s.a)switch(o){case O.a.NAME:p.a.inst.open(n);break;case O.a.DELETE:n.actionDelete()}else if(n instanceof l.a)switch(o){case O.a.ROTATE:n.actionRotate();break;case O.a.DELETE:n.actionDelete()}else if(n instanceof u.a)switch(o){case O.a.ROTATE:n.actionRotate();break;case O.a.MIRROR:n.actionMirror();break;case O.a.DELETE:n.actionDelete()}else if(n instanceof f.a)switch(o){case O.a.ROTATE:n.actionRotate();break;case O.a.DELETE:n.actionDelete()}else if(n instanceof g.a)switch(o){case O.a.DELETE:n.doMergeWall()}c.a.inst.close()},e.prototype.sceneRulerChangedHandler=function(t){var e=t.data;p.a.inst.open(e,Math.round(e.inputData.value)),c.a.inst.close()},e.prototype.sceneNoteChangedHandler=function(t){t.data},e.prototype.onDrawOpen=function(t){this.quitDrawButton.visible="true"},e.prototype.onDrawClose=function(t){this.quitDrawButton.visible="false"},e.prototype.quitDrawClick=function(){this.scene.dispatchEvent(new h.a(h.a.MSCENE_DRAW_CLOSED),this.scene)},e.prototype.areaClick=function(){E.a.inst.open(P.a)},e.prototype.globalClick=function(t){void 0===t&&(t=null),d.a.inst.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(y.a)},EetR:function(t,e,n){"use strict";var o=n("SScf"),i=n("qzI0"),r=n("mfrV"),a=n("v7PY");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e){var n=t.call(this)||this;n.mouseEventEnable=!1,n.depth=i.a.ROOM_TAG,n.x=e.x,n.y=e.y;var o=new r.a;o.x=-30,o.y=-16,o.width=60,o.height=20,o.text=e.tag?e.tag:"未命名",o.size=10,o.color=a.a.toString(a.a.WHITE),o.align="center",n.addChild(o);var s=new r.a;s.x=-30,s.y=-4,s.width=60,s.height=20,s.size=10,s.color=a.a.toString(a.a.WHITE),s.align="center",n.addChild(s);var l=e.calcPureArea().toFixed(2);return s.text=l+"m²",n}return s(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"tag2d"},enumerable:!0,configurable:!0}),e}(o.a)},Eezr:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.ROOM=200,o.WALL=300,o.CORNER=400,o.STRUCT=500,o.OPENING=600,o.OPENING_CTRL=700,o.MODEL=800,o.TAG=900,o.NOTE=1e3,o.RULER=1100,o.BASEMAP_MEASURE=1200,o.DRAW_BOARD=1300},"EjX+":function(t,e,n){"use strict";var o=n("/oeL"),i=n("+N0H"),r=n("+6Ri"),a=n("LF0A");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.dataList=[],o.hasOpen=!1,o.scrollable=!0,o.visible="false",setTimeout(function(){o.ngOnInit()},100),o}return s(e,t),e.prototype.ngOnInit=function(){1!=this.hasOpen&&(this.hasOpen=!0,this.visible="true",this.wrap=this.wrapRef.nativeElement,this.width=window.innerWidth+"px",this.height=window.innerHeight+"px",this.open())},e.prototype.open=function(){this.dataList=[];var t=0,e=0,n=0,o=0,r=[],a=i.a.inst.rooms;for(var s in a){for(var l=a[s],u=Math.round(100*l.calcPureArea())/100,h=0,c=0,p=0,d=0,f=l.walls;d<f.length;d++){var g=f[d];h+=this.calcWallArea(g,l),c+=this.calcWallLength(g,l,!0),p+=this.calcWallLength(g,l,!1)}var m={};m.title=l.tag,m.floorArea=u.toFixed(2),m.wallArea=h.toFixed(2),m.floorLength=c.toFixed(2),m.ceilingLength=p.toFixed(2),r.push(m),t+=u,e+=h,n+=c,o+=p}var _={};_.title="总面积",_.floorArea=t.toFixed(2),_.wallArea=e.toFixed(2),_.floorLength=n.toFixed(2),_.ceilingLength=o.toFixed(2),this.dataList=[_],this.dataList=this.dataList.concat(r);var y=40+166*this.dataList.length;this.wrap.style.height=y+"px",this.wrap.scrollTop=1},e.prototype.calcWallArea=function(t,e){var n=0;if(t.forwardRoomName==e.name){var o=t.topLeft.subtract(t.topRight).length,i=t.realHeight;n=o*i}else if(t.backwardRoomName==e.name){var o=t.bottomLeft.subtract(t.bottomRight).length,i=t.realHeight;n=o*i}else if(t.aloneRoomName==e.name){var r=t.topLeft.subtract(t.topRight).length,a=t.bottomLeft.subtract(t.bottomRight).length,i=t.realHeight;n=r*i+a*i}for(var s=t.openings,l=0,u=0,h=s;u<h.length;u++){var c=h[u];l+=c.realWidth*c.realHeight}return n-=l,t.aloneRoomName==e.name&&(n-=l),n/=1e4,n=Math.round(100*n)/100},e.prototype.calcWallLength=function(t,e,n){var o=0;if(t.forwardRoomName==e.name){var i=t.topLeft.subtract(t.topRight).length;o=i}else if(t.backwardRoomName==e.name){var i=t.bottomLeft.subtract(t.bottomRight).length;o=i}else if(t.aloneRoomName==e.name){var r=t.topLeft.subtract(t.topRight).length,a=t.bottomLeft.subtract(t.bottomRight).length;o=r+a+t.realLength}if(1==n){for(var s=t.openings,l=0,u=0,h=s;u<h.length;u++){var c=h[u];1!=c.isDoor&&1!=c.isHole||(l+=c.realWidth)}o-=l,t.aloneRoomName==e.name&&(o-=l)}return o/=100,o=Math.round(100*o)/100},e.prototype.close=function(){i.a.inst.dom.focus(),a.a.inst.closeAll()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(r.a)},Esur:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{labelRef:0}),(t()(),a._15(0,[[1,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""]))],null,function(t,e){t(e,2,0,e.component.label)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"custom-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,1).touchEnd(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("8kJt"),a=n("/oeL"),s=n("IO5Z");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("custom-button",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",radius:"radius",colorStyle:"colorStyle",backUpColor:"backUpColor",backOverColor:"backOverColor",backDownColor:"backDownColor",backUpAlpha:"backUpAlpha",backOverAlpha:"backOverAlpha",backDownAlpha:"backDownAlpha",border:"border",strokeUpColor:"strokeUpColor",strokeOverColor:"strokeOverColor",strokeDownColor:"strokeDownColor",strokeUpAlpha:"strokeUpAlpha",strokeOverAlpha:"strokeOverAlpha",strokeDownAlpha:"strokeDownAlpha",textUpColor:"textUpColor",textOverColor:"textOverColor",textDownColor:"textDownColor",textSize:"textSize",label:"label"},{},[])},Etka:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.stringsAreEqual=function(t,e,n){return n?t==e:t.toUpperCase()==e.toUpperCase()},t.trim=function(e){return t.ltrim(t.rtrim(e))},t.ltrim=function(t){for(var e=t.length,n=0;n<e;n++)if(t.charCodeAt(n)>32)return t.substring(n);return""},t.rtrim=function(t){for(var e=t.length,n=e;n>0;n--)if(t.charCodeAt(n-1)>32)return t.substring(0,n);return""},t.beginsWith=function(t,e){return e==t.substring(0,e.length)},t.endsWith=function(t,e){return e==t.substring(t.length-e.length)},t.remove=function(e,n){return t.replace(e,n,"")},t.replace=function(t,e,n){return t.split(e).join(n)},t.stringHasValue=function(t){return null!=t&&t.length>0},t.toUpperCases=function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()},t}()},FC3T:function(t,e,n){"use strict";var o=n("jr7g"),i=n("6xdJ"),r=n("0Itk"),a=n("/LiK"),s=n("0/et"),l=n("EE9o"),u=n("/gn8");n.d(e,"a",function(){return c});var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(){var e=t.call(this)||this;return e._position=new u.a,e.name=a.a.createPureUID(),e._changeFlag=new o.a,e._x=e._y=e._z=0,e._rotationZ=0,e._scaleX=e._scaleY=e._scaleZ=1,e._width=e._length=e._height=0,e.sceneObject=r.a.getInstance(),e}return h(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){s.a.isNumberEqual(t,this._x)||(this._x=t,this.changeFlag.position=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){s.a.isNumberEqual(t,this._y)||(this._y=t,this.changeFlag.position=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){s.a.isNumberEqual(t,this._z)||(this._z=t,this.changeFlag.position=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(t){s.a.isNumberEqual(s.a.formatAngle(t),this._rotationZ)||(this._rotationZ=s.a.formatAngle(t),this.changeFlag.rotation=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._scaleX},set:function(t){s.a.isNumberEqual(t,this._scaleX)||(this._scaleX=t,this.changeFlag.scale=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._scaleY},set:function(t){s.a.isNumberEqual(t,this._scaleY)||(this._scaleY=t,this.changeFlag.scale=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this._scaleZ},set:function(t){s.a.isNumberEqual(t,this._scaleZ)||(this._scaleZ=t,this.changeFlag.scale=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){s.a.isNumberEqual(t,this._width)||(this._width=t,this.changeFlag.scale=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){s.a.isNumberEqual(t,this._length)||(this._length=t,this.changeFlag.scale=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){s.a.isNumberEqual(t,this._height)||(this._height=t,this.changeFlag.scale=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mirror",{get:function(){return this._mirror},set:function(t){t!=this._mirror&&(this._mirror=t,this.changeFlag.scale=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position.setTo(this._x,this._y,this._z),this._position},set:function(t){this.x=t.x,this.y=t.y,this.z=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localToSceneMatrix",{get:function(){var t=new l.a;return t.rotate(this.rotationZ/180*Math.PI),t.translate(this.x,this.y),t},enumerable:!0,configurable:!0}),e.prototype.localToScene=function(t){return this.localToSceneMatrix.transformPoint(t)},Object.defineProperty(e.prototype,"sceneToLocalMatrix",{get:function(){var t=new l.a;return t.translate(-this.x,-this.y),t.rotate(-this.rotationZ/180*Math.PI),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeFlag",{get:function(){return this._changeFlag},enumerable:!0,configurable:!0}),e.prototype.sceneToLocal=function(t){return this.sceneToLocalMatrix.transformPoint(t)},e.prototype.clear=function(){},e.prototype.dumpData=function(){return{}},e}(i.a)},FIP8:function(t,e,n){"use strict";var o=n("/gn8"),i=n("7vHI");n.d(e,"a",function(){return r});var r=function(){function t(t,e){this._p0=null,this._p1=null,this._dir=null,this.length=Number.MAX_VALUE,this._p0=t,this._p1=new o.a(t.x+1*e.x,t.y+1*e.y,t.z+1*e.z),this._dir=e}return Object.defineProperty(t.prototype,"p0",{get:function(){return this._p0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"p1",{get:function(){return this._p1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),t.prototype.intersectWithPlane=function(t){var e=new i.a;if(t.whichSideIsPointAt(this.p0)*t.whichSideIsVectorAt(this.dir)>0)return null;var n=t.p0.subtract(this.p0).dotProd(t.dir)/this.dir.dotProd(t.dir);return e.add("t",n),e.add("point",this.p0.add(new o.a(this.dir.x*n,this.dir.y*n,this.dir.z*n))),e},t.prototype.clone=function(){var e=new t(this._p0.clone(),this._p1.clone());return e.length=length,e},t.prototype.transform=function(e){return new t(e.transformPoint(this._p0),e.deltaTransformPoint(this._dir))},t.initByStartAndStopPosition=function(e,n){var o=n.subtract(e);return o.normalize(),new t(e,o)},t}()},FtES:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.SETTINGS_CONFIRM="SETTINGS_CONFIRM"},FthM:function(t,e,n){"use strict";var o=n("/oeL"),i=n("+6Ri"),r=n("+N0H"),a=n("LF0A"),s=n("+Biz");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.area="0.00",o.hasOpen=!1,o.visible="false",setTimeout(function(){o.ngOnInit()},100),o}return l(e,t),e.prototype.ngOnInit=function(){if(1!=this.hasOpen){this.hasOpen=!0,this.visible="true",this.position="absolute";var t=window.innerWidth,e=window.innerHeight;this.width=.9*t+"px",this.height=.7*e+"px",this.left=Math.floor((window.innerWidth-this.widthNumber)/2),this.top=Math.floor((window.innerHeight-this.heightNumber)/2),this.viewport=new s.a(this.widthNumber,this.widthNumber),this.viewport.y=this.heightNumber-this.viewport.height-60,this.dom.appendChild(this.viewport.dom),this.open(this.openData)}},e.prototype.ngAfterViewInit=function(){},e.prototype.open=function(t){var e=t.wall,n=t.isForward;this.area=this.calcWallArea(e,n).toFixed(2),this.viewport.open(e,n)},e.prototype.close=function(){r.a.inst.dom.focus(),a.a.inst.closeAll()},e.prototype.calcWallArea=function(t,e){var n=0;if(1==e){var o=t.topLeft.subtract(t.topRight).length,i=t.realHeight;n=o*i}else{var o=t.bottomLeft.subtract(t.bottomRight).length,i=t.realHeight;n=o*i}for(var r=t.openings,a=0,s=0,l=r;s<l.length;s++){var u=l[s];a+=u.realWidth*u.realHeight}return n-=a,n/=1e4,n=Math.round(100*n)/100},e.prototype.clear=function(){},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},GJSB:function(t,e,n){"use strict";var o=n("eUeh"),i=n("ot+B");n.d(e,"a",function(){return r});var r=function(){function t(){this._items=new o.a}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.hasItem=function(t){return null!=this._items[t]},t.prototype.getItemByNo=function(t){var e=this._items[t];return null==e&&(e=new i.a(t,!0),this._items[t]=e),e},t.prototype.addItem=function(t){var e=t.no;0==this.hasItem(e)&&(this._items[e]=t)},t}()},GJiJ:function(t,e,n){"use strict";var o=n("QVAD"),i=n("3Gk7"),r=n("/gn8"),a=n("U8Ch"),s=n("0/et"),l=n("YSA8"),u=n("C+EA"),h=n("MPvg"),c=n("1LGZ"),p=n("feMm"),d=n("matE");n.d(e,"a",function(){return g});var f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=function(t){function e(e){var n=t.call(this)||this;if(n.diffUVDataAry=[],n.mouseEnabled=!0,n.opening=e,n.item3DContainer=new l.a,n.add(n.item3DContainer),n.bb=new a.a(n.opening.width,n.opening.length,n.opening.height),1==n.opening.isHole&&n.initSection(),n.opening.isHole)n.updateCoordinate();else{var o=n.opening.item;o.detailReady?n.init():o.addEvent(c.a.DESIGN_ITEM_DETAIL_READY,n.init,n),o.meshReady?n.initMesh():o.addEvent(c.a.DESIGN_ITEM_MESH_READY,n.initMesh,n)}return n}return f(e,t),e.prototype.updateModel=function(){var t=this.opening.item;null!=t&&(this.bb=new a.a(t.width,t.length,t.height),this.item3DContainer.removeChildren(),t.detailReady?this.init():t.addEvent(c.a.DESIGN_ITEM_DETAIL_READY,this.init,this),t.meshReady?this.initMesh():t.addEvent(c.a.DESIGN_ITEM_MESH_READY,this.initMesh,this))},e.prototype.init=function(t){void 0===t&&(t=null),t&&this.opening.item.removeEvent(c.a.DESIGN_ITEM_DETAIL_READY,this.init,this),this.updateCoordinate(),this.addTemporaryBox()},e.prototype.initMesh=function(t){if(void 0===t&&(t=null),t&&this.opening.item.removeEvent(c.a.DESIGN_ITEM_MESH_READY,this.initMesh,this),this.removeTemporaryBox(),null!=this.opening.item.meshes)for(var e=0,n=this.opening.item.meshes;e<n.length;e++){var o=n[e];this.item3DContainer.add(o.cloneMesh())}},e.prototype.addTemporaryBox=function(){var t=i.a.createBox(this.opening.item.width,this.opening.item.length,this.opening.item.height,.5,e.TEMPORARY_BOX_NAME);this.item3DContainer.add(t)},e.prototype.removeTemporaryBox=function(){var t=this.item3DContainer.getObjectByName(e.TEMPORARY_BOX_NAME);t&&this.item3DContainer.remove(t)},e.prototype.updateCoordinate=function(){this.position.x=this.opening.x,this.position.y=-this.opening.y,this.position.z=this.opening.z,this.item3DContainer.scale.x=this.opening.mirror?-this.opening.scaleX:this.opening.scaleX,this.item3DContainer.scale.y=this.opening.scaleY,this.item3DContainer.scale.z=this.opening.scaleZ,this.rotation.z=-s.a.degreeToRadian(this.opening.rotationZ),this.opening.isBayWindow?this.item3DContainer.position.y=-(this.opening.length-this.opening.wall.length)/2:this.item3DContainer.position.y=0},e.prototype.initSection=function(){this.diffUVDataAry.length=0;var t,e,n,o=new Array,a=this.opening.length/2/this.opening.scaleY,s=-a,l=this.opening.width/this.opening.scaleX,u=this.opening.height/this.opening.scaleZ;if(0==this.opening.archAngle)n=1,e=[new r.a(.5*-l,0,u),new r.a(.5*l,0,u)];else{n=12,e=new Array(n+1);var h=1*this.opening.archAngle/n,c=90+.5*this.opening.archAngle,p=this.opening.archRadius;for(t=0;t<=n;t++){var d=Math.PI*(c-t*h)/180;e[t]=new r.a,e[t].x=p*Math.cos(d),e[t].z=u-this.opening.archRadius+p*Math.sin(d)}}var f=0;for(t=0;t<n;t++)o.push(e[t].x,s,e[t].z,e[t].x,a,e[t].z,e[t+1].x,a,e[t+1].z,e[t+1].x,s,e[t+1].z);o.length>0&&(this.diffUVDataAry.push({type:1,data:o.slice(0,o.length)}),f=o.length);o.push(e[0].x,s,0,e[0].x,a,0,e[0].x,a,e[0].z,e[0].x,s,e[0].z,e[n].x,s,e[n].z,e[n].x,a,e[n].z,e[n].x,a,0,e[n].x,s,0),this.diffUVDataAry.push({type:1,data:o.slice(f,o.length)}),f=o.length,this.opening.z>0&&(o.push(e[n].x,s,0,e[n].x,a,0,e[0].x,a,0,e[0].x,s,0),this.diffUVDataAry.push({type:0,data:o.slice(f,o.length)})),this.sectionMesh=i.a.createMesh(o,null,null,i.a.createQuadGeometryIndicesByNumVertices(o.length/3)),this.add(this.sectionMesh),this.openingMaterialChange(null)},e.prototype.updateSectionUV=function(t,e,n,o){for(var i=new Array,a=new Array,s=0,l=this.diffUVDataAry;s<l.length;s++){var c=l[s];a.length=0;for(var p=0;p<c.data.length/3;++p)a.push(new r.a(c.data[3*p],c.data[3*p+1],c.data[3*p+2]));i=this.getOpeningHoleSectionUVOffset(i,c.type,a,this.opening.wall.length/2,n,o)}t.geometry.addAttribute("uv",new h.j(new Float32Array(i),2));var d=u.a.getTextureResourceByKey(e),f={map:d.resource},g=new h.i(f);g.needsUpdate=!0,t.material=g},e.prototype.getOpeningHoleSectionUVOffset=function(t,e,n,o,i,r){for(var a=0;a<n.length;a++)0==e?t.push(-n[a].x/i,(n[a].y-o)/r):1==e&&t.push((n[a].y-o)/i,-n[a].z/r);return t},e.prototype.openingMaterialChange=function(t){p.a.getInstance().add(this.sectionMesh,this.opening.materialNo,this.updateSectionUV,null,this)},e.prototype.getWireFrame=function(){var t=new h.u,e=new h.v(this.bb.width,this.bb.length,this.bb.height),n=new h.i({color:d.a.MASTER,opacity:.4,transparent:!0}),o=new h.l(e,n);t.add(o);var i=new h.w(o,new h.x(13107));return t.add(i),t.rotation.set(this.rotation.x,this.rotation.y,this.rotation.z,this.rotation.order),t.position.set(this.position.x,this.position.y,this.position.z+.5*this.bb.height),t},Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this.opening.item?new r.a(0,0,.5*this.opening.item.height):new r.a(0,0,.5*this.opening.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this.opening.item},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.opening.item&&(this.opening.item.removeEvent(c.a.DESIGN_ITEM_DETAIL_READY,this.init,this),this.opening.item.removeEvent(c.a.DESIGN_ITEM_MESH_READY,this.initMesh,this)),this.sectionMesh&&this.sectionMesh.dispose(),this.item3DContainer&&(this.item3DContainer.removeChildren(),this.item3DContainer.dispose()),this.opening=null,this.sectionMesh=null,this.diffUVDataAry=null,this.item3DContainer=null,this.overBox=null},e}(o.a);g.TEMPORARY_BOX_NAME="TEMPORARY_BOX_NAME"},GMHY:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{position:absolute;top:116px;height:36px;border-radius:2px;background-color:rgba(0,0,0,.7)}.icon[_ngcontent-%COMP%]{margin-left:15px;width:15px;background-size:100% 100%}.icon[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{float:left;margin-top:11px;height:15px}.label[_ngcontent-%COMP%]{margin-left:10px;margin-right:20px;line-height:15px;color:#fff;font-size:12px}color-button[_ngcontent-%COMP%], line[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-top:9px}"]},Gd3X:function(t,e,n){"use strict";var o=n("lpfp"),i=n("zA0o"),r=(n.n(i),n("wKgg"));n.d(e,"a",function(){return a});var a=function(){function t(){}return t.prototype.addHole=function(t){},t.triangulate=function(t,e){void 0===e&&(e=null);var n=0,r=0,a=[];for(n=0;n<t.length;n++){var s=new i.Point(t[n].x,t[n].y);a.push(s)}var l=new i.SweepContext(a);if(e){var u=[];for(n=0;n<e.length;n++)for(u[n]=[],r=0;r<e[n].length;r++){var s=new i.Point(e[n][r].x,e[n][r].y);u[n].push(s)}l.addHoles(u)}l.triangulate();var h=l.getTriangles(),c=[];for(n=0;n<h.length;n++){var p=h[n],d=p.getPoints();for(c[n]=[],r=0;r<d.length;r++)c[n].push(new o.a(d[r].x,d[r].y))}return c},t.triangulateSafe=function(e,n,o){void 0===n&&(n=null),void 0===o&&(o=t.CLIPPER_SCALE);var i=new r.a(o);i.addPath(e,r.a.PT_SUBJECT),n&&n.length>0&&i.addPaths(n,r.a.PT_CLIP);for(var a=i.execute(r.a.CT_DIFFERENCE),s=new Array,l=new Array,u=0;u<a.length;u++)i.orientation(a[u])?s.push(a[u]):l.push(a[u]);for(var h=new Array,c=0,p=s;c<p.length;c++){var d=p[c];h=h.concat(t.triangulate(d,l))}return h},t}();a.CLIPPER_SCALE=1e5},GhkV:function(t,e,n){"use strict";var o=n("QVAD"),i=n("U8Ch"),r=n("0/et"),a=n("/gn8"),s=n("3Gk7"),l=n("1LGZ");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e){var n=t.call(this)||this;return n.mouseEnabled=!0,n.model=e,n.name=n.model.name,n.bb=new i.a(n.model.item.width,n.model.item.length,n.model.item.height),n.updateModel(),n}return u(e,t),e.prototype.init=function(t){void 0===t&&(t=null),t&&this.model.item.removeEvent(l.a.DESIGN_ITEM_DETAIL_READY,this.init,this),this.updateCoordinate(),this.addTemporaryBox()},e.prototype.initMesh=function(t){if(void 0===t&&(t=null),t&&this.model.item.removeEvent(l.a.DESIGN_ITEM_MESH_READY,this.initMesh,this),this.removeTemporaryBox(),null!=this.model.item.meshes)for(var e=0,n=this.model.item.meshes;e<n.length;e++){var o=n[e];this.add(o.cloneMesh())}},e.prototype.updateModel=function(){this.removeChildren(),this.model.item.detailReady?this.init():this.model.item.addEvent(l.a.DESIGN_ITEM_DETAIL_READY,this.init,this),this.model.item.meshReady?this.initMesh():this.model.item.addEvent(l.a.DESIGN_ITEM_MESH_READY,this.initMesh,this)},e.prototype.addTemporaryBox=function(){var t=s.a.createBox(this.model.item.width,this.model.item.length,this.model.item.height,.5,e.TEMPORARY_BOX_NAME);this.add(t)},e.prototype.removeTemporaryBox=function(){this.getObjectByName(e.TEMPORARY_BOX_NAME)&&this.remove(this.getObjectByName(e.TEMPORARY_BOX_NAME))},e.prototype.updateCoordinate=function(){this.position.x=this.model.x,this.position.y=-this.model.y,this.position.z=this.model.z,this.scale.x=this.model.mirror?-this.model.scaleX:this.model.scaleX,this.scale.y=this.model.scaleY,this.scale.z=this.model.scaleZ,this.rotation.z=-r.a.degreeToRadian(this.model.rotationZ)},Object.defineProperty(e.prototype,"centerPoint",{get:function(){return new a.a(0,0,.5*this.model.item.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this.model.item},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.model.item.removeEvent(l.a.DESIGN_ITEM_DETAIL_READY,this.init,this),this.model.item.removeEvent(l.a.DESIGN_ITEM_MESH_READY,this.initMesh,this),this.model=null,this.overBox=null,this.illegalBox=null},e}(o.a);h.TEMPORARY_BOX_NAME="TEMPORARY_BOX_NAME"},GkYX:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;margin:0 auto}"]},H6Kx:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.inputMarkedEdges=null,this.inputFreshEdges=null,this.outputReservedEdges=null,this.outputCreateEdges=null,this.outputDeleteEdges=null,this.inputMarkedEdges=[],this.inputFreshEdges=[],this.outputReservedEdges=[],this.outputCreateEdges=[],this.outputDeleteEdges=[]}return t.prototype.clear=function(){this.inputMarkedEdges.length=0,this.inputFreshEdges.length=0,this.outputReservedEdges.length=0,this.outputCreateEdges.length=0,this.outputDeleteEdges.length=0},t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.merge=function(){for(var t,e,n,o,i=0,r=this.inputFreshEdges;i<r.length;i++){t=r[i],o=!1;for(var a=0,s=this.inputMarkedEdges;a<s.length;a++){if(e=s[a],t.endsEqual(e)){o=!0,this.outputReservedEdges.push(e);break}if(1==e.containsEqual(t)){o=!0,t.mark=e.mark,this.outputCreateEdges.push(t);break}}o||this.outputCreateEdges.push(t)}for(var l,u=0,h=this.inputMarkedEdges;u<h.length;u++){e=h[u],l=!1;for(var c=0,p=this.outputReservedEdges;c<p.length;c++)if(n=p[c],e.mark==n.mark){l=!0;break}l||this.outputDeleteEdges.push(e)}},t}();o._instance=null},H8MY:function(t,e,n){"use strict";var o=n("SScf"),i=n("sOyH"),r=n("PbJf"),a=n("fPy1"),s=n("0/et");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e){var n=t.call(this,!1,!1)||this;return n.scene=null,n.scene=e,n.unit=r.a.MM,n}return l(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"RulerGroup"},enumerable:!0,configurable:!0}),e.prototype.addRuler=function(t,e,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=null);var l=this.getRulerByPosition(e,n);if(null==l){var l=this.fetchIdleRuler();l?l.visible=!0:(l=new i.a,this.addChild(l)),l.name=t;var u=l.rulerInput;u.inputable=o,u.inputData=r,u.addEvent(a.a.CLICK,this.onRulerClick,this);var h=0==o?Math.min(2,1/this.scene.scaleX):1/this.scene.scaleX;l.setData(e,n,h,this.unit),l.depth=o?1:0}else{l.name=t;var u=l.rulerInput;1==u.inputable&&0==o?u.inputable=!1:0==u.inputable&&1==o&&(u.inputable=!0),u.inputData=r;var h=0==u.inputable?Math.min(2,1/this.scene.scaleX):1/this.scene.scaleX;0==s.a.isNumberEqual(u.scaleX,h,.01)&&u.setScale(h,h)}l.delete=!1},e.prototype.removeRuler=function(t){for(var e,n=[],o=this.numChildren,i=0;i<o;i++)e=this.getChildAt(i),e.name==t&&n.push(e);for(var r=0,s=n;r<s.length;r++)e=s[r],e.rulerInput.removeEvent(a.a.CLICK,this.onRulerClick,this),e.clear(),this.removeChild(e)},e.prototype.getRulerByPosition=function(t,e){for(var n=null,o=0;o<this.numChildren;o++)if(n=this.getChildAt(o),1==s.a.isPoint2DEqual(n.globalStart,t,.1)&&1==s.a.isPoint2DEqual(n.globalStop,e,.1))return n;return null},e.prototype.fetchIdleRuler=function(){for(var t=null,e=0;e<this.numChildren;e++)if(t=this.getChildAt(e),0==t.visible)return t;return null},e.prototype.onRulerClick=function(t){this.dispatchEvent(new a.a(a.a.CLICK,t.data),this)},Object.defineProperty(e.prototype,"unitString",{get:function(){return this.unit==r.a.MM?"mm":this.unit==r.a.CM?"cm":"m"},enumerable:!0,configurable:!0}),e.prototype.deleteAll=function(){for(var t=0;t<this.numChildren;t++){this.getChildAt(t).delete=!0}},e.prototype.clearDeleteRulers=function(){for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);1==e.delete&&(e.clear(),e.visible=!1)}},e.prototype.clear=function(){for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);e.clear(),e.visible=!1}},e}(o.a)},HNIp:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".btnContainer[_ngcontent-%COMP%]{position:absolute;left:12px;width:100%;height:100%}.VToolButton[_ngcontent-%COMP%]{width:40px;height:35px;text-align:center;margin-right:3px}.huxingToolbarMore[_ngcontent-%COMP%], .VToolButton[_ngcontent-%COMP%]{float:left;margin-top:10px}.divide[_ngcontent-%COMP%]{float:left;width:10px;height:35px;margin-right:8px}.line[_ngcontent-%COMP%]{float:left;margin-top:16px;margin-left:10px;margin-right:10px}"]},HiNH:function(t,e,n){"use strict";var o=n("/oeL"),i=n("v7PY"),r=n("Dvc5");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(n,o){var r=t.call(this,n,o)||this;return r.radius=2,r.colorStyle=e.BLUE,r.backUpColor=i.a.YELLOW_BUTTON_UP,r.backOverColor=i.a.YELLOW_BUTTON_OVER,r.backDownColor=i.a.YELLOW_BUTTON_OVER,r.backUpAlpha=1,r.backOverAlpha=1,r.backDownAlpha=1,r.strokeUpColor=i.a.YELLOW_BUTTON_UP,r.strokeOverColor=i.a.YELLOW_BUTTON_OVER,r.strokeDownColor=i.a.YELLOW_BUTTON_OVER,r.strokeUpAlpha=0,r.strokeOverAlpha=0,r.strokeDownAlpha=0,r.textUpColor=i.a.FONT4,r.textOverColor=i.a.FONT5,r.textDownColor=i.a.FONT5,r.textSize=12,r.textWeight="",r.text="",r.textAlign="center",r}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.labelDom=this.labelRef.nativeElement,this.renderer.setStyle(this.dom,"vertical-align","middle"),this.renderer.setStyle(this.dom,"border-radius",this.radius+"px"),this.renderer.setStyle(this.dom,"border-width","1px"),this.renderer.setStyle(this.dom,"border-style","solid"),this.renderer.setStyle(this.labelDom,"line-height",this._height),this.renderer.setStyle(this.labelDom,"text-align",this.textAlign),this.setColorStyle(this.colorStyle),this.upStyle()},e.prototype.setColorStyle=function(t){switch(t){case e.BLUE:this.backUpColor=i.a.YELLOW_BUTTON_UP,this.backOverColor=i.a.YELLOW_BUTTON_OVER,this.backDownColor=i.a.YELLOW_BUTTON_OVER,this.textUpColor=i.a.FONT4,this.textOverColor=i.a.FONT5,this.textDownColor=i.a.FONT5;break;case e.WHITE_GRAY:this.backUpColor=i.a.WHITE_GRAY_BUTTON_UP,this.backOverColor=i.a.WHITE_GRAY_BUTTON_OVER,this.backDownColor=i.a.BLACK_GRAY_BUTTON_OVER,this.strokeUpColor=i.a.BLACK_GRAY_BUTTON_OVER,this.strokeOverColor=i.a.BLACK_GRAY_BUTTON_OVER,this.strokeDownColor=i.a.BLACK_GRAY_BUTTON_OVER,this.strokeUpAlpha=1,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=i.a.FONT4,this.textOverColor=i.a.FONT4,this.textDownColor=i.a.FONT5;break;case e.BLACK_GRAY:this.backUpColor=i.a.BLACK_GRAY_BUTTON_UP,this.backOverColor=i.a.BLACK_GRAY_BUTTON_OVER,this.backDownColor=i.a.BLACK_GRAY_BUTTON_OVER,this.textUpColor=i.a.FONT5,this.textOverColor=i.a.FONT5,this.textDownColor=i.a.FONT5;break;case e.TRANSPARENT:this.backUpColor=i.a.TOOLBAR_BG,this.backOverColor=i.a.MASTER,this.backDownColor=i.a.MASTER,this.backUpAlpha=0,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpAlpha=0,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=i.a.FONT3,this.textOverColor=i.a.FONT5,this.textDownColor=i.a.FONT5;break;case e.TRANSPARENT_GRAY:this.backUpColor=i.a.YELLOW_BUTTON_UP,this.backOverColor=i.a.YELLOW_BUTTON_UP,this.backDownColor=i.a.YELLOW_BUTTON_UP,this.backUpAlpha=0,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=13092807,this.strokeOverColor=13092807,this.strokeDownColor=13092807,this.strokeUpAlpha=1,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=i.a.FONT,this.textOverColor=i.a.FONT4,this.textDownColor=i.a.FONT4;break;case e.TRANSPARENT_GRAY2:this.backUpColor=i.a.YELLOW_BUTTON_UP,this.backOverColor=i.a.YELLOW_BUTTON_UP,this.backDownColor=i.a.YELLOW_BUTTON_UP,this.backUpAlpha=0,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=13092807,this.strokeOverColor=13092807,this.strokeDownColor=13092807,this.strokeUpAlpha=1,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=i.a.FONT5,this.textOverColor=i.a.FONT4,this.textDownColor=i.a.FONT4}},e.prototype.upStyle=function(){this.renderer.setStyle(this.dom,"background-color",i.a.toRGBAstring(this.backUpColor,this.backUpAlpha)),this.renderer.setStyle(this.dom,"border-color",i.a.toRGBAstring(this.strokeUpColor,this.strokeUpAlpha)),this.renderer.setStyle(this.dom,"font-size",this.textSize+"px"),this.renderer.setStyle(this.labelDom,"color",i.a.toString(this.textUpColor)),this.renderer.setStyle(this.labelDom,"font-weight",this.textWeight)},e.prototype.update=function(){this.labelDom.innerHTML=this.text},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(r.a);s.BLUE="1",s.WHITE_GRAY="2",s.BLACK_GRAY="3",s.TRANSPARENT="4",s.TRANSPARENT_GRAY="5",s.TRANSPARENT_GRAY2="6"},IKKv:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("lpfp"),r=n("Eezr"),a=n("0/et"),s=n("WYR6"),l=n("v8gm"),u=n("clJS"),h=n("UPT1"),c=n("+N0H"),p=n("v7PY"),d=n("SScf"),f=n("3NP2"),g=n("/T2q"),m=n("RxX8"),_=n("matE");n.d(e,"a",function(){return b});var y=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(){var e=t.call(this,!0,!1)||this;e.minAdsorbLength=12,e.maxAdsorbLength=48,e._drawMode="",e.path=new Array,e.mousePoint=null,e.lastMousePoints=[],e.lastScale=1,e.adsorb=null,e._needAdsorb=!0,e._needOrthogonal=!1,e.touchMoveFrameRate=40,e.depth=r.a.DRAW_BOARD,e.drawMode=f.a.PATH,e.mousePoint=new i.a,e.width=window.innerWidth,e.height=window.innerHeight;var n=new d.a(!0,!1);return n.width=e.width,n.height=e.height,n.graphics.beginFill(0,.1),n.graphics.drawRect(0,0,e.width,e.height),n.graphics.endFill(),e.addChild(n),e}return y(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Draw"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.clear()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),this.clear()},e.prototype.touchMove=function(t){if(1==t.touches.length){var e=this.path.length;if(e>0){var n=t.touches[0];this.mousePoint=new i.a(n.clientX,n.clientY);var o=this.scene.globalToLocal(this.mousePoint),r=this.getAdsorbResult(o).point.clone();1==e?this.path.push(r):this.path[e-1]=r,this.calcTransform(),this.drawMode==f.a.PATH&&h.a.inst.updateDrawRuler(this.path,this.adsorbLength)}}else if(this.lastMousePoints.length==t.touches.length){var a,s=t.touches[0],l=this.lastMousePoints[0],u=new i.a(s.clientX,s.clientY),c=t.touches[1],p=this.lastMousePoints[1],d=new i.a(c.clientX,c.clientY),g=l.subtract(p).length,m=u.subtract(d).length,_=this.lastScale*Math.sqrt(m/g);a=l.add(p),a=a.multiply(.5),a=this.scene.globalToLocal(a),this.scene.scaleScene(_,a)}},e.prototype.touchStart=function(t){if(t.touches.length>1){this.clear(),h.a.inst.update();for(var e=0;e<t.touches.length;e++){var n=t.touches[e];this.lastMousePoints.push(new i.a(n.clientX,n.clientY))}this.lastScale=this.scene.scale}else{var o=t.touches[0];this.mousePoint=new i.a(o.clientX,o.clientY);var r=this.scene.globalToLocal(this.mousePoint),a=this.getAdsorbResult(r).point.clone();this.adsorb=null,this.path.push(a),this.calcTransform()}},e.prototype.touchEnd=function(t){if(this.lastMousePoints.length>0)this.scene.dispatchEvent(new g.a(g.a.MSCENE_DRAW_CLOSED),this.scene);else{if(this.path.length>=2){var e=this.path[0];if(this.path[1].subtract(e).length<this.adsorbLength)return void this.clear();if(this.drawMode==f.a.PATH)this.scene.addPaths(this.path,!1);else if(this.drawMode==f.a.RECT){var n=this.path[0],o=this.path[this.path.length-1];this.path.length=0,this.path.push(n),this.path.push(new i.a(o.x,n.y)),this.path.push(o),this.path.push(new i.a(n.x,o.y)),this.scene.addPaths(this.path,!0)}}this.clear()}},e.prototype.clear=function(){this.graphics.clear(),this.mousePoint.setTo(0,0),this.adsorb=null,this.path.length=0,this.lastMousePoints.length=0,this.lastScale=1},Object.defineProperty(e.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adsorbLength",{get:function(){var t=c.a.SCALE_MIN_VALUE,e=Math.min(this.scene.scale,1),n=(e-t)/(1-t);return n=Math.max(n,0),this.maxAdsorbLength-n*(this.maxAdsorbLength-this.minAdsorbLength)},enumerable:!0,configurable:!0}),e.prototype.getAdsorbResult=function(t){if(null==this.adsorb){this.adsorb=new u.a(this.adsorbLength);var e;for(var n in this.scene.walls)e=this.scene.walls[n],this.adsorb.addEdge(e.start,e.stop);if(this.path.length>0)for(var o=0,i=this.path;o<i.length;o++){var r=i[o];this.adsorb.addPoint(r)}}return this.adsorb.pointAdsorb(t)},e.prototype.getFinalPoint=function(t){var e;if(e=this._needAdsorb?this.getAdsorbResult(t).point:this.mousePoint,1==this._needOrthogonal&&this.drawMode==f.a.PATH&&this.path.length>0){var n=this.path[this.path.length-1];Math.abs(e.x-n.x)>=Math.abs(e.y-n.y)?e.y=n.y:e.x=n.x}return e},e.prototype.drawPathTargetGraphics=function(){for(var t=this.scene.setting.getWallThickness(),e=this.path.length,n=0;n<e-1;n++){var o=this.path[n];o=this.scene.localToGlobal(o);var i=this.path[n+1];i=this.scene.localToGlobal(i);var r=i.subtract(o);if(r.length>=this.adsorbLength){var s=a.a.rotateVector(r,Math.PI/2,!0);s.normalize(Math.round(.5*t*this.scene.scale));var u=i.add(s),h=o.add(s);o=o.subtract(s),i=i.subtract(s);var c=new Array;c.push(o),c.push(i),c.push(u),c.push(h),this.graphics.lineStyle(1,p.a.GRAY,1),this.graphics.beginFill(_.a.MASTER,.5),l.a.drawPath(this.graphics,c,!0)}}this.graphics.endFill()},e.prototype.drawRectTargetGraphics=function(){if(!(this.path.length<2)){var t=this.path[0];t=this.scene.localToGlobal(t);var e=this.path[1];e=this.scene.localToGlobal(e);var n=new s.a,o=e.subtract(t);o.x>=0?n.x=t.x:n.x=e.x,o.y>=0?n.y=t.y:n.y=e.y,n.width=Math.abs(o.x),n.height=Math.abs(o.y),this.graphics.lineStyle(2,6710886,1),this.graphics.beginFill(_.a.MASTER,.5),this.graphics.moveTo(n.left,n.top),this.graphics.lineTo(n.right,n.top),this.graphics.lineTo(n.right,n.bottom),this.graphics.lineTo(n.left,n.bottom),this.graphics.lineTo(n.left,n.top),this.graphics.endFill()}},e.prototype.drawTargetGraphics=function(){this.path.length<2||(this.drawMode==f.a.PATH?this.drawPathTargetGraphics():this.drawMode==f.a.RECT&&this.drawRectTargetGraphics())},e.prototype.calcTransform=function(){if(this.stage){var t=new s.a(0,0,window.innerWidth,window.innerHeight);this.graphics.clear();var e=this.getFinalPoint(this.scene.globalToLocal(this.mousePoint));e=this.scene.localToGlobal(e),l.a.drawAuxiliary(this.graphics,e,this.mousePoint,t,_.a.MASTER,50),this.drawTargetGraphics()}},Object.defineProperty(e.prototype,"opened",{get:function(){return this.scene.viewPort.contains(this)},enumerable:!0,configurable:!0}),e.prototype.open=function(t){this.clear(),this.drawMode=t,0==this.scene.viewPort.contains(this)&&this.scene.viewPort.addChild(this),this.dispatchEvent(new m.a(m.a.DRAW_OPEN),this)},e.prototype.close=function(){this.clear(),this.scene.viewPort.contains(this)&&this.scene.viewPort.removeChild(this),this.dispatchEvent(new m.a(m.a.DRAW_CLOSE),this)},Object.defineProperty(e.prototype,"needAdsorb",{get:function(){return this._needAdsorb},set:function(t){this._needAdsorb=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needOrthogonal",{get:function(){return this._needOrthogonal},set:function(t){this._needOrthogonal=t},enumerable:!0,configurable:!0}),e}(o.a)},IO5Z:function(t,e,n){"use strict";var o=n("/oeL"),i=n("5ZTi"),r=n("matE"),a=n("v7PY");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.radius=2,i.colorStyle=e.BLUE_WHITE_NONE,i.backUpColor=r.a.MASTER,i.backOverColor=r.a.MASTER,i.backDownColor=r.a.MASTER,i.backUpAlpha=1,i.backOverAlpha=1,i.backDownAlpha=1,i.border="true",i.strokeUpColor=r.a.MASTER,i.strokeOverColor=r.a.MASTER,i.strokeDownColor=r.a.MASTER,i.strokeUpAlpha=0,i.strokeOverAlpha=0,i.strokeDownAlpha=0,i.textUpColor=a.a.FONT4,i.textOverColor=a.a.FONT5,i.textDownColor=a.a.FONT5,i.textSize=12,i.label="",i}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.labelDom=this.labelRef.nativeElement,"true"==this.border&&(this.renderer.setStyle(this.dom,"border-radius",this.radius+"px"),this.renderer.setStyle(this.dom,"border-width","1px"),this.renderer.setStyle(this.dom,"border-style","solid")),this.renderer.setStyle(this.dom,"vertical-align","middle"),this.renderer.setStyle(this.dom,"font-size",this.textSize+"px"),this.renderer.setStyle(this.labelDom,"line-height",this._height),this.setColorStyle(this.colorStyle),this.upStyle()},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.labelDom&&this.renderer.setStyle(this.labelDom,"line-height",t)},enumerable:!0,configurable:!0}),e.prototype.setColorStyle=function(t){switch(t){case e.BLUE_WHITE_NONE:this.backUpColor=r.a.MASTER,this.backOverColor=r.a.MASTER,this.backDownColor=r.a.MASTER,this.textUpColor=a.a.FONT5,this.textOverColor=a.a.FONT4,this.textDownColor=a.a.FONT4;break;case e.WHITE_GRAY_NONE:this.backUpColor=a.a.WHITE,this.backOverColor=14079961,this.backDownColor=14079961,this.backUpAlpha=1,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=0,this.strokeOverColor=0,this.strokeDownColor=0,this.strokeUpAlpha=0,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=3947580,this.textOverColor=3947580,this.textDownColor=3947580;break;case e.TRANSPARENT_BLACK_NONE:this.backUpColor=0,this.backOverColor=15461355,this.backDownColor=15461355,this.backUpAlpha=0,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=0,this.strokeOverColor=0,this.strokeDownColor=0,this.strokeUpAlpha=0,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=a.a.FONT,this.textOverColor=r.a.MASTER,this.textDownColor=r.a.MASTER;break;case e.TRANSPARENT_BLUE_NONE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.textUpColor=r.a.MASTER,this.textOverColor=r.a.MASTER,this.textDownColor=r.a.MASTER;break;case e.TRANSPARENT_WHITE_WHITE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.strokeUpColor=a.a.WHITE,this.strokeOverColor=a.a.WHITE,this.strokeDownColor=a.a.WHITE,this.strokeUpAlpha=1,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=a.a.FONT5,this.textOverColor=a.a.FONT5,this.textDownColor=a.a.FONT3;break;case e.TRANSPARENT_GRAY_NONE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.textUpColor=6710886,this.textOverColor=6710886,this.textDownColor=3355443;break;case e.WHITE_BLACK_GRAY:this.backUpColor=a.a.WHITE,this.backOverColor=a.a.GRAY,this.backDownColor=a.a.GRAY,this.backUpAlpha=1,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=14935011,this.strokeOverColor=14935011,this.strokeDownColor=14935011,this.strokeUpAlpha=1,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=a.a.FONT,this.textOverColor=a.a.FONT,this.textDownColor=a.a.FONT;break;case e.CIRCLE_BLUE_BLACK_NONE:this.backUpColor=r.a.MASTER,this.backOverColor=r.a.MASTER,this.backDownColor=a.a.GRAY,this.textUpColor=a.a.FONT5,this.textOverColor=a.a.FONT5,this.textDownColor=a.a.FONT5;break;case e.GRAY_BLACK_BLUE:this.backUpColor=16119285,this.backOverColor=16119285,this.backDownColor=16119285,this.backUpAlpha=1,this.backOverAlpha=0,this.backDownAlpha=0,this.strokeUpColor=r.a.MASTER,this.strokeOverColor=r.a.MASTER,this.strokeDownColor=r.a.MASTER,this.strokeUpAlpha=0,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=a.a.FONT,this.textOverColor=r.a.MASTER,this.textDownColor=r.a.MASTER}},e.prototype.upStyle=function(){this.renderer.setStyle(this.dom,"background-color",a.a.toRGBAstring(this.backUpColor,this.backUpAlpha)),this.renderer.setStyle(this.labelDom,"color",a.a.toString(this.textUpColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",a.a.toRGBAstring(this.strokeUpColor,this.strokeUpAlpha))},e.prototype.overStyle=function(){this.renderer.setStyle(this.dom,"background-color",a.a.toRGBAstring(this.backOverColor,this.backOverAlpha)),this.renderer.setStyle(this.labelDom,"color",a.a.toString(this.textOverColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",a.a.toRGBAstring(this.strokeOverColor,this.strokeOverAlpha))},e.prototype.downStyle=function(){this.renderer.setStyle(this.dom,"background-color",a.a.toRGBAstring(this.backDownColor,this.backDownAlpha)),this.renderer.setStyle(this.labelDom,"color",a.a.toString(this.textDownColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",a.a.toRGBAstring(this.strokeDownColor,this.strokeDownAlpha))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);l.BLUE_WHITE_NONE="1",l.WHITE_GRAY_NONE="2",l.TRANSPARENT_BLACK_NONE="3",l.TRANSPARENT_BLUE_NONE="4",l.TRANSPARENT_WHITE_WHITE="5",l.TRANSPARENT_GRAY_NONE="6",l.WHITE_BLACK_GRAY="7",l.CIRCLE_BLUE_BLACK_NONE="8",l.GRAY_BLACK_BLUE="9"},If4c:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%], .icon[_ngcontent-%COMP%]{position:absolute}.icon[_ngcontent-%COMP%]{background-size:100% 100%}"]},"InW/":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.queue=null,this.currentIndex=0,this.queue=[],this.currentIndex=-1,this.queue.length=0}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.clear=function(){this.currentIndex=-1,this.queue.length=0},Object.defineProperty(t.prototype,"undoable",{get:function(){return 0!=this.queue.length&&this.currentIndex<this.queue.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redoable",{get:function(){return 0!=this.queue.length&&this.currentIndex>0},enumerable:!0,configurable:!0}),t.prototype.popUndoObject=function(){return this.undoable?(this.currentIndex++,this.queue[this.currentIndex]):null},t.prototype.popRedoObject=function(){return this.redoable?(this.currentIndex--,this.queue[this.currentIndex]):null},t.prototype.undo=function(){this.undoable&&this.currentIndex++},t.prototype.redo=function(){this.redoable&&this.currentIndex--},t.prototype.backup=function(e){this.currentIndex>0&&this.queue.splice(0,this.currentIndex),this.queue.unshift(e),this.currentIndex=0,this.queue.length>t.QUEUE_SIZE&&(this.queue.length=t.QUEUE_SIZE)},t}();o.QUEUE_SIZE=20,o._instance=null},Ivjm:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{image:0}),(t()(),a._15(0,[[1,0],["image",1]],null,0,"div",[],null,null,null,null,null)),(t()(),a._14(null,["\n"])),(t()(),a._15(0,null,null,1,"p",[],null,null,null,null,null)),(t()(),a._14(null,["",""]))],null,function(t,e){t(e,4,0,e.component.structVO.text)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"huxing-struct-renderer",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("/hM2"),a=n("/oeL"),s=n("oV/x");n.d(e,"a",function(){return h});var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}}),h=a._19("huxing-struct-renderer",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",structVO:"structVO"},{},[])},"J78+":function(t,e,n){"use strict";var o=n("lpfp"),i=n("0/et"),r=n("WYR6"),a=n("Gd3X"),s=n("9GFw"),l=n("EE9o"),u=n("lSRa");n.d(e,"a",function(){return h});var h=function(){function t(){this.points=null,this._isHole=!1,this._holes=null,this.edgeTypes=[],this.mark="",this.containsPoint=new o.a,this.points=[],this.mark=null,this._holes=[]}return t.prototype.clear=function(){this.points.length=0,this._isHole=!1,this._holes.length=0,this.mark=null,this.edgeTypes.length=0},t.prototype.setEdgeType=function(t,e){t<=this.vertexCount&&(this.edgeTypes[t]=e)},t.prototype.getEdgeType=function(e){return e=s.a.getModIndex(e,this.vertexCount),this.edgeTypes.length>e?this.edgeTypes[e]:t.TYPE_NORMAL},t.prototype.getChangeTypeIndex=function(){for(var t=this.getEdgeType(0),e=1;e<this.vertexCount;e++)if(t!=this.getEdgeType(e))return e;return-1},t.prototype.isInflectionPoint=function(t){if(this.vertexCount<=3)return!0;var e=this.getPointAt_EX(t-1),n=this.getPointAt_EX(t),o=this.getPointAt_EX(t+1);return!i.a.isPointOnSegment_EX(e,n,o)},Object.defineProperty(t.prototype,"holes",{get:function(){return this._holes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"holeCount",{get:function(){return this._holes.length},enumerable:!0,configurable:!0}),t.prototype.addHole=function(t){this._holes.push(t)},t.prototype.addPoint=function(e,n){void 0===n&&(n=!1),n?this.points.unshift(new o.a(e.x,e.y)):(this.addVertexXY(e.x,e.y),this.edgeTypes.push(t.TYPE_NORMAL))},t.prototype.addVertexXY=function(t,e){this.points.push(new o.a(t,e))},t.prototype.addVertex=function(t){this.addVertexXY(t.x,t.y)},t.prototype.addPoints=function(t){this.clear();for(var e,n=0,o=t;n<o.length;n++)e=o[n],this.addPoint(e)},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.points},enumerable:!0,configurable:!0}),t.prototype.getVertexAt=function(t){return this.points[t]},t.prototype.getVertexPreAt=function(t){return this.getVertexAt(i.a.preIndex(t,this.vertexCount))},t.prototype.getVertexNextAt=function(t){return this.getVertexAt(i.a.nextIndex(t,this.vertexCount))},t.prototype.getPointAt=function(t){return this.points[t]},t.prototype.getPointAt_EX=function(t){return t%=this.vertexCount,t<0&&(t+=this.vertexCount),this.points[t]},t.prototype.getEdgeAt=function(t){return this.getPointAt_EX(t+1).subtract(this.getPointAt_EX(t))},t.prototype.addPointAt=function(e,n){return!(n>=this.vertexCount)&&(this.points.splice(n,0,e),this.edgeTypes.splice(n,0,t.TYPE_NORMAL),!0)},t.prototype.removePointAt=function(t){return!(t>=this.vertexCount)&&(this.points.splice(t,1),this.edgeTypes.splice(t,1),!0)},Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this.vertices.length},enumerable:!0,configurable:!0}),t.prototype.setClockSize=function(){this.area<0&&this.inversePoints()},t.prototype.inversePoints=function(){if(0!=this.vertexCount)for(var t=0;t<this.vertexCount/2;t++){var e=this.points[t];this.points[t]=this.points[this.vertexCount-1-t],this.points[this.vertexCount-1-t]=e;var n=this.edgeTypes[t];this.edgeTypes[t]=this.edgeTypes[this.vertexCount-1-t],this.edgeTypes[this.vertexCount-1-t]=n}},t.prototype.addPointXY=function(e,n,i){void 0===i&&(i=!1),i?this.points.unshift(new o.a(e,n)):(this.points.push(new o.a(e,n)),this.edgeTypes.push(t.TYPE_NORMAL))},t.prototype.setLastPoint=function(t){0!=this.vertexCount&&(this.points[this.vertexCount-1]=t.clone())},Object.defineProperty(t.prototype,"center",{get:function(){this._center||(this._center=new o.a);var t=this.boundRectangle;return this._center.setTo(t.x+.5*t.width,t.y+.5*t.height),this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundRect",{get:function(){if(this._boundRect||(this._boundRect=new r.a),0==this.vertexCount)return this._boundRect.setTo(0,0,0,0),this._boundRect;for(var t=Number.MAX_VALUE,e=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=-Number.MAX_VALUE,i=0;i<this.vertexCount;i++){var a=this.getVertexAt(i);t=Math.min(a.x,t),e=Math.min(a.y,e),n=Math.max(a.x,n),o=Math.max(a.y,o)}return this._boundRect.setTo(t,e,n-t,o-e),this._boundRect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundRectangle",{get:function(){return this.boundRect},enumerable:!0,configurable:!0}),t.prototype.cleanPath=function(){i.a.cleanPath(this.vertices)},t.calculateArea=function(e){if(e.length<3)return 0;for(var n=0,o=e[0],i=e[e.length-1],r=1;r<e.length;r++)n+=t.pointRound(e[r-1].x)*t.pointRound(e[r].y)-t.pointRound(e[r-1].y)*t.pointRound(e[r].x);return n+=t.pointRound(i.x)*t.pointRound(o.y)-t.pointRound(i.y)*t.pointRound(o.x),n=.5*Math.abs(n),Math.round(n/100)/100},t.pointRound=function(t){return Math.round(100*t)/100},t.cm2m=function(t){return Math.round(t)/100},t.prototype.getMidOnTheSegment=function(t){var e=this.getPointAt_EX(t).add(this.getPointAt_EX(t+1));return e.x/=2,e.y/=2,e},Object.defineProperty(t.prototype,"area",{get:function(){if(this.vertexCount<3)return 0;for(var t=[],e=0;e<this.vertexCount;e++)t.push(this.points[e]);return i.a.computeAreaByPointArray(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"perimeter",{get:function(){for(var t=0,e=0;e<this.vertexCount;e++)t+=this.getEdgeAt(e).length;return t},enumerable:!0,configurable:!0}),t.prototype.containsInPolygon=function(t){for(var e=0;e<t.vertexCount;e++)if(!this.containsIn(t.getPointAt(e)))return!1;return!0},t.prototype.containsIn=function(t){return i.a.isPointInPolygon(t,this.points,this.vertexCount)},t.prototype.containsOnPolygon=function(t){for(var e=0;e<t.vertexCount;e++)if(!this.containsOn(t.getPointAt(e)))return!1;return!0},t.prototype.containsInXY=function(t,e){return this.containsPoint.x=t,this.containsPoint.y=e,this.containsIn(this.containsPoint)},t.prototype.containsOn=function(t){return i.a.isPointOnPolygon(t,this.points,this.vertexCount)},t.prototype.containsOnXY=function(t,e){return this.containsPoint.x=t,this.containsPoint.y=e,this.containsOn(this.containsPoint)},t.prototype.intersect=function(t){var e,n,r=new o.a(Number.MAX_VALUE,Number.MAX_VALUE),a=new o.a(-Number.MAX_VALUE,-Number.MAX_VALUE),s=new o.a(Number.MAX_VALUE,Number.MAX_VALUE),l=new o.a(-Number.MAX_VALUE,-Number.MAX_VALUE);for(e=0;e<t.vertexCount;e++)t.points[e].x<r.x&&(r.x=t.points[e].x),t.points[e].y<r.y&&(r.y=t.points[e].y),t.points[e].x>a.x&&(a.x=t.points[e].x),t.points[e].y>a.y&&(a.y=t.points[e].y);for(e=0;e<this.vertexCount;e++)this.points[e].x<s.x&&(s.x=this.points[e].x),this.points[e].y<s.y&&(s.y=this.points[e].y),this.points[e].x>l.x&&(l.x=this.points[e].x),this.points[e].y>l.y&&(l.y=this.points[e].y);if(r.x>l.x||i.a.isNumberEqual(r.x,l.x))return!1;if(r.y>l.y||i.a.isNumberEqual(r.y,l.y))return!1;if(a.x<s.x||i.a.isNumberEqual(a.x,s.x))return!1;if(a.y<s.y||i.a.isNumberEqual(a.y,s.y))return!1;for(e=0;e<t.vertexCount;e++)if(this.containsIn(t.points[e]))return!0;for(e=0;e<this.vertexCount;e++)if(t.containsIn(this.points[e]))return!0;for(e=0;e<this.vertexCount;e++)for(n=0;n<t.vertexCount;n++)if(i.a.intersect(this.points[e],this.points[(e+1)%this.vertexCount],t.points[n],t.points[(n+1)%t.vertexCount]))return!0;for(var u,h=this.trangles,c=new o.a,p=0,d=h;p<d.length;p++)if(u=d[p],3==u.vertexCount)for(e=0;e<u.vertexCount;e++)if(c.x=.5*(u.points[e].x+u.points[(e+1)%u.vertexCount].x),c.y=.5*(u.points[e].y+u.points[(e+1)%u.vertexCount].y),t.containsIn(c))return!0;h=t.trangles;for(var f=0,g=h;f<g.length;f++)if(u=g[f],3==u.vertexCount)for(e=0;e<u.vertexCount;e++)if(c.x=.5*(u.points[e].x+u.points[(e+1)%u.vertexCount].x),c.y=.5*(u.points[e].y+u.points[(e+1)%u.vertexCount].y),this.containsIn(c))return!0;return!1},t.prototype.equal=function(t){if(this.vertexCount!=t.vertexCount)return!1;var e,n,o=-1,r=-1;for(e=0;e<this.vertexCount;e++)for(n=0;n<t.vertexCount;n++)if(i.a.isPointEqual(this.points[e],t.points[n])){o=e,r=n;break}if(o<0||r<0)return!1;for(e=(o+1)%this.vertexCount,n=(r+1)%t.vertexCount;;){if(e==o||n==r)break;if(!i.a.isPointEqual(this.points[e],t.points[n]))return!1;e=(e+1)%this.vertexCount,n=(n+1)%t.vertexCount}return!0},t.prototype.shapeEqual=function(t){var e,n,o;for(e=0;e<this.vertexCount;e++){for(o=!1,n=0;n<t.vertexCount;n++)if(i.a.isPointOnSegment(t.points[n],t.points[(n+1)%t.vertexCount],this.points[e])){o=!0;break}if(!o)return!1}for(e=0;e<t.vertexCount;e++){for(o=!1,n=0;n<this.vertexCount;n++)if(i.a.isPointOnSegment(this.points[n],this.points[(n+1)%this.vertexCount],t.points[e])){o=!0;break}if(!o)return!1}return!0},t.prototype.adjacent=function(t){if(this.shapeEqual(t))return!1;var e,n;for(e=0;e<this.vertexCount;e++)for(n=0;n<t.vertexCount;n++)if(i.a.isPointEqual(this.points[e],t.points[n])&&i.a.isPointEqual(this.points[(e+1)%this.vertexCount],t.points[(n+1)%t.vertexCount]))return!0;if(3==this.vertexCount||3==t.vertexCount){var o,r;for(3==this.vertexCount?(o=this,r=t):(o=t,r=this),e=0;e<o.vertexCount;e++)for(n=0;n<r.vertexCount;n++)if(i.a.isPointEqual(o.points[e],r.points[n])&&i.a.isPointOnLine(r.points[n],r.points[(n+1)%r.vertexCount],o.points[(e+1)%o.vertexCount])&&i.a.isPointOnLine(r.points[n],r.points[(n+r.vertexCount-1)%r.vertexCount],o.points[(e+o.vertexCount-1)%o.vertexCount]))return!0}return!1},t.prototype.inscribe=function(t){if(this.shapeEqual(t))return!1;var e;for(e=0;e<t.vertexCount;e++)if(!this.containsOn(t.points[e]))return!1;var n=0;for(e=0;e<t.vertexCount;e++)this.containsIn(t.points[e])||(n+=1);return n>=2&&n<t.vertexCount},t.prototype.surround=function(t){var e;for(e=0;e<t.vertexCount;e++)if(!this.containsIn(t.getPointAt(e)))return!1;return!0},t.prototype.insertPointOnEdge=function(t,e){var n=this.getPointAt_EX(e),o=this.getPointAt_EX(e+1);if(i.a.isPoint2DEqual(n,t)||i.a.isPoint2DEqual(o,t))return!1;s.a.getModIndex(e,this.vertexCount);return this.addPointAt(t,e+1),!0},t.prototype.subtractPolygons=function(t){if(void 0===t&&(t=null),!t)return this.triangulate();for(var e,n=new Array,o=0,i=t;o<i.length;o++)e=i[o],n.push(e.points);return this.triangulate(n)},t.prototype.triangulate=function(t){return void 0===t&&(t=null),this.vertexCount<3?null:a.a.triangulateSafe(this.vertices,t)},t.triangulate=function(t,e){return void 0===e&&(e=null),t.length<3?null:a.a.triangulateSafe(t,e)},t.prototype.fetchRandomInnerPoint=function(){var t=a.a.triangulate(this.points);if(0==t.length)return this.center;for(var e,n=0,o=null,r=0,s=t;r<s.length;r++){e=s[r];var l=i.a.calculatePolyArea(e);Math.abs(l)>n&&(n=Math.abs(l),o=e)}return o?i.a.calculatePolyCentroid(o):this.center},Object.defineProperty(t.prototype,"squeezePoints",{get:function(){for(var t=[],e=0;e<this.vertexCount;e++)i.a.isPointEqual(this.points[e],this.points[i.a.nextIndex(e,this.vertexCount)])||t.push(this.points[e]);return this.area>0&&t.reverse(),t},enumerable:!0,configurable:!0}),t.prototype.calVertexUVs=function(t,e,n){void 0===n&&(n=null),n||(n=this.points[0]);for(var i,r=[],a=0,s=this.points;a<s.length;a++)i=s[a],r.push(new o.a((i.x-n.x)/t,(n.y-i.y)/e));return r},t.prototype.generateVertexUVs=function(t,e,n){void 0===n&&(n=null);for(var o,i=this.calVertexUVs(t,e,n),r=new Array,a=0,s=i;a<s.length;a++)o=s[a],r.push(o.x,o.y);return r},Object.defineProperty(t.prototype,"trangles",{get:function(){for(var e,n,o,r=[],a=this.squeezePoints,s=0;;){if(s>=a.length-2)break;if(a.length<3)break;for(e=0;e<a.length;e++){var l=i.a.preIndex(e,a.length),u=i.a.nextIndex(e,a.length);if(!i.a.isConvex(a[l],a[e],a[u])){o=new t,o.addPointXY(a[l].x,a[l].y),o.addPointXY(a[e].x,a[e].y),o.addPointXY(a[u].x,a[u].y);var h=!1;for(n=0;n<a.length;n++)if(n!=e&&n!=l&&n!=u&&o.containsIn(a[n])){h=!0;break}if(!h){r.push(o),a.splice(e,1);break}}}s++}return r},enumerable:!0,configurable:!0}),t.prototype.scalePolygon=function(t,e){var n=new l.a;return n.translate(-t.x,-t.y),n.scale(e,e),n.translate(t.x,t.y),this.translate(n)},t.prototype.translate=function(e){for(var n,o=new t,i=0;i<this.vertexCount;i++)n=e.transformPoint(this.points[i]),o.addPointXY(n.x,n.y);return o},t.prototype.transform=function(e){for(var n,o=new t,i=0;i<this.vertexCount;i++)n=e.transformPoint(this.points[i]),o.addPointXY(n.x,n.y);return o},t.prototype.clone=function(){for(var e=new t,n=0;n<this.vertexCount;n++)e.addPointXY(this.points[n].x,this.points[n].y),e.setEdgeType(n,this.getEdgeType(n));return e.mark=this.mark,e},t.prototype.copyFrom=function(t){this.clear();for(var e=0;e<t.vertexCount;e++){var n=t.getPointAt(e);this.addPointXY(n.x,n.y)}this.mark=t.mark},t.prototype.toString=function(){for(var t="[polygon]:\t",e=0;e<this.vertexCount;e++){var n=this.points[e];t+="("+n.x.toFixed(2)+","+n.y.toFixed(2)+")\t"}return t},t.prototype.loadData=function(e){if(this.clear(),e.hasOwnProperty("points")){for(var n,o=0,i=e.points;o<i.length;o++)n=i[o],this.addVertexXY(n.x,n.y);if(e.hasOwnProperty("holes"))for(var r,a=0,s=e.holes;a<s.length;a++){r=s[a];var l=new t;l.loadData(r),this.addHole(l)}}else for(var u,h=0,c=e;h<c.length;h++)u=c[h],this.addPointXY(u.x,u.y)},t.prototype.loadString=function(t){this.loadData(t)},t.prototype.dumpData=function(t){if(void 0===t&&(t=!1),t){for(var e,n={points:[],holes:[]},o=0,i=this.vertices;o<i.length;o++)e=i[o],n.points.push({x:e.x,y:e.y});for(var r,a=0,s=this.holes;a<s.length;a++)r=s[a],n.holes.push(r.dumpData(t));return n}for(var l=[],u=0;u<this.vertexCount;u++){var h=this.getPointAt_EX(u);l.push({x:h.x,y:h.y})}return l},t.prototype.dumpString=function(t){return void 0===t&&(t=!1),JSON.stringify(this.dumpData(t))},t.prototype.calculateIntersectionsWithRay=function(t,e,n){void 0===n&&(n=null);var o,r,a=[];if(n)for(var s=0,l=n;s<l.length;s++)(o=l[s])<=this.vertexCount&&(r=i.a.raySegmentIntersection(t,e,this.points[o%this.vertexCount],this.points[(o+1)%this.vertexCount]))&&a.push(r);else for(o=0;o<this.vertexCount;o++)(r=i.a.raySegmentIntersection(t,e,this.points[o%this.vertexCount],this.points[(o+1)%this.vertexCount]))&&a.push(r);return a.length?a:null},t.prototype.toNumPositon=function(){for(var t,e=[],n=0,o=this.points;n<o.length;n++)t=o[n],e.push(t.x,t.y);return e},t.prototype.calcuIntersectionWithRaySegment=function(t,e,n){var r,a,s=[],l=new o.a(-n.x,-n.y);for(r=0;r<=this.vertexCount;r++)a=i.a.raySegmentIntersection(t,n,this.points[r%this.vertexCount],this.points[(r+1)%this.vertexCount]),a&&s.push(a),a=i.a.raySegmentIntersection(e,n,this.points[r%this.vertexCount],this.points[(r+1)%this.vertexCount]),a&&s.push(a),(a=i.a.raySegmentIntersection(this.points[r%this.vertexCount],l,t,e))&&s.push(a);return s.length?s:null},Object.defineProperty(t.prototype,"isHole",{get:function(){return this._isHole},set:function(t){this._isHole=t},enumerable:!0,configurable:!0}),t.prototype.getCenterPoint=function(t){void 0===t&&(t=null);for(var e,n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=-Number.MAX_VALUE,s=0;s<this.vertexCount;s++)e=this.getPointAt(s),n=Math.min(e.x,n),r=Math.max(e.x,r),i=Math.min(e.y,i),a=Math.max(e.y,a);return t?(t.x=.5*(n+r),t.y=.5*(i+a),t):new o.a(.5*(n+r),.5*(i+a))},t.prototype.getMaxDist=function(t){for(var e=0,n=0,o=this.points;n<o.length;n++){var i=o[n],r=i.subtract(t).length;r>e&&(e=r)}return e},Object.defineProperty(t.prototype,"isLegal",{get:function(){return this.vertexCount>=3},enumerable:!0,configurable:!0}),t.prototype.isRect=function(){if(4!=this.vertexCount)return!1;var t=[this.points[0].subtract(this.points[1]),this.points[1].subtract(this.points[2]),this.points[2].subtract(this.points[3]),this.points[3].subtract(this.points[0])];return i.a.isNumberEqual(t[0].length,t[2].length)&&i.a.isNumberEqual(t[1].length,t[3].length)&&i.a.isNumberEqual(t[0].dotProd(t[1]),0)},Object.defineProperty(t.prototype,"realWidth",{get:function(){for(var t,e=Number.MAX_VALUE,n=Number.MIN_VALUE,o=0,i=this.points;o<i.length;o++)t=i[o],e=Math.min(e,t.x),n=Math.max(n,t.x);return Math.abs(n-e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realLength",{get:function(){for(var t,e=Number.MAX_VALUE,n=Number.MIN_VALUE,o=0,i=this.points;o<i.length;o++)t=i[o],e=Math.min(e,t.y),n=Math.max(n,t.y);return Math.abs(n-e)},enumerable:!0,configurable:!0}),t.createPolygonFromArray=function(e){for(var n=new t,o=0;o<e.length/2;o++)n.addPointXY(e[2*o],e[2*o+1]);return n},t.createByPath=function(e){var n=new t;return n.points=e,n},t.prototype.autoSmooth=function(e){var n,o,i,r,a,s=new t,l=[];for(o=0;o<this.vertexCount;o++)n=this.getPointAt((o+1)%this.vertexCount).subtract(this.getPointAt(o)),n.normalize(),l.push(n);for(o=0;o<this.vertexCount;o++)i=l[(o-1+this.vertexCount)%this.vertexCount],r=l[o],a=this.getPointAt(o),s.addPoint(a),i.dotProd(r)<Math.cos(e)&&s.addPoint(a);return s},t.prototype.getCornerIndex=function(){var t,e=[],n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=-Number.MAX_VALUE,s=0;for(s=0;s<this.vertexCount;s++)t=this.getPointAt(s),n=Math.min(t.x,n),r=Math.max(t.x,r),i=Math.min(t.y,i),a=Math.max(t.y,a);var l=new o.a(n,i),u=new o.a(r,i),h=new o.a(n,a),c=new o.a(r,a),p=Number.MAX_VALUE,d=Number.MAX_VALUE,f=Number.MAX_VALUE,g=Number.MAX_VALUE,m=0,_=0,y=0,b=0;for(s=0;s<this.vertexCount;s++)t=this.getPointAt(s),t.subtract(l).length<p&&(p=t.subtract(l).length,m=s),t.subtract(u).length<d&&(d=t.subtract(u).length,_=s),t.subtract(h).length<f&&(f=t.subtract(h).length,y=s),t.subtract(c).length<g&&(g=t.subtract(c).length,b=s);return e.push(m),-1==e.indexOf(_)&&e.push(_),-1==e.indexOf(y)&&e.push(y),-1==e.indexOf(b)&&e.push(b),e},t.prototype.arbitraryPoint=function(t,e){var n=this.points[t],r=this.points[i.a.preIndex(t,this.vertexCount)],a=this.points[i.a.nextIndex(t,this.vertexCount)],s=a.subtract(n),l=r.subtract(n),u=Math.atan2(s.y,s.x)+i.a.vectorIncludedAngle(s,l,!0)/2;return i.a.less(this.area,0)&&(u+=Math.PI),new o.a(e*Math.cos(u)+n.x,e*Math.sin(u)+n.y)},t.prototype.arbitraryBottomRightPoint=function(t){for(var e,n=-1,o=-Number.MAX_VALUE,r=-Number.MAX_VALUE,a=0;a<this.vertexCount;a++)e=this.getPointAt(a),(e.x>o||i.a.isNumberEqual(e.x,o)&&e.y>r)&&(n=a,o=e.x,r=e.y);return this.arbitraryPoint(n,30)},t.prototype.toPolygon3D=function(t){void 0===t&&(t=0);for(var e=new u.a,n=0,o=this.points;n<o.length;n++){var i=o[n];e.addVertexXYZ(i.x,i.y,t)}return e},t.prototype.encode=function(t){void 0===t&&(t=!0);for(var e=[],n=0;n<this.vertexCount;n++){var o={},i=this.getPointAt(n);o.x=i.x,o.y=i.y,t&&(o.t=this.getEdgeType(n)),e.push(o)}return e},t.decode=function(e){for(var n=new t,o=0,i=e;o<i.length;o++){var r=i[o];n.addPointXY(r.x,r.y),r.hasOwnProperty("t")&&n.setEdgeType(n.vertexCount-1,r.t)}return n},t}();h.TYPE_DELETE=-1,h.TYPE_NORMAL=0,h.TYPE_ADD=1},JCpi:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.parent=null,o.contents=[],o.titleButtons=[],o.roomButtons=[],o}return r(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.contents=[this.content0.nativeElement,this.content1.nativeElement,this.content2.nativeElement,this.content3.nativeElement];var t=this.labelQueryList.toArray();this.titleButtons=t;var e=this.buttonQueryList.toArray();this.roomButtons=e,this.navigate(0)},e.prototype.setData=function(t){this.targetRoom=t,this.highlightRoomButton(this.targetRoom.tag)},e.prototype.navigate=function(t){for(var e=0,n=this.titleButtons;e<n.length;e++){var o=n[e];o.textSize=14,o.textUpColor=10066329,o.textWeight="",o.upStyle()}this.titleButtons[t].textSize=16,this.titleButtons[t].textUpColor=3355443,this.titleButtons[t].textWeight="bold",this.titleButtons[t].upStyle();for(var i=0,r=this.contents;i<r.length;i++){var a=r[i];this.renderer.setStyle(a,"display","none")}this.renderer.setStyle(this.contents[t],"display","block")},e.prototype.roomTypeClick=function(t){this.targetRoom&&(this.targetRoom.doChangeTag(t),this.highlightRoomButton(this.targetRoom.tag))},e.prototype.highlightRoomButton=function(t){for(var e=0,n=this.roomButtons;e<n.length;e++){var o=n[e];o.label==t?o.downStyle():o.upStyle()}},e.prototype.touchStart=function(t){var e=this.dom.scrollTop,n=this.dom.scrollHeight,o=e+this.dom.offsetHeight;0===e?this.dom.scrollTop=1:o===n&&(this.dom.scrollTop=e-1)},e.prototype.touchMove=function(t){this.parent.scrollable=!1,this.dom.offsetHeight<this.dom.scrollHeight&&(this.parent.scrollable=!0)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Jj2e:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("v7PY"),a=n("matE");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.textalign="center",o._label="0",o._lastLabel="0",o._selected=!1,o._editable=!0,o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.labelDom=this.labelRef.nativeElement,this.finalLabel="0",this.renderer.setStyle(this.dom,"vertical-align","middle"),this.renderer.setStyle(this.labelDom,"line-height",this.height),this.renderer.setStyle(this.labelDom,"text-align",this.textalign)},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.labelDom&&this.renderer.setStyle(this.labelDom,"line-height",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t,this.labelDom.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalLabel",{set:function(t){this._label=t,this._lastLabel=t,this.labelDom.innerHTML=this.label},enumerable:!0,configurable:!0}),e.prototype.resetLabel=function(){this.label=this._lastLabel,this.labelDom.innerHTML=this.label},e.prototype.upStyle=function(){this.renderer.setStyle(this.dom,"border-color",r.a.toString(r.a.WHITE)),this.renderer.setStyle(this.dom,"background-color",r.a.toString(r.a.WHITE)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(r.a.FONT))},e.prototype.downStyle=function(){this.renderer.setStyle(this.dom,"border-color",r.a.toString(a.a.MASTER)),this.renderer.setStyle(this.dom,"background-color",r.a.toString(r.a.WHITE)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(a.a.MASTER))},e.prototype.notEditStyle=function(){this.renderer.setStyle(this.dom,"border-color","#4a4a4a"),this.renderer.setStyle(this.dom,"background-color","#4a4a4a"),this.renderer.setStyle(this.labelDom,"color","#9b9b9b")},Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,1==this.editable&&(1==t?this.downStyle():this.upStyle())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t,0==t?this.notEditStyle():this.upStyle()},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);l.MAX_NUM=99999,l.MIM_NUM=1},Jrol:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:48px;height:100%;background-color:rgba(0,0,0,.6);border-radius:4px;box-shadow:0 2px 4px 0 hsla(0,0%,84%,.5);color:#fff;font-size:12px}"]},KC10:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e,n,o,i){void 0===o&&(o=null),void 0===i&&(i=!1),this.type=t,this.imageUrl=e,this.text=n,this.subType=o,this.dragable=i}return t}()},KE74:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("WFe8"),r=n("yOTB"),a=n("Eezr"),s=n("w9Am"),l=n("7/ty"),u=n("aJ2T"),h=n("/T2q"),c=n("MIhx"),p=n("J78+"),d=n("lpfp"),f=n("S3DN"),g=n("xijU"),m=n("WYR6"),_=n("0/et"),y=n("v8gm"),b=n("SScf"),v=n("4aTh"),w=n("sA2y"),O=n("matE");n.d(e,"a",function(){return E});var x=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(t){function e(){var e=t.call(this,!0,!0)||this;return e._itemNo="",e._tag="",e._overrideBoundPolygon=null,e.drawMask=!1,e.touchClickPoint=new d.a,e._walls=[],e._corners=[],e._centerPoint=new d.a(0,0),e._boundRectangle=new m.a,e.floor=null,e.depth=a.a.ROOM,e.itemNo=c.a.inst.defaultRoomItemNo,e.tag="主卧",e.drawMask=!1,e}return x(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Room"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),this.drawMask=!1,this.calculateTransform())},e.prototype.touchClick=function(e){if(1==this.hasMouseDown){t.prototype.touchEnd.call(this,e);var n=e.changedTouches[0];this.touchClickPoint.setTo(n.clientX,n.clientY),u.a.inst.focus(this)}},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.drawMask=!0,this.calculateTransform();var e={selectedItem:this,selectedPoint:this.touchClickPoint.clone()};this.scene.dispatchEvent(new h.a(h.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.drawMask=!1,this.calculateTransform(),this.scene.dispatchEvent(new h.a(h.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.clear=function(){t.prototype.clear.call(this),this._walls.length=0,this._corners.length=0},e.prototype.clearModels=function(){for(var t in this.scene.models){var e=this.scene.getModelByName(t);e&&(this.boundPolygon.containsInXY(e.realX,e.realY)&&this.scene.removeModel(e))}},Object.defineProperty(e.prototype,"item",{get:function(){return f.a.getInstance().getItemByNo(this.itemNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemNo",{get:function(){return this._itemNo},set:function(t){this._itemNo&&this.item.removeEvent(g.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this._itemNo=t,0==this.item.assetsReady?this.item.addEvent(g.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this):null!=this.stage&&this.assetsReadyHandler()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"walls",{get:function(){this._walls.length=0;var t;for(var e in this.scene.walls)t=this.scene.walls[e],t.forwardRoomName!=this.name&&t.backwardRoomName!=this.name&&t.aloneRoomName!=this.name||this._walls.push(t);return this._walls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomWalls",{get:function(){var t,e=new Array;for(var n in this.scene.walls)t=this.scene.walls[n],0!=t.adjacentRoomCount&&(t.forwardRoomName!=this.name&&t.backwardRoomName!=this.name||e.push(t));return e},enumerable:!0,configurable:!0}),e.prototype.isWallInThisRoom=function(t){return t.forwardRoomName==this.name||t.backwardRoomName==this.name||t.aloneRoomName==this.name},e.prototype.updateBoundPolygonAfterCornerChange=function(){var t=this.roomWalls;if(!(t.length<=1)){var e=t[0],n=[e],o=[e.start],i=e.stopCornerName;t.splice(0,1);for(var r=t.length;t.length>0;){for(var a=0;a<t.length;a++){if(t[a].startCornerName==i){n.push(t[a]),o.push(t[a].startCorner.point),i=t[a].stopCornerName,t.splice(a,1);break}if(t[a].stopCornerName==i){n.push(t[a]),o.push(t[a].stopCorner.point),i=t[a].startCornerName,t.splice(a,1);break}}if(--r<=0)break}this._boundPolygon.clear();for(var s=0,l=o;s<l.length;s++){var u=l[s];this._boundPolygon.addPointXY(u.x,u.y)}this._boundPolygon.area>0&&this._boundPolygon.inversePoints(),this.computeOverrideBoundPolygon()}},e.prototype.calcArea=function(){return Math.abs(this.boundPolygon.area)/1e4},e.prototype.calcPureArea=function(){this.clearWallRelation(),this.createWallRelation();for(var t,e=(new p.a,this.walls),n=new Array,o=new Array,i=0,r=e;i<r.length;i++)t=r[i],t.aloneRoomName&&t.aloneRoomName==this.name?n.push(t):o.push(t);for(var a=0,s=0,l=o;s<l.length;s++){t=l[s];var u=new p.a;u.addVertex(t.localStart),u.addVertex(t.localStop),t.forwardRoomName==this.name?(u.addVertex(t.topRight),u.addVertex(t.topLeft)):(u.addVertex(t.bottomRight),u.addVertex(t.bottomLeft),u.inversePoints()),a+=Math.abs(u.area)}for(var h=0,c=0,d=n;c<d.length;c++)t=d[c],h+=t.calcArea();return(Math.abs(this.boundPolygon.area)-h-a)/1e4},Object.defineProperty(e.prototype,"corners",{get:function(){this._corners.length=0;var t;for(var e in this.scene.corners)t=this.scene.corners[e],this.boundPolygon.containsOn(t.point)&&this._corners.push(t);return this._corners},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return this.boundPolygon.getCenterPoint(this._centerPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundRectangle",{get:function(){if(0==this.boundPolygon.vertexCount)return this._boundRectangle.x=-100,this._boundRectangle.y=-100,this._boundRectangle.width=200,this._boundRectangle.height=200,this._boundRectangle;for(var t,e=Number.MAX_VALUE,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=-Number.MAX_VALUE,a=0;a<this.boundPolygon.vertexCount;a++)t=this.boundPolygon.getPointAt(a),e=Math.min(t.x,e),n=Math.min(t.y,n),o=Math.max(t.x,o),r=Math.max(t.y,r);return e-=i.a.DEFAULT_LENGTH,n-=i.a.DEFAULT_LENGTH,o+=i.a.DEFAULT_LENGTH,r+=i.a.DEFAULT_LENGTH,this._boundRectangle.x=e,this._boundRectangle.y=n,this._boundRectangle.width=o-e,this._boundRectangle.height=r-n,this._boundRectangle},enumerable:!0,configurable:!0}),e.prototype.assetsReadyHandler=function(t){void 0===t&&(t=null),this.item.removeEvent(g.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this.calculateTransform()},Object.defineProperty(e.prototype,"boundPolygon",{get:function(){return this._boundPolygon},enumerable:!0,configurable:!0}),e.prototype.createWallRelation=function(){var t,e,n,o,i=this.boundPolygon.vertexCount;for(e=0;e<i;e++)n=this.boundPolygon.points[e],o=this.boundPolygon.points[(e+1)%i],(t=this.scene.getWallByEnds(n,o))&&(_.a.isPointEqual(t.start,n)&&_.a.isPointEqual(t.stop,o)?t.forwardRoomName=this.name:_.a.isPointEqual(t.start,o)&&_.a.isPointEqual(t.stop,n)&&(t.backwardRoomName=this.name));for(var r in this.scene.walls)t=this.scene.walls[r],t.forwardRoom||t.backwardRoom||(this.boundPolygon.containsIn(t.start)||this.boundPolygon.containsIn(t.stop))&&(t.aloneRoomName=this.name)},e.prototype.clearWallRelation=function(){var t;for(var e in this.scene.walls)t=this.scene.walls[e],t.forwardRoomName==this.name&&(t.forwardRoomName=""),t.backwardRoomName==this.name&&(t.backwardRoomName=""),t.aloneRoomName==this.name&&(t.aloneRoomName="");this._walls.length=0},e.prototype.calculatePolygon=function(){if(0!=this._updateControl.getValue(r.a.TAG_POLYGON)){this.polygon.clear();for(var t=this.sceneToLocalMatrix,e=0;e<this.boundPolygon.vertexCount;e++)this.polygon.addPoint(t.transformPoint(this.boundPolygon.getPointAt(e)));this._updateControl.getValue(r.a.TAG_POLYGON)}},e.prototype.calculateTransform=function(){var t=this.centerPoint;this.realX=t.x,this.realY=t.y,this.x=this.realX,this.y=this.realY,this.alpha=1,this.calculatePolygon(),this.draw()},e.prototype.draw=function(){this.graphics.clear();var t=this.polygon.boundRect;if(this.graphics.width=t.width>>1,this.graphics.height=t.height>>1,this.graphics.lineStyle(1,1048575,0),this.item&&this.item.assetsReady){var e=this.item.planBMD;this.graphics.beginRepeatBitmapFill(e.img,this.item.width,this.item.length),y.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill()}else this.graphics.beginFill(this.getFloorColor()),y.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill();this.drawMask&&(this.graphics.beginFill(O.a.MASTER,.3),y.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill())},e.prototype.drawToCanvas=function(t){if(t.lineStyle(1,1048575,0),this.item&&this.item.assetsReady){var e=this.item.planBMD;t.beginRepeatBitmapFill(e.img,this.item.width,this.item.length),y.a.drawPath(t,this.boundPolygon.vertices),t.endFill()}else t.beginFill(this.getFloorColor()),y.a.drawPath(t,this.boundPolygon.vertices),t.endFill()},e.prototype.addColorFloor=function(){this.floor=new b.a(!0,!0);var t=this.polygon.boundRect;this.floor.graphics.width=t.width>>1,this.floor.graphics.height=t.height>>1,this.floor.graphics.beginFill(this.getFloorColor()),y.a.drawPath(this.floor.graphics,this.polygon.vertices),this.floor.graphics.endFill(),this.addChild(this.floor)},e.prototype.removeColorFloor=function(){this.floor&&this.removeChild(this.floor),this.floor=null},e.prototype.getFloorColor=function(){var t=c.a.inst.huxingRoomFloorColors[this.tag];return t||(t=c.a.inst.huxingRoomFloorColors[""]),t},e.prototype.drawPolygon=function(){if(!(this.polygon.vertexCount<3)){var t=this.getDrawPolygonObj();this.graphics.drawPath(t.commands,t.points),t.destroy()}},e.prototype.getDrawPolygonPoints=function(){var t,e,n,o=new Array,i=this.boundPolygon.vertexCount,r=this.boundPolygon.points;for(o.push(r[0]),t=1;t<=i;t++)e=r[t-1],n=r[t%i],this.scene.getWallByEnds(e,n),o.push(r[t%i]);return o.length-=1,o},e.prototype.getDrawPolygonObj=function(){var t,e,n,o=new l.a,i=this.polygon.vertexCount,r=this.localToSceneMatrix;for(o.addPointAndCommand(this.polygon.points[0],v.a.MOVE_TO),t=1;t<=i;t++)e=r.transformPoint(this.polygon.points[t-1]),n=r.transformPoint(this.polygon.points[t%i]),this.scene.getWallByEnds(e,n),o.addPointAndCommand(this.polygon.points[t%i],v.a.LINE_TO);return o},e.prototype.actionClearModel=function(){this.clearModels(),this.scene.change()},e.prototype.actionDelete=function(){for(var t,e=this.walls,n=!1,o=0,i=e;o<i.length;o++)if(t=i[o],1==t.adjacentRoomCount){n=!0;break}if(!n)return void w.a.inst.warning("该房间不能删除");for(var r,a=this.corners,s=0,l=e;s<l.length;s++)t=l[s],(t=this.scene.getWallByName(t.name))&&t.adjacentRoomCount<2&&this.scene.removeWall(t,!0);for(var u=0,h=a;u<h.length;u++)r=h[u],this.scene.getCornerByName(r.name)&&r.calcWallCorner();for(var c in this.scene.walls){t=this.scene.walls[c];for(var p=0,d=a;p<d.length;p++)if(r=d[p],this.scene.getCornerByName(r.name)&&(t.startCornerName==r.name||t.stopCornerName==r.name)){t.setPolygonChangeFlag(!0),t.calculateTransform();break}}this.scene.removeRoom(this,!0),this.scene.change(!0,!0)},e.prototype.doChangeTag=function(t){if(t){this.tag=t,s.a.inst.update();var e=c.a.inst.huxingRoomItemNos;e[this.tag]&&(this.itemNo=e[this.tag]),this.scene.change()}},Object.defineProperty(e.prototype,"overrideBoundPolygon",{get:function(){return null==this._overrideBoundPolygon&&this.computeOverrideBoundPolygon(),this._overrideBoundPolygon},enumerable:!0,configurable:!0}),e.prototype.computeOverrideBoundPolygon=function(){null==this._overrideBoundPolygon&&(this._overrideBoundPolygon=new p.a),this._overrideBoundPolygon.clear(),this._overrideBoundPolygon.points=this.getDrawPolygonPoints()},e.prototype.doesBoundPolygonContaineVector2D=function(t,e){return this.overrideBoundPolygon?this.overrideBoundPolygon.containsInXY(t,e):this.boundPolygon.containsInXY(t,e)},e.prototype.dumpData=function(){var t,e=new Object,n=[];for(t=0;t<this.boundPolygon.vertexCount;t++)n.push({x:this.boundPolygon.points[t].x,y:this.boundPolygon.points[t].y});return e.name=this.name,e.points=n,e.itemNo=this.itemNo,e.tag=this.tag,e},e.loadData=function(t){var n=new e;n.name=t.name,t.hasOwnProperty("itemNo")&&(n.itemNo=t.itemNo),t.hasOwnProperty("tag")&&(n.tag=t.tag);for(var o=0,i=t.points;o<i.length;o++){var r=i[o];n.boundPolygon.addPointXY(r.x,r.y)}return n.computeOverrideBoundPolygon(),n},e}(o.a)},KHfe:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.UPDATE="CAMERA_EVENT_3D_UPDATE"},KLn3:function(t,e,n){"use strict";var o=n("SScf"),i=n("J78+"),r=n("u8Vu"),a=n("VzFt"),s=n("lpfp"),l=n("WYR6"),u=n("0/et");n.d(e,"a",function(){return c});var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(){var e=t.call(this,!0,!0)||this;return e.wallPolygon=new i.a,e.wallWidth=0,e.windowPolygons=[],e.doorPolygons=[],e.rulers=[],e.tags=[],e.width=1e3,e.height=1e3,e}return h(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"FacadeScene"},enumerable:!0,configurable:!0}),e.prototype.open=function(t,e){this.createWallPolygon(t,e),this.createWindowPolygons(t,e),this.createDoorPolygons(t,e),this.center(),this.draw()},e.prototype.createRuler=function(){for(var t=[],e=this.polygons,n=0,o=e;n<o.length;n++){var i=o[n];t=t.concat(i.vertices)}for(var a=[],l=[],u=0,h=t;u<h.length;u++){var c=h[u];a.indexOf(c.x)<0&&a.push(c.x),l.indexOf(c.y)<0&&l.push(c.y)}a.sort(function(t,e){return t>e?1:-1}),l.sort(function(t,e){return t>e?1:-1});for(var p=this.bound,d=0;d<a.length-1;d++){var f=new s.a(a[d],p.bottom+25),g=new s.a(a[d+1],p.bottom+25),m=new r.a(f,g,1/this.scale);this.rulers.push(m),this.addChild(m)}for(var d=0;d<l.length-1;d++){var f=new s.a(p.left-25,l[d]),g=new s.a(p.left-25,l[d+1]),m=new r.a(f,g,1/this.scale);this.rulers.push(m),this.addChild(m)}},e.prototype.createTag=function(){for(var t=0,e=this.windowPolygons;t<e.length;t++){var n=e[t],o=n.center,i=new a.a("窗",1/this.scale);i.setXY(o.x,o.y-20),this.addChild(i),this.tags.push(i)}for(var r=0,s=this.doorPolygons;r<s.length;r++){var n=s[r],o=n.center,i=new a.a("门",1/this.scale);i.setXY(o.x,o.y-20),this.addChild(i),this.tags.push(i)}},e.prototype.createWallPolygon=function(t,e){var n,o;1==e?(n=t.topLeft,o=t.topRight):(n=t.bottomLeft,o=t.bottomRight),this.wallWidth=n.subtract(o).length;var r=t.realHeight,a=new s.a(0,0),l=new s.a(this.wallWidth,0),u=new s.a(this.wallWidth,-r),h=new s.a(0,-r),c=new i.a;c.addVertex(a),c.addVertex(l),c.addVertex(u),c.addVertex(h),this.wallPolygon=c},e.prototype.createWindowPolygons=function(t,e){for(var n=[],o=t.openings,r=0,a=o;r<a.length;r++){var l=a[r];if(0!=l.isWindow){var u=l.wallX+this.wallWidth/2-l.realWidth/2,h=l.realZ,c=l.realWidth,p=l.realHeight,d=new s.a(u,-h),f=new s.a(u+c,-h),g=new s.a(u+c,-(h+p)),m=new s.a(u,-(h+p)),_=new i.a;_.addVertex(d),_.addVertex(f),_.addVertex(g),_.addVertex(m),n.push(_)}}this.windowPolygons=n},e.prototype.createDoorPolygons=function(t,e){for(var n=[],o=t.openings,r=0,a=o;r<a.length;r++){var l=a[r];if(1!=l.isWindow){var u=l.wallX+this.wallWidth/2-l.realWidth/2,h=l.realZ,c=l.realWidth,p=l.realHeight,d=new s.a(u,-h),f=new s.a(u+c,-h),g=new s.a(u+c,-(h+p)),m=new s.a(u,-(h+p)),_=new i.a;_.addVertex(d),_.addVertex(f),_.addVertex(g),_.addVertex(m),n.push(_)}}this.doorPolygons=n},e.prototype.center=function(){for(var t=this.wallPolygon.center,e=new s.a(-t.x,-t.y),n=this.polygons,o=0,i=n;o<i.length;o++)for(var r=i[o],a=r.vertices,l=0,u=a;l<u.length;l++){var h=u[l];h.x+=e.x,h.y+=e.y}},e.prototype.draw=function(){this.graphics.lineStyle(2,3355443),this.drawPolygon(this.wallPolygon);for(var t=0,e=this.windowPolygons;t<e.length;t++){var n=e[t];this.drawPolygon(n)}for(var o=0,i=this.doorPolygons;o<i.length;o++){var n=i[o];this.drawPolygon(n)}this.graphics.endStroke()},e.prototype.drawPolygon=function(t){for(var e=t.vertices,n=e.length,o=0;o<e.length;o++){var i=e[o],r=e[u.a.nextIndex(o,n)];this.graphics.moveTo(i.x,i.y),this.graphics.lineTo(r.x,r.y)}},Object.defineProperty(e.prototype,"polygons",{get:function(){return[this.wallPolygon].concat(this.windowPolygons).concat(this.doorPolygons)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bound",{get:function(){for(var t=new l.a(-100,-100,100,100),e=99999999,n=99999999,o=-99999999,i=-99999999,r=this.polygons,a=0,s=r;a<s.length;a++)for(var u=s[a],h=u.vertices,c=0,p=h;c<p.length;c++){var d=p[c];e=Math.min(d.x,e),n=Math.min(d.y,n),o=Math.max(d.x,o),i=Math.max(d.y,i)}return e<99999999&&t.setTo(e,n,o-e,i-n),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.scaleX},enumerable:!0,configurable:!0}),e}(o.a)},Kmjt:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{structWidthInput:0}),a._13(402653184,2,{structLengthInput:0}),(t()(),a._15(0,null,null,21,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["长度"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","55px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,11)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallWidthSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[1,4],["structWidthInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["厚度"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","55px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,21)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallLengthSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[2,4],["structLengthInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n"]))],function(t,e){t(e,11,0,"55px","19px");t(e,21,0,"55px","19px")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"struct-setting-bar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("U3zN"),a=n("/oeL"),s=n("3cEh"),l=n("nhaO"),u=n("Jj2e");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("struct-setting-bar",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},KpE8:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.HOLE=0,o.DOOR_COMMON=201,o.DOOR_DOUBLE=202,o.DOOR_SLIDING=203,o.WINDOW_COMMON=301,o.WINDOW_BAY=302,o.WINDOW_FRENCH=303},L2IC:function(t,e,n){"use strict";var o=n("/oeL"),i=n("5ZTi"),r=n("v7PY");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.label="",o.iconSelected="assets/components/radiobutton/selected_3x.png",o.iconUnSelected="assets/components/radiobutton/unselected_3x.png",o.iconUnEnabledSelected="assets/components/radiobutton/unenabled_selected_3x.png",o.iconUnEnabledUnSelected="assets/components/radiobutton/unenabled_unselected_3x.png",o.hasIcon="true",o.backUpColor=r.a.toString(r.a.WHITE),o.backDownColor=r.a.toString(r.a.WHITE),o.selectedColor="#00c0c7",o.unSelectedColor="#666666",o.unEnabledColor="#e3e3e3",o.textSize=12,o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.radio=this.radioRef.nativeElement,this.radioLabel=this.radioLabelRef.nativeElement,"false"==this.hasIcon&&this.renderer.setStyle(this.radio,"display","none"),this.renderer.setStyle(this.radioLabel,"line-height",this._height),this.renderer.setStyle(this.radioLabel,"vertical-align","middle"),this.renderer.setStyle(this.radioLabel,"font-size",this.textSize+"px"),this.upStyle()},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.radioLabel&&this.renderer.setStyle(this.radioLabel,"line-height",t)},enumerable:!0,configurable:!0}),e.prototype.touchStart=function(t){void 0===t&&(t=null),1==this.enabled&&(this.selected=!this.selected)},e.prototype.upStyle=function(){"true"==this.hasIcon&&this.renderer.setStyle(this.radio,"background-image","url("+this.iconUnSelected+")"),this.renderer.setStyle(this.radioLabel,"color",this.unSelectedColor),this.renderer.setStyle(this.dom,"background-color",this.backUpColor),t.prototype.upStyle.call(this)},e.prototype.downStyle=function(){"true"==this.hasIcon&&this.renderer.setStyle(this.radio,"background-image","url("+this.iconSelected+")"),this.renderer.setStyle(this.radioLabel,"color",this.selectedColor),this.renderer.setStyle(this.dom,"background-color",this.backDownColor),t.prototype.downStyle.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,1==t?this.selected=this.selected:("true"==this.hasIcon&&(1==this.selected?this.renderer.setStyle(this.radio,"background-image","url("+this.iconUnEnabledSelected+")"):this.renderer.setStyle(this.radio,"background-image","url("+this.iconUnEnabledUnSelected+")")),this.renderer.setStyle(this.radioLabel,"color",this.unEnabledColor))},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},L7Bd:function(t,e,n){"use strict";var o=n("SScf"),i=n("mfrV");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n,o){var r=t.call(this)||this;return r.label=new i.a(!1),r.label.text="查看",r.label.size=12,r.label.setXY(-25,10),r.label.width=50,r.label.height=20,r.label.color="#333333",r.label.align="center",r.addChild(r.label),r}return r(e,t),e}(o.a)},LF0A:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("s/43"),a=n("+6Ri");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(n,o){var i=t.call(this,n,o)||this;return e._instance=i,i}return s(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.scrollable=!0},e.prototype.open=function(t,e){void 0===e&&(e=null),this.visible="true",this.updateComponentProperty();var n=r.a.inst.createComponent(t,this.container),o=n.instance;o instanceof a.a&&(o.openData=e)},e.prototype.closeAll=function(){this.visible="false",this.container.clear()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Ldlf:function(t,e,n){"use strict";var o=n("7vHI");n.d(e,"a",function(){return i});var i=function(){function t(){this.eventMap=new o.a}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(t,e,n,o){var i=this.eventMap.getValue(t);if(null==i){var a=new r;a.func=e,a.thisObj=n,a.listener=o,i=[],i.push(a),this.eventMap.add(t,i)}else{if(this.contains(e,n,o,i)<0){var s=new r;s.func=e,s.thisObj=n,s.listener=o,i.push(s)}}},t.prototype.removeEvent=function(t,e,n,o){var i=this.eventMap.getValue(t);if(null!=i){var r=this.contains(e,n,o,i);r>=0&&i.splice(r,1)}},t.prototype.trigger=function(t,e){t.target=e;var n=[],o=this.eventMap.getValue(t.type);if(null!=o&&o.length>0)for(var i=o.length,r=0;r<i;r++){var a=o[r];a.listener==e&&n.push(a)}for(var s=0;s<n.length;s++){var a=n[s];a.func.call(a.thisObj,t)}},t.prototype.contains=function(t,e,n,o){for(var i=o.length,r=0;r<i;r++)if(o[r].func===t&&o[r].thisObj===e&&o[r].listener==n)return r;return-1},t}(),r=function(){function t(){}return t}()},Luvd:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("wRF1");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.inputVisible=!1,o.checkLegalTimer=null,o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=this;this.height="42px",this.updateComponentProperty(),this.textInput=this.textInputRef.nativeElement,this.textInput.onkeyup=function(){return t.keyUp()},this.showInput(!1)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.dom&&this.renderer.setStyle(this.dom,"width",t),this.textInput&&this.renderer.setStyle(this.textInput,"width",this.widthNumber-85+"px")},enumerable:!0,configurable:!0}),e.prototype.keyUp=function(){this.checkLegal(),this.dispatchEvent(new r.a(r.a.OPTION_SETTING_INPUT_CHANGE,{on:!0,value:this.textInput.value}),this)},e.prototype.startCheckLegalTimer=function(){var t=this;this.stopCheckLegalTimer(),this.checkLegalTimer=setInterval(function(){t.checkLegal()},100)},e.prototype.stopCheckLegalTimer=function(){this.checkLegalTimer&&clearInterval(this.checkLegalTimer),this.checkLegalTimer=null},e.prototype.checkLegal=function(){var t=this.textInput.value.replace(/[^\d]/g,"");t=""==t?"0":t,this.value=t},Object.defineProperty(e.prototype,"value",{set:function(t){var n=parseInt(t);n=Math.min(e.MAX,n),n=Math.max(e.MIN,n),this.textInput.value=n.toString()},enumerable:!0,configurable:!0}),e.prototype.slideClick=function(){this.showInput(!this.inputVisible)},e.prototype.showInput=function(t){var e=this;this.inputVisible=t,this.slideBox.selected=t,1==t?(this.renderer.setStyle(this.textInput,"display","block"),this.height="83px",setTimeout(function(){e.textInput.focus()},100),this.dispatchEvent(new r.a(r.a.OPTION_SETTING_INPUT_CHANGE,{on:!0,value:this.textInput.value}),this)):(this.renderer.setStyle(this.textInput,"display","none"),this.height="42px",this.dom.focus(),this.dispatchEvent(new r.a(r.a.OPTION_SETTING_INPUT_CHANGE,{on:!1,value:"0"}),this))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);s.MAX=99999,s.MIN=0},LxKY:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.register=function(){t.HUXING_DETAIL=t.API_ROOT+t.HUXING_DETAIL,t.HUXING_SAVE=t.API_ROOT+t.HUXING_SAVE,t.HUXING_SAVE_PROPERTY=t.API_ROOT+t.HUXING_SAVE_PROPERTY,t.HUXING_ITEM_LIST=t.API_ROOT+t.HUXING_ITEM_LIST,t.HUXING_ITEM_DETAIL=t.API_ROOT+t.HUXING_ITEM_DETAIL,t.HUXING_CONFIG_ROOM_MATERIALS=t.API_ROOT+t.HUXING_CONFIG_ROOM_MATERIALS,t.DESIGH_DETAIL=t.API_ROOT+t.DESIGH_DETAIL,t.DESIGH_SAVE=t.API_ROOT+t.DESIGH_SAVE,t.NEW_SAMPLE_BASE_DETAIL=t.API_ROOT+t.NEW_SAMPLE_BASE_DETAIL,t.NEW_SAMPLE_SAVE_BASE=t.API_ROOT+t.NEW_SAMPLE_SAVE_BASE,t.NEW_SAMPLE_APPLY_DETAIL=t.API_ROOT+t.NEW_SAMPLE_APPLY_DETAIL,t.NEW_SAMPLE_SAVE_APPLY=t.API_ROOT+t.NEW_SAMPLE_SAVE_APPLY,t.NEW_SAMPLE_PANO_RENDER=t.API_ROOT+t.NEW_SAMPLE_PANO_RENDER,t.DA_CONFIG=t.API_ROOT+t.DA_CONFIG,t.DA_ITEM_CATEGORY=t.API_ROOT+t.DA_ITEM_CATEGORY,t.DA_ITEM_LIST=t.API_ROOT+t.DA_ITEM_LIST,t.DA_ITEM_NEW_LIST=t.API_ROOT+t.DA_ITEM_NEW_LIST,t.DA_ITEM_DETAIL=t.API_ROOT+t.DA_ITEM_DETAIL,t.DA_ITEM_MULTIPLE=t.API_ROOT+t.DA_ITEM_MULTIPLE,t.DA_ITEM_COMPANYCATEGORY=t.API_ROOT+t.DA_ITEM_COMPANYCATEGORY,t.DA_ITEM_COMPANYCUSTOMCATEGORY=t.API_ROOT+t.DA_ITEM_COMPANYCUSTOMCATEGORY,t.DA_CASE_NEW_DETAIL=t.API_ROOT+t.DA_CASE_NEW_DETAIL,t.DA_CASE_SUBCASE_DETAIL=t.API_ROOT+t.DA_CASE_SUBCASE_DETAIL,t.DA_CASE_SUBCASE_SAVE=t.API_ROOT+t.DA_CASE_SUBCASE_SAVE,t.PANODA_CASE_DETAIL=t.API_ROOT+t.PANODA_CASE_DETAIL,t.PANODA_ITEM_LIST=t.API_ROOT+t.PANODA_ITEM_LIST,t.PANODA_HARDWARE_LIST=t.API_ROOT+t.PANODA_HARDWARE_LIST,t.PANODA_HARDWARE_COMPOSITE=t.API_ROOT+t.PANODA_HARDWARE_COMPOSITE,t.PANODA_CASE_SAVE=t.API_ROOT+t.PANODA_CASE_SAVE,t.PANODA_ITEM_DETAIL=t.API_ROOT+t.PANODA_ITEM_DETAIL,t.PANODA_CASE_list=t.API_ROOT+t.PANODA_CASE_list,t.PANODA_MATERIAL_COLOR_EXIST=t.API_ROOT+t.PANODA_MATERIAL_COLOR_EXIST,t.PANODA_VR_PANO_QR_CODE=t.API_ROOT+t.PANODA_VR_PANO_QR_CODE,t.PANODA_INTENTION_GET_NO=t.API_ROOT+t.PANODA_INTENTION_GET_NO,t.PANODA_INTENTION_ADD_CASE_NO=t.API_ROOT+t.PANODA_INTENTION_ADD_CASE_NO,t.PANODA_INTENTION_SAVE=t.API_ROOT+t.PANODA_INTENTION_SAVE,t.PANODA_ITEM_REPLACE=t.API_ROOT+t.PANODA_ITEM_REPLACE,t.MULTIPLE_ITEM_LIST=t.API_ROOT+t.MULTIPLE_ITEM_LIST,t.GOODS_DETAIL=t.API_ROOT+t.GOODS_DETAIL,t.GOODS_LIST=t.API_ROOT+t.GOODS_LIST,t.ITEM_CATEGORY=t.API_ROOT+t.ITEM_CATEGORY,t.DA_CASE_GET_GOODS_LIST=t.API_ROOT+t.DA_CASE_GET_GOODS_LIST,t.CATEGORY_TREE=t.API_ROOT+t.CATEGORY_TREE},t}();o.API_ROOT="https://yun.jiandanhome.com/",o.MEDIA_ROOT="https://img.jiandanhome.com/",o.HUXING_DETAIL="deco/huxing/detail/",o.HUXING_SAVE="deco/huxing/save/",o.HUXING_SAVE_PROPERTY="deco/huxing/save_property/",o.HUXING_ITEM_LIST="deco/huxing/item/list/",o.HUXING_ITEM_DETAIL="deco/huxing/item/detail/",o.HUXING_CONFIG_ROOM_MATERIALS="deco/huxing/config/room_materials/",o.DESIGH_DETAIL="deco/design/detail/",o.DESIGH_SAVE="deco/design/save/",o.NEW_SAMPLE_BASE_DETAIL="deco/sample/newsample/basedetail/",o.NEW_SAMPLE_SAVE_BASE="deco/sample/newsample/savebase/",o.NEW_SAMPLE_APPLY_DETAIL="deco/sample/newsample/applydetail/",o.NEW_SAMPLE_SAVE_APPLY="deco/sample/newsample/saveapply/",o.NEW_SAMPLE_PANO_RENDER="deco/sample/newsample/panorender/",o.DA_CONFIG="da/config/",o.DA_ITEM_CATEGORY="da/item/category/",o.DA_ITEM_LIST="da/item/list/",o.DA_ITEM_DETAIL="da/item/detail/",o.DA_ITEM_MULTIPLE="da/item/multiple/",o.DA_ITEM_NEW_LIST="da/item/new_list/",o.DA_ITEM_COMPANYCATEGORY="da/item/company_category/",o.DA_ITEM_COMPANYCUSTOMCATEGORY="da/item/company_custom_category/",o.PANODA_ITEM_DETAIL="panoda/item/detail/",o.PANODA_ITEM_LIST="panoda/item/list/",o.PANODA_CASE_DETAIL="panoda/case/detail/",o.PANODA_HARDWARE_LIST="panoda/hardware/list/",o.PANODA_HARDWARE_COMPOSITE="panoda/hardware/composite/",o.PANODA_CASE_SAVE="panoda/case/save/",o.PANODA_CASE_list="panoda/case/list/",o.PANODA_MATERIAL_COLOR_EXIST="panoda/item/get/material_color_exist/",o.PANODA_VR_PANO_QR_CODE="panoda/case/vr_pano_qr_code/",o.PANODA_INTENTION_GET_NO="da/intention/get_uuid/",o.PANODA_INTENTION_ADD_CASE_NO="da/intention/add_case/",o.PANODA_INTENTION_SAVE="da/intention/save/",o.PANODA_ITEM_REPLACE="panoda/item/replace",o.DA_CASE_NEW_DETAIL="da/case/new_detail/",o.DA_CASE_SUBCASE_DETAIL="da/case/subcase_detail/",o.DA_CASE_SUBCASE_SAVE="da/case/subcase_save_data/",o.MULTIPLE_ITEM_LIST="deco/item/multiple_post/",o.GOODS_DETAIL="deco/goods/detail/",o.GOODS_LIST="deco/goods/list/",o.ITEM_CATEGORY="deco/item/category/get/",o.DA_CASE_GET_GOODS_LIST="da/case/get_goods_list/",o.CATEGORY_TREE="deco/category/tree/"},MGNB:function(t,e,n){"use strict";var o=n("6xdJ"),i=n("fzMI"),r=n("X7Gc"),a=n("jroH"),s=n("j8JM");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(){var e=t.call(this)||this;return e.onMouseClickArrow=function(t){return e.onMouseClick(t)},e.onMouseMoveArrow=function(t){e.onMouseMove(t)},e.onTouchEndLambda=function(t){return e.onTouchEnd(t)},e.onTouchMoveLambda=function(t){return e.onTouchMove(t)},e}return l(e,t),Object.defineProperty(e,"inst",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.startDrag=function(t,n,o,r){var a=this;this.sourceData=t,this.image=n,setTimeout(function(){1==e.mouseEnabled&&(document.body.addEventListener(i.a.CLICK,a.onMouseClickArrow),document.body.addEventListener(i.a.MOUSE_MOVE,a.onMouseMoveArrow)),1==e.touchEnabled&&(document.body.addEventListener(s.a.TOUCH_END,a.onTouchEndLambda),document.body.addEventListener(s.a.TOUCH_MOVE,a.onTouchMoveLambda))},100),this.image.depth=9999,this.image.x=o-(this.image.width>>1),this.image.y=r-(this.image.height>>1),document.body.appendChild(this.image.dom)},e.prototype.stopDrag=function(){null!=this.image&&(document.body.removeChild(this.image.dom),this.image=null),document.body.removeEventListener(i.a.CLICK,this.onMouseClickArrow),document.body.removeEventListener(i.a.MOUSE_MOVE,this.onMouseMoveArrow),document.body.removeEventListener(s.a.TOUCH_END,this.onTouchEndLambda),document.body.removeEventListener(s.a.TOUCH_MOVE,this.onTouchMoveLambda)},e.prototype.onMouseClick=function(t){this.stopDrag();var e=new a.a;e.sourceData=this.sourceData,e.mouseX=t.clientX,e.mouseY=t.clientY,this.dispatchEvent(new r.a(r.a.DRAG_ENTER,e),this)},e.prototype.onMouseMove=function(t){this.image&&(this.image.x=t.clientX-(this.image.width>>1),this.image.y=t.clientY-(this.image.height>>1));var e=new a.a;e.sourceData=this.sourceData,e.mouseX=t.clientX,e.mouseY=t.clientY,this.dispatchEvent(new r.a(r.a.DRAG_MOVE,e),this)},e.prototype.onTouchEnd=function(t){this.stopDrag();var e=t.changedTouches[0],n=new a.a;n.sourceData=this.sourceData,n.mouseX=e.clientX,n.mouseY=e.clientY,this.dispatchEvent(new r.a(r.a.DRAG_ENTER,n),this)},e.prototype.onTouchMove=function(t){var e=t.touches[0];this.image&&(this.image.x=e.clientX-(this.image.width>>1),this.image.y=e.clientY-(this.image.height>>1));var n=new a.a;n.sourceData=this.sourceData,n.mouseX=e.clientX,n.mouseY=e.clientY,this.dispatchEvent(new r.a(r.a.DRAG_MOVE,n),this)},e}(o.a);u.touchEnabled=!0,u.mouseEnabled=!1},MIhx:function(t,e,n){"use strict";var o=n("asGj"),i=n("tEbb");n.d(e,"a",function(){return r});var r=function(){function t(){this.no="fd6ed05f4bac0774e384c434a025c398",this.ar=!1,this.defaultRoomItemNo="9d6f2c5c6a0811e79b2e000c29daddf7",this.huxingRoomItemNos={"":"9d6f2c5c6a0811e79b2e000c29daddf7","主卧":"9d6f2c5c6a0811e79b2e000c29daddf7","次卧":"9d6f2c5c6a0811e79b2e000c29daddf7","儿童房":"9d6f2c5c6a0811e79b2e000c29daddf7","衣帽间":"9d6f2c5c6a0811e79b2e000c29daddf7","书房":"9d6f2c5c6a0811e79b2e000c29daddf7","客厅":"985e1826768e11e7962efa163edde52c","门厅":"985e1826768e11e7962efa163edde52c","玄关":"985e1826768e11e7962efa163edde52c","客餐厅":"429c5b5c773611e7b175fa163edde52c","储物室":"429c5b5c773611e7b175fa163edde52c","多功能室":"429c5b5c773611e7b175fa163edde52c","阳台":"e57b8076768e11e78f3dfa163edde52c","露台":"e57b8076768e11e78f3dfa163edde52c","入户花园":"e57b8076768e11e78f3dfa163edde52c","餐厅":"8bca463e768e11e7962efa163edde52c","厨房":"8bca463e768e11e7962efa163edde52c","卫生间":"c9df4ca8768e11e7962efa163edde52c","盥洗室":"c9df4ca8768e11e7962efa163edde52c"},this.huxingRoomFloorColors={"":15649412,"主卧":15649412,"次卧":15649412,"儿童房":15649412,"衣帽间":15649412,"书房":15649412,"客厅":14601898,"门厅":14601898,"玄关":14601898,"客餐厅":14604470,"储物室":14604470,"多功能室":14604470,"阳台":9203266,"露台":9203266,"入户花园":9203266,"餐厅":15658734,"厨房":15658734,"卫生间":9803157,"盥洗室":9803157}}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(){var t=o.a.getQueryString("no");t&&(this.no=t),i.a.TOKEN=o.a.getQueryString("user_token"),i.a.USER_ID=o.a.getQueryString("user_id")},t}();r.VERSION="2.0.0",r.DEFAULT_MATERIAL_3D_NO="01ca25266d1a11e7b62200163e0e72dc",r.DEFAULT_FLOOR_BOARD_MATERIAL_3D_NO="223e41266d1e11e79f8200163e0e72dc",r.DEFAULT_FLOOR_TILE_MATERIAL_3D_NO="bed1e5706d1811e7b62200163e0e72dc",r.DEFAULT_SKIRTING_MATERIAL_3D_NO="c9c9418c6d1b11e79f8200163e0e72dc",r.DEFAULT_DOOR_3D_NO="4c6f640a6d1611e79f8200163e0e72dc",r.DEFAULT_DOUBLE_DOOR_3D_NO="8cd725966d1611e79f8200163e0e72dc",r.DEFAULT_SLIDING_DOOR_3D_NO="bf954ad06d1611e7b62200163e0e72dc",r.DEFAULT_WINDOW_3D_NO="f2c36fc26d1b11e7b62200163e0e72dc",r.DEFAULT_FRENCH_WINDOW_3D_NO="292827e66d1811e79f8200163e0e72dc",r.DEFAULT_BAY_WINDOW_3D_NO="3621f4d66d2711e79f8200163e0e72dc",r.DEFAULT_ROOM_3D_NOS={"":"9d6f2c5c6a0811e79b2e000c29daddf7","主卧":"9d6f2c5c6a0811e79b2e000c29daddf7","次卧":"9d6f2c5c6a0811e79b2e000c29daddf7","儿童房":"9d6f2c5c6a0811e79b2e000c29daddf7","衣帽间":"9d6f2c5c6a0811e79b2e000c29daddf7","书房":"9d6f2c5c6a0811e79b2e000c29daddf7","客厅":"985e1826768e11e7962efa163edde52c","门厅":"985e1826768e11e7962efa163edde52c","玄关":"985e1826768e11e7962efa163edde52c","客餐厅":"429c5b5c773611e7b175fa163edde52c","储物室":"429c5b5c773611e7b175fa163edde52c","多功能室":"429c5b5c773611e7b175fa163edde52c","阳台":"e57b8076768e11e78f3dfa163edde52c","露台":"e57b8076768e11e78f3dfa163edde52c","入户花园":"e57b8076768e11e78f3dfa163edde52c","餐厅":"8bca463e768e11e7962efa163edde52c","厨房":"8bca463e768e11e7962efa163edde52c","卫生间":"c9df4ca8768e11e7962efa163edde52c","盥洗室":"c9df4ca8768e11e7962efa163edde52c"}},MbY0:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{width:100%;height:100%;margin:0 auto}"]},MgL2:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("FtES"),a=n("YihH"),s=n("+ByO"),l=n("bDfz");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e,n){return t.call(this,e,n)||this}return u(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=0,e=window.innerWidth;e<=512?t=Math.round(.586*e):(e=512,t=300),this.width=e+"px",this.height=t+"px",this.updateComponentProperty(),this.virtualNumberBoard.updateSize(this.widthNumber,this.heightNumber),this.virtualNumberBoard.addEvent(l.a.VIRTUAL_NUMBER_BOARD_CONFIRM,this.onConfirm,this)},e.prototype.setData=function(t,e){this.target=t,this.virtualNumberBoard.open(e)},e.prototype.onConfirm=function(t){var e=t.data,n={target:this.target,value:e},o=a.a.inst;o.dispatchEvent(new r.a(r.a.SETTINGS_CONFIRM,n),o),a.a.inst.close(),s.a.inst.moveCenter()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},MkTd:function(t,e,n){"use strict";var o=n("MPvg"),i=n("YSA8"),r=n("aVAF"),a=n("lSRa"),s=n("3Gk7"),l=n("/gn8"),u=n("C+EA"),h=n("feMm"),c=n("v7PY");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(e){var n=t.call(this)||this;return n.mouseEnabled=!0,n.room=e,n.init(),n}return p(e,t),e.prototype.init=function(){for(var t,e=new a.a,n=0;n<this.room.polygon.vertexCount;n++)t=this.room.polygon.getPointAt(n),e.addVertexXYZ(t.x,-t.y,this.room.sceneObject.settingsWallHeight);var i=e.triangulate();this.geom=new r.a,this.geom.vertices=s.a.polygon3ds2vertices(i),this.geom.indices=s.a.createTriangleIndices(i.length).reverse(),this.geom.uvsDist=s.a.polygon3ds2uvs(i,1,1,l.a.Y_AXIS,new l.a),this.geometry=s.a.createGeomtry(this.geom.vertices,null,null,this.geom.indices),this.material=new o.i({color:14737632}),this.updateMaterials()},e.prototype.updateUV=function(t,e,n,i){var r=this.geom.calculateUVs(n,i);t.geometry.addAttribute("uv",new o.j(new Float32Array(r),2));var a=u.a.getTextureResourceByKey(e),s={map:a.resource},l=new o.i(s);t.material=l},e.prototype.updateMaterials=function(){h.a.getInstance().add(this,this.room.ceilingMaterialNo,this.updateUV,null,this)},Object.defineProperty(e.prototype,"centerPoint",{get:function(){var t=this.room.polygon.center;return new l.a(t.x,-t.y,this.room.sceneObject.settingsWallHeight)},enumerable:!0,configurable:!0}),e.prototype.getWireFrame=function(){var t=new o.i({color:c.a.MASTER2,opacity:.4,transparent:!0}),e=new o.l(this.geometry,t);return e.position.set(this.position.x,this.position.y,this.position.z),e},Object.defineProperty(e.prototype,"item",{get:function(){return this.room.ceilingMaterial},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.room=null},e}(i.a)},N0sU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.NULL="null",o.VERTEX="vertex",o.EDGE="edge",o.ALIGN="align"},NhKt:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=["huxing-toolbar[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:56px;background-color:#fff;box-shadow:0 1px 7px 0 hsla(0,0%,71%,.5)}bottom-toolbar[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:0}threed-navigation[_ngcontent-%COMP%]{position:absolute;top:66px;right:10px;width:35px;height:35px}huxing-resource[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;width:100%}setting-bars[_ngcontent-%COMP%]{position:absolute;top:66px}settings[_ngcontent-%COMP%]{left:0;right:0;bottom:0}option-setting[_ngcontent-%COMP%], settings[_ngcontent-%COMP%]{position:absolute;width:100%}option-setting[_ngcontent-%COMP%]{height:100%;z-index:20}operator[_ngcontent-%COMP%]{position:absolute;right:25px;bottom:115px;width:48px}window-manager[_ngcontent-%COMP%]{z-index:10}alert[_ngcontent-%COMP%], window-manager[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}alert[_ngcontent-%COMP%]{background-color:transparent;z-index:30}#editor2d[_ngcontent-%COMP%], #editor3d[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%}#editor3d[_ngcontent-%COMP%]{background:#1c1c1c linear-gradient(180deg,#3e3e3e,#1c1c1c)}"]},OezV:function(t,e,n){"use strict";var o=n("/oeL"),i=n("5ZTi"),r=n("v7PY");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.label="",o.onColor=r.a.toString(r.a.FONT),o.offColor=r.a.toString(r.a.FONT),o.backColorOn="#00C0C7",o.backColorOff="#FAFAFA",o.textSize=12,o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.slide=this.slideRef.nativeElement,this.slideLabel=this.slideLabelRef.nativeElement,this.point=this.pointRef.nativeElement,this.renderer.setStyle(this.slideLabel,"line-height",this._height),this.renderer.setStyle(this.slideLabel,"vertical-align","middle"),this.renderer.setStyle(this.slideLabel,"font-size",this.textSize+"px"),this.upStyle()},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.slideLabel&&this.renderer.setStyle(this.slideLabel,"line-height",t)},enumerable:!0,configurable:!0}),e.prototype.touchStart=function(t){void 0===t&&(t=null),this.selected=!this.selected},e.prototype.upStyle=function(){this.renderer.setStyle(this.slideLabel,"color",this.offColor),this.renderer.setAttribute(this.slide,"class","slideOff"),this.renderer.setStyle(this.slide,"border-color",this.backColorOff),this.renderer.setStyle(this.slide,"background-color",this.backColorOff),this.renderer.setAttribute(this.point,"class","pointOff"),t.prototype.upStyle.call(this)},e.prototype.downStyle=function(){this.renderer.setStyle(this.slideLabel,"color",this.onColor),this.renderer.setAttribute(this.slide,"class","slideOn"),this.renderer.setStyle(this.slide,"border-color",this.backColorOn),this.renderer.setStyle(this.slide,"background-color",this.backColorOn),this.renderer.setAttribute(this.point,"class","pointOn"),t.prototype.downStyle.call(this)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},"Ol+x":function(t,e,n){"use strict";var o=n("6xdJ"),i=n("lpfp"),r=n("0Itk"),a=n("0/et"),s=n("eUeh"),l=n("/gn8"),u=n("wP5k"),h=n("h8cR"),c=n("7Vs3"),p=n("aNcW");n.d(e,"a",function(){return f});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(){var n=t.call(this)||this;return n._mode=h.a.NORMAL,n._dayLight=0,n._halfWall=0,n._backgroundColor=16777215,n._quality=c.a.FAST,n.scene=r.a.getInstance(),n._tmpPoint=new i.a,n.mode=h.a.NORMAL,n.cameraType=e.STANDARD_TYPE,n.fov=e.DEFAULT_CAMERA_FOV,n.clipping=0,n.clippingNear=e.DEFAULT_CLIPPING_NEAR,n.imgWidth=e.RENDER_SIZE_CREATE_WIDTH,n.imgHeight=e.RENDER_SIZE_CREATE_HEIGHT,n.x=e.DEFAULT_CAMERA_X,n.y=e.DEFAULT_CAMERA_Y,n.z=e.DEFAULT_CAMERA_Z,n.rotationX=e.DEFAULT_CAMERA_ROTATION_X,n.rotationZ=e.DEFAULT_CAMERA_ROTATION_Z,n.reservedRoomName="",n.dayLight=e.DAYLIGHT_TYPE_DAY,n.halfWall=e.HALF_WALL_FALSE,n.backgroundColor=e.BACK_COLOR_LIGHT,n.mode==h.a.OVERLOOK?(n.cameraType=e.STANDARD_TYPE,n.fov=e.DEFAULT_OVERLOOK_CAMERA_FOV,n.z=320,n.rotationX=e.DEFAULT_PANORAMA_CAMERA_ROTATION_X):n.mode==h.a.PANORAMA&&(n.cameraType=e.SPHERICAL_TYPE,n.fov=e.DEFAULT_PANORAMA_CAMERA_FOV,n.imgWidth=e.RENDER_SIZE_CREATE_PANORAMA_WIDTH,n.imgHeight=e.RENDER_SIZE_CREATE_PANORAMA_HEIGHT,n.z=e.DEFAULT_PANORAMA_CAMERA_Z,n.rotationX=e.DEFAULT_PANORAMA_CAMERA_ROTATION_X,n.rotationZ=e.DEFAULT_PANORAMA_CAMERA_ROTATION_Z),n.connectedRooms=null,n}return d(e,t),e.prototype.dumpData=function(){var t=new Object;return t.mode=this.mode,t.cameraType=this.cameraType,t.fov=this.fov,t.clipping=this.clipping,t.clippingNear=this.clippingNear,t.imgWidth=this.imgWidth,t.imgHeight=this.imgHeight,t.x=this.x,t.y=this.y,t.z=this.z,t.rotationX=this.rotationX,t.rotationZ=this.rotationZ,t.roomName=this.roomName,t.dayLight=this.dayLight,t.halfWall=this.halfWall,t.backgroundColor=this.backgroundColor,t.quality=this.quality,t},e.prototype.dumpString=function(){var t=this.dumpData();return JSON.stringify(t)},e.loadData=function(t){var n=new e;return n.mode=t.mode,n.cameraType=t.cameraType,n.fov=t.fov,n.clipping=t.clipping,n.clippingNear=t.clippingNear,n.imgWidth=t.hasOwnProperty("imgWidth")?t.imgWidth:800,n.imgHeight=t.hasOwnProperty("imgHeight")?t.imgHeight:600,n.x=t.x,n.y=t.y,n.z=t.z,n.rotationX=t.rotationX,n.rotationZ=t.rotationZ,n.reservedRoomName=t.roomName,n.dayLight=t.hasOwnProperty("dayLight")?t.dayLight:e.DAYLIGHT_TYPE_DAY,n.halfWall=t.hasOwnProperty("halfWall")?t.halfWall:e.HALF_WALL_FALSE,n.backgroundColor=t.hasOwnProperty("backgroundColor")?t.backgroundColor:e.BACK_COLOR_LIGHT,n.quality=t.hasOwnProperty("quality")?t.quality:c.a.FAST,n},e.loadString=function(t){var n=JSON.parse(t);return e.loadData(n)},Object.defineProperty(e.prototype,"brandNew",{get:function(){return""==this.reservedRoomName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameraType",{get:function(){return this._cameraType},set:function(t){this._cameraType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fov",{get:function(){return this._fov},set:function(t){this._fov=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clipping",{get:function(){return this._clipping},set:function(t){this._clipping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clippingNear",{get:function(){return this._clippingNear},set:function(t){this._clippingNear=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayLight",{get:function(){return this._dayLight},set:function(t){this._dayLight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfWall",{get:function(){return this._halfWall},set:function(t){this._halfWall=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imgWidth",{get:function(){return this._imgWidth},set:function(t){t<e.MIN_CAMERA_IMG_SIZE?t=e.MIN_CAMERA_IMG_SIZE:t>e.MAX_CAMERA_IMG_SIZE&&(t=e.MAX_CAMERA_IMG_SIZE),this._imgWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imgHeight",{get:function(){return this._imgHeight},set:function(t){t<e.MIN_CAMERA_IMG_SIZE?t=e.MIN_CAMERA_IMG_SIZE:t>e.MAX_CAMERA_IMG_SIZE&&(t=e.MAX_CAMERA_IMG_SIZE),this._imgHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(t){this._rotationZ=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reservedRoomName",{get:function(){return this._reservedRoomName},set:function(t){this._reservedRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reservedRoom",{get:function(){return a.a.isStringEmptyOrNull(this.reservedRoomName)?null:this.scene.getRoomObjectByName(this.reservedRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localToSceneMatrix3D",{get:function(){var t=new p.a;return t.appendRotation(this.rotationX,l.a.X_AXIS),t.appendRotation(this.rotationZ+90,l.a.Z_AXIS),t.appendTranslation(this.x,this.y,this.z),t},enumerable:!0,configurable:!0}),e.prototype.localToScene3D=function(t){return this.localToSceneMatrix3D.transformPoint(t)},Object.defineProperty(e.prototype,"sceneToLocalMatrix3D",{get:function(){var t=new p.a;return t.appendTranslation(-this.x,-this.y,-this.z),t.appendRotation(-(this.rotationZ+90),l.a.Z_AXIS),t.appendRotation(-this.rotationX,l.a.X_AXIS),t},enumerable:!0,configurable:!0}),e.prototype.sceneToLocal3D=function(t){return this.sceneToLocalMatrix3D.transformPoint(t)},Object.defineProperty(e.prototype,"room",{get:function(){if(0==this.clipping)this._tmpPoint.setTo(this.x,this.y);else{var t=this.localToScene3D(new l.a(0,0,this.clippingNear));this._tmpPoint.setTo(t.x,t.y)}return this.scene.getRoomObjectByXY(this._tmpPoint.x,this._tmpPoint.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomName",{get:function(){var t=this.room;return t?t.name:""},enumerable:!0,configurable:!0}),e.prototype.getConnectedRooms=function(){var t=[];if(!this.room)return new Array;var e=new s.a;for(e[this.roomName]=!0;;){t=[];var n=null;for(var o in e){t.push(o);var i=this.scene.getRoomObjectByName(o);for(var r in this.scene.roomObjects){var a=this.scene.roomObjects[r];if(1!=e[a.name]&&i.connect(a)){n=a;break}}if(n)break}if(!n)break;e[n.name]=!0}return t},Object.defineProperty(e.prototype,"threedMatrix",{get:function(){var t=new p.a;return t.appendRotation(this.rotationX,l.a.X_AXIS),t.appendRotation(-(this.rotationZ+90),l.a.Z_AXIS),t.appendTranslation(this.x,-this.y,this.z),t},enumerable:!0,configurable:!0}),e.prototype.isRoomNeedRender=function(t){if(this.mode==h.a.OVERLOOK)return!0;if(!t)return!0;null==this.connectedRooms&&(this.connectedRooms=this.getConnectedRooms());for(var e=0,n=this.connectedRooms;e<n.length;e++){if(n[e]==t.name)return!0}return!1},e.prototype.isWallNeedRender=function(t){return!(!t.forwardRoom||!this.isRoomNeedRender(t.forwardRoom))||(!(!t.backwardRoom||!this.isRoomNeedRender(t.backwardRoom))||!(!t.aloneRoom||!this.isRoomNeedRender(t.aloneRoom)))},e.prototype.isOpeningNeedRender=function(t){return!!t.wall&&this.isWallNeedRender(t.wall)},e.prototype.isModelNeedRender=function(t){return!!this.isRoomNeedRender(t.room)&&(this.mode==h.a.OVERLOOK||(this.mode==h.a.PANORAMA||this.isMOVisibleInCamera(t,this.imgWidth,this.imgHeight)))},e.prototype.isMOVisibleInCamera=function(t,e,n){var o=t.threedMatrix,i=this.threedMatrix;i.invert(),o.append(i);var r=t.localBoundBoxPoints;r.push(new l.a(0,t.length/2,0),new l.a(-t.width/2,0,0),new l.a(0,-t.length/2,0),new l.a(t.width/2,0,0),new l.a(0,t.length/2,t.height),new l.a(-t.width/2,0,t.height),new l.a(0,-t.length/2,t.height),new l.a(t.width/2,0,t.height),new l.a(t.width/2,t.length/2,t.height/2),new l.a(-t.width/2,t.length/2,t.height/2),new l.a(-t.width/2,-t.length/2,t.height/2),new l.a(t.width/2,-t.length/2,t.height/2));var a;for(a=0;a<r.length;a++)r[a]=o.transformPoint(r[a]);var s=!1;for(a=0;a<r.length;a++)if(this.isPointInFrustum(r[a],this.fov,e,n)){s=!0;break}if(s){if(0==this.clipping)return!0;var h=1==this.clipping?this.clippingNear:1,c=o.transformPoint(new l.a(0,0,t.height/2)),p=Math.sqrt(t.width*t.width+t.length*t.length+t.height*t.height)/2;if(Math.abs(-h-c.z)<=p){r=t.localBoundBoxPoints;var d=!1,f=[new u.a(r[0],r[1],r[3]),new u.a(r[4],r[5],r[7]),new u.a(r[0],r[4],r[3]),new u.a(r[1],r[5],r[2]),new u.a(r[0],r[4],r[1]),new u.a(r[3],r[7],r[2])];o=t.threedMatrix,i=this.threedMatrix,o.invert(),i.append(o);var g=h*Math.tan(this.fov/2),m=g/e*n,_=new u.a(i.transformPoint(new l.a(g,m,-h)),i.transformPoint(new l.a(-g,m,-h)),i.transformPoint(new l.a(g,-m,-h)));for(a=0;a<f.length;a++)if(_.hasIntersectionWithRectFace(f[a])){d=!0;break}return d||Math.abs(_.p0.x)<=t.width/2&&Math.abs(_.p0.y)<=t.length/2&&_.p0.z>=0&&_.p0.z<=t.height&&Math.abs(_.p1.x)<=t.width/2&&Math.abs(_.p1.y)<=t.length/2&&_.p1.z>=0&&_.p1.z<=t.height&&Math.abs(_.p2.x)<=t.width/2&&Math.abs(_.p2.y)<=t.length/2&&_.p2.z>=0&&_.p2.z<=t.height&&Math.abs(_.p3.x)<=t.width/2&&Math.abs(_.p3.y)<=t.length/2&&_.p3.z>=0&&_.p3.z<=t.height&&(d=!0),!d}return!0}return!1},e.prototype.isPointInFrustum=function(t,e,n,o){return!(t.z>=0)&&(!(Math.tan(e/2)<Math.abs(t.x/t.z))&&!(Math.tan(e/2)/n*o<Math.abs(t.y/t.z)))},e.prototype.calculateVerticalFov=function(){return 2*Math.atan(Math.tan(this._fov/2)/Number(this.imgWidth/this.imgHeight))},e.prototype.calculateCameraPostion=function(){var t=this.rotationX,e=this.rotationZ-90,n=this.fov/2,o=Math.atan(this.imgHeight*Math.tan(n)/this.imgWidth),i=new p.a;i.appendRotation(t,l.a.X_AXIS),i.appendRotation(e,l.a.Z_AXIS),i.invert();var a=new Array,s=r.a.getInstance();for(var u in s.cornerObjects){var h=s.cornerObjects[u];h.connectedCornerObjects.length&&(a.push(new l.a(h.point.x,h.point.y,0)),a.push(new l.a(h.point.x,h.point.y,s.settingsWallHeight)))}for(var c=new Array,d=1/Math.tan(n),f=-1/Math.tan(n),g=1/Math.tan(o),m=-1/Math.tan(o),_=Number.MIN_VALUE,y=Number.MIN_VALUE,b=Number.MIN_VALUE,v=Number.MIN_VALUE,w=0;w<a.length;++w){var O=a[w],x=i.transformPoint(O);c[w]=x;var E;E=x.z-d*x.x,_=Math.max(_,E),E=x.z-f*x.x,y=Math.max(y,E),E=x.z-g*x.y,b=Math.max(b,E),E=x.z-m*x.y,v=Math.max(v,E)}var P=(y-_)/(d-f),C=d*P+_,A=(v-b)/(g-m),N=g*A+b,S=Math.max(C,N)/.8,M=new l.a(P,A,S);i.invert(),M=i.transformPoint(M),this.x=M.x,this.y=M.y,this.z=M.z},e}(o.a);f.CAMERA_FOV_CHANGED="CameraFovChanged",f.CAMERA_CLIPPING_CHANGED="CameraClippingChanged",f.CAMERA_CLIPPING_NEAR_CHANGED="CameraClippingNearChanged",f.DEFAULT_BACKIMAGE="exteriorno_1_001.jpg",f.DAYLIGHT_TYPE_NIGHT=0,f.DAYLIGHT_TYPE_DAY=1,f.DAYLIGHT_TYPE_DUSK=2,f.CUSTOMIZE=3,f.STANDARD_TYPE=0,f.SPHERICAL_TYPE=1,f.BOX_TYPE=4,f.BACK_COLOR_LIGHT=2895148,f.BACK_COLOR_DEEP=1250067,f.HALF_WALL_FALSE=0,f.HALF_WALL_TRUE=1,f.RENDER_SIZE_CREATE_WIDTH=800,f.RENDER_SIZE_CREATE_HEIGHT=600,f.RENDER_SIZE_CREATE_COST=0,f.RENDER_SIZE_UPGRADE_WIDTH=1600,f.RENDER_SIZE_UPGRADE_HEIGHT=1200,f.RENDER_SIZE_UPGRADE_COST=10,f.RENDER_SIZE_UPGRADE_SECOND_WIDTH=2048,f.RENDER_SIZE_UPGRADE_SECOND_HEIGHT=1536,f.RENDER_SIZE_UPGRADE_SECOND_COST=50,f.RENDER_SIZE_UPGRADE_THREE_WIDTH=3200,f.RENDER_SIZE_UPGRADE_THREE_HEIGHT=2400,f.RENDER_SIZE_UPGRADE_THREE_COST=100,f.RENDER_SIZE_CREATE_PANORAMA_WIDTH=3e3,f.RENDER_SIZE_CREATE_PANORAMA_HEIGHT=1500,f.RENDER_SIZE_CREATE_PANORAMA_COST=50,f.RENDER_SIZE_UPGRADE_PANORAMA_WIDTH=4096,f.RENDER_SIZE_UPGRADE_PANORAMA_HEIGHT=2048,f.RENDER_SIZE_UPGRADE_PANORAMA_COST=150,f.MIN_CAMERA_IMG_SIZE=420,f.MAX_CAMERA_IMG_SIZE=4096,f.DEFAULT_CAMERA_Z=120,f.DEFAULT_PANORAMA_CAMERA_Z=120,f.DEFAULT_OVERLOOK_CAMERA_Z=120,f.MIN_CAMERA_Z=0,f.MAX_CAMERA_Z=280,f.DEFAULT_CAMERA_X=Number.MAX_VALUE,f.DEFAULT_CAMERA_Y=Number.MAX_VALUE,f.DEFAULT_CAMERA_ROTATION_X=90,f.DEFAULT_PANORAMA_CAMERA_ROTATION_X=90,f.DEFAULT_CAMERA_ROTATION_Z=-45,f.DEFAULT_PANORAMA_CAMERA_ROTATION_Z=0,f.CAMERA_FOV_MIN=1/6*Math.PI,f.CAMERA_FOV_QUARTER=.25*Math.PI,f.CAMERA_FOV_EYE=3/8*Math.PI,f.CAMERA_FOV_STANDARD=.5*Math.PI,f.CAMERA_FOV_MAX=2/3*Math.PI,f.DEFAULT_CAMERA_FOV=f.CAMERA_FOV_EYE,f.DEFAULT_OVERLOOK_CAMERA_FOV=1/9*Math.PI,f.DEFAULT_PANORAMA_CAMERA_FOV=2*Math.PI,f.DEFAULT_CLIPPING_NEAR=100,f.MIN_CLIPPING_NEAR=1,f.MAX_CLIPPING_NEAR=1e3},PRZ3:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{wallWidthInput:0}),a._13(402653184,2,{wallLengthInput:0}),(t()(),a._15(0,null,null,21,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["墙长"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","55px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,11)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallWidthSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[1,4],["wallWidthInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["墙厚"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","55px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,21)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showWallLengthSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[2,4],["wallLengthInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n"]))],function(t,e){t(e,11,0,"55px","19px");t(e,21,0,"55px","19px")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"wall-setting-bar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("riTu"),a=n("/oeL"),s=n("CQOF"),l=n("nhaO"),u=n("Jj2e");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("wall-setting-bar",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},PSoK:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("WFe8"),a=n("lpfp"),s=n("v7PY"),l=n("0/et"),u=n("3qcR"),h=n("UPT1"),c=n("aJ2T"),p=n("j8JM"),d=n("gn8q"),f=n("/T2q"),g=n("matE");n.d(e,"a",function(){return _});var m=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(t){function e(e,n){var o=t.call(this,!0,!0)||this;return o.fillColor=0,o.fillAlpha=.5,o.fillRadius=6,o._point=null,o._connectedWalls=[],o._connectedCorners=[],o.initPoint=new a.a,o.tmpPoint=new a.a,o.dragTouchMoveHandlerLamda=function(t){o.dragTouchMoveHandler(t)},o.dragTouchEndHandlerLamda=function(t){o.dragTouchEndHandler(t)},o.depth=i.a.CORNER,o.realX=e,o.realY=n,o._point=new a.a(e,n),o.fillColor=g.a.CORNER_FILL_COLOR,o.fillAlpha=.5,o.calculateTransform(),o}return m(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Corner"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this),this._connectedWalls.length=0,this._connectedCorners.length=0},Object.defineProperty(e.prototype,"point",{get:function(){return this._point.x=this.realX,this._point.y=this.realY,this._point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedWalls",{get:function(){this._connectedWalls=[];var t;for(t in this.scene.walls){var e=this.scene.walls[t];e.startCornerName!=this.name&&e.stopCornerName!=this.name||this._connectedWalls.push(e)}return this._connectedWalls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedCorners",{get:function(){this._connectedCorners.length=0;for(var t in this.scene.walls){var e=this.scene.walls[t];e.startCornerName==this.name?this._connectedCorners.push(e.stopCorner):e.stopCornerName==this.name&&this._connectedCorners.push(e.startCorner)}return this._connectedCorners},enumerable:!0,configurable:!0}),e.prototype.mergeConer=function(){var t=null;for(var e in this.scene.corners){var n=this.scene.corners[e];if(n.name!=this.name&&(0!=n.visible&&l.a.isPointEqual(this.point,n.point))){t=n;break}}if(!t)return 0;var o=this.scene.getWallByCorners(this,t);o&&this.scene.removeWall(o,!1,!1);for(var i=0,r=t.connectedWalls;i<r.length;i++){var a=r[i];a.startCornerName==t.name?a.startCornerName=this.name:a.stopCornerName=this.name}return this.scene.removeCorner(t),1},e.prototype.splitWall=function(){var t=null;for(var e in this.scene.walls){var n=this.scene.walls[e];n.startCornerName!=this.name&&n.stopCornerName!=this.name&&(l.a.isPointInSegment(n.start,n.stop,this.point)&&(t=n.split(this.point)))}return!!t},e.prototype.eraseWallAble=function(){var t=this.connectedCorners;return 2==t.length&&!!l.a.isPointInSegment(t[0].point,t[1].point,this.point)},e.prototype.mergeWall=function(){if(!this.eraseWallAble())return null;var t,e=this.connectedWalls,n=e[0],o=e[1];t=o.startCornerName==this.name?o.stopCorner:o.startCorner,n.startCornerName==this.name?n.startCornerName=t.name:n.stopCornerName=t.name;var i=o.openings;if(i.length>0)for(var r=0,a=i;r<a.length;r++){var s=a[r];s.wallName=n.name}return this.scene.removeWall(o,!0),n.setPolygonChangeFlag(!0),n},e.prototype.calcWallCorner=function(){function t(t,e){return t.angle>e.angle?1:t.angle<e.angle?-1:0}for(var e,n,o=this.connectedWalls,i=[],r=0,s=o;r<s.length;r++)if(e=s[r],e.empty)e.topLeft.x=e.topLeft.y=e.bottomLeft.x=e.bottomLeft.y=0,e.topRight.x=e.topRight.y=e.bottomRight.x=e.bottomRight.y=0;else{var u,h,c=new y;e.startCornerName==this.name?(n=e.stopCorner.point.subtract(this.point),n.normalize(1),u=.5*e.realWidth,h=.5*e.realLength,c.wall=e,c.angle=Math.atan2(n.y,n.x),c.dir=n,c.topLine=new d.a(e.localToScene(new a.a(-u,-h)),e.localToScene(new a.a(u,-h))),c.bottomLine=new d.a(e.localToScene(new a.a(-u,h)),e.localToScene(new a.a(u,h))),c.leftLine=new d.a(e.localToScene(new a.a(u,h)),e.localToScene(new a.a(u,-h))),c.rightLine=new d.a(e.localToScene(new a.a(-u,h)),e.localToScene(new a.a(-u,-h))),i.push(c)):e.stopCornerName==this.name&&(n=e.startCorner.point.subtract(this.point),n.normalize(1),u=.5*e.realWidth,h=.5*e.realLength,c.wall=e,c.angle=Math.atan2(n.y,n.x),c.dir=n,c.topLine=new d.a(e.localToScene(new a.a(-u,h)),e.localToScene(new a.a(u,h))),c.bottomLine=new d.a(e.localToScene(new a.a(-u,-h)),e.localToScene(new a.a(u,-h))),c.leftLine=new d.a(e.localToScene(new a.a(-u,h)),e.localToScene(new a.a(-u,-h))),c.rightLine=new d.a(e.localToScene(new a.a(u,h)),e.localToScene(new a.a(u,-h))),i.push(c)),e.resetCorner(this)}if(i.sort(t),1!=i.length){var p,f;for(p=0;p<i.length;p++)if(f=l.a.nextIndex(p,i.length),p!=f){var g=i[p],m=i[f],_=g.wall,b=m.wall,v=g.bottomLine,w=m.topLine,O=this.calculateIntersectionOfCornerStruct(v,w);if(null==O){var x=m.leftLine;O=this.calculateIntersectionOfCornerStruct(v,x)}if(null==O){var E=g.leftLine;O=this.calculateIntersectionOfCornerStruct(w,E)}if(null==O&&(O=this.calculateIntersectionOfCornerStruct(v.line,w.line)),null!=O){var P=_.sceneToLocal(O),C=b.sceneToLocal(O);_.startCornerName==this.name?(_.bottomLeft.x=P.x,_.bottomLeft.y=P.y):_.stopCornerName==this.name&&(_.topRight.x=P.x,_.topRight.y=P.y),b.startCornerName==this.name?(b.topLeft.x=C.x,b.topLeft.y=C.y):b.stopCornerName==this.name&&(b.bottomRight.x=C.x,b.bottomRight.y=C.y)}}}},e.prototype.calculateIntersectionOfCornerStruct=function(t,e){if(t instanceof u.a){var n=l.a.lineLineIntersection(t,e);return n.length>0?n[0]:null}if(t instanceof d.a){var o=t,i=e;return l.a.calculateIntersectPointOnSegment(o.start,o.stop,i.start,i.stop,!1)}return null},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),c.a.inst.focusTarget==this&&this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){c.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.fillColor=g.a.CORNER_FOCUS_FILL_COLOR,this.fillAlpha=.9,this.fillRadius=16,this.calculateTransform();var e={selectedItem:this,selectedPoint:new a.a};this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.fillColor=g.a.CORNER_FILL_COLOR,this.fillAlpha=.5,this.fillRadius=6,this.calculateTransform(),this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.draw=function(){this.stage&&(this.graphics.width=20,this.graphics.height=20,this.graphics.clear(),this.graphics.lineStyle(0,s.a.WHITE,0),this.graphics.beginFill(this.fillColor,this.fillAlpha),this.graphics.drawCircle(0,0,this.fillRadius),this.graphics.endFill(),this.connectedWalls.length<2&&(this.graphics.lineStyle(2,s.a.RED,.5),this.graphics.drawCircle(0,0,4),this.graphics.endFill()))},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.draw()},e.prototype.isLegalPosition=function(t){for(var e,n,o,i=(this.connectedWalls,this.connectedCorners),a=0,s=i;a<s.length;a++){e=s[a];for(var u=0,h=i;u<h.length;u++)if(n=h[u],n.name!=e.name){if(l.a.segmentIntersect(t,e.point,t,n.point))return!1;if(Math.abs(l.a.vectorsAngle(e.point.subtract(t),n.point.subtract(t)))<r.a.MIN_ANGLE)return!1}for(var c in this.scene.walls){var o=this.scene.walls[c];if(o.startCornerName!=this.name&&o.stopCornerName!=this.name&&l.a.segmentIntersect(t,e.point,o.start,o.stop))return!1}}return!0},e.prototype.calculateNewPosition=function(t){var e=t.clone(),n=this.connectedWalls,o=Number.MAX_VALUE,i=Number.MAX_VALUE;for(var a in this.scene.corners){var s=this.scene.corners[a];if(s.name!=this.name){if(t.subtract(s.point).length<r.a.DEFAULT_LENGTH)return e.x=s.realX,e.y=s.realY,e;Math.abs(s.realX-t.x)<Math.abs(o)&&(o=s.realX-t.x),Math.abs(s.realY-t.y)<Math.abs(i)&&(i=s.realY-t.y)}}if(Math.abs(o)<r.a.DEFAULT_LENGTH&&(e.x=t.x+o),Math.abs(i)<r.a.DEFAULT_LENGTH&&(e.y=t.y+i),!l.a.isNumberEqual(e.x,t.x)&&!l.a.isNumberEqual(e.y,t.y))return e;var u;if(1==n.length){var h,c=n[0];h=c.startCornerName==this.name?c.stopCorner:c.startCorner;var p,d;for(var a in this.scene.walls)if(p=this.scene.walls[a],p.name!=c.name&&null!=(d=l.a.calculateIntersectPoint(h.point,e,p.start,p.stop))&&l.a.isPointOnSegment(p.start,p.stop,d)&&!(d.subtract(e).length>d.subtract(h.point).length)&&d.subtract(e).length<r.a.DEFAULT_LENGTH)return e.x=d.x,e.y=d.y,e;for(var a in this.scene.walls)if(p=this.scene.walls[a],p.name!=c.name&&(u=l.a.calcFoot(p.start,p.stop,t),l.a.isPointOnSegment(p.start,p.stop,u)&&u.subtract(t).length<r.a.DEFAULT_LENGTH))return e.x=u.x,e.y=u.y,e}if(!l.a.isNumberEqual(e.x,t.x)||!l.a.isNumberEqual(e.y,t.y))return e;var f=this.connectedCorners;return 2==f.length&&(u=l.a.calcFoot(f[0].point,f[1].point,e),e.subtract(u).length<r.a.DEFAULT_LENGTH)?(e.x=u.x,e.y=u.y,e):e},e.prototype.dragTouchStartHandler=function(t){this.initPoint.setTo(this.realX,this.realY),this.stage.addEventListener(p.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(p.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this.tmpPoint.setTo(e.clientX,e.clientY);var n=this.scene.globalToLocal(this.tmpPoint),o=this.calculateNewPosition(n);this.moveCorner(o)}},e.prototype.moveCorner=function(t){if(this.isLegalPosition(t)){this.realX=t.x,this.realY=t.y,this.calculateTransform();var e=this.connectedCorners;e.push(this);for(var n,o=0,i=e;o<i.length;o++)n=i[o],n.calcWallCorner();var r;for(var a in this.scene.walls){r=this.scene.walls[a];for(var s=0,u=e;s<u.length;s++)if(n=u[s],r.startCornerName==n.name||r.stopCornerName==n.name){r.setPolygonChangeFlag(!0),r.calculateTransform();break}}for(var c,p,d=0,f=this.connectedWalls;d<f.length;d++){if(r=f[d],r.startCornerName==this.name)p=r.stopCorner;else{if(r.stopCornerName!=this.name)continue;p=r.startCorner}c=r.openings;for(var g=0,m=c;g<m.length;g++){var _=m[g];if(_=this.scene.getOpeningByName(_.name)){this._tmpPoint.setTo(_.realX,_.realY);var y=this._tmpPoint.subtract(p.point).length;this._tmpPoint=l.a.vectorMovement(p.point,this.point.subtract(p.point),y),_.realX=this._tmpPoint.x,_.realY=this._tmpPoint.y,_.realRotationZ=r.realRotationZ,_.backup.reversed&&(_.realRotationZ+=180),_.x=_.realX,_.y=_.realY,_.rotation=_.realRotationZ}}}}h.a.inst.update()},e.prototype.dragTouchEndHandler=function(t){this.stage.removeEventListener(p.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(p.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.hasMouseDown=!1;var e;if(this.mergeConer()>0){this.calcWallCorner();for(var n=0,o=this.connectedWalls;n<o.length;n++)e=o[n],e.setPolygonChangeFlag(!0),e.calculateTransform()}if(this.splitWall()){this.calcWallCorner();for(var i=(this.connectedCorners,0),r=this.connectedCorners;i<r.length;i++){r[i].calcWallCorner()}for(var a=(this.connectedWalls,0),s=this.connectedWalls;a<s.length;a++)e=s[a],e.setPolygonChangeFlag(!0),e.calculateTransform()}this.calculateTransform(),l.a.isPointEqual(this.initPoint,this.point)||this.scene.change(!0,!0)},e.prototype.doubleClick=function(e){t.prototype.doubleClick.call(this,e),this.doMergeWall()},e.prototype.doMergeWall=function(){var t=this.mergeWall();t&&(t.startCorner.calcWallCorner(),t.stopCorner.calcWallCorner(),t.calculateTransform(),this.scene.change(!0,!0))},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.x=this.realX,t.y=this.realY,t},e.loadData=function(t){var n=new e(t.x,t.y);return n.name=t.name,n},e}(o.a),y=function(){function t(){}return t}()},PTQR:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.record={"8bca463e768e11e7962efa163edde52c":{category:3,width:180,length:180,state:0,name:"厨房",no:"8bca463e768e11e7962efa163edde52c",plan_url:"assets/local/2d/images/2bd03eca7b5011e7b85900163e0e72dc.jpg",id:44,preview_url:""},"9d6f2c5c6a0811e79b2e000c29daddf7":{category:3,width:150,length:150,state:0,name:"卧室",no:"9d6f2c5c6a0811e79b2e000c29daddf7",plan_url:"assets/local/2d/images/6f91458ec39711e7a11f00163e0e72dc.jpg",id:7,preview_url:""},"429c5b5c773611e7b175fa163edde52c":{category:3,width:120,length:120,state:0,name:"客餐厅",no:"429c5b5c773611e7b175fa163edde52c",plan_url:"assets/local/2d/images/c9a0d5a27b4f11e7b85900163e0e72dc.jpg",id:51,preview_url:""},"985e1826768e11e7962efa163edde52c":{category:3,width:100,length:100,state:0,name:"客厅",no:"985e1826768e11e7962efa163edde52c",plan_url:"assets/local/2d/images/1f287cbe7b5011e7a4d800163e0e72dc.jpg",id:45,preview_url:""},c9df4ca8768e11e7962efa163edde52c:{category:3,width:80,length:80,state:0,name:"卫生间",no:"c9df4ca8768e11e7962efa163edde52c",plan_url:"assets/local/2d/images/f5119aaa7b4f11e7a4d800163e0e72dc.jpg",id:48,preview_url:""},e57b8076768e11e78f3dfa163edde52c:{category:3,width:120,length:100,state:0,name:"阳台",no:"e57b8076768e11e78f3dfa163edde52c",plan_url:"assets/local/2d/images/1b8d12a87b5b11e7b85900163e0e72dc.jpg",id:50,preview_url:""}}},PbJf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.MM=1,o.CM=2,o.M=3},PpJG:function(t,e,n){"use strict";var o=n("IKKv"),i=n("+N0H"),r=n("ul9E"),a=n("YDFo"),s=n("9AqS");n.d(e,"a",function(){return l});var l=function(){function t(){this.mask=new a.a,this.mask.width=window.innerWidth,this.mask.height=window.innerHeight,this.mask.beginFill(0,0),this.mask.drawRect(0,0,window.innerWidth,window.innerHeight),this.mask.endFill(),this.mask.depth=9999}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.save=function(){var t=this;this.showMask(!0),o.a.inst.close();var e=i.a.inst;return 1==e.savable&&(e.snapshot(800,function(n){var o=s.a.encrypt(e.dumpString()),i={};i.no=e.no,i.data=o,i.area=e.calcPureArea().toFixed(2),i.photo2d=n.src;var a=JSON.stringify(i);r.a.inst.save(a),t.showMask(!1)}),!0)},t.prototype.showMask=function(t){1==t?0==document.body.contains(this.mask.dom)&&document.body.appendChild(this.mask.dom):1==document.body.contains(this.mask.dom)&&document.body.removeChild(this.mask.dom)},t}()},Q2Ol:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center;margin:0 auto}"]},QVAD:function(t,e,n){"use strict";var o=n("VwJn"),i=n("YSA8"),r=n("lpfp"),a=n("fzMI"),s=n("oipt");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(){var e=t.call(this)||this;return e.oldPoint=new r.a,e.newPoint=new r.a,e.onSystemMove_CopyLambda=function(t){return e.onSystemMove_Copy(t)},e.onSystemUp_CopyLambda=function(t){return e.onSystemUp_Copy(t)},e.cancleCopyLambda=function(t){return e.cancleCopy(t)},e.onSystemMove_DragLambda=function(t){return e.onSystemMove_Drag(t)},e.onSystemUp_DragLambda=function(t){e.onSystemUp_Drag(t)},e}return l(e,t),Object.defineProperty(e.prototype,"scene3D",{get:function(){return o.a.inst},enumerable:!0,configurable:!0}),e.prototype.beginCopy=function(){},e.prototype.onSystemMove_Copy=function(t){this.newPoint=this.scene3D.globalToLocal(new r.a(t.clientX,t.clientY))},e.prototype.onSystemUp_Copy=function(t){this.scene3D.stage.removeEventListener(a.a.MOUSE_MOVE,this.onSystemMove_CopyLambda),this.scene3D.stage.removeEventListener(a.a.MOUSE_UP,this.onSystemUp_CopyLambda),this.scene3D.stage.removeEventListener(a.a.RIGHT_MOUSE_DOWN,this.cancleCopyLambda)},e.prototype.cancleCopy=function(t){this.scene3D.stage.removeEventListener(a.a.MOUSE_MOVE,this.onSystemMove_CopyLambda),this.scene3D.stage.removeEventListener(a.a.MOUSE_UP,this.onSystemUp_CopyLambda),this.scene3D.stage.removeEventListener(a.a.RIGHT_MOUSE_DOWN,this.cancleCopyLambda)},e.prototype.beginDrag=function(t){},e.prototype.onSystemMove_Drag=function(t){this.newPoint=this.scene3D.globalToLocal(new r.a(t.clientX,t.clientY))},e.prototype.onSystemUp_Drag=function(t){this.scene3D.stage.removeEventListener(a.a.MOUSE_MOVE,this.onSystemMove_DragLambda),this.scene3D.stage.removeEventListener(a.a.MOUSE_UP,this.onSystemUp_DragLambda),s.b.cursor=s.a.AUTO},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e}(i.a)},Qb7I:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.EDGE_LENGTH="EdgeLength",o.EDGE_DISTANCE="EdgeDistance",o.DRAW_LENGTH="DrawLength",o.OPENING_LENGTH="OpeningLength",o.NEIGHBOR_WALL_LENGTH="NeighborWallLength",o.MODEL_LENGTH="ModelLength",o.CORNER_LENGTH="CornerLength"},Qn0l:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===e&&(e=null),this.type=t,this.data=e}return t}()},RH69:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".titleBg[_ngcontent-%COMP%]{width:100%;height:50px}.virtualInput[_ngcontent-%COMP%]{position:absolute;left:20px;top:8px;padding-left:15px;font-size:28px;color:#3d4de6;background-color:#f8f8f8;border-radius:4px}.bluetoothButton[_ngcontent-%COMP%]{position:absolute;top:12px;right:20px}.col1[_ngcontent-%COMP%], .col2[_ngcontent-%COMP%], .col3[_ngcontent-%COMP%]{border-right:1px solid #f4f4f4}.col1[_ngcontent-%COMP%], .col2[_ngcontent-%COMP%], .col3[_ngcontent-%COMP%], .col4[_ngcontent-%COMP%]{border-top:1px solid #f4f4f4}.confirmButton[_ngcontent-%COMP%], .numberButton[_ngcontent-%COMP%], .removeButton[_ngcontent-%COMP%]{float:left}"]},RojA:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===e&&(e="null"),this.mode=e,this.point=t}return t}()},RxX8:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.DRAW_OPEN="DRAW_OPEN",r.DRAW_CLOSE="DRAW_CLOSE"},S3DN:function(t,e,n){"use strict";var o=n("asb+"),i=n("eUeh");n.d(e,"a",function(){return r});var r=function(){function t(){this._items=new i.a}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.hasItem=function(t){return null!=this._items[t]},t.prototype.getItemByNo=function(t){var e=this._items[t];return null==e&&(e=new o.a(t,!0),this._items[t]=e),e},t.prototype.addItem=function(t){var e=t.no;this.hasItem(e)||(t.autoLoad||(t=new o.a(e,!0,t)),this._items[e]=t)},t}()},SJcU:function(t,e,n){"use strict";var o=n("PSoK"),i=n("WFe8"),r=n("gvna"),a=n("SScf"),s=n("eUeh"),l=n("lpfp"),u=n("0/et");n.d(e,"a",function(){return c});var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.objectContainer=null,e.corners=null,e.walls=null,e.rooms=null,e.openings=null,e.models=null,e.structs=null,e.setting=null,e.viewPort=null,e.gpu=!0,e.corners=new s.a,e.walls=new s.a,e.rooms=new s.a,e.openings=new s.a,e.models=new s.a,e.structs=new s.a,e.viewPort=null,e.setting=new r.a,e}return h(e,t),e.prototype.createChildren=function(){this.objectContainer=new a.a(!1,!1),this.objectContainer.gpu=!0,this.addChild(this.objectContainer)},e.prototype.change=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1)},e.prototype.addPaths=function(t,e){void 0===e&&(e=!1)},e.prototype.updateAfterWallChange=function(){this.change(!1,!0);for(var t in this.corners){this.corners[t].calcWallCorner()}for(var t in this.walls){var e=this.walls[t];e.setPolygonChangeFlag(!0),e.calculateTransform()}},Object.defineProperty(e.prototype,"empty",{get:function(){return!(this.getLength(this.corners)>0)&&(!(this.getLength(this.rooms)>0)&&(!(this.getLength(this.walls)>0)&&(!(this.getLength(this.openings)>0)&&(!(this.getLength(this.models)>0)&&!(this.getLength(this.structs)>0)))))},enumerable:!0,configurable:!0}),e.prototype.getLength=function(t){var e=0;for(var n in t)e+=1;return e},e.prototype.getCornerByName=function(t){return this.corners[t]},e.prototype.getCornerByXY=function(t,e,n){void 0===n&&(n=!1);var i=null;for(var r in this.corners)if(i=this.getCornerByName(r),u.a.isNumberEqual(t,i.realX)&&u.a.isNumberEqual(e,i.realY))return i;return i=null,n&&(i=new o.a(t,e),this.addCorner(i)),i},e.prototype.addCorner=function(t){this.corners[t.name]=t,this.objectContainer.addChild(t)},e.prototype.removeCorner=function(t){t.connectedWalls.length>0||(t.clear(),delete this.corners[t.name],t.parent==this.objectContainer&&this.objectContainer.removeChild(t))},e.prototype.getRoomByName=function(t){return this.rooms[t]},e.prototype.getRoomByXY=function(t,e){for(var n in this.rooms){var o=this.rooms[n];if(o.doesBoundPolygonContaineVector2D(t,e))return o}return null},e.prototype.addRoom=function(t){this.rooms[t.name]=t,this.objectContainer.addChild(t),t.createWallRelation()},e.prototype.removeRoom=function(t,e){void 0===e&&(e=!1),t.clearWallRelation(),t.clearModels(),t.clear(),delete this.rooms[t.name],t.parent==this.objectContainer&&this.objectContainer.removeChild(t)},e.prototype.calculateWallsAndRooms=function(){var t;for(t in this.rooms){this.rooms[t].calculateTransform()}for(t in this.walls){this.walls[t].calculateTransform()}},e.prototype.clearContent=function(){for(var t in this.rooms)this.removeRoom(this.getRoomByName(t),!0);for(var e in this.walls)this.removeWall(this.getWallByName(e),!0);for(var n in this.corners)this.removeCorner(this.getCornerByName(n));for(var o in this.openings)this.removeOpening(this.getOpeningByName(o));for(var i in this.models)this.removeModel(this.getModelByName(i));for(var r in this.structs)this.removeStruct(this.getStructByName(r))},e.prototype.getWallByName=function(t){return this.walls[t]},e.prototype.getWallByPoint=function(t,e){void 0===e&&(e=!1);for(var n in this.walls){var o=this.walls[n];if(0==e){if(u.a.isPointInSegment(o.start,o.stop,t))return o}else if(u.a.isPointOnSegment(o.start,o.stop,t))return o}return null},e.prototype.getWallByCorners=function(t,e){if(t.name==e.name)return null;for(var n in this.walls){var o=this.walls[n];if(o.startCornerName==t.name&&o.stopCornerName==e.name)return o;if(o.stopCornerName==t.name&&o.startCornerName==e.name)return o}return null},e.prototype.getWallByEnds=function(t,e){for(var n in this.walls){var o=this.walls[n];if(u.a.isPointEqual(o.start,t)&&u.a.isPointEqual(o.stop,e))return o;if(u.a.isPointEqual(o.start,e)&&u.a.isPointEqual(o.stop,t))return o}return null},e.prototype.createWallByEnds=function(t,e,n){if(void 0===n&&(n=0),u.a.isPointEqual(t,e))return null;var o=this.getCornerByXY(t.x,t.y,!0),r=this.getCornerByXY(e.x,e.y,!0);return 0==n&&(n=this.setting.getWallThickness()),new i.a(o.name,r.name,n)},e.prototype.addWall=function(t){this.walls[t.name]=t,this.objectContainer.addChild(t)},e.prototype.removeWall=function(t,e,n){if(void 0===n&&(n=!0),1==e)for(var o=t.openings,i=0,r=o;i<r.length;i++){var a=r[i];a=this.getOpeningByName(a.name),a&&this.removeOpening(a)}t.clear(),delete this.walls[t.name],t.parent==this.objectContainer&&this.objectContainer.removeChild(t),n&&(t.startCorner&&this.removeCorner(t.startCorner),t.stopCorner&&this.removeCorner(t.stopCorner))},e.prototype.getOpeningByName=function(t){return this.openings[t]},e.prototype.addOpening=function(t){this.openings[t.name]=t,this.objectContainer.addChild(t)},e.prototype.removeOpening=function(t){t.clear(),delete this.openings[t.name],t.parent==this.objectContainer&&this.objectContainer.removeChild(t)},e.prototype.getModelByName=function(t){return this.models[t]},e.prototype.addModel=function(t){this.models[t.name]=t,this.objectContainer.addChild(t)},e.prototype.removeModel=function(t){t.clear(),delete this.models[t.name],t.parent==this.objectContainer&&this.objectContainer.removeChild(t)},e.prototype.getStructByName=function(t){return this.structs[t]},e.prototype.addStruct=function(t){this.structs[t.name]=t,this.objectContainer.addChild(t)},e.prototype.removeStruct=function(t){t.clear(),delete this.structs[t.name],t.parent==this.objectContainer&&this.objectContainer.removeChild(t)},e.prototype.calcOpeningAttachWall=function(t,e){void 0===e&&(e=48);var n=new l.a,o=null;for(var i in this.walls){var r=this.walls[i];n=u.a.calcFoot(r.start,r.stop,t),u.a.isPointInSegment(r.start,r.stop,n)&&(t.subtract(n).length<=e&&(e=t.subtract(n).length,o=r))}return o},e.prototype.updateRuler=function(){},e.prototype.scaleScene=function(t,e){},Object.defineProperty(e.prototype,"scale",{get:function(){return this.scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRect",{get:function(){return null},enumerable:!0,configurable:!0}),e}(a.a)},SScf:function(t,e,n){"use strict";var o=n("lpfp"),i=n("YDFo"),r=n("1z8p"),a=n("fzMI"),s=n("j8JM"),l=n("EE9o");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.call(this)||this;return i.graphicEnable=!1,i.isPivotCenter=!1,i._mouseEnable=!1,i._dragEnable=!1,i._touchEnable=!1,i.touchMoveFrameRate=24,i.clickLamda=function(t){0==t.button?i.leftClick(t):1==t.button?i.middleClick(t):i.rightClick(t)},i.mouseDownLamda=function(t){0==t.button?i.leftMouseDown(t):1==t.button?i.middleMouseDown(t):i.rightMouseDown(t)},i.mouseUpLamda=function(t){0==t.button?i.leftMouseUp(t):1==t.button?i.middleMouseUp(t):i.rightMouseUp(t)},i.doubleClickLamda=function(t){i.doubleClick(t)},i.mouseOverLamda=function(t){i.mouseOver(t)},i.mouseOutLamda=function(t){i.mouseOut(t)},i.mouseWheelLamda=function(t){i.mouseWheel(t)},i.mouseMoveLamda=function(t){i.mouseMove(t)},i._touchStartPoint=new o.a,i.touchStartLamda=function(t){var e=t.touches[0];i._touchStartPoint=new o.a(e.clientX,e.clientY),i.touchStart(t),t.preventDefault()},i.scheduledAnimationFrame=0,i.touchMoveLamda=function(t){t.preventDefault(),++i.scheduledAnimationFrame%Math.ceil(60/i.touchMoveFrameRate)==0&&window.requestAnimationFrame(function(){i.scheduledAnimationFrame=0,i.touchMove(t)})},i.touchEndLamda=function(t){if(t.changedTouches.length>0){var e=t.changedTouches[0];new o.a(e.clientX,e.clientY).subtract(i._touchStartPoint).length<5&&i.touchClick(t)}i.touchEnd(t),t.preventDefault()},i.createSpriteDom(e,n),i.mouseEnable=!1,i.touchEnable=!1,i.gpu=!1,i}return u(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Sprite"},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){},e.prototype.createSpriteDom=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this._dom=document.createElement(this.tagName),this._dom.style.position="absolute",this._dom.style.transformOrigin="0 0 0",this._dom.style.webkitTransformOrigin="0 0 0",this.x=0,this.y=0,1==t&&(this.graphics=new i.a,this.graphics.isPivotCenter=e,this.addChild(this.graphics))},e.prototype.onAdd=function(){t.prototype.onAdd.call(this)},e.prototype.onRemove=function(){t.prototype.onRemove.call(this),1==this._mouseEnable&&(this.mouseEnable=!1),1==this._touchEnable&&(this.touchEnable=!1)},e.prototype.leftClick=function(t){},e.prototype.middleClick=function(t){},e.prototype.rightClick=function(t){},e.prototype.leftMouseDown=function(t){},e.prototype.middleMouseDown=function(t){},e.prototype.rightMouseDown=function(t){},e.prototype.leftMouseUp=function(t){},e.prototype.middleMouseUp=function(t){},e.prototype.rightMouseUp=function(t){},e.prototype.doubleClick=function(t){},e.prototype.mouseOver=function(t){},e.prototype.mouseOut=function(t){},e.prototype.mouseWheel=function(t){},e.prototype.mouseMove=function(t){},e.prototype.touchStart=function(t){},e.prototype.touchMove=function(t){},e.prototype.touchEnd=function(t){},e.prototype.touchClick=function(t){},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._dom&&(this._dom.style.width=t.toString()+"px"),this.graphics&&(this.graphics.width=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._dom&&(this._dom.style.height=t.toString()+"px"),this.graphics&&(this.graphics.height=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnable",{set:function(t){1==t&&0==this._mouseEnable?(this.addEventListener(a.a.CLICK,this.clickLamda),this.addEventListener(a.a.DOUBLE_CLICK,this.doubleClickLamda),this.addEventListener(a.a.MOUSE_DOWN,this.mouseDownLamda),this.addEventListener(a.a.MOUSE_UP,this.mouseUpLamda),this.addEventListener(a.a.MOUSE_OVER,this.mouseOverLamda),this.addEventListener(a.a.MOUSE_OUT,this.mouseOutLamda),this.addEventListener(a.a.MOUSE_MOVE,this.mouseMoveLamda),this.addEventListener(a.a.MOUSE_WHEEL,this.mouseWheelLamda),this.addEventListener(a.a.DOM_MOUSE_WHEEL,this.mouseWheelLamda),this.mouseEventEnable=!0):0==t&&(this.removeEventListener(a.a.CLICK,this.clickLamda),this.removeEventListener(a.a.DOUBLE_CLICK,this.doubleClickLamda),this.removeEventListener(a.a.MOUSE_DOWN,this.mouseDownLamda),this.removeEventListener(a.a.MOUSE_UP,this.mouseUpLamda),this.removeEventListener(a.a.MOUSE_OVER,this.mouseOverLamda),this.removeEventListener(a.a.MOUSE_OUT,this.mouseOutLamda),this.removeEventListener(a.a.MOUSE_MOVE,this.mouseMoveLamda),this.removeEventListener(a.a.MOUSE_WHEEL,this.mouseWheelLamda),this.removeEventListener(a.a.DOM_MOUSE_WHEEL,this.mouseWheelLamda),this.mouseEventEnable=!1),this._mouseEnable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchEnable",{set:function(t){1==t&&0==this._touchEnable?(this.addEventListener(s.a.TOUCH_START,this.touchStartLamda),this.addEventListener(s.a.TOUCH_MOVE,this.touchMoveLamda),this.addEventListener(s.a.TOUCH_END,this.touchEndLamda),this.mouseEventEnable=!0):0==t&&(this.removeEventListener(s.a.TOUCH_START,this.touchStartLamda),this.removeEventListener(s.a.TOUCH_MOVE,this.touchMoveLamda),this.removeEventListener(s.a.TOUCH_END,this.touchEndLamda),this.mouseEventEnable=!1),this._touchEnable=t},enumerable:!0,configurable:!0}),e.prototype.localToGlobal=function(t){var e=t,n=function(t,e){var n=new l.a;return n.rotate(t.rotation*Math.PI/180),n.scale(t.scaleX,t.scaleY),n.translate(t.x,t.y),n.transformPoint(e)},o=this;for(e=n(o,e);null!=o.parent;)o=o.parent,e=n(o,e);return e},e.prototype.globalToLocal=function(t){for(var e=this.localToGlobal(new o.a(0,0)),n=t.subtract(e),i=this,r=i.scaleX,a=i.scaleY,s=i.rotation;null!=i.parent;)i=i.parent,r*=i.scaleX,a*=i.scaleY,s+=i.rotation;var u=new l.a;return u.scale(1/r,1/a),u.rotate(-s*Math.PI/180),u.transformPoint(n)},e}(r.a)},TAs0:function(t,e,n){"use strict";var o=n("FC3T"),i=n("lpfp"),r=n("0/et");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this)||this;return o._connectedWallObjects=new Array,o._connectedCornerObjects=new Array,o.x=e,o.y=n,o._point=new i.a(e,n),o}return a(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this._connectedWallObjects.length=0,this._connectedCornerObjects.length=0},Object.defineProperty(e.prototype,"point",{get:function(){return this._point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedWallObjects",{get:function(){this._connectedWallObjects.length=0;for(var t in this.sceneObject.wallObjects){var e=this.sceneObject.wallObjects[t];e.startCornerName!=this.name&&e.stopCornerName!=this.name||this._connectedWallObjects.push(e)}return this._connectedWallObjects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"connectedCornerObjects",{get:function(){this._connectedCornerObjects.length=0;for(var t in this.sceneObject.wallObjects){var e=this.sceneObject.wallObjects[t];e.startCornerName==this.name?this._connectedCornerObjects.push(e.stopCorner):e.stopCornerName==this.name&&this._connectedCornerObjects.push(e.startCorner)}return this._connectedCornerObjects},enumerable:!0,configurable:!0}),e.prototype.calculateWallCorner=function(){for(var t=this.connectedWallObjects,e=new Array,n=0,o=t;n<o.length;n++){var i=o[n];i.isEmpty||e.push(new l(this,i))}if(0!=e.length){if(1==e.length)return void e[0].wallObject.resumeCorner(this);e.sort(l.compareFunction);for(var a,s,u=0;u<e.length;u++){a=e[u],s=e[r.a.nextIndex(u,e.length)];var h=r.a.rotateVector(a.direction,.5*Math.PI);h=h.normalize().multiply(.5*a.wallObject.length);var c=r.a.rotateVector(s.direction,-.5*Math.PI);c=c.normalize().multiply(.5*s.wallObject.length);var p=r.a.cornerOffset(h,c),d=p;null==p&&(p=h,d=c);var f=this.point.add(p),g=a.wallObject.sceneToLocal(f);a.wallObject.startCorner==this?a.wallObject.bottomLeft.copyFrom(g):a.wallObject.topRight.copyFrom(g),f=this.point.add(d),g=s.wallObject.sceneToLocal(f),s.wallObject.startCorner==this?s.wallObject.topLeft.copyFrom(g):s.wallObject.bottomRight.copyFrom(g)}}},e.prototype.dumpData=function(){var t={};return t.x=this.x,t.y=this.y,t.name=this.name,t},e.loadData=function(t){var n=new e(t.x,t.y);return n.name=t.name,n},e}(o.a),l=function(){function t(t,e){this.cornerObject=t,this.wallObject=e}return Object.defineProperty(t.prototype,"anotherCorner",{get:function(){return r.a.isPointEqual(this.wallObject.startCorner.point,this.cornerObject.point)?this.wallObject.stopCorner:this.wallObject.startCorner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angleRadians",{get:function(){return Math.atan2(this.anotherCorner.y-this.cornerObject.y,this.anotherCorner.x-this.cornerObject.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angleDegree",{get:function(){return this.angleRadians/Math.PI*180},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this.anotherCorner.point.subtract(this.cornerObject.point)},enumerable:!0,configurable:!0}),t.compareFunction=function(t,e){return t.angleRadians<e.angleRadians?-1:t.angleRadians>e.angleRadians?1:0},t}()},Tgrg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:375px;background-color:rgba(0,0,0,.6);border-top-left-radius:2px;border-bottom-left-radius:2px}.bg[_ngcontent-%COMP%], .editArea[_ngcontent-%COMP%]{float:left;height:100%}.editArea[_ngcontent-%COMP%]{margin-left:8px}.label[_ngcontent-%COMP%]{float:left;margin-right:5px;height:100%;line-height:40px;font-size:14px;text-align:center;color:#fff}.virtualInput[_ngcontent-%COMP%]{float:left;margin-top:8px;font-size:16px;color:#000;border-radius:2px;border-width:2px;border-style:solid;border-color:#fff;background-color:#fff}"]},TiI6:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".webglCanvas[_ngcontent-%COMP%]{position:absolute;left:0;top:0}"]},"Tt+v":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{slideRef:0}),a._13(402653184,2,{pointRef:0}),a._13(402653184,3,{slideLabelRef:0}),(t()(),a._15(0,[[3,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[1,0],["slide",1]],null,3,"div",[["id","slide"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,[[2,0],["point",1]],null,0,"div",[["id","point"]],null,null,null,null,null)),(t()(),a._14(null,["\n"]))],null,function(t,e){t(e,4,0,e.component.label)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"slide-box",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,1).touchEnd(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("ARHu"),a=n("/oeL"),s=n("OezV");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("slide-box",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",label:"label",onColor:"onColor",offColor:"offColor",backColorOn:"backColorOn",backColorOff:"backColorOff",textSize:"textSize"},{},[])},U3zN:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:255px;background-color:rgba(0,0,0,.6);border-top-left-radius:2px;border-bottom-left-radius:2px}.bg[_ngcontent-%COMP%], .editArea[_ngcontent-%COMP%]{float:left;height:100%}.editArea[_ngcontent-%COMP%]{margin-left:20px}.label[_ngcontent-%COMP%]{float:left;margin-right:8px;height:100%;line-height:40px;font-size:14px;text-align:center;color:#fff}.virtualInput[_ngcontent-%COMP%]{float:left;margin-top:8px;font-size:16px;color:#000;border-radius:2px;border-width:2px;border-style:solid;border-color:#fff;background-color:#fff}"]},U8Ch:function(t,e,n){"use strict";var o=n("/gn8");n.d(e,"a",function(){return i});var i=function(){function t(t,e,n){this.points=new Array,this._width=t,this._length=e,this._height=n,this.points.push(new o.a(t/2,e/2,0)),this.points.push(new o.a(-t/2,e/2,0)),this.points.push(new o.a(-t/2,-e/2,0)),this.points.push(new o.a(t/2,-e/2,0)),this.points.push(new o.a(t/2,e/2,n)),this.points.push(new o.a(-t/2,e/2,n)),this.points.push(new o.a(-t/2,-e/2,n)),this.points.push(new o.a(t/2,-e/2,n))}return t.prototype.createBoxWireFramePoints=function(){for(var t=new Array,e=[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7],n=0;n<e.length/2;n++)t.push(this.points[e[2*n]],this.points[e[2*n+1]]);return t},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.points&&(this.points.length=0,this.points=null)},t}()},UOls:function(t,e,n){"use strict";var o=n("/oeL"),i=n("KC10"),r=n("oV/x"),a=n("Dvc5"),s=n("r4QP"),l=n("s/43"),u=n("fqCj"),h=n("jDyV");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();n.i(o.a)();var p=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.doors=[],o.windows=[],o.structs=[],o.titleButtons=[],o.contents=[],o.parent=null,o}return c(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.doors.push(new i.a(u.a.OPENING,e.DOOR_COMMON_IMAGE,"门",s.a.DOOR_COMMON,!0)),this.doors.push(new i.a(u.a.OPENING,e.DOOR_DOUBLE_IMAGE,"双开门",s.a.DOOR_DOUBLE,!0)),this.doors.push(new i.a(u.a.OPENING,e.DOOR_SLIDING_IMAGE,"移门",s.a.DOOR_SLIDING,!0)),this.windows.push(new i.a(u.a.OPENING,e.WINDOW_COMMON_IMAGE,"窗",s.a.WINDOW_COMMON,!0)),this.windows.push(new i.a(u.a.OPENING,e.WINDOW_BAY_IMAGE,"飘窗",s.a.WINDOW_BAY,!0)),this.windows.push(new i.a(u.a.OPENING,e.WINDOW_FRENCH_IMAGE,"落地窗",s.a.WINDOW_FRENCH,!0)),this.structs.push(new i.a(u.a.STRUCT,e.STRUCT_PILLAR_IMAGE,"柱子",h.a.PILLAR,!1)),this.structs.push(new i.a(u.a.STRUCT,e.STRUCT_FLUE_IMAGE,"烟道",h.a.FLUE,!1));for(var t=0;t<this.doors.length;t++){l.a.inst.createComponent(r.a,this.listDoorView).instance.structVO=this.doors[t]}for(var t=0;t<this.windows.length;t++){l.a.inst.createComponent(r.a,this.listWindowView).instance.structVO=this.windows[t]}for(var t=0;t<this.structs.length;t++){l.a.inst.createComponent(r.a,this.listStructView).instance.structVO=this.structs[t]}this.titleButtons=this.labelQueryList.toArray(),this.contents=[this.door,this.window,this.struct],this.navigate(0)},e.prototype.open=function(){this.visible="true"},e.prototype.close=function(){this.visible="false"},e.prototype.navigate=function(t){for(var e=0,n=this.titleButtons;e<n.length;e++){var o=n[e];o.textSize=16,o.textUpColor=10066329,o.textWeight="",o.upStyle()}this.titleButtons[t].textSize=18,this.titleButtons[t].textUpColor=3355443,this.titleButtons[t].textWeight="bold",this.titleButtons[t].upStyle();for(var i=0,r=this.contents;i<r.length;i++){var a=r[i];this.renderer.setStyle(a.nativeElement,"display","none")}this.renderer.setStyle(this.contents[t].nativeElement,"display","block")},e.prototype.touchStart=function(t){var e=this.dom.scrollTop,n=this.dom.scrollHeight,o=e+this.dom.offsetHeight;0===e?this.dom.scrollTop=1:o===n&&(this.dom.scrollTop=e-1)},e.prototype.touchMove=function(t){this.parent.scrollable=!1,this.dom.offsetHeight<this.dom.scrollHeight&&(this.parent.scrollable=!0)},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(a.a);p.DOOR_COMMON_IMAGE="assets/view/struct/door_common_3x.png",p.DOOR_DOUBLE_IMAGE="assets/view/struct/door_double_3x.png",p.DOOR_SLIDING_IMAGE="assets/view/struct/door_sliding_3x.png",p.WINDOW_COMMON_IMAGE="assets/view/struct/window_common_3x.png",p.WINDOW_BAY_IMAGE="assets/view/struct/window_bay_3x.png",p.WINDOW_FRENCH_IMAGE="assets/view/struct/window_french_3x.png",p.STRUCT_PILLAR_IMAGE="assets/view/struct/struct_pillar_3x.png",p.STRUCT_FLUE_IMAGE="assets/view/struct/struct_flue_3x.png"},UPT1:function(t,e,n){"use strict";var o=n("lpfp"),i=n("Qb7I"),r=n("ljPL"),a=n("Wilg"),s=n("+N0H"),l=n("H8MY"),u=n("PbJf"),h=n("Eezr"),c=n("0/et"),p=n("fPy1"),d=n("/T2q");n.d(e,"a",function(){return f});var f=function(){function t(){this.isShow=!1,this.scene=s.a.inst,this.rulerGroup=new l.a(this.scene),this.rulerGroup.unit=u.a.MM,this.rulerGroup.depth=h.a.RULER,this.rulerGroup.addEvent(p.a.CLICK,this.rulerClickHandler,this)}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.showEdgeRuler=function(){this.isShow=!0,this.update()},t.prototype.hideEdgeRuler=function(){this.isShow=!1,this.rulerGroup.clear(),this.rulerGroup.visible=!1},Object.defineProperty(t.prototype,"visible",{get:function(){return this.rulerGroup.visible},enumerable:!0,configurable:!0}),t.prototype.changeUnit=function(t){this.rulerGroup.unit=t},t.prototype.rulerClickHandler=function(t){var e=t.data;this.scene.dispatchEvent(new d.a(d.a.MSCENE_RULER_CHANGED,e),this.scene)},t.prototype.update=function(){if(this.rulerGroup.visible=this.isShow,0!=this.isShow){this.rulerGroup.deleteAll();var t;if(this.scene.setting.wallRulerMode==a.a.MIDLINE)for(var e in this.scene.walls)t=this.scene.walls[e],this.drawMidlineRuler(t);else if(this.scene.setting.wallRulerMode==a.a.INLINE)for(var e in this.scene.walls)t=this.scene.walls[e],this.drawInlineRuler(t);this.rulerGroup.clearDeleteRulers()}},t.prototype.drawMidlineRuler=function(e,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=null),!e.empty){var i=c.a.rotateVector(e.start.subtract(e.stop),Math.PI/2);i.normalize(e.realLength/2+t.RULER_VERTICAL_DISTANCE),e.backwardRoom?this.rulerGroup.addRuler(e.name,e.start.subtract(i),e.stop.subtract(i),n,o):this.rulerGroup.addRuler(e.name,e.start.add(i),e.stop.add(i),n,o)}},t.prototype.drawInlineRuler=function(e,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=null),!e.empty){var i=c.a.rotateVector(e.start.subtract(e.stop),Math.PI/2);i.normalize(t.RULER_VERTICAL_DISTANCE);var r=e.localToSceneMatrix,a=r.transformPoint(e.topLeft),s=r.transformPoint(e.topRight),l=r.transformPoint(e.bottomRight),u=r.transformPoint(e.bottomLeft),h=null;e.adjacentRoomCount>0?(e.forwardRoom&&(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,a.add(i),s.add(i),n,h)),e.backwardRoom&&(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,l.subtract(i),u.subtract(i),n,h))):(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,a.add(i),s.add(i),n,h),c.a.isNumberEqual(a.subtract(s).length,l.subtract(u).length)||(h=o?o.clone():null,this.rulerGroup.addRuler(e.name,l.subtract(i),u.subtract(i),n,h)))}},t.prototype.updateDrawRuler=function(e,n){if(!(e.length<2)){var o=this.scene.setting.getWallThickness();this.rulerGroup.visible=!0,this.rulerGroup.clear();for(var a=e.length,s=0;s<a-1;s++){var l=e[s],u=e[s+1];if(!(u.subtract(l).length<n)){var h=c.a.rotateVector(u.subtract(l),Math.PI/2);h.normalize(Math.round(.5*o)+t.RULER_VERTICAL_DISTANCE);var p=new r.a(i.a.DRAW_LENGTH);this.rulerGroup.addRuler("",l.subtract(h),u.subtract(h),!1,p)}}}},t.prototype.drawRulerChangeHandler=function(t){},t.prototype.showOpeningRuler=function(e){this.changeOpening=e,this.rulerGroup.visible=!0,this.rulerGroup.clear();var n=this.scene.getWallByName(e.wallName),o=c.a.rotateVector(n.start.subtract(n.stop),Math.PI/2);o.normalize(n.realLength/2+t.RULER_VERTICAL_DISTANCE);var a,s,l,u,h=n.localToSceneMatrix,p=h.transformPoint(n.topLeft),d=h.transformPoint(n.topRight),f=h.transformPoint(n.bottomRight),g=h.transformPoint(n.bottomLeft),m=n.realWidth>=n.start.subtract(e.start).length+n.stop.subtract(e.stop).length,_=e.localToSceneMatrix;n.adjacentRoomCount>0&&n.backwardRoom?(a=f.clone(),u=g.clone(),1==m?(s=_.transformPoint(e.bottomRight),l=_.transformPoint(e.bottomLeft)):(s=_.transformPoint(e.topLeft),l=_.transformPoint(e.topRight)),o.x*=-1,o.y*=-1):(a=p.clone(),u=d.clone(),1==m?(s=_.transformPoint(e.topLeft),l=_.transformPoint(e.topRight)):(s=_.transformPoint(e.bottomRight),l=_.transformPoint(e.bottomLeft))),a=a.add(o),s=s.add(o),l=l.add(o),u=u.add(o);var y=a.subtract(u).length-e.realWidth,b=u.subtract(a);b.normalize();var v=new r.a(i.a.OPENING_LENGTH);v.target=e,v.direct=b,v.maxValue=y,this.rulerGroup.addRuler(n.name,a,s,!0,v),b=a.subtract(u),b.normalize(),v=new r.a(i.a.OPENING_LENGTH),v.target=e,v.direct=b,v.maxValue=y,this.rulerGroup.addRuler(n.name,l,u,!0,v)},t.prototype.showWallInputRuler=function(t){this.rulerGroup.visible=!0,this.rulerGroup.clear();var e,n,o;this.changeWall=t;var s,l=[];for(var u in this.scene.walls)s=this.scene.walls[u],1!=s.empty&&t!=s&&t.realRotationZ-s.realRotationZ!=0&&180!=Math.abs(t.realRotationZ-s.realRotationZ)&&(t.startCornerName==s.startCornerName||t.startCornerName==s.stopCornerName?l.push(s):t.stopCornerName!=s.startCornerName&&t.stopCornerName!=s.stopCornerName||l.push(s));for(var u in l)s=l[u],this.rulerGroup.removeRuler(s.name),e=s.startCornerName==t.startCornerName||s.startCornerName==t.stopCornerName?s.start.subtract(s.stop):s.stop.subtract(s.start),e.normalize(1),n=!0,o=new r.a(i.a.NEIGHBOR_WALL_LENGTH),o.target=t,o.direct=e,this.scene.setting.wallRulerMode==a.a.MIDLINE?this.drawMidlineRuler(s,n,o):this.scene.setting.wallRulerMode==a.a.INLINE&&this.drawInlineRuler(s,n,o);var h=t.startCorner,c=t.stopCorner;(h.connectedWalls.length<=1||c.connectedWalls.length<=1)&&(h.connectedWalls.length<=1?(this.changeCorner=h,e=t.start.subtract(t.stop)):(this.changeCorner=c,e=t.stop.subtract(t.start)),n=!0,o=new r.a(i.a.CORNER_LENGTH),o.target=this.changeCorner,o.direct=e,this.scene.setting.wallRulerMode==a.a.MIDLINE?this.drawMidlineRuler(t,n,o):this.scene.setting.wallRulerMode==a.a.INLINE&&this.drawInlineRuler(t,n,o))},t.prototype.showModelRuler=function(t,e){function n(t,e){return t.dist>e.dist?1:t.dist<e.dist?-1:0}void 0===e&&(e=!1),this.rulerGroup.visible=!0,this.rulerGroup.clear(),this.changeModel=t;var a=t.realWidth,s=t.realLength,l=new o.a(t.realX,t.realY),u=new o.a(-a>>1,0);u=t.localToScene(u);var h=new o.a(0,-s>>1);h=t.localToScene(h);var p=new o.a(a>>1,0);p=t.localToScene(p);var d=new o.a(0,s>>1);d=t.localToScene(d);for(var f=[u,h,p,d],g=0,m=f;g<m.length;g++){var _=m[g],y=_.subtract(l);y.normalize(1);var b=[];for(var v in this.scene.walls){var w=this.scene.walls[v],O=c.a.vectorsAngle(y,w.stop.subtract(w.start));if(1==c.a.isNumberEqual(Math.abs(O)/90%2,1)){var x=c.a.raySegmentIntersection(_,y,w.start,w.stop);x&&(x.wall=w,b.push(x))}}if(b.length>0){b.sort(n);var E=b[0].wall,P=b[0].point,C=y.clone();C.x*=-1,C.y*=-1,C.normalize(E.realLength/2);var A=new r.a(i.a.MODEL_LENGTH);A.target=t,A.direct=C,this.rulerGroup.addRuler("",_,P.add(C),e,A)}}},t.prototype.showCornerRuler=function(t){var e=t.connectedWalls;if(2==e.length){var n=e[0],o=e[1];if(n.realRotationZ-o.realRotationZ==0||180==Math.abs(n.realRotationZ-o.realRotationZ)){this.rulerGroup.visible=!0,this.rulerGroup.clear(),this.changeCorner=t;var s,l;n.startCornerName==t.name?(s=n.start.subtract(n.stop),l=n.stop.subtract(n.start)):(s=n.stop.subtract(n.start),l=n.start.subtract(n.stop)),s.normalize(1),l.normalize(1);var u=new r.a(i.a.CORNER_LENGTH);u.target=t,u.direct=s;var h=new r.a(i.a.CORNER_LENGTH);h.target=t,h.direct=l,this.scene.setting.wallRulerMode==a.a.MIDLINE?(this.drawMidlineRuler(n,!0,u),this.drawMidlineRuler(o,!0,h)):this.scene.setting.wallRulerMode==a.a.INLINE&&(this.drawInlineRuler(n,!0,u),this.drawInlineRuler(o,!0,h))}}},t.prototype.clear=function(){this.rulerGroup.clear()},t}();f.RULER_VERTICAL_DISTANCE=12},Ucot:function(t,e,n){"use strict";function o(t){return a._12(0,[],null,null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"facade-plan-window",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("lbyz"),a=n("/oeL"),s=n("ZdJq");n.d(e,"a",function(){return h});var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}}),h=a._19("facade-plan-window",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},Ux0E:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{radioRef:0}),a._13(402653184,2,{radioLabelRef:0}),(t()(),a._15(0,[[2,0],["lb",1]],null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["",""])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[1,0],["radio",1]],null,0,"div",[["class","radio"]],null,null,null,null,null))],null,function(t,e){t(e,3,0,e.component.label)})}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"radio-button",[],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,1).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,1).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,1).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,1).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,1).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,1).touchEnd(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("fqOP"),a=n("/oeL"),s=n("L2IC");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("radio-button",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",label:"label",iconSelected:"iconSelected",iconUnSelected:"iconUnSelected",iconUnEnabledSelected:"iconUnEnabledSelected",iconUnEnabledUnSelected:"iconUnEnabledUnSelected",hasIcon:"hasIcon",backUpColor:"backUpColor",backDownColor:"backDownColor",selectedColor:"selectedColor",unSelectedColor:"unSelectedColor",unEnabledColor:"unEnabledColor",textSize:"textSize"},{},[])},VIQY:function(t,e,n){"use strict";var o=n("QVAD"),i=n("/gn8"),r=n("MPvg"),a=n("feMm"),s=n("WxrY"),l=n("3+Wm"),u=n("matE");n.d(e,"a",function(){return c});var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(e){var n=t.call(this)||this;return n.wall=e,n.wallHeight=n.wall.height,n.openings=n.wall.openingsData,n.position.x=n.wall.x,n.position.y=-n.wall.y,n.rotation.z=-n.wall.rotationZ/180*Math.PI,n.init(),n}return h(e,t),e.prototype.init=function(){1==this.wall.hasStart&&(this.startFace=new s.a(s.a.START_WALL,this.wall),this.add(this.startFace)),1==this.wall.hasStop&&(this.stopFace=new s.a(s.a.STOP_WALL,this.wall),this.add(this.stopFace)),1==this.wall.hasStartSkirting&&(this.startSkirting=new l.a(l.a.START_SKIRTING,this.wall),this.add(this.startSkirting)),1==this.wall.hasStopSkirting&&(this.stopSkirting=new l.a(l.a.STOP_SKIRTING,this.wall),this.add(this.stopSkirting)),this.recreate()},e.prototype.recreate=function(){this.forwardFace&&(this.remove(this.forwardFace),this.forwardFace=null),this.backwardFace&&(this.remove(this.backwardFace),this.backwardFace=null),this.forwardSkirting&&(this.remove(this.forwardSkirting),this.forwardSkirting=null),this.backwardSkirting&&(this.remove(this.backwardSkirting),this.backwardSkirting=null),1==this.wall.hasForward&&(this.forwardFace=new s.a(s.a.FORWARD_WALL,this.wall),this.add(this.forwardFace)),1==this.wall.hasBackward&&(this.backwardFace=new s.a(s.a.BACKWARD_WALL,this.wall),this.add(this.backwardFace)),1==this.wall.hasForwardSkirting&&(this.forwardSkirting=new l.a(l.a.FORWARD_SKIRTING,this.wall),this.add(this.forwardSkirting)),1==this.wall.hasBackwardSkirting&&(this.backwardSkirting=new l.a(l.a.BACKWARD_SKIRTING,this.wall),this.add(this.backwardSkirting)),this.updateMaterials()},e.prototype.updateMaterials=function(){1==this.wall.hasForward&&(this.visible?a.a.getInstance().add(this.forwardFace,this.wall.forwardMaterialNo,this.forwardFace.updateUV,null,this.forwardFace):this.forwardFace.material=new r.h),1==this.wall.hasBackward&&(this.visible?a.a.getInstance().add(this.backwardFace,this.wall.backwardMaterialNo,this.backwardFace.updateUV,null,this.backwardFace):this.backwardFace.material=new r.h),this.startFace&&a.a.getInstance().add(this.startFace,this.wall.startMaterialNo,this.startFace.updateUV,null,this.startFace),this.stopFace&&a.a.getInstance().add(this.stopFace,this.wall.stopMaterialNo,this.stopFace.updateUV,null,this.stopFace),1==this.wall.hasForwardSkirting&&(this.visible?a.a.getInstance().add(this.forwardSkirting,this.wall.forwardSkirtingNo,this.forwardSkirting.updateUV,null,this.forwardSkirting):this.forwardSkirting.material=new r.h),1==this.wall.hasBackwardSkirting&&(this.visible?a.a.getInstance().add(this.backwardSkirting,this.wall.backwardSkirtingNo,this.backwardSkirting.updateUV,null,this.backwardSkirting):this.backwardSkirting.material=new r.h),this.startSkirting&&a.a.getInstance().add(this.startSkirting,this.wall.startSkirtingNo,this.startSkirting.updateUV,null,this.startSkirting),this.stopSkirting&&a.a.getInstance().add(this.stopSkirting,this.wall.stopSkirtingNo,this.stopSkirting.updateUV,null,this.stopSkirting)},e.prototype.getWireFrameByTarget=function(t){var e=new r.i({color:u.a.MASTER,opacity:.4,transparent:!0}),n=new r.l(t.geometry,e);return n.rotation.set(this.rotation.x,this.rotation.y,this.rotation.z,this.rotation.order),n.position.set(this.position.x,this.position.y,this.position.z),n},Object.defineProperty(e.prototype,"centerPoint",{get:function(){return new i.a(0,0,.5*this.wall.height)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeChildren();for(var e=0,n=[this.forwardFace,this.backwardFace,this.startFace,this.stopFace,this.forwardSkirting,this.backwardSkirting,this.startSkirting,this.stopSkirting];e<n.length;e++){var o=n[e];o&&o.dispose()}this.forwardFace=null,this.backwardFace=null,this.startFace=null,this.stopFace=null,this.forwardSkirting=null,this.backwardSkirting=null,this.startSkirting=null,this.stopSkirting=null,this.wall=null,this.openings=null},e}(o.a);c.FORWARD_UNIT_INDEX=0,c.BACKWARD_UNIT_INDEX=1},VwJn:function(t,e,n){"use strict";var o=n("VIQY"),i=n("GJiJ"),r=n("GhkV"),a=n("3BIX"),s=n("MkTd"),l=n("omsS"),u=n("MPvg"),h=n("3Mh4"),c=n("iwYP"),p=n("0Itk"),d=n("ic9J"),f=n("397s"),g=n("0/et"),m=n("/gn8"),_=n("C+EA"),y=n("lpfp"),b=n("YSA8"),v=n("1/cj"),w=n("WxrY");n.d(e,"a",function(){return x});var O=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(t){function e(n){var o=t.call(this,n)||this;e._instance=o,o.setStage(new d.a),o.ray=new u.k,o.scene=p.a.getInstance();var i=new u.n(5e3,50,15658734,8355711);return i.rotateX(.5*-Math.PI),i.position.z=-10,o.stage3D.add(i),o.touchEnable=!0,o}return O(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.initWebGL=function(){var t={canvas:this.canvasDom,antialias:!0,precision:"highp"};this.renderer=new u.o(t),this.renderer.setClearColor(2960685),this.renderer.setSize(this.canvasDom.width,this.canvasDom.height)},e.prototype.initCamera=function(){this.camera=new f.a,this.camera.fov=35,this.camera.near=1,this.camera.far=1e4,this.camera.up=new u.b(0,0,1),this.camera.lookAt(this.stage3D.position),this.camera.updateProjectionMatrix();var t=new u.p(15790335,.2,1e3);this.camera.add(t),this.resize()},e.prototype.initCameraController=function(){var t=p.a.getInstance().centerPoint;this.cameraController=new v.a(this.camera,this,new m.a(t.x,-t.y,140),2e3),this.cameraController.maxPitch=g.a.degreeToRadian(90),this.cameraController.minPitch=g.a.degreeToRadian(-90),this.cameraController.mode=v.a.ORIBIT_MODE},e.prototype.initMaterial=function(){var t=new u.i({color:14737632,opacity:1});_.a.addDiffuseMtl("roof",t)},e.prototype.rebuild=function(){this.clear(),this.build()},e.prototype.build=function(){for(var t in this.scene.roomObjects){var e=this.scene.roomObjects[t];this.level1.add(new l.a(e))}for(var t in this.scene.wallObjects){var n=this.scene.wallObjects[t];this.level1.add(new o.a(n))}for(var t in this.scene.openingObjects){var a=this.scene.openingObjects[t];this.level1.add(new i.a(a))}for(var t in this.scene.modelObjects){var s=this.scene.modelObjects[t];this.level1.add(new r.a(s))}var h=new u.q(12303291);this.level1.add(h);for(var c=0;c<4;c++){var p=new u.p(16777164,.4,1e3),d=this.scene.centerPoint,f=(45+90*c)*Math.PI/180,g=Math.atan2(1,Math.SQRT2),m=600*Math.cos(g)*Math.cos(f),_=600*Math.cos(g)*Math.sin(f),y=600*Math.sin(g);p.position.set(d.x+m,-d.y+_,y),this.level1.add(p)}},e.prototype.raycast=function(t,e){var n=t/window.innerWidth*2-1,o=-e/window.innerHeight*2+1;this.ray.setFromCamera(new u.r(n,o),this.camera);var i=this.level1.getDescendantByType([u.l]);return this.ray.intersectObjects(i)},e.prototype.getSelectableMesh=function(t){var e;return t instanceof b.a&&1==t.mouseEnabled&&(e=t),null==e&&t.parent&&(e=this.getSelectableMesh(t.parent)),e},e.prototype.touchStart=function(e){e.preventDefault(),t.prototype.touchStart.call(this,e),this.unselectAll();var n,o=e.touches[0];this.mousePoint=new y.a(o.clientX,o.clientY),this.mousePoint=this.globalToLocal(this.mousePoint);var i=this.raycast(this.mousePoint.x,this.mousePoint.y);if(i.length>0){var r=i[0].object;n=this.getSelectableMesh(r)}n&&n instanceof b.a&&(this.selectedObject=n,this.selectUp(this.selectedObject))},e.prototype.selectUp=function(t){},e.prototype.unselectAll=function(){this.selectedObject=null;for(var t=this.level1.getDescendantByType([i.a,a.a,s.a,o.a]),e=0,n=t;e<n.length;e++){n[e].selected=!1}this.level2.removeChildren()},e.prototype.showWireFrame=function(t){var e;t instanceof r.a||t instanceof i.a||t instanceof a.a||t instanceof s.a?(t.selected=!0,e=t.getWireFrame()):t instanceof w.a&&(e=t.parent.getWireFrameByTarget(t)),e&&this.level2.add(e)},e.prototype.clear=function(){this.level1.removeChildren(),this.level2.removeChildren(),this.renderer.clear(),u.s.clear()},e}(h.a);x.WALL_FORWARD="wall_forward",x.WALL_BACKWARD="wall_backward",x.WALL_START_NAME="wall_start",x.WALL_STOP_NAME="wall_stop",x.RAY_MODEL=1,x.RAY_FLOOR=2,x.RAY_OPENING=3,x.RAY_WALL=4,x.rayType=new c.a},VzFt:function(t,e,n){"use strict";var o=n("SScf"),i=n("mfrV");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this)||this;return o.label=new i.a(!1),o.label.text=e,o.label.size=12,o.label.setXY(-25,10),o.label.width=50,o.label.height=20,o.label.color="#333333",o.label.align="center",o.label.setScale(n,n),o.addChild(o.label),o}return r(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"FacadeOpeningTag"},enumerable:!0,configurable:!0}),e}(o.a)},WFe8:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("PSoK"),a=n("Yyq6"),s=n("yOTB"),l=n("r4QP"),u=n("lpfp"),h=n("/LiK"),c=n("0/et"),p=n("oipt"),d=n("v8gm"),f=n("J78+"),g=n("UPT1"),m=n("j8JM"),_=n("aJ2T"),y=n("/T2q"),b=n("PbJf"),v=n("jDyV"),w=n("matE");n.d(e,"a",function(){return x});var O=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var a=t.call(this,!0,!0)||this;return a._startCornerName="",a._stopCornerName="",a._bearing=!1,a._parapet=!1,a._topLeft=null,a._bottomLeft=null,a._topRight=null,a._bottomRight=null,a._forwardRoomName="",a._backwardRoomName="",a._aloneRoomName="",a.borderColor=0,a.fillColor=0,a.initPoint=null,a._forwardName="",a._backwardName="",a._startName="",a._stopName="",a._localStart=new u.a,a._localStop=new u.a,a._openings=[],a._oldStartCorner=null,a._oldStopCorner=null,a._newStartPoint=new u.a(0,0),a._newStopPoint=new u.a(0,0),a._lastMouseDownPoint=new u.a(0,0),a._lastMouseUpPoint=new u.a(0,0),a.dragTouchMoveHandlerLamda=function(t){a.dragTouchMoveHandler(t)},a.dragTouchEndHandlerLamda=function(t){a.dragTouchEndHandler(t)},a.depth=i.a.WALL,a.forwardName=h.a.createPureUID(),a.backwardName=h.a.createPureUID(),a.startName=h.a.createPureUID(),a.stopName=h.a.createPureUID(),a.realLength=o,a.startCornerName=e,a.stopCornerName=n,a.bearing=r,a.parapet=!1,a._forwardRoomName="",a._backwardRoomName="",a._aloneRoomName="",a._topLeft=new u.a(a.localStart.x,-.5*a.realLength),a._bottomLeft=new u.a(a.localStart.x,.5*a.realLength),a._topRight=new u.a(a.localStop.x,-.5*a.realLength),a._bottomRight=new u.a(a.localStop.x,.5*a.realLength),a.borderColor=w.a.WALL_BORDER_COLOR,a.fillColor=a.normalFillColor,a.calculateTransform(),a}return O(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Wall"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this),this.forwardRoomName="",this.backwardRoomName="",this._openings.length=0},Object.defineProperty(e.prototype,"startCornerName",{get:function(){return this._startCornerName},set:function(t){this._startCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCornerName",{get:function(){return this._stopCornerName},set:function(t){this._stopCornerName=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCorner",{get:function(){return this.scene.getCornerByName(this.startCornerName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCorner",{get:function(){return this.scene.getCornerByName(this.stopCornerName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.sqrt((this.startCorner.realX-this.stopCorner.realX)*(this.startCorner.realX-this.stopCorner.realX)+(this.startCorner.realY-this.stopCorner.realY)*(this.startCorner.realY-this.stopCorner.realY))},set:function(t){this._realWidth=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realX",{get:function(){return.5*(this.startCorner.realX+this.stopCorner.realX)},set:function(t){this._realX=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realY",{get:function(){return.5*(this.startCorner.realY+this.stopCorner.realY)},set:function(t){this._realY=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this.parapet?this._realHeight:this.scene.setting.getStoreyHeight(b.a.CM)},set:function(t){var e=this.realHeight;if(this._realHeight=t,c.a.less(this.realHeight,e))for(var n=this.openings,o=0,i=n;o<i.length;o++){var r=i[o];r.realHeight>this.realHeight&&(r.realHeight=this.realHeight),r.realZ>this.realHeight-r.realHeight&&(r.realZ=this.realHeight-r.realHeight)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realRotationZ",{get:function(){return 180*Math.atan2(this.stopCorner.realY-this.startCorner.realY,this.stopCorner.realX-this.startCorner.realX)/Math.PI},set:function(t){this._realRotationZ=c.a.formatAngle(t),this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overCursor",{get:function(){return p.a.rotationArrowCursor(this.rotation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalFillColor",{get:function(){return 5591140},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bearing",{get:function(){return this._bearing},set:function(t){this._bearing=t,this.fillColor=this.normalFillColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parapet",{get:function(){return this._parapet},set:function(t){this._parapet=t,t||(this.realHeight=this.scene.setting.getStoreyHeight(b.a.CM)),this.fillColor=this.normalFillColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.startCorner.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stop",{get:function(){return this.stopCorner.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardName",{get:function(){return this._forwardName},set:function(t){this._forwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardName",{get:function(){return this._backwardName},set:function(t){this._backwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startName",{get:function(){return this._startName},set:function(t){null!=t&&""!=t||(t=h.a.createPureUID()),this._startName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopName",{get:function(){return this._stopName},set:function(t){null!=t&&""!=t||(t=h.a.createPureUID()),this._stopName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStart",{get:function(){return this._localStart.setTo(-.5*this.realWidth,0),this._localStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStop",{get:function(){return this._localStop.setTo(.5*this.realWidth,0),this._localStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return this._topLeft},set:function(t){this._topLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return this._bottomLeft},set:function(t){this._bottomLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return this._bottomRight},set:function(t){this._bottomRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return this._topRight},set:function(t){this._topRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minOpeningStartX",{get:function(){return Math.max(this.topLeft.x,this.bottomLeft.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxOpeningStopX",{get:function(){return Math.min(this.topRight.x,this.bottomRight.x)},enumerable:!0,configurable:!0}),e.prototype.getLegalRange=function(t){function e(t,e){return t.dist>e.dist?1:t.dist<e.dist?-1:0}if(0==this.openings.length)return{minX:this.minOpeningStartX,maxX:this.maxOpeningStopX};for(var n=[],o=[],i=0,r=this.openings;i<r.length;i++){var a=r[i],s=a.wallX-t;s<0?n.push({dist:Math.abs(s),opening:a}):o.push({dist:s,opening:a})}return n.sort(e),o.sort(e),{minX:n[0]?n[0].opening.wallX+n[0].opening.realWidth/2:this.minOpeningStartX,maxX:o[0]?o[0].opening.wallX-o[0].opening.realWidth/2:this.maxOpeningStopX}},e.prototype.getLegalOpeningPosition=function(t,e){var n=Number.MAX_VALUE,o=-Number.MAX_VALUE;n=Math.min(n,this.minOpeningStartX),o=Math.max(o,this.maxOpeningStopX);for(var i,r=this.openings,a=0,s=r;a<s.length;a++)i=s[a],(i=this.scene.getOpeningByName(i.name))&&(e&&i.name==e.name||(i.wallX<t?c.a.less(i.stopWallX,t)?n=Math.max(n,i.stopWallX):(n=t,o=t):c.a.less(t,i.startWallX)?o=Math.min(o,i.startWallX):(n=t,o=t)));return[n,o]},Object.defineProperty(e.prototype,"empty",{get:function(){return c.a.isNumberEqual(this.realWidth,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openings",{get:function(){this._openings.length=0;var t;for(t in this.scene.openings){var e=this.scene.openings[t];e.wallName==this.name&&this._openings.push(e)}return this._openings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardRoomName",{get:function(){return this._forwardRoomName},set:function(t){this._forwardRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardRoomName",{get:function(){return this._backwardRoomName},set:function(t){this._backwardRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aloneRoomName",{get:function(){return this._aloneRoomName},set:function(t){this._aloneRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardRoom",{get:function(){return this.scene.getRoomByName(this.forwardRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardRoom",{get:function(){return this.scene.getRoomByName(this.backwardRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aloneRoom",{get:function(){return this.scene.getRoomByName(this.aloneRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjacentRoomCount",{get:function(){return this.forwardRoom&&this.backwardRoom?2:this.forwardRoom||this.backwardRoom?1:0},enumerable:!0,configurable:!0}),e.prototype.split=function(t){if(!c.a.isPointInSegment(this.start,this.stop,t))return null;var n=this.scene.getCornerByXY(t.x,t.y,!0),o=new e(n.name,this.stopCornerName,this.realLength,this.bearing);return o.parapet=this.parapet,o.realHeight=this.realHeight,this.stopCornerName=n.name,this.setPolygonChangeFlag(!0),this.scene.addWall(o),n},e.prototype.splitXY=function(t,e){return this._tmpPoint.setTo(t,e),this.split(this._tmpPoint)},e.prototype.draw=function(){1!=this.empty&&this.drawStraightWall()},e.prototype.drawStraightWall=function(){this.graphics.clear();var t=this.polygon.boundRect,e=t.centerPoint,n=Math.round((t.width>>1)+Math.abs(e.x))+1,o=Math.round((t.height>>1)+Math.abs(e.y))+1;this.graphics.width=n,this.graphics.height=o+10,this.graphics.lineStyle(1,0,0),this.graphics.beginFill(this.fillColor,1),d.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endFill(),this.graphics.lineStyle(1,w.a.WALL_BORDER_COLOR,1),d.a.drawLine(this.graphics,this.topLeft,this.topRight),d.a.drawLine(this.graphics,this.bottomLeft,this.bottomRight),this.graphics.endStroke()},e.prototype.drawToCanvas=function(t){var e=this.localToSceneMatrix,n=e.transformPoint(this.topLeft),o=e.transformPoint(this.topRight),i=e.transformPoint(this.bottomLeft),r=e.transformPoint(this.bottomRight);t.lineStyle(1,0,0),t.beginFill(this.fillColor,1),t.moveTo(this.start.x,this.start.y),t.lineTo(n.x,n.y),t.lineTo(o.x,o.y),t.lineTo(this.stop.x,this.stop.y),t.lineTo(r.x,r.y),t.lineTo(i.x,i.y),t.lineTo(this.start.x,this.start.y),t.endFill(),t.lineStyle(1,w.a.WALL_BORDER_COLOR,1),d.a.drawLine(t,n,o),d.a.drawLine(t,i,r),t.endStroke()},Object.defineProperty(e.prototype,"boundPolygon",{get:function(){if(this._updateControl.getValue(s.a.TAG_BOUNDARY)){this._boundPolygon=new f.a;var t,e=this.localToSceneMatrix;for(t=0;t<this.polygon.vertexCount;t++)this._boundPolygon.addPoint(e.transformPoint(this.polygon.getPointAt(t)));this._boundPolygon.vertexCount>0&&this._updateControl.setValue(s.a.TAG_BOUNDARY,!1)}return this._boundPolygon},enumerable:!0,configurable:!0}),e.prototype.calculatePolygon=function(){0!=this._updateControl.getValue(s.a.TAG_POLYGON)&&(this.polygon.clear(),this.polygon.addPoint(this.topLeft),this.polygon.addPoint(this.localStart),this.polygon.addPoint(this.bottomLeft),this.polygon.addPoint(this.bottomRight),this.polygon.addPoint(this.localStop),this.polygon.addPoint(this.topRight),this.setPolygonChangeFlag(!1))},e.prototype.calculateTransform=function(){this.startCorner&&this.stopCorner&&(this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.calculatePolygon(),this.draw())},e.prototype.isLegalPosition=function(t,n){if(t.subtract(n).length<e.DEFAULT_LENGTH)return!1;var o,i;for(i in this.scene.walls)if(o=this.scene.walls[i],o.startCornerName!=this.startCornerName&&o.stopCornerName!=this.startCornerName&&o.startCornerName!=this.stopCornerName&&o.stopCornerName!=this.stopCornerName){if(c.a.segmentIntersect(t,n,o.start,o.stop))return!1;var r=t.add(n);r=r.multiply(.5);var a=c.a.calcFoot(o.start,o.stop,r);if(1==c.a.isPointInSegment(o.start,o.stop,a)){var s=a.subtract(r).length;if(s<.5*o.realLength+.5*this.realLength)return!1}}var l,u,h,p=this.startCornerLocked,d=this.stopCornerLocked;if(!p){h=this.startCorner.connectedCorners;for(var f=0,g=h;f<g.length;f++)if(l=g[f],l.name!=this.stopCornerName)for(i in this.scene.walls)if(o=this.scene.walls[i],o.name!=this.name)if(o.startCornerName==this.startCornerName||o.stopCornerName==this.startCornerName){if(u=o.startCornerName==this.startCornerName?o.stopCorner:o.startCorner,u.name==l.name)continue;if(c.a.segmentIntersect(t,l.point,t,u.point))return!1}else if(c.a.segmentIntersect(t,l.point,o.start,o.stop))return!1}if(!d){h=this.stopCorner.connectedCorners;for(var m=0,_=h;m<_.length;m++)if(l=_[m],l.name!=this.startCornerName)for(i in this.scene.walls)if(o=this.scene.walls[i],o.name!=this.name)if(o.startCornerName==this.stopCornerName||o.stopCornerName==this.stopCornerName){if(u=o.startCornerName==this.stopCornerName?o.stopCorner:o.startCorner,u.name==l.name)continue;if(c.a.segmentIntersect(n,l.point,n,u.point))return!1}else if(c.a.segmentIntersect(n,l.point,o.start,o.stop))return!1}return!0},Object.defineProperty(e.prototype,"startCornerLocked",{get:function(){var t=this.startCorner.connectedCorners;if(t.length<=1)return!1;if(2==t.length)return!!c.a.isPointInSegment(t[0].point,t[1].point,this.start);if(3==t.length){for(var e=0;e<t.length;e++)if(t[e].name==this.stopCornerName){t.splice(e,1);break}return!c.a.isPointInSegment(t[0].point,t[1].point,this.start)}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCornerLocked",{get:function(){var t=this.stopCorner.connectedCorners;if(t.length<=1)return!1;if(2==t.length)return!!c.a.isPointInSegment(t[0].point,t[1].point,this.stop);if(3==t.length){for(var e=0;e<t.length;e++)if(t[e].name==this.startCornerName){t.splice(e,1);break}return!c.a.isPointInSegment(t[0].point,t[1].point,this.stop)}return!0},enumerable:!0,configurable:!0}),e.prototype.calculateStartForwardCorner=function(t){c.a.isPointOnLine(this.start,this.stop,t);var e,n=null,o=c.a.vectorsAngle(t.subtract(this.start),this.stop.subtract(this.start));o>0&&(e=Number.MAX_VALUE),o<0&&(e=Number.MIN_VALUE);for(var i=0,r=this.startCorner.connectedCorners;i<r.length;i++){var a=r[i];if(a.name!=this.stopCornerName){var s=c.a.vectorsAngle(a.point.subtract(this.start),this.stop.subtract(this.start));s<0&&(s+=360),o>0?s<e&&(e=s,n=a):o<0&&s>e&&(e=s,n=a)}}return n},e.prototype.calculateStopForwardCorner=function(t){c.a.isPointOnLine(this.start,this.stop,t);var e,n=null,o=c.a.vectorsAngle(t.subtract(this.stop),this.start.subtract(this.stop));o>0&&(e=Number.MAX_VALUE),o<0&&(e=Number.MIN_VALUE);for(var i=0,r=this.stopCorner.connectedCorners;i<r.length;i++){var a=r[i];if(a.name!=this.startCornerName){var s=c.a.vectorsAngle(a.point.subtract(this.stop),this.start.subtract(this.stop));s<0&&(s+=360),o>0?s<e&&(e=s,n=a):o<0&&s>e&&(e=s,n=a)}}return n},e.prototype.calculateAdsorbPoint=function(t){var e,n,o,i,r=null,a=null,s=c.a.calcFoot(this.start,this.stop,t),l=t.x-s.x,h=t.y-s.y,p=new u.a(this.start.x+l,this.start.y+h),d=new u.a(this.stop.x+l,this.stop.y+h),f=Number.MAX_VALUE;for(var g in this.scene.walls){var m=this.scene.walls[g],_=Math.abs(this.realRotationZ-m.realRotationZ);if(m!=this&&(1==c.a.isNumberEqual(_,0,.01)||1==c.a.isNumberEqual(_,180,.01))){s=c.a.calcFoot(p,d,m.start),i=s.subtract(m.start);var y=Math.abs(i.length-Math.abs(m.realLength/2-this.realLength/2));y<=4&&y<f&&(f=y,e=m,i.normalize(Math.abs(e.realLength/2-this.realLength/2)),n=e.start.add(i),e.realLength>this.realLength?i.normalize(e.realLength/2):(i.normalize(e.realLength/2),i.x*=-1,i.y*=-1),o=e.start.add(i))}}var b,v;i=null,f=Number.MAX_VALUE;for(var g in this.scene.corners){var w=this.scene.corners[g];w.name!=this.startCornerName&&(w.name!=this.stopCornerName&&(s=c.a.calcFoot(p,d,w.point),i=s.subtract(w.point),i.length<Math.min(f,4)&&(f=i.length,w,b=w.point.clone(),v=b.clone())))}if(b)if(n){s=c.a.calcFoot(p,d,n);var O=s.subtract(n).length;s=c.a.calcFoot(p,d,b);var x=s.subtract(b).length;O<x?(r=n,a=o):(r=b,a=v)}else r=b,a=v;else n&&(r=n,a=o);return{adsorbPoint:r,auxiliaryPoint:a}},e.prototype.calculateNewPosition=function(t,n){if(void 0===n&&(n=!0),this._newStartPoint.x=this.start.x,this._newStartPoint.y=this.start.y,this._newStopPoint.x=this.stop.x,this._newStopPoint.y=this.stop.y,1==n){var o=this.calculateAdsorbPoint(t),i=o.adsorbPoint;i&&(t=i)}var a=new u.a(this.start.x,this.start.y),s=new u.a(this.stop.x,this.stop.y);if(!c.a.isPointOnLine(this.start,this.stop,t)){var l=c.a.calcFoot(this.start,this.stop,t),h=t.x-l.x,p=t.y-l.y,d=this.startCornerLocked,f=this.stopCornerLocked;if(!((d||f)&&Math.sqrt(h*h+p*p)<e.DEFAULT_LENGTH)){var g=this.calculateStartForwardCorner(t),m=this.calculateStopForwardCorner(t);a.x+=h,a.y+=p,s.x+=h,s.y+=p,this._newStartPoint.x=a.x,this._newStartPoint.y=a.y,this._newStopPoint.x=s.x,this._newStopPoint.y=s.y;var _,y;if(g){if(_=c.a.calculateIntersectPoint(a,s,this.start,g.point),d){this._oldStartCorner=this.startCorner;var b=new r.a(this.startCorner.realX,this.startCorner.realY);if(this.scene.addCorner(b),this.startCornerName=b.name,y=new e(b.name,this._oldStartCorner.name,e.DEFAULT_LENGTH),this.scene.addWall(y),_&&c.a.isPointInSegment(this._oldStartCorner.point,g.point,_)){var v=this.scene.getWallByCorners(this._oldStartCorner,g);v&&(v.startCornerName==this._oldStartCorner.name?v.startCornerName=b.name:v.stopCornerName==this._oldStartCorner.name&&(v.stopCornerName=b.name),y.realLength=v.realLength)}}_&&(this._newStartPoint.x=_.x,this._newStartPoint.y=_.y)}if(m){if(_=c.a.calculateIntersectPoint(a,s,this.stop,m.point),f){this._oldStopCorner=this.stopCorner;var w=new r.a(this.stopCorner.realX,this.stopCorner.realY);if(this.scene.addCorner(w),this.stopCornerName=w.name,y=new e(w.name,this._oldStopCorner.name,e.DEFAULT_LENGTH),this.scene.addWall(y),_&&c.a.isPointInSegment(this._oldStopCorner.point,m.point,_)){var O=this.scene.getWallByCorners(this._oldStopCorner,m);O&&(O.startCornerName==this._oldStopCorner.name?O.startCornerName=w.name:O.stopCornerName==this._oldStopCorner.name&&(O.stopCornerName=w.name),y.realLength=O.realLength)}}_&&(this._newStopPoint.x=_.x,this._newStopPoint.y=_.y)}}}},e.prototype.touchStart=function(e){if(!(e.touches.length>1)){t.prototype.touchStart.call(this,e);var n=e.touches[0];this._lastMouseDownPoint.setTo(n.clientX,n.clientY),_.a.inst.focusTarget==this&&(this.stage.addEventListener(m.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(m.a.TOUCH_END,this.dragTouchEndHandlerLamda))}},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){_.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.fillColor=w.a.WALL_HOVER_FILL_COLOR,this.calculateTransform();var e={selectedItem:this,selectedPoint:this._lastMouseDownPoint.clone()};this.scene.dispatchEvent(new y.a(y.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.fillColor=this.normalFillColor,this.calculateTransform(),this.scene.dispatchEvent(new y.a(y.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY);var n=this.scene.globalToLocal(this._tmpPoint);this._oldStartCorner=null,this._oldStopCorner=null,this.moveWall(n,!0)}},e.prototype.moveWall=function(t,e){void 0===e&&(e=!0),this.calculateNewPosition(t,e);var n=this.isLegalPosition(this._newStartPoint,this._newStopPoint);if(1==n){this.startCorner.realX=this._newStartPoint.x,this.startCorner.realY=this._newStartPoint.y,this.stopCorner.realX=this._newStopPoint.x,this.stopCorner.realY=this._newStopPoint.y,this.startCorner.calculateTransform(),this.stopCorner.calculateTransform();var o,i,r;o=this.startCorner.connectedCorners;for(var a=0,s=o;a<s.length;a++)i=s[a],i.calcWallCorner();o=this.stopCorner.connectedCorners;for(var l=0,u=o;l<u.length;l++)i=u[l],i.calcWallCorner();this._oldStartCorner&&this._oldStartCorner.calcWallCorner(),this._oldStopCorner&&this._oldStopCorner.calcWallCorner();for(var h in this.scene.walls)r=this.scene.walls[h],this.isHaveCommonCorner(r)?(r.setPolygonChangeFlag(!0),r.calculateTransform()):!this._oldStartCorner||r.startCornerName!=this._oldStartCorner.name&&r.stopCornerName!=this._oldStartCorner.name?this._oldStopCorner&&(r.startCornerName!=this._oldStopCorner.name&&r.stopCornerName!=this._oldStopCorner.name||(r.setPolygonChangeFlag(!0),r.calculateTransform())):(r.setPolygonChangeFlag(!0),r.calculateTransform());for(var p=0,d=this.openings;p<d.length;p++){var f=d[p];f=this.scene.getOpeningByName(f.name),f&&(this._tmpPoint.setTo(f.realX,f.realY),this._tmpPoint=c.a.calcFoot(this.start,this.stop,this._tmpPoint),f.realX=this._tmpPoint.x,f.realY=this._tmpPoint.y,f.x=f.realX,f.y=f.realY)}}return this.startCorner.mergeConer(),this.stopCorner.mergeConer(),g.a.inst.update(),n},e.prototype.dragTouchEndHandler=function(t){this.hasMouseDown=!1;var e=t.changedTouches[0];this._lastMouseUpPoint.setTo(e.clientX,e.clientY);var n,o;for(var i in this.scene.rooms)if(o=this.scene.rooms[i],o.isWallInThisRoom(this)){o.calculateTransform(),o.setPolygonChangeFlag(!0);for(var r=0,a=o.roomWalls;r<a.length;r++)n=a[r],this.isHaveCommonCorner(n)||(n.setPolygonChangeFlag(!0),n.calculateTransform())}0==c.a.isPointEqual(this._lastMouseDownPoint,this._lastMouseUpPoint,1)&&this.scene.change(!0,!0),this.stage.removeEventListener(m.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(m.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.actionDelete=function(){var t,e,n;n=new Array,n.push(this.startCorner,this.stopCorner),this.scene.removeWall(this,!0);for(var o=0,i=n;o<i.length;o++)if(e=i[o],t=e.mergeWall())t.startCorner.calcWallCorner(),t.stopCorner.calcWallCorner(),t.calculateTransform();else if(e.stage){e.calcWallCorner();for(var r=0,a=e.connectedWalls;r<a.length;r++)t=a[r],t.setPolygonChangeFlag(!0),t.calculateTransform()}n.length=0,this.scene.change(!0,!0)},e.prototype.actionSplit=function(){if(!c.a.isNumberEqual(this._lastMouseDownPoint.x,0)||!c.a.isNumberEqual(this._lastMouseDownPoint.y,0)){var t,e;this._tmpPoint=this.globalToLocal(this._lastMouseDownPoint),this._tmpPoint.y=0,this._tmpPoint=this.localToScene(this._tmpPoint),t=this.splitXY(this._tmpPoint.x,this._tmpPoint.y);var n=this.realHeight;if(t){t.calcWallCorner();for(var o=0,i=t.connectedCorners;o<i.length;o++){i[o].calcWallCorner()}for(var r=0,a=t.connectedWalls;r<a.length;r++)e=a[r],e.setPolygonChangeFlag(!0),e.calculateTransform(),e.realHeight=n,e.parapet=this.parapet;this.scene.change(!0,!0),g.a.inst.showCornerRuler(t)}}},e.prototype.actionHole=function(){if(!c.a.isNumberEqual(this._lastMouseDownPoint.x,0)||!c.a.isNumberEqual(this._lastMouseDownPoint.y,0)){this._tmpPoint=this.globalToLocal(this._lastMouseDownPoint),this._tmpPoint.y=0,this._tmpPoint=this.localToScene(this._tmpPoint);var t=this._tmpPoint.x,e=this._tmpPoint.y,n=(this.realRotationZ,new a.a(l.a.HOLE));n.wallName=this.name,n.realX=t,n.realY=e,n.realRotationZ=this.realRotationZ,n.realWidth=a.a.DEFAULT_HOLE_WIDTH,n.realHeight=this.realHeight-60,this.scene.addOpening(n),this.scene.change()}},e.prototype.doChangeLength=function(t,n){if(void 0===n&&(n=!0),!((t=Math.round(t))<e.MIN_LENGTH||t>e.MAX_LENGTH||c.a.isNumberEqual(t,this.realLength))){this.realLength=t,this.startCorner.calcWallCorner(),this.stopCorner.calcWallCorner();var o;for(o in this.scene.walls){var i=this.scene.walls[o];i.startCornerName!=this.startCornerName&&i.stopCornerName!=this.startCornerName&&i.startCornerName!=this.stopCornerName&&i.stopCornerName!=this.stopCornerName||(i.setPolygonChangeFlag(!0),i.calculateTransform())}for(o in this.scene.openings){var r=this.scene.openings[o];r.wallName==this.name&&r.calculateTransform()}this.scene.change(n,!0)}},e.prototype.doChangeWidth=function(t){if(!(c.a.isNumberEqual(t,this.realWidth)||t<e.MIN_WIDTH)){this._newStartPoint.setTo(this.start.x,this.start.y),this._newStopPoint.setTo(this.stop.x,this.stop.y);var n=this.realWidth;if(1==this.stopCorner.connectedWalls.length)this._tmpPoint=c.a.vectorMovement(this.stop,this.stop.subtract(this.start),t-n),this._newStopPoint.setTo(this._tmpPoint.x,this._tmpPoint.y);else{if(1!=this.startCorner.connectedWalls.length)return;this._tmpPoint=c.a.vectorMovement(this.start,this.start.subtract(this.stop),t-n),this._newStartPoint.setTo(this._tmpPoint.x,this._tmpPoint.y)}var o;for(o in this.scene.walls){var i=this.scene.walls[o];if(i.name!=this.name&&c.a.intersectPlus(this._newStartPoint,this._newStopPoint,i.start,i.stop))return}if(c.a.isPointEqual(this._newStartPoint,this.start)){if(c.a.isPointEqual(this._newStopPoint,this.stop))return;this.stopCorner.realX=this._newStopPoint.x,this.stopCorner.realY=this._newStopPoint.y}else this.startCorner.realX=this._newStartPoint.x,this.startCorner.realY=this._newStartPoint.y;this.startCorner.calculateTransform(),this.stopCorner.calculateTransform(),this.startCorner.calcWallCorner(),this.stopCorner.calcWallCorner(),this.setPolygonChangeFlag(!0),this.calculateTransform(),this.scene.change(),this.scene.updateRuler()}},e.prototype.resetCorner=function(t){t==this.startCorner?(this.topLeft.x=-this.realWidth/2,this.topLeft.y=-this.realLength/2,this.bottomLeft.x=-this.realWidth/2,this.bottomLeft.y=this.realLength/2):t==this.stopCorner&&(this.topRight.x=this.realWidth/2,this.topRight.y=-this.realLength/2,this.bottomRight.x=this.realWidth/2,this.bottomRight.y=this.realLength/2)},e.prototype.calcArea=function(){return Math.abs(this.polygon.area)},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.structType=v.a.WALL,t.forwardName=this.forwardName,t.backwardName=this.backwardName,t.startName=this.startName,t.stopName=this.stopName,t.startCornerName=this.startCornerName,t.stopCornerName=this.stopCornerName,t.bearing=1==this.bearing?1:0,t.parapet=1==this.parapet?1:0,t.length=this.realLength,t.height=this.realHeight,t.forwardRoomName=this.forwardRoomName,t.backwardRoomName=this.backwardRoomName,t},e.loadData=function(t){if(t.hasOwnProperty("bearing")||(t.bearing=0),t.hasOwnProperty("parapet")||(t.parapet=0),t.startCornerName==t.stopCornerName)return null;var n=new e(t.startCornerName,t.stopCornerName,t.length,Boolean(t.bearing));return n.name=t.name,n.forwardName=t.forwardName,n.backwardName=t.backwardName,n.startName=t.startName,n.stopName=t.stopName,n.parapet=Boolean(t.parapet),n.realHeight=t.height,n},e.prototype.isHaveCommonCorner=function(t){return t.startCornerName==this.startCornerName||t.startCornerName==this.stopCornerName||t.stopCornerName==this.startCornerName||t.stopCornerName==this.stopCornerName},e}(o.a);x.DEFAULT_LENGTH=12,x.DEFAULT_LOW_HEIGHT=100,x.DEFAULT_HEIGHT=280,x.MIN_LENGTH=8,x.MAX_LENGTH=60,x.MIN_HEIGHT=100,x.MAX_HEIGHT=600,x.MIN_WALL_LOW_HEIGTH=10,x.MIN_WIDTH=24,x.MAX_WIDTH=1500,x.MIN_ANGLE=20,x.DEFAULT_BASEMAP_FILL_COLOR=16776960},WYR6:function(t,e,n){"use strict";var o=n("lpfp");n.d(e,"a",function(){return i});var i=function(){function t(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),this._x=0,this._y=0,this._width=0,this._height=0,this._x=t,this._y=e,this._width=n,this._height=o}return t.prototype.setTo=function(t,e,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),this._x=t,this._y=e,this._width=n,this._height=o},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._x+this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new o.a(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new o.a(this.right,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new o.a(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new o.a(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerPoint",{get:function(){return this.topLeft.add(this.bottomRight).multiply(.5)},enumerable:!0,configurable:!0}),t.prototype.setEmpty=function(){this._x=0,this._y=0,this._width=0,this._height=0},t.prototype.containsOnPoint=function(t){return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom},t.prototype.containsInPoint=function(t){return t.x>this.left&&t.x<this.right&&t.y>this.top&&t.y<this.bottom},t.prototype.intersect=function(t){for(var e=[this.topLeft,this.topRight,this.bottomRight,this.bottomLeft],n=0,o=e;n<o.length;n++){var i=o[n];if(1==t.containsOnPoint(i))return!0}return!1},t}()},Wilg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.NULL=0,o.MIDLINE=1,o.INLINE=2},WxrY:function(t,e,n){"use strict";var o=n("MPvg"),i=n("YSA8"),r=n("3Gk7"),a=n("C+EA"),s=n("/gn8");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(n,o){var i=t.call(this)||this;i.name=n,i.wall=o,i.mouseEnabled=!0;var s=i.wall.openingPolygons,l=[],u=[];return n==e.FORWARD_WALL?(l=i.wall.forwardPolygon(i.wall.height).triangulate(s),u=r.a.polygon3ds2vertices(l),i.geometry=r.a.createGeomtry(u,null,null,r.a.createTriangleIndices(u.length/9))):n==e.BACKWARD_WALL?(l=i.wall.backwardPolygon(i.wall.height).triangulate(s),u=r.a.polygon3ds2vertices(l),i.geometry=r.a.createGeomtry(u,null,null,r.a.createTriangleIndices(u.length/9))):n==e.START_WALL?(l=i.wall.startPolygon(i.wall.height).triangulate(s),u=r.a.polygon3ds2vertices(l),i.geometry=r.a.createGeomtry(u,null,null,r.a.createTriangleIndices(u.length/9))):n==e.STOP_WALL&&(l=i.wall.stopPolygon(i.wall.height).triangulate(s),u=r.a.polygon3ds2vertices(l),i.geometry=r.a.createGeomtry(u,null,null,r.a.createTriangleIndices(u.length/9))),i.material=a.a.defaultColorMaterial,i}return l(e,t),e.prototype.updateUV=function(t,e,n,o){this.updateStraightWallUV(n,o);var i=a.a.getTextureResourceByKey(e).resource,r=a.a.createStandardMaterial(i);r.needsUpdate=!0,this.material=r},e.prototype.updateStraightWallUV=function(t,n){var i,r=[],a=this.geometry,l=a.getAttribute("position"),u=l.array;for(i=0;i<u.length/3;i++)r.push(new s.a(u[3*i],u[3*i+1],u[3*i+2]));var h=[],c=[],p=this.wall.topRight.x-this.wall.topLeft.x,d=this.wall.bottomRight.x-this.wall.bottomLeft.x;for(i=0;i<r.length;i++)this.name==e.FORWARD_WALL?(h.push(-r[i].x/t,-r[i].z/n),c.push((-r[i].x+this.wall.topRight.x)/p,-r[i].z/this.wall.height)):this.name==e.BACKWARD_WALL?(h.push(r[i].x/t,-r[i].z/n),c.push((r[i].x-this.wall.bottomLeft.x)/d,-r[i].z/this.wall.height)):this.name==e.START_WALL?(h.push(-r[i].y/t,-r[i].z/n),c.push((this.wall.topLeft.y-r[i].y)/this.wall.length,-r[i].z/this.wall.height)):this.name==e.STOP_WALL&&(h.push(r[i].y/t,-r[i].z/n),c.push((r[i].y-this.wall.bottomRight.y)/this.wall.length,-r[i].z/this.wall.height));a.addAttribute("uv",new o.j(new Float32Array(h),2))},Object.defineProperty(e.prototype,"item",{get:function(){return this.name==e.FORWARD_WALL?this.wall.forwardMaterial:this.name==e.BACKWARD_WALL?this.wall.backwardMaterial:this.name==e.START_WALL?this.wall.forwardMaterial:this.name==e.STOP_WALL?this.wall.forwardMaterial:null},enumerable:!0,configurable:!0}),e}(i.a);u.FORWARD_WALL="FORWARD_WALL",u.BACKWARD_WALL="BACKWARD_WALL",u.START_WALL="START_WALL",u.STOP_WALL="STOP_WALL"},X7Gc:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.DRAG_ENTER="DRAG_ENTER",r.DRAG_MOVE="DRAG_MOVE"},X973:function(t,e,n){"use strict";var o=n("/oeL"),i=n("+N0H"),r=n("/T2q"),a=n("IKKv"),s=n("3NP2"),l=n("Dvc5"),u=n("qJEM"),h=n("YihH"),c=n("+ByO"),p=n("UPT1"),d=n("wzWt"),f=n("6p4A"),g=n("l96L");n.d(e,"a",function(){return _});var m=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.beautyUp="",i.beautyDown="",i.drawWallUp="",i.drawWallDown="",i.drawRoomUp="",i.drawRoomDown="",i.centerUp="",i.centerDown="",i.rulerUp="",i.rulerDown="",i.addStructUp="",i.addStructDown="",i.optionUp="",i.optionDown="",i.buttons=[],e.inst=i,i}return m(e,t),e.prototype.ngOnInit=function(){this.beautyUp="assets/view/toolbar/beauty_up_3x.png",this.beautyDown="assets/view/toolbar/beauty_down_3x.png",this.drawWallUp="assets/view/toolbar/draw_wall_up_3x.png",this.drawWallDown="assets/view/toolbar/draw_wall_down_3x.png",this.drawRoomUp="assets/view/toolbar/draw_room_up_3x.png",this.drawRoomDown="assets/view/toolbar/draw_room_down_3x.png",this.centerUp="assets/view/toolbar/center_up_3x.png",this.centerDown="assets/view/toolbar/center_up_3x.png",this.rulerUp="assets/view/toolbar/ruler_up_3x.png",this.rulerDown="assets/view/toolbar/ruler_down_3x.png",this.addStructUp="assets/view/toolbar/add_struct_up_3x.png",this.addStructDown="assets/view/toolbar/add_struct_down_3x.png",this.optionUp="assets/view/toolbar/option_up_3x.png",this.optionDown="assets/view/toolbar/option_up_3x.png"},e.prototype.ngAfterViewInit=function(){this.buttons=this.buttonQueryList.toArray(),this.scene=i.a.inst,this.scene.addEvent(r.a.MSCENE_DRAW_CLOSED,this.onMSceneDrawClosed,this)},e.prototype.onMSceneDrawClosed=function(t){this.moveHandler()},e.prototype.beautyHandler=function(){},e.prototype.rulerHandler=function(){1==p.a.inst.visible?(p.a.inst.hideEdgeRuler(),this.buttons[3].selected=!1):(p.a.inst.showEdgeRuler(),this.buttons[3].selected=!0)},e.prototype.addStructHandler=function(){this.closeSettingUI(),d.a.inst.addStructHandler()},e.prototype.centerHandler=function(){this.scene.moveHuxingToCenter(),this.scene.center(),this.moveHandler()},e.prototype.moveHandler=function(){a.a.inst.close(),this.closeSettingUI(),this.buttons[0].selected=!1,this.buttons[1].selected=!1,g.a.inst.show(!0)},e.prototype.drawWallHandler=function(){a.a.inst.open(s.a.PATH),this.closeSettingUI(),this.buttons[0].selected=!1,this.buttons[1].selected=!0,g.a.inst.show(!1)},e.prototype.drawRoomHandler=function(){a.a.inst.open(s.a.RECT),this.closeSettingUI(),this.buttons[0].selected=!0,this.buttons[1].selected=!1,g.a.inst.show(!1)},e.prototype.optionHandler=function(){f.a.inst.open()},e.prototype.closeSettingUI=function(){i.a.inst.unfocus(),u.a.inst.close(),h.a.inst.close(),c.a.inst.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(l.a);_.inst=null},XOoE:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".title[_ngcontent-%COMP%]{position:absolute;width:100%;height:50px;padding-left:18px;border-bottom:1px solid #ccc}.titleButton[_ngcontent-%COMP%]{float:left;margin-right:13px;margin-top:13px}.content[_ngcontent-%COMP%]{position:absolute;top:50px;width:100%;height:124px;padding-left:20px;padding-top:15px}.roomTypeButton[_ngcontent-%COMP%]{float:left;margin-right:8px;margin-bottom:10px}"]},"Xx/s":function(t,e,n){"use strict";var o=n("mfrV"),i=n("lpfp"),r=n("v7PY"),a=n("0/et");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=t.call(this,!1)||this;return e.scene=null,e.hasTouch=!1,e.mouseFirstPoint=new i.a,e.mouseMovePoint=new i.a,e.gpu=!0,e.touchEnable=!0,e.dom.style.borderRadius="2px",e.dom.style.borderStyle="dashed",e.dom.style.padding="2px 5px 2px 5px",e.borderThickness=1,e.borderColor=r.a.toString(r.a.BLUE2),e.backgroundColor=r.a.toRGBAstring(r.a.WHITE,1),e.color=r.a.toString(r.a.FONT),e.size=12,e.text="点击输入文字",e}return s(e,t),e.prototype.update=function(){this.scaleX=1/this.scene.scale,this.scaleY=1/this.scene.scale,this.touchEnable=!0},e.prototype.touchStart=function(e){this.hasTouch=!0;var n=e.touches[0];this.mouseFirstPoint.setTo(n.clientX,n.clientY),this.mouseFirstPoint=this.scene.globalToLocal(this.mouseFirstPoint),this.mouseMovePoint.setTo(this.mouseFirstPoint.x,this.mouseFirstPoint.y),t.prototype.touchStart.call(this,e)},e.prototype.touchMove=function(e){if(0!=this.hasTouch){var n=e.touches[0],o=new i.a(n.clientX,n.clientY);o=this.scene.globalToLocal(o),this.x+=o.x-this.mouseMovePoint.x,this.y+=o.y-this.mouseMovePoint.y,this.mouseMovePoint.setTo(o.x,o.y),t.prototype.touchMove.call(this,e)}},e.prototype.touchEnd=function(e){this.hasTouch=!1;var n=this.parent;n&&1==a.a.isPoint2DEqual(this.mouseFirstPoint,this.mouseMovePoint,.1)&&n.noteClick(this),t.prototype.touchEnd.call(this,e)},e.prototype.clear=function(){this.scene=null,this.mouseFirstPoint=null,this.mouseMovePoint=null},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.x=this.x,t.y=this.y,t.text=this.text,t.textX=this.x,t.textY=this.y,t.textWidth=80,t},e.loadData=function(t){var n=new e;return n.name=t.name,n.x=t.x,n.y=t.y,n.text=t.text,n},e}(o.a)},"Y/NI":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[""]},YDFo:function(t,e,n){"use strict";var o=n("Ze7d"),i=n("4aTh"),r=n("v7PY"),a=n("7vVH"),s=n("kg3E"),l=n("gdOB");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(){var e=t.call(this)||this;return e.isPivotCenter=!1,e}return u(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"canvas"},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){t.prototype.createDom.call(this);var e=this.canvasDom;this.context=e.getContext("2d")},e.prototype.draw=function(t,e,n,o){if(void 0===e&&(e=null),void 0===n&&(n=0),void 0===o&&(o=0),this.context){null==e&&(e=new l.a);var i=n<=0?t.width:n,r=o<=0?t.height:o;this.context.setTransform(e.a,e.b,e.c,e.d,e.tx,e.ty),this.context.drawImage(t,0,0,i,r),this.context.setTransform(1,0,0,1,0,0)}},e.prototype.beginBitmapFill=function(t,e,n,o,i){if(void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),this.context){var r=o<=0?this.width:o,a=i<=0?this.height:i;this.context.drawImage(t,e,n,r,a)}},e.prototype.beginRepeatBitmapFill=function(t,e,n){void 0===e&&(e=100),void 0===n&&(n=100);var o=s.a.inst.copyImage2(t,e,n);if(o){var i=this.context.createPattern(o.canvasDom,"repeat");this.context.fillStyle=i}s.a.inst.clear()},e.prototype.beginFill=function(t,e){void 0===e&&(e=1);var n=r.a.toRGB(t);n.push(e);var o=n.join(",");this.context.fillStyle="rgba("+o+")"},e.prototype.clear=function(){this.context.clearRect(0,0,this.canvasDom.width,this.canvasDom.height)},e.prototype.clearRect=function(t,e,n,o){this.context.clearRect(t+this.offsetX,e+this.offsetX,n,o)},e.prototype.drawCircle=function(t,e,n){this.context.arc(t+this.offsetX,e+this.offsetY,n,0,2*Math.PI)},e.prototype.drawRect=function(t,e,n,o){this.context.fillRect(t+this.offsetX,e+this.offsetY,n,o),this.context.strokeRect(t+this.offsetX,e+this.offsetY,n,o)},e.prototype.drawStrokeRect=function(t,e,n,o){this.context.strokeRect(t+this.offsetX,e+this.offsetY,n,o)},e.prototype.drawPath=function(t,e){for(var n=t.length,o=0;o<n;o++){var r=e[o];switch(t[o]){case i.a.MOVE_TO:this.moveTo(r.x,r.y);break;case i.a.LINE_TO:this.lineTo(r.x,r.y)}}},e.prototype.endFill=function(){this.context.closePath(),this.context.fill(),this.context.stroke()},e.prototype.closeFill=function(){this.context.closePath(),this.context.fill()},e.prototype.endStroke=function(){this.context.closePath(),this.context.stroke()},e.prototype.lineStyle=function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=1);var o=r.a.toRGB(e);o.push(n);var i=o.join(",");this.context.lineWidth=t,this.context.strokeStyle="rgba("+i+")",this.context.beginPath()},e.prototype.lineTo=function(t,e){this.context.lineTo(t+this.offsetX,e+this.offsetY)},e.prototype.moveTo=function(t,e){this.context.moveTo(t+this.offsetX,e+this.offsetY)},e.prototype.curveTo=function(t,e,n,o){this.context.quadraticCurveTo(t+this.offsetX,e+this.offsetY,n+this.offsetX,o+this.offsetY)},e.prototype.setShadow=function(t,e,n,o){this.context.shadowOffsetX=t,this.context.shadowOffsetY=e,this.context.shadowBlur=n,this.context.shadowColor=o},Object.defineProperty(e.prototype,"bitmapdata",{get:function(){var t=this.context.getImageData(0,0,this.width,this.height);return new o.a(t)},set:function(t){this.context.putImageData(t.imagedata,0,0)},enumerable:!0,configurable:!0}),e.prototype.putbitmapdata=function(t,e,n,o,i,r,a){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===a&&(a=0),arguments.length<=3?this.context.putImageData(t.imagedata,e,n):this.context.putImageData(t.imagedata,e,n,o,i,r,a)},e.prototype.getBitmapData=function(t,e,n,i){var r=this.context.getImageData(t,e,n,i);return new o.a(r)},Object.defineProperty(e.prototype,"png",{get:function(){var t="";try{t=this.canvasDom.toDataURL("image/png")}catch(e){t=""}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jpg",{get:function(){var t="";try{t=this.canvasDom.toDataURL("image/jpeg")}catch(e){t=""}return t},enumerable:!0,configurable:!0}),e.prototype.scale=function(t,e){this.context.scale(t,e)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){1==this.isPivotCenter?(this.x=-t,this._width=2*t):this._width=t,this.canvasDom.width=this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){1==this.isPivotCenter?(this.y=-t,this._height=2*t):this._height=t,this.canvasDom.height=this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return 1==this.isPivotCenter?this.width>>1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return 1==this.isPivotCenter?this.height>>1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasDom",{get:function(){return this._dom},enumerable:!0,configurable:!0}),e}(a.a)},YSA8:function(t,e,n){"use strict";var o=n("MPvg"),i=n("aNcW"),r=n("6xdJ"),a=n("/gn8");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=t.call(this)||this;return e.eventDispather=new r.a,e.mouseEnabled=!1,e._selected=!1,e.eventDispather.owner=e,e}return s(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrix3D",{get:function(){return null==this._matrix3D&&(this._matrix3D=new i.a(this.matrix.toArray())),this._matrix3D},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position3D",{get:function(){var t=this.position;return new a.a(t.x,t.y,t.z)},enumerable:!0,configurable:!0}),e.prototype.removeChildren=function(){for(;this.children.length>0;){var t=this.children[0];t instanceof e&&(t.dispose(),t.removeChildren()),this.remove(t)}},e.prototype.addEvent=function(t,e,n){this.eventDispather.addEvent(t,e,n)},e.prototype.removeEvent=function(t,e,n){this.eventDispather.removeEvent(t,e,n)},e.prototype.dispatchEvent2=function(t){this.eventDispather.dispatchEvent(t,this.eventDispather)},e.prototype.intersectRay=function(t,e){var n=new o.b(t.x,t.y,t.z),i=new o.b(e.x,e.y,e.z),r=[];return this.raycast(new o.k(n,i),r),r.length>0?r[0]:null},e.prototype.getWireFrame=function(){return null},e.prototype.getDescendantByType=function(t){for(var n=[],o=this.children,i=0,r=o;i<r.length;i++){for(var a=r[i],s=0,l=t;s<l.length;s++){a instanceof l[s]&&n.push(a)}if(a instanceof e){var u=a.getDescendantByType(t);n=n.concat(u)}}return n},e.prototype.globalToLocal=function(t){var e=new o.b(t.x,t.y,t.z),n=this.worldToLocal(e);return new a.a(n.x,n.y,n.z)},e.prototype.localToGlobal=function(t){var e=new o.b(t.x,t.y,t.z),n=this.localToWorld(e);return new a.a(n.x,n.y,n.z)},e.prototype.cloneMesh=function(){var t=new e;return t.geometry=this.geometry.clone(),t.material=this.material,t},e.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},e}(o.l)},Yhhh:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("EE9o"),a=n("v8gm"),s=n("lpfp"),l=n("j8JM"),u=n("aJ2T"),h=n("/T2q"),c=n("UPT1"),p=n("xijU"),d=n("S3DN"),f=n("matE");n.d(e,"a",function(){return m});var g=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=function(t){function e(e){var n=t.call(this,!0,!0)||this;return n._itemNo="",n.mirror=!1,n.borderColor=0,n.borderAlpha=0,n._drawMatrix=new r.a,n._mouseLastPoint=new s.a,n._mouseMovePoint=new s.a,n.dragTouchMoveHandlerLamda=function(t){return n.dragTouchMoveHandler(t)},n.dragTouchEndHandlerLamda=function(t){return n.dragTouchEndHandler(t)},n.depth=i.a.MODEL,n.itemNo=e,n.mirror=!1,n.borderColor=f.a.MODEL_BORDER_COLOR,n.borderAlpha=f.a.MODEL_BORDER_ALPHA,n}return g(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Model"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this)},Object.defineProperty(e.prototype,"itemNo",{get:function(){return this._itemNo},set:function(t){this._itemNo&&this.item.removeEvent(p.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this._itemNo=t,0==this.item.assetsReady?this.item.addEvent(p.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this):null!=this.stage&&this.assetsReadyHandler()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return d.a.getInstance().getItemByNo(this.itemNo)},enumerable:!0,configurable:!0}),e.prototype.assetsReadyHandler=function(t){void 0===t&&(t=null),this.item.removeEvent(p.a.HUXING_ITEM_ASSET_READY,this.assetsReadyHandler,this),this.calculateTransform()},e.prototype.draw=function(){if(this.item&&this.item.assetsReady){this.graphics.clear();var t=this.polygon.boundRect;this.graphics.width=t.width>>1,this.graphics.height=t.height>>1,this.graphics.lineStyle(1,this.borderColor,this.borderAlpha),a.a.drawPath(this.graphics,this.polygon.vertices),this.graphics.endStroke(),this._drawMatrix.identity(),this.mirror?(this._drawMatrix.scale(-this.realWidth/this.item.planBMD.width,this.realLength/this.item.planBMD.height),this._drawMatrix.translate(.5*this.realWidth,-.5*this.realLength)):(this._drawMatrix.scale(this.realWidth/this.item.planBMD.width,this.realLength/this.item.planBMD.height),this._drawMatrix.translate(-.5*this.realWidth,-.5*this.realLength)),this.graphics.beginBitmapFill(this.item.planBMD.img)}},e.prototype.calculatePolygon=function(){this.polygon.clear(),this.polygon.addVertex(new s.a(-.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new s.a(.5*this.realWidth,-.5*this.realLength)),this.polygon.addVertex(new s.a(.5*this.realWidth,.5*this.realLength)),this.polygon.addVertex(new s.a(-.5*this.realWidth,.5*this.realLength))},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.calculatePolygon(),this.draw()},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),u.a.inst.focusTarget==this&&this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){0!=this.hasMouseDown&&t.prototype.touchEnd.call(this,e)},e.prototype.touchClick=function(e){u.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.borderColor=f.a.MODEL_HOVER_BORDER_COLOR,this.borderAlpha=f.a.MODEL_HOVER_BORDER_ALPHA,this.calculateTransform();var e={selectedItem:this,selectedPoint:this._mouseLastPoint.clone()};this.scene.dispatchEvent(new h.a(h.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.borderColor=f.a.MODEL_BORDER_COLOR,this.borderAlpha=f.a.MODEL_BORDER_ALPHA,this.calculateTransform(),this.scene.dispatchEvent(new h.a(h.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.isLegal=function(){return!0},e.prototype.dragTouchStartHandler=function(t){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseLastPoint.setTo(this._tmpPoint.x,this._tmpPoint.y),this.stage.addEventListener(l.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(l.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._mouseMovePoint.setTo(this._tmpPoint.x,this._tmpPoint.y),this.realX+=this._mouseMovePoint.x-this._mouseLastPoint.x,this.realY+=this._mouseMovePoint.y-this._mouseLastPoint.y,this._mouseLastPoint.copyFrom(this._mouseMovePoint),this.calculateTransform(),c.a.inst.showModelRuler(this,!1)}},e.prototype.dragTouchEndHandler=function(t){this.hasMouseDown=!1,this.stage.removeEventListener(l.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(l.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.calculateTransform(),this.scene.change()},e.prototype.actionDelete=function(t){void 0===t&&(t=!0),this.scene.removeModel(this),t&&this.scene.change()},e.prototype.actionMirror=function(){this.mirror=!this.mirror,this.calculateTransform(),this.scene.change()},e.prototype.actionRotate=function(){this.realRotationZ+=90,this.calculateTransform(),this.scene.change()},e.prototype.doChangeWidth=function(t){this.realWidth=t,this.scene.change(),this.calculateTransform()},e.prototype.doChangeLength=function(t){this.realLength=t,this.scene.change(),this.calculateTransform()},e.prototype.doSizeChanged=function(){this.scene.change()},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.itemNo=this.itemNo,t.mirror=1==this.mirror?1:0,t.x=this.realX,t.y=this.realY,t.z=this.realZ,t.rotationZ=this.realRotationZ,t.width=this.realWidth,t.length=this.realLength,t.height=this.realHeight,t},e.loadData=function(t){var n=new e(t.itemNo);return n.name=t.name,n.mirror=Boolean(t.mirror),n.realX=t.x,n.realY=t.y,n.realZ=t.z,n.realRotationZ=t.rotationZ,n.realWidth=t.width,n.realHeight=t.height,n.realLength=t.length,n},e}(o.a);m.MIN_WIDTH=20,m.MIN_LENGTH=20,m.MAX_WIDTH=1e3,m.MAX_LENGTH=1e3},YihH:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("WFe8"),a=n("Yyq6"),s=n("Yhhh"),l=n("KE74"),u=n("ihW0"),h=n("CW6F");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.settings=[],e._instance=i,i}return c(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.settings=[this.commonSetting,this.roomSetting,this.rulerSetting],this.roomSetting.parent=this},Object.defineProperty(e.prototype,"totalWidth",{get:function(){return"true"==this.commonSetting.visible?this.commonSetting.widthNumber:"true"==this.roomSetting.visible?this.roomSetting.widthNumber:"true"==this.rulerSetting.visible?this.rulerSetting.widthNumber:0},enumerable:!0,configurable:!0}),e.prototype.open=function(t,e){void 0===e&&(e=0),this.target=t,this.visible="true";for(var n=0,o=this.settings;n<o.length;n++){o[n].visible="false"}t instanceof r.a||t instanceof a.a||t instanceof s.a||t instanceof h.a?(this.commonSetting.visible="true",this.commonSetting.setData(t,e)):t instanceof l.a?(this.roomSetting.visible="true",this.roomSetting.setData(t)):t instanceof u.a&&(this.rulerSetting.visible="true",this.rulerSetting.setData(t,e)),this.showAnimation()},e.prototype.close=function(){this.hideAnimation()},e.prototype.showAnimation=function(){this.animation(this.dom,"showSettings 0.25s forwards")},e.prototype.hideAnimation=function(){this.animation(this.dom,"hideSettings 0.25s forwards",this.hideAnimationEnd,this)},e.prototype.hideAnimationEnd=function(){this.visible="false";for(var t=0,e=this.settings;t<e.length;t++){e[t].visible="false"}},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Yyq6:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("/m+Y"),a=n("WFe8"),s=n("r4QP"),l=n("0/et"),u=n("lpfp"),h=n("dAjp"),c=n("J78+"),p=n("j8JM"),d=n("aJ2T"),f=n("/T2q"),g=n("UPT1"),m=n("sA2y"),_=n("matE");n.d(e,"a",function(){return b});var y=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(e){var n=t.call(this,!0,!0)||this;switch(n._type=0,n._wallName="",n._mirror=!1,n._wallX=0,n._archHeight=0,n.borderColor=0,n.fillColor=0,n.backup=null,n._localStart=new u.a,n._localStop=new u.a,n._newMousePoint=new u.a,n._newPoint=new u.a,n._initPoint=new u.a,n._mouseDownOffset=new u.a,n._mouseDownPoint=new u.a,n.dragTouchMoveHandlerLamda=function(t){n.dragTouchMoveHandler(t)},n.dragTouchEndHandlerLamda=function(t){n.dragTouchEndHandler(t)},n.depth=i.a.OPENING,n.type=e,n.wallName="",n.mirror=!1,n.archHeight=0,n.type){case s.a.HOLE:case s.a.DOOR_COMMON:n.realWidth=80,n.realHeight=220;break;case s.a.DOOR_DOUBLE:case s.a.DOOR_SLIDING:n.realWidth=150,n.realHeight=220;break;case s.a.WINDOW_COMMON:case s.a.WINDOW_BAY:n.realWidth=80,n.realHeight=100;break;case s.a.WINDOW_FRENCH:n.realWidth=150,n.realHeight=220}return n.borderColor=_.a.OPENING_BORDER_COLOR,n.fillColor=_.a.OPENING_FILL_COLOR,n.backup=new r.a,n}return y(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Opening"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),this.calculateTransform()},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.clear=function(){t.prototype.clear.call(this),this.wallName=""},Object.defineProperty(e.prototype,"wallName",{get:function(){return this._wallName},set:function(t){this._wallName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallX",{get:function(){return this.wall?(this._tmpPoint.setTo(this.realX,this.realY),this.wall.sceneToLocal(this._tmpPoint).x):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realLength",{get:function(){return this.wallLength},set:function(t){this._realLength=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallLength",{get:function(){return this.wall?this.wall.realLength:a.a.DEFAULT_LENGTH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStart",{get:function(){return this._localStart.setTo(-.5*this.realWidth,0),this._localStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStop",{get:function(){return this._localStop.setTo(.5*this.realWidth,0),this._localStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHole",{get:function(){return this.type==s.a.HOLE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDoor",{get:function(){return this.type==s.a.DOOR_COMMON||this.type==s.a.DOOR_DOUBLE||this.type==s.a.DOOR_SLIDING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWindow",{get:function(){return this.type==s.a.WINDOW_COMMON||this.type==s.a.WINDOW_BAY||this.type==s.a.WINDOW_FRENCH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowRotate",{get:function(){return 1==this.isDoor||this.type==s.a.WINDOW_BAY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mirror",{get:function(){return this._mirror},set:function(t){this._mirror=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return!!this.wall&&!l.a.isDegreeAngleEqual(this.realRotationZ,this.wall.realRotationZ)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archHeight",{get:function(){return Math.min(this._archHeight,this.maxArchHeight)},set:function(t){this._archHeight=Math.min(t,this.maxArchHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openHeight",{get:function(){return this.realHeight-this.archHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archAngle",{get:function(){return 0==this.archHeight?0:2*l.a.asin(.5*this.realWidth/this.archRadius)*180/Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archRadius",{get:function(){return 0==this.archHeight?Number.MAX_VALUE:(.5*this.realWidth*.5*this.realWidth+this.archHeight*this.archHeight)/(2*this.archHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxArchHeight",{get:function(){return Math.floor(Math.min(.5*this.realWidth,this.realHeight))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this._realWidth},set:function(t){this.wall&&t>this.wall.realWidth?(this._realWidth=this.wall.realWidth,this.setPolygonChangeFlag(!0)):(this._realWidth=t,this.setPolygonChangeFlag(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this._realHeight},set:function(t){this.wall&&t>this.wall.realHeight?this._realHeight=this.wall.realHeight:this._realHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return l.a.isNumberEqual(this.realHeight,this.wall.height)&&this.archHeight<=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wall",{get:function(){return""!=this.wallName&&this.wallName?this.scene.getWallByName(this.wallName):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.localToScene(new u.a(-.5*this.realWidth,0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stop",{get:function(){return this.localToScene(new u.a(.5*this.realWidth,0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWallX",{get:function(){return this.wallX-.5*this.realWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopWallX",{get:function(){return this.wallX+.5*this.realWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new u.a(this.localStart.x,-.5*this.realLength)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new u.a(this.localStart.x,.5*this.realLength)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new u.a(this.localStop.x,-.5*this.realLength)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new u.a(this.localStop.x,.5*this.realLength)},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this.graphics.clear(),this.graphics.lineStyle(1,0,1);var t=this.realWidth,n=this.wallLength;switch(this.graphics.width=1+(t>>1),this.graphics.height=1+(n>>1)+6,this.type){case s.a.HOLE:this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill();break;case s.a.DOOR_COMMON:this.graphics.width=1+(t>>1),this.graphics.height=t+1,this.mirror?(h.a.drawSector(this.graphics,-.5*t,0,t,90,270,this.borderColor,this.fillColor,.5),this.graphics.lineStyle(1,this.borderColor,.7),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-t,e.DEFAULT_OPENING_WIDTH,t),this.graphics.endFill()):(h.a.drawSector(this.graphics,.5*t,0,t,90,180,this.borderColor,this.fillColor,.2),this.graphics.lineStyle(1,this.borderColor,.7),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(.5*t-e.DEFAULT_OPENING_WIDTH,-t,e.DEFAULT_OPENING_WIDTH,t),this.graphics.endFill());break;case s.a.DOOR_DOUBLE:this.graphics.width=2+(t>>1),this.graphics.height=2+(t>>1),h.a.drawSector(this.graphics,-.5*t,0,.5*t,90,0,this.borderColor,this.fillColor,.2),h.a.drawSector(this.graphics,.5*t,0,.5*t,90,90,this.borderColor,this.fillColor,.2),this.graphics.lineStyle(1,this.borderColor,0),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t+1,-.5*n+1,t-2,n-2),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,0,e.DEFAULT_OPENING_WIDTH,.5*t),this.graphics.drawRect(.5*t-e.DEFAULT_OPENING_WIDTH,0,e.DEFAULT_OPENING_WIDTH,.5*t),this.graphics.endFill();break;case s.a.DOOR_SLIDING:this.graphics.lineStyle(1,this.borderColor,0),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*t+2,-.5*n+2,.55*t-4,.5*n-2),this.graphics.drawRect(-.5*t+.45*t+2,0,.55*t-4,.5*n-2),this.graphics.endFill();break;case s.a.WINDOW_COMMON:this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.moveTo(-.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,.5*n-1/3*n),this.graphics.lineTo(-.5*t,.5*n-1/3*n),this.graphics.endFill();break;case s.a.WINDOW_FRENCH:this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t,-.5*n,t,n),this.graphics.endFill(),this.graphics.moveTo(-.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,-.5*n+1/3*n),this.graphics.lineTo(.5*t,.5*n-1/3*n),this.graphics.lineTo(-.5*t,.5*n-1/3*n),this.graphics.lineTo(0,.5*n-1/3*n),this.graphics.lineTo(0,-.5*n+1/3*n),this.graphics.endFill();break;case s.a.WINDOW_BAY:var o=2*this.realLength;this.graphics.width=1+(t+2*n>>1),this.graphics.height=o+.5*n+1,this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor),this.graphics.drawRect(-.5*t-n,.5*n,t+2*n,o),this.graphics.endFill(),this.graphics.drawRect(-.5*t-2/3*n,.5*n,t+4/3*n,o-1/3*n),this.graphics.endFill(),this.graphics.drawRect(-.5*t-1/3*n,.5*n,t+2/3*n,o-2/3*n),this.graphics.endFill(),this.graphics.beginFill(14540253),this.graphics.drawRect(-.5*t,-.5*n,t,o),this.graphics.endFill()}},e.prototype.calculateTransform=function(){this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ,this.draw()},e.prototype.touchStart=function(e){e.touches.length>1||(t.prototype.touchStart.call(this,e),d.a.inst.focusTarget==this&&this.dragTouchStartHandler(e))},e.prototype.touchEnd=function(e){1==this.hasMouseDown&&(d.a.inst.focus(this),t.prototype.touchEnd.call(this,e))},e.prototype.touchClick=function(e){d.a.inst.focus(this),t.prototype.touchClick.call(this,e)},e.prototype.focusIn=function(){t.prototype.focusIn.call(this),this.borderColor=_.a.OPENING_HOVER_BORDER_COLOR,this.calculateTransform();var e={selectedItem:this,selectedPoint:this._mouseDownPoint.clone()};this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_SELECTED,e),this.scene)},e.prototype.focusOut=function(){t.prototype.focusOut.call(this),this.borderColor=_.a.OPENING_BORDER_COLOR,this.calculateTransform(),this.scene.dispatchEvent(new f.a(f.a.MSCENE_ITEM_UNSELECTED),this.scene)},e.prototype.isLegal=function(){if(!this.wall)return!1;var t=this.wall;if(l.a.less(this.startWallX,t.minOpeningStartX))return!1;if(l.a.less(t.maxOpeningStopX,this.stopWallX))return!1;for(var e,n=t.openings,o=0,i=n;o<i.length;o++)if(e=i[o],(e=this.scene.getOpeningByName(e.name))&&e.name!=this.name){if(l.a.isNumberEqual(this.startWallX,e.startWallX))return!1;if(l.a.isNumberEqual(this.stopWallX,e.stopWallX))return!1;if(l.a.less(e.startWallX,this.startWallX)&&l.a.less(this.startWallX,e.stopWallX))return!1;if(l.a.less(e.startWallX,this.stopWallX)&&l.a.less(this.stopWallX,e.stopWallX))return!1;if(l.a.less(this.startWallX,e.startWallX)&&l.a.less(e.startWallX,this.stopWallX))return!1;if(l.a.less(this.startWallX,e.stopWallX)&&l.a.less(e.stopWallX,this.stopWallX))return!1}return!0},e.prototype.dragTouchStartHandler=function(t){this.backup.backup(this);var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._initPoint.setTo(this.realX,this.realY),this._lastWidth=this.realWidth,this._mouseDownPoint.setTo(e.clientX,e.clientY),this._mouseDownOffset=this._initPoint.subtract(this._tmpPoint),this.stage.addEventListener(p.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.addEventListener(p.a.TOUCH_END,this.dragTouchEndHandlerLamda)},e.prototype.forceToAdsorbent=function(t,e){if(this.wall){this._newPoint.setTo(t,e);var n=this.wall.minOpeningStartX+.5*this.realWidth,o=this.wall.maxOpeningStopX-.5*this.realWidth,i=this.wall.localToScene(new u.a(n)),r=this.wall.localToScene(new u.a(o)),a=l.a.calcFoot(this.wall.start,this.wall.stop,this._newPoint),s=this.wall.sceneToLocal(a).x;s<n?(this.realX=i.x,this.realY=i.y):s>o?(this.realX=r.x,this.realY=r.y):(this.realX=a.x,this.realY=a.y)}},e.prototype.dragTouchMoveHandler=function(t){if(0!=this.hasMouseDown&&!(t.touches.length>1)){var e=t.touches[0];this._tmpPoint.setTo(e.clientX,e.clientY),this._tmpPoint=this.scene.globalToLocal(this._tmpPoint),this._newMousePoint.setTo(this._tmpPoint.x,this._tmpPoint.y),this._newPoint=this._newMousePoint.add(this._mouseDownOffset),this.moveOpening(this._newPoint)}},e.prototype.moveOpening=function(t){var n=this.wallName,o=this.scene.calcOpeningAttachWall(t);if(this.wallName=o?o.name:"",o&&o.name==n||(t.setTo(this._newMousePoint.x,this._newMousePoint.y),this._mouseDownOffset.setTo(0,0)),this.alpha=1,this.wall){var i,r=l.a.calcFoot(this.wall.start,this.wall.stop,t),a=this.wall.sceneToLocal(r).x,s=this.wall.getLegalOpeningPosition(a,this),u=s[0],h=s[1];i=e.MIN_WIDTH;var c=h-u,p=(h+u)/2;this.wallName!=n&&(this.realRotationZ=this.wall.realRotationZ),l.a.less(c,this._lastWidth)&&l.a.less(i,c)&&c>=i?(this._realWidth=c,this._tmpPoint.setTo(p,0),this._tmpPoint=this.wall.localToScene(this._tmpPoint),this.realX=this._tmpPoint.x,this.realY=this._tmpPoint.y):(this.forceToAdsorbent(t.x,t.y),this.realWidth=this._lastWidth,this.x=this.realX,this.y=this.realY,this.wall&&!this.isLegal()&&(this.alpha=.5,this._tmpPoint.setTo(this.realX,this.realY),this._tmpPoint=this.scene.localToGlobal(this._tmpPoint)))}else this.realX=this._newMousePoint.x,this.realY=this._newMousePoint.y,this.realWidth=this._lastWidth,this.x=this.realX,this.y=this.realY,this.rotation=this.realRotationZ;this.calculateTransform()},e.prototype.dragTouchEndHandler=function(t){this.stage.removeEventListener(p.a.TOUCH_MOVE,this.dragTouchMoveHandlerLamda),this.stage.removeEventListener(p.a.TOUCH_END,this.dragTouchEndHandlerLamda),this.hasMouseDown=!1;new u.a(this.realX,this.realY);if(this.wall&&this.isLegal()||this.backup.rollback(this),!this.wall||!this.isLegal())return void this.scene.removeOpening(this);this.alpha=1,this.calculateTransform(),this.scene.change()},e.prototype.actionDelete=function(t){void 0===t&&(t=!0),this.scene.removeOpening(this),t&&(this.scene.change(),g.a.inst.update())},e.prototype.actionRotate=function(){this.type!=s.a.HOLE&&this.type!=s.a.DOOR_SLIDING&&this.type!=s.a.WINDOW_COMMON&&this.type!=s.a.WINDOW_FRENCH&&(this.type==s.a.DOOR_COMMON?this.reversed||this.mirror?!this.reversed&&this.mirror?this.mirror=!1:this.reversed&&!this.mirror?(this.mirror=!0,this.realRotationZ+=180):this.reversed&&this.mirror&&(this.mirror=!1):(this.mirror=!0,this.realRotationZ+=180):this.realRotationZ+=180,this.calculateTransform(),this.scene.change())},e.prototype.doChangeZ=function(t){this.wall&&(t+this.realHeight>this.wall.realHeight&&(m.a.inst.warning("高度超过墙高"),t=this.wall.realHeight-this.realHeight),this.realZ=t)},e.prototype.doChangeWidth=function(t){if(this.wall){t<e.MIN_WIDTH&&(m.a.inst.warning("长度过小"),t=e.MIN_WIDTH);var n=this.wall.getLegalOpeningPosition(this.wallX,this),o=n[0],i=n[1];t>i-o&&(m.a.inst.warning("长度超过限制"),t=i-o),this.realWidth=t;var r,a=this.wallX,s=a-.5*t,l=a+.5*t;s<o?r=o+.5*t:l>i&&(r=i-.5*t),r&&(this._tmpPoint.setTo(r,0),this._tmpPoint=this.wall.localToScene(this._tmpPoint),this.realX=this._tmpPoint.x,this.realY=this._tmpPoint.y),this.calculateTransform(),this.focusIn()}},e.prototype.doChangeHeight=function(t){this.wall&&(t<e.MIN_HEIGHT&&(m.a.inst.warning("高度过小"),t=e.MIN_HEIGHT),this.realZ+t>this.wall.realHeight&&(m.a.inst.warning("高度超过墙高"),t=this.wall.realHeight-this.realZ),this.realHeight=t)},e.prototype.doChangeLength=function(t){this.wall&&(t<e.MIN_LENGTH&&(m.a.inst.warning("进深过小"),t=e.MIN_LENGTH),t>1200&&(m.a.inst.warning("进深过大"),t=1200),this.realLength=t)},e.prototype.doChangeArchHeight=function(t){this.wall&&(t<0&&!l.a.isNumberEqual(0,t)||(this.archHeight=t))},e.prototype.doSizeChanged=function(){this.scene.change()},e.prototype.dumpData=function(){if(!this.wall)return null;var t=new Object;return t.name=this.name,t.type=this.type,t.wallName=this.wallName,t.mirror=1==this.mirror?1:0,t.x=this.realX,t.y=this.realY,t.z=this.realZ,t.rotationZ=this.realRotationZ,t.width=this.realWidth,t.height=this.realHeight,t.length=this.realLength,t.archHeight=this.archHeight,t},e.prototype.clone=function(){var t=new e(this.type);return t.mirror=this.mirror,t.realX=this.realX,t.realY=this.realY,t.realZ=this.realZ,t.realRotationZ=this.realRotationZ,t.realWidth=this.realWidth,t.realHeight=this.realHeight,t.realLength=this.realLength,t.archHeight=this.archHeight,t.realScaleX=this.realScaleX,t.realScaleX=this.realScaleX,t.realScaleZ=this.realScaleZ,t},e.loadData=function(t){var n=t.type,o=new e(n);return o.name=t.name,o.wallName=t.wallName,o.mirror=Boolean(t.mirror),o.realX=t.x,o.realY=t.y,o.realZ=t.z,o.realRotationZ=t.rotationZ,o.realWidth=t.width,o.realHeight=t.height,o.realLength=t.hasOwnProperty("length")?t.length:0,o.archHeight=t.archHeight,o},e.prototype.getBoudaryPolygon=function(){var t=new c.a,e=this.realWidth,n=2*this.realLength;return t.addPointXY(-.5*e,-.5*n),t.addPointXY(.5*e,-.5*n),t.addPointXY(.5*e,.5*n),t.addPointXY(-.5*e,.5*n),t.clone()},e}(o.a);b.DEFAULT_OPENING_WIDTH=10,b.MIN_WIDTH=20,b.MIN_HEIGHT=20,b.MIN_LENGTH=10,b.DEFAULT_HOLE_WIDTH=100,b.DEFAULT_HOLE_HEIGHT=220,b.DEFAULT_DOOR_WIDTH=100,b.DEFAULT_DOOR_HEIGHT=220,b.DEFAULT_WINDOW_WIDTH=80,b.DEFAULT_WINDOW_HEIGHT=100},ZdJq:function(t,e,n){"use strict";var o=n("/oeL"),i=n("+6Ri"),r=n("8UFV"),a=n("+N0H"),s=n("LF0A");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.hasOpen=!1,o.visible="false",setTimeout(function(){o.ngOnInit()},100),o}return l(e,t),e.prototype.ngOnInit=function(){1!=this.hasOpen&&(this.hasOpen=!0,this.visible="true",this.width=window.innerWidth+"px",this.height=window.innerHeight+"px",this.backgroundcolor=15790320,this.viewport=new r.a(window.innerWidth,window.innerHeight),this.viewport.center(.85),this.dom.appendChild(this.viewport.dom))},e.prototype.ngAfterViewInit=function(){},e.prototype.close=function(){a.a.inst.dom.focus(),s.a.inst.closeAll()},e.prototype.clear=function(){},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},Ze7d:function(t,e,n){"use strict";var o=n("v7PY"),i=n("lpfp");n.d(e,"a",function(){return r});var r=function(){function t(t){this.width=1,this.height=1,this.width=t.width,this.height=t.height,this.imagedata=t}return t.prototype.draw=function(t){},t.prototype.setPixel32=function(t,e,n,o){void 0===o&&(o=255);var i=Math.floor(e),r=Math.floor(t),a=i*this.width+r;a*=4;var s=n>>16&255,l=n>>8&255,u=255&n;this.imagedata.data[a]=s,this.imagedata.data[a+1]=l,this.imagedata.data[a+2]=u,this.imagedata.data[a+3]=o},t.prototype.getPixel32=function(t,e){var n=Math.floor(e),i=Math.floor(t),r=n*this.width+i;r*=4;var a=this.imagedata.data[r],s=this.imagedata.data[r+1],l=this.imagedata.data[r+2],u=this.imagedata.data[r+3];return o.a.fromRGBA([a,s,l,u])},t.prototype.getPixel24=function(t,e){var n=Math.floor(e),i=Math.floor(t),r=n*this.width+i;r*=4;var a=this.imagedata.data[r],s=this.imagedata.data[r+1],l=this.imagedata.data[r+2];return o.a.fromRGB([a,s,l])},t.prototype.getRectBitmapData=function(e,n,o,i){for(var r=new ImageData(o,i),a=0;a<=i;a++)for(var s=0;s<=o;s++){var l=a*o+s;l*=4;var u=(a+n)*this.width+(s+e);u*=4,r.data[l]=this.imagedata.data[u],r.data[l+1]=this.imagedata.data[u+1],r.data[l+2]=this.imagedata.data[u+2],r.data[l+3]=this.imagedata.data[u+3]}return new t(r)},t.prototype.rgbAverage=function(t){for(var e={r:0,g:0,b:0},n=t.imagedata.data,o=n.length,i=0,r=0,a=0,s=0;s<o;s++)switch(s%4){case 0:i+=n[s];break;case 1:r+=n[s];break;case 2:a+=n[s]}var l=t.width*t.height;return e.r=Math.round(i/l),e.g=Math.round(r/l),e.b=Math.round(a/l),e},t.prototype.pixelDepath=function(t){var e=this.rgbAverage(t),n=Math.round(.299*e.r+.587*e.g+.114*e.b),o=Number((n/255).toFixed(2));return Math.min(1,o)},t.prototype.gray=function(){for(var t=this.imagedata.data,e=0;e<this.width;e++)for(var n=0;n<this.height;n++){var o=4*(n*this.width+e),i=t[o],r=t[o+1],a=t[o+2],s=(30*i+59*r+11*a+128)/100;s=Math.floor(s),t[o]=s,t[o+1]=s,t[o+2]=s}},t.prototype.gray2=function(){for(var t=this.imagedata.data,e=0;e<this.width;e++)for(var n=0;n<this.height;n++){var o=4*(n*this.width+e),i=t[o],r=t[o+1],a=t[o+2],s=i^2.2*.2973+r^1.38028+a^2.2*.0753^1/2.2;s=Math.floor(s),t[o]=s,t[o+1]=s,t[o+2]=s}},t.prototype.maskColor=function(t,e){void 0===e&&(e=1);for(var n=o.a.toRGB(t),i=n[0],r=n[1],a=n[2],s=1-e,l=this.imagedata.data,u=0;u<this.width;u++)for(var h=0;h<this.height;h++){var c=4*(h*this.width+u);l[c+3]>25&&(l[c]=Math.floor(e*i+s*l[c]),l[c+1]=Math.floor(e*r+s*l[c+1]),l[c+2]=Math.floor(e*a+s*l[c+2]))}},t.prototype.stroke=function(t){for(var e=[],n=this.imagedata.data,o=0;o<this.width;o++)for(var r=0;r<this.height;r++){var a=4*(r*this.width+o)+3,s=n[a];if(s>=25){if(!(o>0)){e.push(new i.a(o,r));continue}if(a=4*(r*this.width+(o-1))+3,(s=n[a])<25){e.push(new i.a(o,r));continue}if(!(o<this.width-1)){e.push(new i.a(o,r));continue}if(a=4*(r*this.width+(o+1))+3,(s=n[a])<25){e.push(new i.a(o,r));continue}if(!(r>0)){e.push(new i.a(o,r));continue}if(a=4*((r-1)*this.width+o)+3,(s=n[a])<25){e.push(new i.a(o,r));continue}if(!(r<this.height-1)){e.push(new i.a(o,r));continue}if(a=4*((r+1)*this.width+o)+3,(s=n[a])<25){e.push(new i.a(o,r));continue}}}for(var l=0,u=e;l<u.length;l++){var h=u[l];this.setPixel32(h.x,h.y,t,153);var c=h.x-1;c>=0&&this.setPixel32(c,h.y,t,153);var p=h.x+1;p<=this.width-1&&this.setPixel32(p,h.y,t,153);var d=h.y-1;d>=0&&this.setPixel32(h.x,d,t,153);var f=h.y+1;f<=this.height-1&&this.setPixel32(h.x,f,t,153)}},t.prototype.dispose=function(){this.width=0,this.height=0,this.imagedata=null},t}()},ZlQW:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{openingWidthInput:0}),a._13(402653184,2,{openingHeightInput:0}),a._13(402653184,3,{openingLengthInput:0}),a._13(402653184,4,{openingOffGroundInput:0}),(t()(),a._15(0,null,null,41,"div",[["class","bg"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["长度"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","48px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,13)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showOpeningWidthSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[1,4],["openingWidthInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["高度"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","48px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,23)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showOpeningHeightSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[2,4],["openingHeightInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["进深"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","48px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,33)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showOpeningLengthSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[3,4],["openingLengthInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,8,"div",[["class","editArea"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(t()(),a._14(null,["离地"])),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"virtual-input",[["class","virtualInput"],["height","19px"],["width","48px"]],null,[[null,"touchstart"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,43)._touchMove(n)&&o}if("touchstart"===e){o=!1!==i.showOpeningOffGroundSetting()&&o}return o},l.a,l.b)),a._17(4308992,[[4,4],["openingOffGroundInput",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n"]))],function(t,e){t(e,13,0,"48px","19px");t(e,23,0,"48px","19px");t(e,33,0,"48px","19px");t(e,43,0,"48px","19px")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"opening-setting-bar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("Tgrg"),a=n("/oeL"),s=n("kUfx"),l=n("nhaO"),u=n("Jj2e");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("opening-setting-bar",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},ZvbM:function(t,e,n){"use strict";var o=n("yOTB"),i=n("aJ2T"),r=n("SScf"),a=n("lpfp"),s=n("J78+"),l=n("/LiK"),u=n("BM0e"),h=n("0/et"),c=n("EE9o");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.name="",i._realX=0,i._realY=0,i._realZ=0,i._realWidth=0,i._realLength=0,i._realHeight=0,i._realRotationZ=0,i._realScaleX=0,i._realScaleY=0,i._realScaleZ=0,i._tmpPoint=new a.a,i.scene=null,i.polygon=null,i._boundPolygon=null,i._updateControl=null,i.hasMouseDown=!1,i.touchStartPoint=new a.a,i.gpu=!0,i.graphics&&(i.graphics.gpu=!0),i.scene=e.MSCENE,i.name=l.a.createPureUID(),i.polygon=new s.a,i._boundPolygon=new s.a,i.initUpdateControl(),i.realX=0,i.realY=0,i.realZ=0,i.realWidth=0,i.realLength=0,i.realHeight=0,i.realRotationZ=0,i.realScaleX=1,i.realScaleY=1,i.realScaleZ=1,i.setPolygonChangeFlag(!0),i}return p(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Object2D"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this),0==u.a.isMobile?this.mouseEnable=!0:this.touchEnable=!0},e.prototype.onRemove=function(){t.prototype.onRemove.call(this)},e.prototype.mouseOver=function(e){t.prototype.mouseOver.call(this,e)},e.prototype.mouseOut=function(e){t.prototype.mouseOut.call(this,e)},e.prototype.leftMouseDown=function(e){t.prototype.leftMouseDown.call(this,e),this.hasMouseDown=!0},e.prototype.leftMouseUp=function(e){1==this.hasMouseDown&&t.prototype.leftMouseUp.call(this,e),this.hasMouseDown=!1},e.prototype.touchStart=function(e){if(t.prototype.touchStart.call(this,e),1==e.touches.length){var n=e.touches[0];this.touchStartPoint.setTo(n.clientX,n.clientY)}this.hasMouseDown=!0},e.prototype.touchEnd=function(t){this.hasMouseDown=!1},e.prototype.focusIn=function(){},e.prototype.focusOut=function(){},e.prototype.setRealPositionTo=function(t){this.realX=t.x,this.realY=t.y},e.prototype.initUpdateControl=function(){this._updateControl=new o.a,this._updateControl.addTag(o.a.TAG_POSITION),this._updateControl.addTag(o.a.TAG_POLYGON),this._updateControl.addTag(o.a.TAG_BOUNDARY,o.a.TAG_POSITION,o.a.TAG_POLYGON)},e.prototype.setPositionChangeFlag=function(t){void 0===t&&(t=!0),this._updateControl.setValue(o.a.TAG_POSITION,t)},e.prototype.setPolygonChangeFlag=function(t){void 0===t&&(t=!0),this._updateControl.setValue(o.a.TAG_POLYGON,t)},Object.defineProperty(e.prototype,"boundPolygon",{get:function(){if(this._updateControl.getValue(o.a.TAG_BOUNDARY)){this._boundPolygon=new s.a;for(var t=0;t<this.polygon.vertexCount;t++)this._boundPolygon.addPoint(this.localToSceneMatrix.transformPoint(this.polygon.getPointAt(t)));this._boundPolygon.vertexCount>0&&this._updateControl.setValue(o.a.TAG_BOUNDARY,!1)}return this._boundPolygon},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.polygon.clear(),this._boundPolygon.clear()},e.prototype.doesBoundPolygonContaineVector2D=function(t,e){return this.boundPolygon.containsInXY(t,e)},Object.defineProperty(e.prototype,"localToSceneMatrix",{get:function(){var t=new c.a;return t.rotate(this.realRotationZ/180*Math.PI),t.translate(this.realX,this.realY),t},enumerable:!0,configurable:!0}),e.prototype.localToScene=function(t){return this.localToSceneMatrix.transformPoint(t)},Object.defineProperty(e.prototype,"sceneToLocalMatrix",{get:function(){var t=new c.a;return t.translate(-this.realX,-this.realY),t.rotate(-this.realRotationZ/180*Math.PI),t},enumerable:!0,configurable:!0}),e.prototype.sceneToLocal=function(t){return this.sceneToLocalMatrix.transformPoint(t)},e.prototype.drawPolygon=function(){if(!(this.polygon.vertexCount<3)){this.graphics.moveTo(this.polygon.points[0].x,this.polygon.points[0].y);for(var t=1;t<this.polygon.vertexCount;t++)this.graphics.lineTo(this.polygon.points[t].x,this.polygon.points[t].y);this.graphics.lineTo(this.polygon.points[0].x,this.polygon.points[0].y)}},e.prototype.draw=function(){},Object.defineProperty(e.prototype,"realX",{get:function(){return this._realX},set:function(t){this._realX=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realY",{get:function(){return this._realY},set:function(t){this._realY=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realZ",{get:function(){return this._realZ},set:function(t){h.a.isNumberEqual(t,0)&&(t=0),this._realZ=t,this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realRotationZ",{get:function(){return this._realRotationZ},set:function(t){this._realRotationZ=h.a.formatAngle(t),this.setPositionChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realScaleX",{get:function(){return this._realScaleX},set:function(t){t>e.MAX_SCALE?this._realScaleX=e.MAX_SCALE:t<e.MIN_SCALE?this._realScaleX=e.MIN_SCALE:this._realScaleX=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realScaleY",{get:function(){return this._realScaleY},set:function(t){t>e.MAX_SCALE?this._realScaleY=e.MAX_SCALE:t<e.MIN_SCALE?this._realScaleY=e.MIN_SCALE:this._realScaleY=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realScaleZ",{get:function(){return this._realScaleZ},set:function(t){t>e.MAX_SCALE?this._realScaleZ=e.MAX_SCALE:t<e.MIN_SCALE?this._realScaleZ=e.MIN_SCALE:this._realScaleZ=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this._realWidth},set:function(t){this._realWidth=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realLength",{get:function(){return this._realLength},set:function(t){this._realLength=t,this.setPolygonChangeFlag(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this._realHeight},set:function(t){this._realHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewX",{get:function(){this._tmpPoint.setTo(this.x,this.y);var t=this.scene.localToGlobal(this._tmpPoint);return this.scene.viewPort.globalToLocal(t).x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewY",{get:function(){this._tmpPoint.setTo(this.x,this.y);var t=this.scene.localToGlobal(this._tmpPoint);return this.scene.viewPort.globalToLocal(t).y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalPoint",{get:function(){return this._tmpPoint.setTo(0,0),this.localToGlobal(this._tmpPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this._tmpPoint.setTo(this.x,this.y),this.scene.localToGlobal(this._tmpPoint).x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this._tmpPoint.setTo(this.x,this.y),this.scene.localToGlobal(this._tmpPoint).y},enumerable:!0,configurable:!0}),e.prototype.dumpData=function(){return new Object},Object.defineProperty(e.prototype,"focused",{get:function(){return i.a.inst.focusTarget==this},enumerable:!0,configurable:!0}),e}(r.a);d.MSCENE=null,d.MAX_SCALE=4,d.MIN_SCALE=.25},aI2X:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.completion=function(t,e){var n=t.length;if(n<e){for(var o=e-n,i=0;i<o;i++)t="0"+t;return t}return t},t}()},aJ2T:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusTarget",{get:function(){return this._focusTarget},enumerable:!0,configurable:!0}),t.prototype.focus=function(t){this.unfocus(),this._focusTarget=t,this._focusTarget.focusIn()},t.prototype.unfocus=function(){null!=this._focusTarget&&this._focusTarget.focusOut(),this._focusTarget=null},t}()},aNcW:function(t,e,n){"use strict";var o=n("/gn8"),i=n("MPvg");n.d(e,"a",function(){return r});var r=function(){function t(t){if(void 0===t&&(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.position=new o.a,this.matrix4=new i.a,16!=t.length)throw new Error("rawdata length is not 16");this.matrix4.set(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return t.prototype.append=function(t){this.matrix4=t.matrix4.multiply(this.matrix4)},t.prototype.appendTranslation=function(t,e,n){this.matrix4=this.matrix4.makeTranslation(t,e,n)},t.prototype.appendScale=function(t,e,n){this.matrix4=this.matrix4.makeScale(t,e,n)},t.prototype.appendRotation=function(t,e){var n=new i.b(e.x,e.y,e.z);this.matrix4=this.matrix4.makeRotationAxis(n,t)},t.prototype.appendRotationXYZ=function(t,e,n,o){void 0===o&&(o="XYZ");var r=new i.c(t,e,n,o);this.matrix4.makeRotationFromEuler(r)},t.prototype.transformPoint=function(t){var e=new i.b(t.x,t.y,t.z);return e.applyMatrix4(this.matrix4),new o.a(e.x,e.y,e.z)},t.prototype.deltaTransformPoint=function(e){var n=new i.b(e.x,e.y,e.z),r=this.matrix4.toArray().concat();r[3]=0,r[7]=0,r[11]=0;var a=new t(r);return n=n.applyMatrix4(a.matrix4),new o.a(n.x,n.y,n.z)},t.prototype.compose=function(t){var e=new i.b(t[0].x,t[0].y,t[0].z),n=new i.b(t[2].x,t[2].y,t[2].z),o=new i.d;o.setFromAxisAngle(new i.b(1,0,0),t[1].x),o.setFromAxisAngle(new i.b(0,1,0),t[1].y),o.setFromAxisAngle(new i.b(0,0,1),t[1].z),this.matrix4.compose(e,o,n)},t.prototype.invert=function(){return this.matrix4=this.matrix4.getInverse(this.matrix4),!0},t.prototype.identity=function(){this.matrix4.identity()},t.prototype.transpose=function(){this.matrix4.transpose()},t.prototype.clone=function(){return new t(this.matrix4.toArray())},t}()},"aR8+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}()},aVAF:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.prototype.calculateUVs=function(t,e,n){if(void 0===n&&(n=1),1!=n&&2!=n)throw new Error("unsupported uv channel: "+String(n));if(1==n&&!this.uvsDist)throw new Error("uvsDist is null");if(2==n&&!this.uvsDist2)throw new Error("uvsDist2 is null");for(var o=1==n?this.uvsDist:this.uvsDist2,i=new Array,r=0;r<this.uvsDist.length/2;r++)i.push(o[2*r]/t,o[2*r+1]/e);return i},t.prototype.calculateUVDist=function(){this.uvsDist?this.uvsDist.length=0:this.uvsDist=new Array;for(var t=0;t<this.vertices.length/3;t++);},t}()},asGj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=location.search?location.search:location.hash;n=n.replace("#/","");var o=n.substr(1).match(e);return null!=o?o[2]:""},t.urlArgs=function(t){for(var e={},n=location.search.substring(1),o=n.split("&"),i=0;i<o.length;i++){var r=o[i].indexOf("=");if(-1!=r){var a=o[i].substring(0,r),s=o[i].substring(r+1);s=decodeURIComponent(s);var l=1;if(t)for(var u in t)u==a&&(l=0);l&&(e[a]=s)}}if(t)for(var u in t)e[u]=t[u];var h=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");return h.length>0?"?"+h:""},t}()},"asb+":function(t,e,n){"use strict";var o=n("xijU"),i=n("6xdJ"),r=n("nxKL"),a=n("PTQR");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n,o){void 0===n&&(n=!0),void 0===o&&(o=null);var i=t.call(this)||this;if(i._no="",i._id=0,i._width=0,i._length=0,i._name="",i._category=0,i._previewUrl="",i._planUrl="",i._planBMD=null,i.assetReadyCallbacks=[],""==e||!e)throw new Error("物品编号不正确");return i.no=e,i._autoLoad=n,i._detailReady=!1,i._assetsReady=!1,o?(i.copyFrom(o),i._detailReady=!0,i.autoLoad&&i.requestAssets()):i.requestDetail(),i}return s(e,t),e.prototype.requestDetail=function(){var t=a.a.record[this.no];t?this.requestDataResultHandler(t):this.requestDataErrorHandler("load failed")},e.prototype.requestDataResultHandler=function(t){var e=t;if(this.copyFrom(e),this.assetReadyCallbacks.length>0)for(var n=0;n<this.assetReadyCallbacks.length;n++)this.assetReadyCallbacks[n](this.no);this._detailReady=!0,this.apiService=null,this.autoLoad&&this.requestAssets()},e.prototype.requestDataErrorHandler=function(t){console.error(this.no+": "+t.toString())},e.prototype.requestAssets=function(){var t=this;this._planBMD=new r.a,this._planBMD.load(this.planUrl,function(){t.requestAssetsCompleteHandler()})},e.prototype.requestAssetsCompleteHandler=function(){this._assetsReady=!0,this.dispatchEvent(new o.a(o.a.HUXING_ITEM_ASSET_READY),this)},Object.defineProperty(e.prototype,"autoLoad",{get:function(){return this._autoLoad},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detailReady",{get:function(){return this._detailReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetsReady",{get:function(){return this._assetsReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"no",{get:function(){return this._no},set:function(t){this._no=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},set:function(t){this._category=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUrl",{get:function(){return this._previewUrl},set:function(t){this._previewUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planUrl",{get:function(){return this._planUrl},set:function(t){this._planUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"planBMD",{get:function(){return this._planBMD},set:function(t){this._planBMD=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrlField",{get:function(){return"previewUrl"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preloadUrlField",{get:function(){return"planUrl"},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){this.id=t.id,this.no=t.no,this.name=t.name,this.category=t.category,this.width=t.width,this.length=t.length,this.previewUrl=t.preview_url,this.planUrl=t.plan_url},e}(i.a)},bDfz:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.VIRTUAL_NUMBER_BOARD_CONFIRM="VIRTUAL_NUMBER_BOARD_CONFIRM"},bO4n:function(t,e,n){"use strict";var o=n("/oeL"),i=n("v7PY"),r=n("5ZTi");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.isShowBg="true",o.bgColor=i.a.toRGBstring(i.a.BLACK),o.bgOverColor=i.a.toRGBstring(i.a.MASTER),o.bgDownColor=i.a.toRGBstring(i.a.MASTER),o.borderWidth=0,o.borderColor=i.a.toRGBstring(i.a.BLACK),o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.borderWidth>0&&this.renderer.setStyle(this.dom,"border",this.borderWidth+"px solid "+this.borderColor),this.bgDom=this.bgRef.nativeElement,this.renderer.setStyle(this.bgDom,"width",this._width),this.renderer.setStyle(this.bgDom,"height",this._height),"false"==this.isShowBg&&this.renderer.setStyle(this.bgDom,"display","none"),this.iconDom=this.iconRef.nativeElement,this.iconWidth=this._width,this.iconHeight=this._height,this.upStyle()},Object.defineProperty(e.prototype,"width",{set:function(t){this._width=t,this.renderer.setStyle(this.dom,"width",t),this.bgDom&&this.renderer.setStyle(this.bgDom,"width",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.bgDom&&this.renderer.setStyle(this.bgDom,"height",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconWidth",{set:function(t){this.renderer.setStyle(this.iconDom,"width",t);var e=parseInt(this._width.replace("px","")),n=parseInt(t.replace("px","")),o=Math.floor((e-n)/2);this.renderer.setStyle(this.iconDom,"left",o+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconHeight",{set:function(t){this.renderer.setStyle(this.iconDom,"height",t);var e=parseInt(this._height.replace("px","")),n=parseInt(t.replace("px","")),o=Math.floor((e-n)/2);this.renderer.setStyle(this.iconDom,"top",o+"px")},enumerable:!0,configurable:!0}),e.prototype.upStyle=function(){this.renderer.setStyle(this.bgDom,"background-color",this.bgColor),this.iconUp&&this.renderer.setStyle(this.iconDom,"background-image","url("+this.iconUp+")")},e.prototype.overStyle=function(){this.renderer.setStyle(this.bgDom,"background-color",this.bgOverColor),this.iconOver&&this.renderer.setStyle(this.iconDom,"background-image","url("+this.iconOver+")")},e.prototype.downStyle=function(){this.renderer.setStyle(this.bgDom,"background-color",this.bgDownColor),this.iconDown&&this.renderer.setStyle(this.iconDom,"background-image","url("+this.iconDown+")")},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(r.a)},bj9w:function(t,e,n){"use strict";var o=n("FC3T"),i=n("J78+"),r=n("BGKY"),a=n("lpfp"),s=n("/gn8"),l=n("EE9o"),u=n("0/et"),h=n("0q51"),c=n("aNcW"),p=n("GJSB");n.d(e,"a",function(){return f});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(e,n){var o=t.call(this)||this;return o._itemNo=e,o._goodsNo=n,o._roomName="",o}return d(e,t),Object.defineProperty(e.prototype,"itemNo",{get:function(){return this._itemNo},set:function(t){this._itemNo!=t&&(this.dispatchEvent(new r.a(r.a.BEFORE_ITEM_NO_CHANGE),this),this._itemNo=t,this.dispatchEvent(new r.a(r.a.AFTER_ITEM_NO_CHANGE),this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"goodsNo",{get:function(){return this._goodsNo},set:function(t){this._goodsNo!=t&&(this._goodsNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon||(this._polygon=new i.a,this._polygon.addPointXY(-.5*this.item.width,-.5*this.item.length),this._polygon.addPointXY(-.5*this.item.width,.5*this.item.length),this._polygon.addPointXY(.5*this.item.width,.5*this.item.length),this._polygon.addPointXY(.5*this.item.width,-.5*this.item.length)),this._polygon},enumerable:!0,configurable:!0}),e.prototype.updateRoom=function(){this._roomName="";for(var t in this.sceneObject.roomObjects){var e=this.sceneObject.roomObjects[t];if(e.polygon.containsIn(new a.a(this.x,this.y))){this._roomName=e.name;break}}},Object.defineProperty(e.prototype,"item",{get:function(){return p.a.getInstance().getItemByNo(this.itemNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.item.width*this.scaleX},set:function(t){this.scaleX=t/this.item.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.item.length*this.scaleY},set:function(t){this.scaleY=t/this.item.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.item.height*this.scaleZ},set:function(t){this.scaleZ=t/this.item.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attachWall",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomName",{get:function(){return this._roomName},set:function(t){this._roomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"room",{get:function(){return this.sceneObject.getRoomObjectByName(this.roomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"threedMatrix",{get:function(){var t=new c.a;return t.appendRotation(-this.rotationZ,s.a.Z_AXIS),t.appendTranslation(this.x,-this.y,this.z),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localBoundBoxPoints",{get:function(){var t=new Array,e=this.width/2,n=this.length/2;return t.push(new s.a(e,n,0),new s.a(-e,n,0),new s.a(-e,-n,0),new s.a(e,-n,0),new s.a(e,n,this.height),new s.a(-e,n,this.height),new s.a(-e,-n,this.height),new s.a(e,-n,this.height)),t},enumerable:!0,configurable:!0}),e.prototype.isLegal=function(t,e){var n=new Array;for(var o in this.sceneObject.wallObjects){var i=this.sceneObject.wallObjects[o];n.push(i.cachedGlobalPolygon)}var r=new l.a;r.scale(this.scaleX,this.scaleY),r.rotate(this.rotationZ/180*Math.PI),r.translate(t,e);for(var a=this.polygon.transform(r),s=0,u=n;s<u.length;s++){if(u[s].intersect(a))return!1}return!0},e.prototype.calculateAdsorbPoint=function(t,e,n,o){void 0===n&&(n=1),void 0===o&&(o=6);var i=new h.a(o*Math.SQRT2/n,o/n);for(var r in this.sceneObject.wallObjects){var s=this.sceneObject.wallObjects[r];s.forwardRoom&&i.addEdge(s.localToScene(s.topLeft),s.localToScene(s.topRight)),s.backwardRoom&&i.addEdge(s.localToScene(s.bottomLeft),s.localToScene(s.bottomRight))}for(var r in this.sceneObject.modelObjects){var c=this.sceneObject.modelObjects[r];c!=this&&c.item.subType==this.item.subType&&i.addPath(c.polygon.transform(c.localToSceneMatrix).vertices,!0)}var p=new l.a;p.rotate(this.rotationZ/180*Math.PI),p.translate(t,e);for(var d,f,g=[p.transformPoint(new a.a(this.width/2,this.length/2)),p.transformPoint(new a.a(-this.width/2,this.length/2)),p.transformPoint(new a.a(-this.width/2,-this.length/2)),p.transformPoint(new a.a(this.width/2,-this.length/2))],m=Number.MAX_VALUE,_=null,y=0,b=g;y<b.length;y++)d=b[y],(f=i.point2PointAdsorb(d))&&u.a.less(f.subtract(d).length,m)&&(m=f.subtract(d).length,_=f.subtract(d));if(_)return new a.a(_.x+t,_.y+e);m=Number.MAX_VALUE;for(var v=0,w=g;v<w.length;v++)d=w[v],(f=i.point2EdgeAdsorb(d))&&u.a.less(f.subtract(d).length,m)&&(m=f.subtract(d).length,_=f.subtract(d));return _?new a.a(_.x+t,_.y+e):new a.a(t,e)},e.prototype.copyFromData=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.rotationZ=t.rotationZ,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.scaleZ=t.scaleZ,this.mirror=Boolean(t.mirror),this.itemNo=t.itemNo,this.goodsNo=t.goodsNo},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.itemNo=this.itemNo,t.goodsNo=this.goodsNo,t.x=this.x,t.y=this.y,t.z=this.z,t.rotationZ=this.rotationZ,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.scaleZ=this.scaleZ,t.width=this.width,t.length=this.length,t.height=this.height,t.mirror=1==this.mirror?1:0,t.roomName=this.roomName,t},e.loadData=function(t){var n=new e(t.itemNo,t.hasOwnProperty("goodsNo")?t.goodsNo:t.itemNo);return n.name=t.name,n._x=t.x,n._y=t.y,n._z=t.z,n._rotationZ=t.rotationZ,n._scaleX=t.scaleX,n._scaleY=t.scaleY,n._scaleZ=t.scaleZ,n._mirror=Boolean(t.mirror),n},e}(o.a)},c9n0:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:100%;height:100%;background:#f7f9fe;overflow-y:scroll}.bg[_ngcontent-%COMP%], .wrap[_ngcontent-%COMP%]{position:absolute}.wrap[_ngcontent-%COMP%]{left:5%;top:20px;width:90%}.record[_ngcontent-%COMP%]{margin-top:10px;position:relative;height:156px}.record[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{width:100%;background:#fff;box-shadow:1px 15px 18px 2px rgba(67,125,245,.05);border-radius:10px}.title[_ngcontent-%COMP%]{position:absolute;height:50px}.title-text-1[_ngcontent-%COMP%]{color:#3d4de6}.title-text-1[_ngcontent-%COMP%], .title-text-2[_ngcontent-%COMP%]{position:absolute;left:20px;width:200px;height:50px;line-height:50px;font-size:16px;font-family:PingFang SC;font-weight:800}.title-text-2[_ngcontent-%COMP%]{color:#333}.content[_ngcontent-%COMP%]{position:absolute;left:0;top:50px}.floor-area[_ngcontent-%COMP%]{left:20px}.floor-area[_ngcontent-%COMP%], .wall-area[_ngcontent-%COMP%]{position:absolute;top:15px;width:170px;height:25px;line-height:25px;color:#666;font-size:15px;font-family:PingFang SC;font-weight:500}.wall-area[_ngcontent-%COMP%]{left:180px}.floor-length[_ngcontent-%COMP%]{left:20px}.ceiling-length[_ngcontent-%COMP%], .floor-length[_ngcontent-%COMP%]{position:absolute;top:65px;width:170px;height:25px;line-height:25px;color:#666;font-size:15px;font-family:PingFang SC;font-weight:500}.ceiling-length[_ngcontent-%COMP%]{left:180px}.line[_ngcontent-%COMP%]{position:absolute;left:20px;top:53px;width:300px;height:1px;border-top:1px dashed #050001;opacity:.06}"]},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("/oeL"),i=n("p5Ee"),r=n("+h1B"),a=n("fc+i");i.a.production&&n.i(o.a)(),n.i(a.a)().bootstrapModuleFactory(r.a)},cMBn:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{float:left;margin-left:15px;width:100px;height:100%;text-align:left;vertical-align:middle;color:#333;font-size:16px;line-height:66px}.arrow[_ngcontent-%COMP%]{float:right;margin-right:12px;margin-top:24px;width:16px;height:16px}.number[_ngcontent-%COMP%]{float:right;margin-right:15px;width:70px;height:100%;text-align:right;vertical-align:middle;font-size:14px;line-height:66px;color:#999}"]},cNiI:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{windowRef:0}),a._13(671088640,2,{navigationQueryList:1}),a._13(402653184,3,{backButton:0}),a._13(402653184,4,{leftDivRef:0}),a._13(402653184,5,{rightDivRef:0}),a._13(402653184,6,{rightContent0Ref:0}),a._13(402653184,7,{rightContent1Ref:0}),a._13(671088640,8,{radioButtonQueryList:1}),a._13(671088640,9,{optionInputQueryList:1}),(t()(),a._15(0,null,null,0,"div",[["class","mask"]],null,[[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchstart"===e){o=!1!==i.maskTouch()&&o}return o},null,null)),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[1,0],["window",1]],null,77,"div",[["class","window"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    "])),(t()(),a._15(0,null,null,7,"div",[["class","head"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._15(16777216,null,null,1,"icon-button",[["class","backButton"],["height","28px"],["iconDown","assets/view/option/back_3x.png"],["iconUp","assets/view/option/back_3x.png"],["isShowBg","false"],["visible","false"],["width","28px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,17)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,17).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,17).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,17).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,17).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,17).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,17).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,17).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.back()&&o}return o},l.a,l.b)),a._17(4308992,[[3,4],["backButton",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],visible:[2,"visible"],iconUp:[3,"iconUp"],iconDown:[4,"iconDown"],isShowBg:[5,"isShowBg"]},null),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,null,null,1,"div",[["class","title"]],null,null,null,null,null)),(t()(),a._14(null,["设置"])),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n    \n    "])),(t()(),a._15(0,[["body",1]],null,64,"div",[["class","body"]],null,null,null,null,null)),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,[[4,0],["left",1]],null,7,"div",[["class","left"]],null,null,null,null,null)),(t()(),a._14(null,["\n            "])),(t()(),a._15(16777216,null,null,1,"option-navigation-item",[["height","66px"],["label","墙厚/mm"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,29)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,29).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,29).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,29).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,29).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,29).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,29).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,29).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.changeView(0)&&o}return o},h.a,h.b)),a._17(4308992,[[2,4]],0,c.a,[a.Q,a._18],{height:[0,"height"],label:[1,"label"]},null),(t()(),a._14(null,["\n            "])),(t()(),a._15(16777216,null,null,1,"option-navigation-item",[["height","66px"],["label","层高/mm"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,32)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,32).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,32).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,32).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,32).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,32).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,32).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,32).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.changeView(1)&&o}return o},h.a,h.b)),a._17(4308992,[[2,4]],0,c.a,[a.Q,a._18],{height:[0,"height"],label:[1,"label"]},null),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n        "])),(t()(),a._15(0,[[5,0],["right",1]],null,50,"div",[["class","right"]],null,null,null,null,null)),(t()(),a._14(null,["\n            "])),(t()(),a._14(null,["\n            "])),(t()(),a._15(0,[[6,0],["rightContent0",1]],null,29,"div",[["class","rightContent"]],null,null,null,null,null)),(t()(),a._14(null,["\n                "])),(t()(),a._15(16777216,null,null,1,"option-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,42)._touchMove(n)&&o}return o},p.a,p.b)),a._17(4308992,[[9,4]],0,d.a,[a.Q,a._18],null,null),(t()(),a._14(null,["\n                "])),(t()(),a._15(16777216,null,null,1,"radio-button",[["backDownColor","#ebebeb"],["height","42px"],["label","100"],["selectedColor","#3d4de6"],["textSize","14"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,45)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,45).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,45).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,45).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,45).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,45).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,45).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,45).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.selectWallThickness(0)&&o}return o},f.a,f.b)),a._17(4308992,[[8,4]],0,g.a,[a.Q,a._18],{height:[0,"height"],label:[1,"label"],backDownColor:[2,"backDownColor"],selectedColor:[3,"selectedColor"],textSize:[4,"textSize"]},null),(t()(),a._14(null,["\n                "])),(t()(),a._15(16777216,null,null,1,"radio-button",[["backDownColor","#ebebeb"],["height","42px"],["label","120(默认值)"],["selectedColor","#3d4de6"],["textSize","14"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,48)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,48).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,48).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,48).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,48).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,48).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,48).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,48).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.selectWallThickness(1)&&o}return o},f.a,f.b)),a._17(4308992,[[8,4]],0,g.a,[a.Q,a._18],{height:[0,"height"],label:[1,"label"],backDownColor:[2,"backDownColor"],selectedColor:[3,"selectedColor"],textSize:[4,"textSize"]},null),(t()(),a._14(null,["\n                "])),(t()(),a._15(16777216,null,null,1,"radio-button",[["backDownColor","#ebebeb"],["height","42px"],["label","180"],["selectedColor","#3d4de6"],["textSize","14"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,51)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,51).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,51).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,51).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,51).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,51).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,51).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,51).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.selectWallThickness(2)&&o}return o},f.a,f.b)),a._17(4308992,[[8,4]],0,g.a,[a.Q,a._18],{height:[0,"height"],label:[1,"label"],backDownColor:[2,"backDownColor"],selectedColor:[3,"selectedColor"],textSize:[4,"textSize"]},null),(t()(),a._14(null,["\n                "])),(t()(),a._15(16777216,null,null,1,"radio-button",[["backDownColor","#ebebeb"],["height","42px"],["label","200"],["selectedColor","#3d4de6"],["textSize","14"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,54)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,54).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,54).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,54).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,54).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,54).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,54).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,54).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.selectWallThickness(3)&&o}return o},f.a,f.b)),a._17(4308992,[[8,4]],0,g.a,[a.Q,a._18],{height:[0,"height"],label:[1,"label"],backDownColor:[2,"backDownColor"],selectedColor:[3,"selectedColor"],textSize:[4,"textSize"]},null),(t()(),a._14(null,["\n                "])),(t()(),a._15(16777216,null,null,1,"radio-button",[["backDownColor","#ebebeb"],["height","42px"],["label","240"],["selectedColor","#3d4de6"],["textSize","14"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,57)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,57).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,57).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,57).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,57).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,57).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,57).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,57).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.selectWallThickness(4)&&o}return o},f.a,f.b)),a._17(4308992,[[8,4]],0,g.a,[a.Q,a._18],{height:[0,"height"],label:[1,"label"],backDownColor:[2,"backDownColor"],selectedColor:[3,"selectedColor"],textSize:[4,"textSize"]},null),(t()(),a._14(null,["\n                "])),(t()(),a._14(null,["\n                "])),(t()(),a._15(0,null,null,7,"div",[["class","foot"]],null,null,null,null,null)),(t()(),a._14(null,["\n                    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","defaultButton"],["colorStyle","7"],["height","36px"],["label","恢复默认设置"],["left","30"],["radius","4"],["textSize","14"],["width","150px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,63)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,63).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,63).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,63).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,63).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,63).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,63).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,63).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.wallThicknessDefault()&&o}return o},m.a,m.b)),a._17(4308992,null,0,_.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],left:[2,"left"],radius:[3,"radius"],colorStyle:[4,"colorStyle"],textSize:[5,"textSize"],label:[6,"label"]},null),(t()(),a._14(null,["\n                    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","finishButton"],["colorStyle","1"],["height","36px"],["label","完成"],["radius","4"],["right","30"],["textSize","14"],["width","150px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,66)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,66).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,66).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,66).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,66).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,66).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,66).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,66).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.back()&&o}return o},m.a,m.b)),a._17(4308992,null,0,_.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],right:[2,"right"],radius:[3,"radius"],colorStyle:[4,"colorStyle"],textSize:[5,"textSize"],label:[6,"label"]},null),(t()(),a._14(null,["\n                "])),(t()(),a._14(null,["\n            "])),(t()(),a._14(null,["\n            "])),(t()(),a._14(null,["\n            "])),(t()(),a._15(0,[[7,0],["rightContent1",1]],null,14,"div",[["class","rightContent"]],null,null,null,null,null)),(t()(),a._14(null,["\n                "])),(t()(),a._15(16777216,null,null,1,"option-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,74)._touchMove(n)&&o}return o},p.a,p.b)),a._17(4308992,[[9,4]],0,d.a,[a.Q,a._18],null,null),(t()(),a._14(null,["\n                "])),(t()(),a._14(null,["\n                "])),(t()(),a._15(0,null,null,7,"div",[["class","foot"]],null,null,null,null,null)),(t()(),a._14(null,["\n                    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","defaultButton"],["colorStyle","7"],["height","36px"],["label","恢复默认设置"],["left","30"],["radius","4"],["textSize","14"],["width","150px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,80)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,80).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,80).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,80).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,80).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,80).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,80).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,80).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.storeyHeightDefault()&&o}return o},m.a,m.b)),a._17(4308992,null,0,_.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],left:[2,"left"],radius:[3,"radius"],colorStyle:[4,"colorStyle"],textSize:[5,"textSize"],label:[6,"label"]},null),(t()(),a._14(null,["\n                    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","finishButton"],["colorStyle","1"],["height","36px"],["label","完成"],["radius","4"],["right","30"],["textSize","14"],["width","150px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,83)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,83).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,83).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,83).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,83).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,83).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,83).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,83).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.back()&&o}return o},m.a,m.b)),a._17(4308992,null,0,_.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],right:[2,"right"],radius:[3,"radius"],colorStyle:[4,"colorStyle"],textSize:[5,"textSize"],label:[6,"label"]},null),(t()(),a._14(null,["\n                "])),(t()(),a._14(null,["\n            "])),(t()(),a._14(null,["\n        "])),(t()(),a._14(null,["\n    "])),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n"]))],function(t,e){t(e,17,0,"28px","28px","false","assets/view/option/back_3x.png","assets/view/option/back_3x.png","false");t(e,29,0,"66px","墙厚/mm");t(e,32,0,"66px","层高/mm"),t(e,42,0);t(e,45,0,"42px","100","#ebebeb","#3d4de6","14");t(e,48,0,"42px","120(默认值)","#ebebeb","#3d4de6","14");t(e,51,0,"42px","180","#ebebeb","#3d4de6","14");t(e,54,0,"42px","200","#ebebeb","#3d4de6","14");t(e,57,0,"42px","240","#ebebeb","#3d4de6","14");t(e,63,0,"150px","36px","30","4","7","14","恢复默认设置");t(e,66,0,"150px","36px","30","4","1","14","完成"),t(e,74,0);t(e,80,0,"150px","36px","30","4","7","14","恢复默认设置");t(e,83,0,"150px","36px","30","4","1","14","完成")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"option-setting",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,b)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("+Hrd"),a=n("/oeL"),s=n("6p4A"),l=n("0NNx"),u=n("bO4n"),h=n("39qE"),c=n("Dsuh"),p=n("zJDb"),d=n("Luvd"),f=n("Ux0E"),g=n("L2IC"),m=n("Esur"),_=n("IO5Z");n.d(e,"b",function(){return b}),e.a=o;var y=[r.a],b=a._11({encapsulation:0,styles:y,data:{}});a._19("option-setting",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},clJS:function(t,e,n){"use strict";var o=n("0/et"),i=n("lpfp"),r=n("RojA"),a=n("N0sU"),s=n("gn8q");n.d(e,"a",function(){return l});var l=function(){function t(e){void 0===e&&(e=t.DEFAULT_ADSORB_LENGTH),this.adsorbLength=e,this.points=new Array,this.edges=new Array}return t.prototype.pointAdsorb=function(t,e){void 0===e&&(e=!0);for(var n,s=new r.a(t.clone()),l=0,u=this.points;l<u.length;l++)if(n=u[l],o.a.less(t.subtract(n).length,this.adsorbLength))return s.mode=a.a.VERTEX,s.point.copyFrom(n),s;for(var h,c=null,p=null,d=0,f=this.edges;d<f.length;d++){var g=f[d],m=this.points[g.startIndex],_=this.points[g.stopIndex];if(h=o.a.calcFoot(m,_,t),o.a.isPointOnSegment(m,_,h)&&o.a.less(t.subtract(h).length,this.adsorbLength)){c=g,p=h;break}}if(!e)return p?(s.mode=a.a.EDGE,s.point.copyFrom(p)):(s.mode=a.a.NULL,s.point.copyFrom(t)),s;for(var y=new i.a,b=null,v=null,w=null,O=null,x=0,E=this.points;x<E.length&&(n=E[x],y.setTo(n.x+100,n.y),h=o.a.calcFoot(n,y,t),!o.a.less(t.subtract(h).length,this.adsorbLength)||(v=h,b=n,!O))&&(y.setTo(n.x,n.y+100),h=o.a.calcFoot(n,y,t),!o.a.less(t.subtract(h).length,this.adsorbLength)||(O=h,w=n,!v));x++);var P=null,C=null;if(p){if(s.mode=a.a.EDGE,v||O){var A;return v&&(P=v,C=b,(A=o.a.calculateIntersectPoint(C,P,this.points[c.startIndex],this.points[c.stopIndex]))&&o.a.isPointOnSegment(this.points[c.startIndex],this.points[c.stopIndex],A)&&o.a.less(A.subtract(t).length,this.adsorbLength))?(s.point=A,s):O&&(P=O,C=w,(A=o.a.calculateIntersectPoint(C,P,this.points[c.startIndex],this.points[c.stopIndex]))&&o.a.isPointOnSegment(this.points[c.startIndex],this.points[c.stopIndex],A)&&o.a.less(A.subtract(t).length,this.adsorbLength))?(s.point=A,s):(s.point=p,s)}return s.point.copyFrom(p),s}return v||O?(v&&O?P=new i.a(O.x,v.y):v?P=v:O&&(P=O),s.mode=a.a.ALIGN,s.point=P,s):(s.mode=a.a.NULL,s.point.copyFrom(t),s)},t.prototype.edgeAdsorb=function(t,e,n,i){for(var r,a=null,l=null,u=0,h=this.points;u<h.length;u++){var c=h[u];if(a||(r=c.subtract(t),o.a.less(r.length,this.adsorbLength)&&o.a.isNumberEqual(r.crossProd(n),0)&&(a=c)),l||(r=c.subtract(e),o.a.less(r.length,this.adsorbLength)&&o.a.isNumberEqual(r.crossProd(i),0)&&(l=c)),a&&l)break}var p,d=new s.a(t.clone(),e.clone()),f=t.subtract(e);if(!a&&!l)return d;if(a){if(!(p=o.a.calculateIntersectPoint2(a,f,e,i)))return d;l=p}else{if(!(p=o.a.calculateIntersectPoint2(l,f,t,n)))return d;a=p}return d.start.copyFrom(a),d.stop.copyFrom(l),d},t.prototype.addPath=function(t,e){if(void 0===e&&(e=!1),0!=t.length){if(1==t.length)return void this.addPoint(t[0]);for(var n=0;n<t.length-1;n++)this.addEdge(t[n],t[o.a.nextIndex(n,t.length)]);e&&this.addEdge(t[t.length-1],t[0])}},t.prototype.addEdge=function(t,e){var n=this.addPoint(t),o=this.addPoint(e);this.edges.push(new u(n,o))},t.prototype.addPoint=function(t){for(var e=0;e<this.points.length;e++)if(o.a.isPointEqual(t,this.points[e]))return e;return this.points.push(t),this.points.length-1},t.prototype.dispose=function(){this.points.length=0,this.edges.length=0},t}();l.DEFAULT_ADSORB_LENGTH=12;var u=function(){function t(t,e){this.startIndex=t,this.stopIndex=e}return t}()},cmpz:function(t,e,n){"use strict";var o=n("/oeL"),i=n("5ZTi"),r=n("v7PY");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.radius=2,i.colorStyle=e.YELLOW_BLACK_NONE,i.backUpColor=r.a.YELLOW_BUTTON_UP,i.backOverColor=r.a.YELLOW_BUTTON_OVER,i.backDownColor=r.a.YELLOW_BUTTON_OVER,i.backUpAlpha=1,i.backOverAlpha=1,i.backDownAlpha=1,i.border="true",i.strokeUpColor=r.a.YELLOW_BUTTON_UP,i.strokeOverColor=r.a.YELLOW_BUTTON_OVER,i.strokeDownColor=r.a.YELLOW_BUTTON_OVER,i.strokeUpAlpha=0,i.strokeOverAlpha=0,i.strokeDownAlpha=0,i.textUpColor=r.a.FONT4,i.textOverColor=r.a.FONT5,i.textDownColor=r.a.FONT5,i.textSize=12,i.label="",i}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.labelDom=this.labelRef.nativeElement,"true"==this.border&&(this.renderer.setStyle(this.dom,"border-radius",this.radius+"px"),this.renderer.setStyle(this.dom,"border-width","1px"),this.renderer.setStyle(this.dom,"border-style","solid")),this.renderer.setStyle(this.dom,"vertical-align","middle"),this.renderer.setStyle(this.dom,"font-size",this.textSize+"px"),this.renderer.setStyle(this.labelDom,"line-height",this._height),this.setColorStyle(this.colorStyle),this.upStyle()},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.renderer.setStyle(this.dom,"height",t),this.labelDom&&this.renderer.setStyle(this.labelDom,"line-height",t)},enumerable:!0,configurable:!0}),e.prototype.setColorStyle=function(t){switch(t){case e.YELLOW_BLACK_NONE:this.backUpColor=r.a.YELLOW_BUTTON_UP,this.backOverColor=r.a.YELLOW_BUTTON_OVER,this.backDownColor=r.a.YELLOW_BUTTON_OVER,this.textUpColor=r.a.FONT4,this.textOverColor=r.a.FONT5,this.textDownColor=r.a.FONT5;break;case e.WHITE_GRAY_NONE:this.backUpColor=r.a.WHITE,this.backOverColor=14079961,this.backDownColor=14079961,this.backUpAlpha=1,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=0,this.strokeOverColor=0,this.strokeDownColor=0,this.strokeUpAlpha=0,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=3947580,this.textOverColor=3947580,this.textDownColor=3947580;break;case e.TRANSPARENT_BLACK_NONE:this.backUpColor=0,this.backOverColor=15461355,this.backDownColor=15461355,this.backUpAlpha=0,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=0,this.strokeOverColor=0,this.strokeDownColor=0,this.strokeUpAlpha=0,this.strokeOverAlpha=0,this.strokeDownAlpha=0,this.textUpColor=r.a.FONT,this.textOverColor=r.a.BLUE,this.textDownColor=r.a.BLUE;break;case e.TRANSPARENT_YELLOW_NONE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.textUpColor=16770099,this.textOverColor=16770099,this.textDownColor=16755217;break;case e.TRANSPARENT_WHITE_WHITE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.strokeUpColor=r.a.WHITE,this.strokeOverColor=r.a.WHITE,this.strokeDownColor=r.a.WHITE,this.strokeUpAlpha=1,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=r.a.FONT5,this.textOverColor=r.a.FONT5,this.textDownColor=r.a.FONT3;break;case e.TRANSPARENT_GRAY_NONE:this.backUpColor=0,this.backOverColor=0,this.backDownColor=0,this.backUpAlpha=0,this.backOverAlpha=0,this.backDownAlpha=0,this.textUpColor=6710886,this.textOverColor=6710886,this.textDownColor=3355443;break;case e.WHITE_BLACK_GRAY:this.backUpColor=r.a.WHITE,this.backOverColor=r.a.GRAY,this.backDownColor=r.a.GRAY,this.backUpAlpha=1,this.backOverAlpha=1,this.backDownAlpha=1,this.strokeUpColor=14935011,this.strokeOverColor=14935011,this.strokeDownColor=14935011,this.strokeUpAlpha=1,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=r.a.FONT,this.textOverColor=r.a.FONT,this.textDownColor=r.a.FONT;break;case e.CIRCLE_BLUE_BLACK_NONE:this.backUpColor=r.a.BLUE,this.backOverColor=r.a.BLUE,this.backDownColor=r.a.GRAY,this.textUpColor=r.a.FONT5,this.textOverColor=r.a.FONT5,this.textDownColor=r.a.FONT5;break;case e.GRAY_BLACK_YELLOW:this.backUpColor=16119285,this.backOverColor=16119285,this.backDownColor=16119285,this.backUpAlpha=1,this.backOverAlpha=0,this.backDownAlpha=0,this.strokeUpColor=16098851,this.strokeOverColor=16098851,this.strokeDownColor=16098851,this.strokeUpAlpha=0,this.strokeOverAlpha=1,this.strokeDownAlpha=1,this.textUpColor=r.a.FONT,this.textOverColor=16098851,this.textDownColor=16098851}},e.prototype.upStyle=function(){this.renderer.setStyle(this.dom,"background-color",r.a.toRGBAstring(this.backUpColor,this.backUpAlpha)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(this.textUpColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",r.a.toRGBAstring(this.strokeUpColor,this.strokeUpAlpha))},e.prototype.overStyle=function(){this.renderer.setStyle(this.dom,"background-color",r.a.toRGBAstring(this.backOverColor,this.backOverAlpha)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(this.textOverColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",r.a.toRGBAstring(this.strokeOverColor,this.strokeOverAlpha))},e.prototype.downStyle=function(){this.renderer.setStyle(this.dom,"background-color",r.a.toRGBAstring(this.backDownColor,this.backDownAlpha)),this.renderer.setStyle(this.labelDom,"color",r.a.toString(this.textDownColor)),"true"==this.border&&this.renderer.setStyle(this.dom,"border-color",r.a.toRGBAstring(this.strokeDownColor,this.strokeDownAlpha))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);s.YELLOW_BLACK_NONE="1",s.WHITE_GRAY_NONE="2",s.TRANSPARENT_BLACK_NONE="3",s.TRANSPARENT_YELLOW_NONE="4",s.TRANSPARENT_WHITE_WHITE="5",s.TRANSPARENT_GRAY_NONE="6",s.WHITE_BLACK_GRAY="7",s.CIRCLE_BLUE_BLACK_NONE="8",s.GRAY_BLACK_YELLOW="9"},czmY:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".icon-button[_ngcontent-%COMP%]{position:absolute;width:42px;height:42px;bottom:50px}"]},dAjp:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t.drawArc=function(t,e,n,o,i){var r=e.x+n*Math.cos(-o*Math.PI/180),a=e.y+n*Math.sin(-o*Math.PI/180);t.moveTo(r,a);for(var s=o+1;s<=i;s++)r=e.x+n*Math.cos(-s*Math.PI/180),a=e.y+n*Math.sin(-s*Math.PI/180),t.lineTo(r,a)},t.drawPolygonLine=function(t,e,n,o,i){void 0===n&&(n=255),void 0===o&&(o=1),void 0===i&&(i=1),t.lineStyle(i,n,o),t.moveTo(e.getPointAt(0).x,e.getPointAt(0).y);for(var r,a=0,s=e.points;a<s.length;a++)r=s[a],t.lineTo(r.x,r.y);t.lineTo(e.getPointAt(0).x,e.getPointAt(0).y)},t.fillPolygon=function(t,e){t.moveTo(e.getPointAt(0).x,e.getPointAt(0).y);for(var n,o=0,i=e.points;o<i.length;o++)n=i[o],t.lineTo(n.x,n.y)},t.drawPolygon=function(t,e,n,o,i,r){void 0===n&&(n=255),void 0===o&&(o=!1),void 0===i&&(i=16711680),void 0===r&&(r=.5),t.beginFill(n,r),t.moveTo(e.getPointAt(0).x,e.getPointAt(0).y);for(var a,s=0,l=e.points;s<l.length;s++)a=l[s],t.lineTo(a.x,a.y);if(t.endFill(),o)for(var u=0,h=e.points;u<h.length;u++)a=h[u],t.beginFill(i,.5),t.drawCircle(a.x,a.y,2),t.endFill()},t.drawLine=function(t,e,n,o,i){void 0===i&&(i=1),t.moveTo(e.x,e.y),t.lineStyle(i,o,.5),t.lineTo(n.x,n.y)},t.drawRectLine=function(t,e,n,o,i,r){t.lineStyle(1,r,.5),t.drawRect(e,n,o,i)},t.drawPoint=function(t,e,n,o){void 0===o&&(o=2),t.beginFill(n,.5),t.drawCircle(e.x,e.y,o),t.endFill()},t.drawCircle=function(t,e,n,o,i,r,a){void 0===i&&(i=16777215),void 0===r&&(r=3355443),void 0===a&&(a=1),t.lineStyle(0,0,0),t.beginFill(r,a),t.drawCircle(e,n,o+1),t.endFill(),t.beginFill(i,a),t.drawCircle(e,n,o),t.endFill()},t.drawSector=function(t,e,n,o,i,r,a,s,l){void 0===i&&(i=90),void 0===r&&(r=270),void 0===a&&(a=16711680),void 0===s&&(s=16777215),void 0===l&&(l=1),t.beginFill(s,l),t.lineStyle(1,a),t.moveTo(e,n),i=Math.abs(i)>360?360:i;var u=Math.ceil(Math.abs(i)/45),h=i/u;h=h*Math.PI/180,r=r*Math.PI/180,t.lineTo(e+o*Math.cos(r),n+o*Math.sin(r));for(var c=1;c<=u;c++){r+=h;var p=r-h/2,d=e+o/Math.cos(h/2)*Math.cos(p),f=n+o/Math.cos(h/2)*Math.sin(p),g=e+o*Math.cos(r),m=n+o*Math.sin(r);t.curveTo(d,f,g,m)}360!=i&&t.lineTo(e,n),t.endFill()},t.drawSectorOnArcWall=function(t,e,n,o,i,r,a,s,l,u){void 0===a&&(a=16711680),void 0===s&&(s=16777215),void 0===l&&(l=1),void 0===u&&(u=90),t.beginFill(s,l),t.lineStyle(1,a,1);var h,c,p,d=e.x,f=e.y,g=n.subtract(e).length,m=u,_=Math.ceil(Math.abs(m)/45),y=m/_;for(y=y*Math.PI/180,r=r*Math.PI/180,h=d+g*Math.cos(r),c=f+g*Math.sin(r),t.moveTo(h,c),p=1;p<=_;p++){r+=y;var b=r-y/2,v=d+g/Math.cos(y/2)*Math.cos(b),w=f+g/Math.cos(y/2)*Math.sin(b),O=d+g*Math.cos(r),x=f+g*Math.sin(r);t.curveTo(v,w,O,x)}for(t.lineStyle(1,a,0),i||o.reverse(),p=0;p<o.length;p++)t.lineTo(o[p].x,o[p].y);360!=m&&t.lineTo(h,c),t.endFill()},t.drawArcBy3PointsOnCircle=function(t,e,n,o){},t}();o.bitmapDic={}},"e/zD":function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{virtualNumberBoard:0}),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"virtual-number-board",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,3)._touchMove(n)&&o}return o},s.a,s.b)),a._17(4308992,[[1,4],["virtualNumberBoard",4]],0,l.a,[a.Q,a._18],null,null)],function(t,e){t(e,3,0)},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"common-setting",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,u.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("Y/NI"),a=n("/oeL"),s=n("8gSQ"),l=n("vqfy"),u=n("MgL2");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("common-setting",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},eUeh:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"keys",{get:function(){var t=[];for(var e in this)t.push(e);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var t=[];for(var e in this)t.push(this[e]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.keys.length},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;for(var n in this){t[n]=this[n]}return t},e.prototype.dispose=function(){for(var t in this)delete this[t]},e}(Object)},elDA:function(t,e,n){"use strict";var o=n("oX+v"),i=n("qzI0"),r=n("r4QP");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e){var n=t.call(this)||this;return n.data=e,n.depth=i.a.ROOM,n.borderColor=5525602,n.fillColor=5525602,n.init(),n}return a(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"opening2d"},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.x=this.data.realX,this.y=this.data.realY,this.rotation=this.data.rotation,this.draw()},e.prototype.draw=function(){this.graphics.clear(),this.graphics.lineStyle(1,0,1);var e=this.data.realWidth,n=this.data.wallLength;switch(this.data.type){case r.a.HOLE:this.graphics.width=1+(e>>1),this.graphics.height=1+(n>>1),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*e,-.5*n,e,n),this.graphics.endFill();break;case r.a.DOOR_COMMON:case r.a.DOOR_DOUBLE:case r.a.DOOR_SLIDING:this.graphics.width=1+(e>>1),this.graphics.height=1+(n>>1),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*e,-.5*n,e,n),this.graphics.endFill();break;case r.a.WINDOW_COMMON:case r.a.WINDOW_FRENCH:case r.a.WINDOW_BAY:this.graphics.width=1+(e>>1),this.graphics.height=1+(n>>1),this.graphics.lineStyle(1,this.borderColor,1),this.graphics.beginFill(this.fillColor,1),this.graphics.drawRect(-.5*e,-.5*n,e,n),this.graphics.endFill()}t.prototype.draw.call(this)},e}(o.a);s.DEFAULT_WIDTH=10},"enh+":function(t,e,n){"use strict";var o=n("/gn8"),i=n("lpfp"),r=n("aNcW"),a=n("MPvg"),s=n("j8JM"),l=n("KHfe"),u=n("BM0e"),h=n("fzMI");n.d(e,"a",function(){return c});var c=function(){function t(t,e,n,a){var l=this;this._mode=1,this.MAX_RADIUS=5e3,this.MIN_RADIUS=50,this.keyBoardStep=100,this.maxPitch=Math.PI/2,this.minPitch=-Math.PI/2,this.camera=null,this.eventSource=null,this.oribitRadius=1e3,this.defaultOribitRadius=1e3,this.lookPoint=null,this.defaultLookPoint=null,this.fovMin=30,this.fovMax=130,this.transform=[],this.defaultTransform=[new o.a,new o.a(-.8,0,0),new o.a(1,1,1)],this.oldPoint=new i.a,this.lastTouchPoints=[],this.newPoint=new i.a,this._tmpMatrix=new r.a,this.panEnabled=!1,this.touchStartLambda=function(t){l.touchStart(t)},this.touchMoveLambda=function(t){l.touchMove(t)},this.touchEndLambda=function(t){l.touchEnd(t)},this.mouseDownLambda=function(t){l.mouseDown(t)},this.mouseMoveLambda=function(t){l.mouseMove(t)},this.mouseUpLambda=function(t){l.mouseUp(t)},this.mouseWheelLambda=function(t){l.mouseWheel(t)},this.camera=t,this.eventSource=e,this.transform[0]=this.defaultTransform[0].clone(),this.transform[1]=this.defaultTransform[1].clone(),this.transform[2]=this.defaultTransform[2].clone(),this.lookPoint=n,this.defaultLookPoint=this.lookPoint.clone(),this.oribitRadius=a,this.defaultOribitRadius=a,1==u.a.isMobile?this.eventSource.addEventListener(s.a.TOUCH_START,this.touchStartLambda):(this.eventSource.addEventListener(h.a.MOUSE_DOWN,this.mouseDownLambda),this.eventSource.addEventListener(h.a.DOM_MOUSE_WHEEL,this.mouseWheelLambda),this.eventSource.addEventListener(h.a.MOUSE_WHEEL,this.mouseWheelLambda)),this.update()}return t.prototype.reset=function(){this.transform[0]=this.defaultTransform[0].clone(),this.transform[1]=this.defaultTransform[1].clone(),this.transform[2]=this.defaultTransform[2].clone(),this.lookPoint=this.defaultLookPoint.clone(),this.oribitRadius=this.defaultOribitRadius,this.update()},t.prototype.touchStart=function(t){var e=t.touches[0];this.eventSource.stage.addEventListener(s.a.TOUCH_MOVE,this.touchMoveLambda),this.eventSource.stage.addEventListener(s.a.TOUCH_END,this.touchEndLambda),this.oldPoint.copyFrom(this.eventSource.globalToLocal(new i.a(e.clientX,e.clientY))),this.lastTouchPoints=[];for(var n=0;n<t.touches.length;n++){var o=t.touches[n];this.lastTouchPoints.push(new i.a(o.clientX,o.clientY))}},t.prototype.touchMove=function(e){if(1==e.touches.length){var n=e.touches[0];this.newPoint.copyFrom(this.eventSource.globalToLocal(new i.a(n.clientX,n.clientY))),this.mode==t.ORIBIT_MODE?this.oribit():this.mode==t.ROAM_MODE&&this.rotate(),this.oldPoint.copyFrom(this.newPoint)}else if(2==e.touches.length){if(this.lastTouchPoints.length!=e.touches.length)return;var o=e.touches[0],r=this.lastTouchPoints[0],a=new i.a(o.clientX,o.clientY),s=e.touches[1],l=this.lastTouchPoints[1],u=new i.a(s.clientX,s.clientY),h=a.subtract(r),c=u.subtract(l),p=Math.abs(180*i.a.angleBetween(h,c)/Math.PI);if(this.lastTouchPoints[0]=a,this.lastTouchPoints[1]=u,this.mode==t.ROAM_MODE){if(p>30){var d=r.subtract(l).length,f=a.subtract(u).length,g=Math.sqrt(d/f),m=this.camera.fov*g;m=Math.min(m,this.fovMax),m=Math.max(m,this.fovMin),this.camera.fov=m,this.update()}}else if(p<=30)1==this.panEnabled&&(this.newPoint.copyFrom(this.eventSource.globalToLocal(a)),this.pan());else{var d=r.subtract(l).length,f=a.subtract(u).length,g=Math.sqrt(d/f),_=this.oribitRadius*g;this.changeOribitRadius(_)}}},t.prototype.touchEnd=function(t){this.eventSource.stage.removeEventListener(s.a.TOUCH_MOVE,this.touchMoveLambda),this.eventSource.stage.removeEventListener(s.a.TOUCH_END,this.touchEndLambda),this.newPoint=new i.a,this.oldPoint=new i.a,this.lastTouchPoints=[]},t.prototype.mouseDown=function(t){this.eventSource.stage.addEventListener(h.a.MOUSE_MOVE,this.mouseMoveLambda),this.eventSource.stage.addEventListener(h.a.MOUSE_UP,this.mouseUpLambda),this.oldPoint.copyFrom(this.eventSource.globalToLocal(new i.a(t.clientX,t.clientY)))},t.prototype.mouseMove=function(e){this.newPoint.copyFrom(this.eventSource.globalToLocal(new i.a(e.clientX,e.clientY))),this.mode==t.ORIBIT_MODE?this.oribit():this.mode==t.ROAM_MODE&&this.rotate(),this.oldPoint.copyFrom(this.newPoint)},t.prototype.mouseUp=function(t){this.eventSource.stage.removeEventListener(h.a.MOUSE_MOVE,this.mouseMoveLambda),this.eventSource.stage.removeEventListener(h.a.MOUSE_UP,this.mouseUpLambda),this.newPoint=new i.a,this.oldPoint=new i.a,this.lastTouchPoints=[]},t.prototype.mouseWheel=function(e){if(this.mode==t.ORIBIT_MODE){var n=0;n=e.wheelDelta>0?-120:e.wheelDelta<0?120:e.detail<0?-120:120;var o=this.oribitRadius+n;o=Math.max(30,o),o=Math.min(6e3,o),this.oribitRadius=o,this.update()}},t.prototype.changeOribitRadius=function(e){this.mode==t.ORIBIT_MODE&&(e=Math.max(this.MIN_RADIUS,e),e=Math.min(this.MAX_RADIUS,e),this.oribitRadius=e,this.update())},t.prototype.update=function(){var t=this.transform[1];this._tmpMatrix.identity(),this._tmpMatrix.appendRotationXYZ(t.x,0,t.z,"ZYX");var e=this._tmpMatrix.transformPoint(o.a.Y_AXIS);e.scaleBy(-this.oribitRadius);var n=this.transform[0];n.x=this.lookPoint.x+e.x,n.y=this.lookPoint.y+e.y,n.z=this.lookPoint.z+e.z,this.camera.position.x=n.x,this.camera.position.y=n.y,this.camera.position.z=n.z,this.camera.up=new a.b(0,0,1),this.camera.lookAt(new a.b(this.lookPoint.x,this.lookPoint.y,this.lookPoint.z)),this.camera.updateProjectionMatrix();var i=new l.a(l.a.UPDATE,this.camera);i.cameraLookPoint=this.lookPoint,i.cameraPoint=this.camera.position3D,this.eventSource.dispatchEvent(i,this.eventSource)},t.prototype.rotate=function(){var t=this.newPoint.x-this.oldPoint.x,e=this.newPoint.y-this.oldPoint.y;t*=-1,e*=-1;var n=this.transform[1];n.x-=e/this.eventSource.height*Math.PI,n.x>this.maxPitch&&(n.x=this.maxPitch),n.x<this.minPitch&&(n.x=this.minPitch),n.z-=t/this.eventSource.height*Math.PI*2,this.update()},t.prototype.oribit=function(){var t=this.newPoint.x-this.oldPoint.x,e=this.newPoint.y-this.oldPoint.y,n=this.transform[1];n.x-=e/this.eventSource.height*Math.PI,n.x>this.maxPitch&&(n.x=this.maxPitch),n.x<this.minPitch&&(n.x=this.minPitch),n.z-=t/this.eventSource.height*Math.PI*2,this.update()},t.prototype.pan=function(){if(this.mode==t.ORIBIT_MODE){var e=this.newPoint.x-this.oldPoint.x,n=this.newPoint.y-this.oldPoint.y,i=this.transform[1];this._tmpMatrix.identity(),this._tmpMatrix.appendRotationXYZ(i.x,0,i.z,"ZYX");var r=this._tmpMatrix.transformPoint(new o.a(e,0,-n));this.lookPoint.x-=r.x,this.lookPoint.y-=r.y,this.update()}else this.mode==t.ROAM_MODE&&this.rotate()},Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode=e,e==t.ORIBIT_MODE?(this.maxPitch=Math.PI/2,this.minPitch=-Math.PI/2):(this.maxPitch=Math.PI/4,this.minPitch=-Math.PI/4)},enumerable:!0,configurable:!0}),t.prototype.disableInteractive=function(){1==u.a.isMobile?(this.eventSource.removeEventListener(s.a.TOUCH_START,this.touchStartLambda),this.eventSource.stage.removeEventListener(s.a.TOUCH_MOVE,this.touchMoveLambda),this.eventSource.stage.removeEventListener(s.a.TOUCH_END,this.touchEndLambda)):(this.eventSource.removeEventListener(h.a.MOUSE_DOWN,this.mouseDownLambda),this.eventSource.stage.removeEventListener(h.a.MOUSE_MOVE,this.mouseMoveLambda),this.eventSource.stage.removeEventListener(h.a.MOUSE_UP,this.mouseUpLambda))},t.prototype.enableLeftButton=function(){this.disableInteractive(),1==u.a.isMobile?this.eventSource.addEventListener(s.a.TOUCH_START,this.touchStartLambda):this.eventSource.addEventListener(h.a.MOUSE_DOWN,this.mouseDownLambda)},t}();c.ROAM_MODE=0,c.ORIBIT_MODE=1},ezNz:function(t,e,n){"use strict";var o=n("ZvbM"),i=n("Eezr"),r=n("Xx/s"),a=n("/T2q");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.width=100,e.height=100,e.depth=i.a.NOTE,e.mouseEventEnable=!1,e}return s(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"NoteGroup"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){this.touchEnable=!1},Object.defineProperty(e.prototype,"notes",{get:function(){for(var t=[],e=this.numChildren,n=0;n<e;n++){var o=this.getChildAt(n);o&&t.push(o)}return t},enumerable:!0,configurable:!0}),e.prototype.update=function(){for(var t=this.numChildren,e=0;e<t;e++){var n=this.getChildAt(e);n&&n.update()}},e.prototype.addNote=function(t){this.addChild(t),t.scene=this.scene,t.update()},e.prototype.removeNote=function(t){1==this.contains(t)&&(t.clear(),this.removeChild(t))},e.prototype.topNote=function(t){1==this.contains(t)&&this.setChildIndex(t,this.numChildren-1)},e.prototype.bottomNote=function(t){1==this.contains(t)&&this.setChildIndex(t,0)},e.prototype.noteClick=function(t){this.scene.dispatchEvent(new a.a(a.a.MSCENE_NOTE_CHANGED,t),this.scene)},e.prototype.clear=function(){for(var t=this.childs.concat(),e=0,n=t;e<n.length;e++){var o=n[e];o instanceof r.a&&(o.clear(),this.removeChild(o))}},e}(o.a)},fPy1:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n,o,i){void 0===n&&(n=null),void 0===o&&(o=0),void 0===i&&(i=null);var r=t.call(this,e,n)||this;return r.value=o,r.inputData=i,r}return i(e,t),e}(o.a);r.CHANGE="RulerChange",r.CLICK="RulerClick"},feMm:function(t,e,n){"use strict";var o=n("MPvg"),i=n("GJSB"),r=n("7vHI"),a=n("0/et"),s=n("1LGZ"),l=n("C+EA");n.d(e,"a",function(){return u});var u=function(){function t(){this.dict={}}return t.getInstance=function(){return null==t._instance&&(t._instance=new t,t._instance.itemStorage=i.a.getInstance(),t._instance.dict=new r.a),t._instance},t.prototype.add=function(e,n,o,i,r){if(void 0===i&&(i=null),void 0===r&&(r=null),null!=i&&(i=t.materialFailFunction),!a.a.isStringEmptyOrNull(n)){null==this.dict[n]&&(this.dict[n]={functions:[o],listened:!1,meshes:[e],failFunctions:[i],thisObjs:[r]});var l=this.itemStorage.getItemByNo(n);if(l.resourceReady)this.callback(n,o,e,r);else if(l.detailFailed||l.resourceFailed)this.failCallback(n,i,e,r);else{if(0==this.has(n,o,e)){for(var u in this.dict)n!=u&&this.remove(u,o,e);this.dict[n].functions.push(o),this.dict[n].failFunctions.push(i),this.dict[n].meshes.push(e),this.dict[n].thisObjs.push(r)}0==this.listened(n)&&(l.addEvent(s.a.DESIGN_ITEM_ASSET_READY,this.onResourceReady,this),l.addEvent(s.a.DESIGN_ITEM_ASSET_FAILED,this.onResourceReady,this),this.dict[n].listened=!0)}}},t.prototype.dispose=function(){for(var t in this.dict){this.itemStorage.getItemByNo(t).removeEvent(s.a.DESIGN_ITEM_ASSET_READY,this.onResourceReady,this),this.dict[t].functions.length=0,this.dict[t].functions=null,this.dict[t].meshes.length=0,this.dict[t].meshes=null,this.dict[t].thisObjs=null,delete this.dict[t]}},t.prototype.onResourceReady=function(t){t.target.removeEvent(t.type,this.onResourceReady,this);var e=t.target;this.dict[e.no].listened=!1;for(var n=0;n<this.dict[e.no].functions.length;n++){var o=t.type==s.a.DESIGN_ITEM_ASSET_READY?this.dict[e.no].functions[n]:this.dict[e.no].failFunctions[n];t.type==s.a.DESIGN_ITEM_ASSET_READY?this.callback(e.no,o,this.dict[e.no].meshes[n],this.dict[e.no].thisObjs[n]):this.failCallback(e.no,o,this.dict[e.no].meshes[n],this.dict[e.no].thisObjs[n])}this.dict[e.no].functions=[],this.dict[e.no].failFunctions=[],this.dict[e.no].meshes=[],this.dict[e.no].thisObjs=[]},t.prototype.has=function(t,e,n){if(null==this.dict[t])return!1;for(var o=this.dict[t].functions.length,i=0;i<o;i++)if(this.dict[t].functions[i]==e&&this.dict[t].meshes[i]==n)return!0;return!1},t.prototype.remove=function(t,e,n){var o=this.dict[t];if(o.functions)for(var i=o.functions.length,r=0;r<i;r++)if(this.dict[t].functions[r]==e&&this.dict[t].meshes[r]==n){this.dict[t].functions.splice(r,1),this.dict[t].meshes.splice(r,1),this.dict[t].thisObjs.splice(r,1);break}},t.prototype.listened=function(t){return this.dict[t].listened},t.prototype.callback=function(t,e,n,o){var i=this.itemStorage.getItemByNo(t),r=t;null==l.a.getTextureResourceByKey(r)&&l.a.addTextureResource(r,i.topBMD,i.width,i.length),e.apply(o,[n,t,i.width,i.length])},t.prototype.failCallback=function(t,e,n,o){e.apply(o,[n,t])},t.materialFailFunction=function(t,e){console.log("failed is called.");var n={color:a.a.randomColor()},i=new o.i(n);t.material=i},t}()},fgvt:function(t,e,n){"use strict";function o(t){return s._12(0,[(t()(),s._20(0,null,null,0))],null,null)}function i(t){return s._12(0,[s._13(402653184,1,{container:0}),(t()(),s._15(0,null,null,3,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._20(16777216,[[1,3],["container",2]],null,0,null,o)),(t()(),s._14(null,["\n"])),(t()(),s._14(null,["\n"]))],null,null)}function r(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"window-manager",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},i,h)),s._17(4308992,null,0,l.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var a=n("4s6R"),s=n("/oeL"),l=n("LF0A");n.d(e,"b",function(){return h}),e.a=i;var u=[a.a],h=s._11({encapsulation:0,styles:u,data:{}});s._19("window-manager",l.a,r,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},fpug:function(t,e,n){"use strict";var o=n("oX+v"),i=n("qzI0");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e){var n=t.call(this)||this;return n.data=e,n.depth=i.a.WALL,n.init(),n}return r(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"wall2d"},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.x=this.data.x,this.y=this.data.y,this.rotation=this.data.rotation,this.borderColor=16711422,this.fillColor=16711422,this.draw()},e.prototype.draw=function(){this.width=this.data.realWidth/2+20,this.height=this.data.realLength/2+4,this.graphics.clear(),this.graphics.lineStyle(2,5525602,1),this.graphics.moveTo(this.data.topLeft.x,this.data.topLeft.y),this.graphics.lineTo(this.data.topRight.x,this.data.topRight.y),this.graphics.lineTo(this.data.bottomRight.x,this.data.bottomRight.y),this.graphics.lineTo(this.data.bottomLeft.x,this.data.bottomLeft.y),this.graphics.lineTo(this.data.topLeft.x,this.data.topLeft.y),this.graphics.endStroke(),t.prototype.draw.call(this)},e}(o.a)},fqCj:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.OPENING="Opening",o.STRUCT="Struct"},fqOP:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".label[_ngcontent-%COMP%]{float:left;margin-left:15px;font-size:14px}.radio[_ngcontent-%COMP%]{float:right;margin-top:10px;margin-right:15px;width:22px;height:22px;vertical-align:middle;background-size:100% 100%}"]},fzMI:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.CLICK="click",o.MIDDLE_CLICK="click",o.RIGHT_CLICK="click",o.MOUSE_DOWN="mousedown",o.MIDDLE_MOUSE_DOWN="mousedown",o.RIGHT_MOUSE_DOWN="mousedown",o.MOUSE_UP="mouseup",o.MIDDLE_MOUSE_UP="mouseup",o.RIGHT_MOUSE_UP="mouseup",o.DOUBLE_CLICK="dblclick",o.MOUSE_MOVE="mousemove",o.MOUSE_OVER="mouseover",o.MOUSE_OUT="mouseout",o.MOUSE_WHEEL="mousewheel",o.DOM_MOUSE_WHEEL="DOMMouseScroll",o.DRAG="drag",o.DRAG_START="dragstart",o.DRAG_END="dragend",o.DRAG_ENTER="dragenter",o.DRAG_LEAVE="dragleave",o.DRAG_OVER="dragover",o.DROP="drop"},gdOB:function(t,e,n){"use strict";var o=n("lpfp");n.d(e,"a",function(){return i});var i=function(){function t(t,e,n,o,i,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=0),void 0===r&&(r=0),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.angle=0,this.scaleX=1,this.scaleY=1,this.a=t,this.b=e,this.c=n,this.d=o,this.tx=i,this.ty=r}return t.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},t.prototype.scale=function(t,e){this.a=Math.cos(this.angle),this.b=Math.sin(this.angle),this.c=-Math.sin(this.angle),this.d=Math.cos(this.angle),this.a*=t,this.d*=e},t.prototype.rotate=function(t){this.angle+=t,this.a=Math.cos(this.angle),this.b=Math.sin(this.angle),this.c=-Math.sin(this.angle),this.d=Math.cos(this.angle),this.a*=this.scaleX,this.d*=this.scaleY},t.prototype.transformPoint=function(t){var e=this.a*t.x+this.c*t.y+this.tx,n=this.b*t.x+this.d*t.y+this.ty;return new o.a(e,n)},t.prototype.deltaTransformPoint=function(t){var e=this.a*t.x+this.c*t.y,n=this.b*t.x+this.d*t.y;return new o.a(e,n)},t.prototype.identity=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.angle=0,this.scaleX=1,this.scaleY=1},t.getMatrixByPoints=function(e,n){var o=[e[0].x,e[0].y,1,n[0].x],i=[e[1].x,e[1].y,1,n[1].x],r=[e[2].x,e[2].y,1,n[2].x],a=t.equation(o,i,r),s=a[0],l=a[1],u=a[2];o=[e[0].x,e[0].y,1,n[0].y],i=[e[1].x,e[1].y,1,n[1].y],r=[e[2].x,e[2].y,1,n[2].y];var h=t.equation(o,i,r);return new t(s,h[0],l,h[1],u,h[2])},t.equation=function(t,e,n){var o=t[0],i=t[1],r=t[2],a=t[3],s=e[0],l=e[1],u=e[2],h=e[3],c=n[0],p=n[1],d=n[2],f=n[3],g=o*l*d+i*u*c+r*s*p-o*u*p-i*s*d-r*l*c;return[(a*l*d+i*u*f+r*h*p-a*u*p-i*h*d-r*l*f)/g,(o*h*d+a*u*c+r*s*f-o*u*f-a*s*d-r*h*c)/g,(o*l*f+i*h*c+a*s*p-o*h*p-i*s*f-a*l*c)/g]},t}()},gn8q:function(t,e,n){"use strict";var o=n("lpfp"),i=n("0/et"),r=n("3qcR");n.d(e,"a",function(){return a});var a=function(){function t(t,e,n,o){void 0===n&&(n=0),void 0===o&&(o=null),this.start=null,this.stop=null,this.mark="",this.mode=0,this.anchor=null,this._dir=null,this.start=t,this.stop=e,this.mode=n,this.anchor=o,this.mark=null,this._dir=e.subtract(t),this._dir.normalize()}return t.prototype.clone=function(){var e=new t(this.start.clone(),this.stop.clone(),this.mode,this.anchor);return e.mark=this.mark,e},t.prototype.equal=function(t){return!(!i.a.isPointEqual(this.start,t.start)||!i.a.isPointEqual(this.stop,t.stop))},t.prototype.endsEqual=function(t){return i.a.isLineEndsEqual(this.start,this.stop,t.start,t.stop)},t.prototype.containsEqual=function(t){return 1==i.a.isPointOnSegment(this.start,this.stop,t.start)&&1==i.a.isPointOnSegment(this.start,this.stop,t.stop)},Object.defineProperty(t.prototype,"length",{get:function(){return this.start.subtract(this.stop).length},enumerable:!0,configurable:!0}),t.prototype.tostring=function(){return"Segment( "+this.start.toString()+this.stop.toString()+" )"},Object.defineProperty(t.prototype,"center",{get:function(){return new o.a(.5*(this.start.x+this.stop.x),.5*(this.start.y+this.stop.y))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return new r.a(this.start,this._dir)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),t.prototype.isPointOnSegment=function(t){return i.a.isPointOnSegment(this.start,this.stop,t)},t.prototype.isPointInSegment=function(t){return i.a.isPointInSegment(this.start,this.stop,t)},t.prototype.isContainSegment=function(t){return this.isPointOnSegment(t.start)&&this.isPointOnSegment(t.stop)},t.segmentOverlap=function(e,n){if(i.a.isPointOnSegment(e.start,e.stop,n.start)&&i.a.isPointOnSegment(e.start,e.stop,n.stop))return new t(n.start,n.stop);if(i.a.isPointOnSegment(n.start,n.stop,e.start)&&i.a.isPointOnSegment(n.start,n.stop,e.stop))return new t(e.start,e.stop);if(i.a.isPointOnSegment(e.start,e.stop,n.start)){if(i.a.isPointOnSegment(n.start,n.stop,e.start))return new t(n.start,e.start);if(i.a.isPointOnSegment(n.start,n.stop,e.stop))return new t(n.start,e.stop)}else if(i.a.isPointOnSegment(e.start,e.stop,n.stop)){if(i.a.isPointOnSegment(n.start,n.stop,e.start))return new t(n.stop,e.start);if(i.a.isPointOnSegment(n.start,n.stop,e.stop))return new t(n.stop,e.stop)}return null},t.segmentMapOverlap=function(e,n){var o=i.a.calcFoot(e.start,e.stop,n.start),r=i.a.calcFoot(e.start,e.stop,n.stop);return this.segmentOverlap(e,new t(o,r))},t}()},gvna:function(t,e,n){"use strict";var o=n("PbJf"),i=n("Wilg"),r=n("WFe8");n.d(e,"a",function(){return a});var a=function(){function t(){this.storeyHeight=0,this._rulerUnit=0,this.orientation=0,this.wallThickness=12,this.wallRulerMode=0;var t=window.localStorage.getItem("storeyHeight");this.storeyHeight=t?parseInt(t):r.a.DEFAULT_HEIGHT;var e=window.localStorage.getItem("wallThickness");this.wallThickness=e?parseInt(e):r.a.DEFAULT_LENGTH,this.rulerUnit=o.a.MM,this.orientation=0,this.wallRulerMode=i.a.INLINE}return Object.defineProperty(t.prototype,"rulerUnit",{get:function(){return this._rulerUnit},set:function(t){this._rulerUnit!=t&&(this._rulerUnit=t)},enumerable:!0,configurable:!0}),t.prototype.getWallThickness=function(t){return void 0===t&&(t=o.a.CM),this.transferByUnit(this.wallThickness,t)},t.prototype.setWallThickness=function(t){t=Math.min(t,r.a.MAX_LENGTH),t=Math.max(t,r.a.MIN_LENGTH),this.wallThickness=t},t.prototype.getStoreyHeight=function(t){return this.transferByUnit(this.storeyHeight,t)},t.prototype.setStoreyHeight=function(t){t=Math.min(t,r.a.MAX_HEIGHT),t=Math.max(t,r.a.MIN_HEIGHT),this.storeyHeight=t},t.prototype.dumpData=function(){return{storeyHeight:this.storeyHeight,rulerUnit:this.rulerUnit,orientation:this.orientation}},t.prototype.loadData=function(t){t.hasOwnProperty("rulerUnit")&&(this.rulerUnit=t.rulerUnit),t.hasOwnProperty("storeyHeight")&&(this.storeyHeight=t.storeyHeight),t.hasOwnProperty("orientation")&&(this.orientation=t.orientation)},t.prototype.transferByUnit=function(t,e){return e==o.a.MM?10*t:e==o.a.CM?t:t/100},t}()},h8cR:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.NORMAL=1,o.PANORAMA=2,o.OVERLOOK=3},hcJx:function(t,e,n){"use strict";var o=n("MPvg");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){return t.call(this)||this}return i(e,t),e}(o.m)},ic9J:function(t,e,n){"use strict";var o=n("1z8p");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(){var e=t.call(this)||this;return e._dom=document.body,e}return i(e,t),e}(o.a)},ihW0:function(t,e,n){"use strict";var o=n("mfrV"),i=n("fPy1"),r=n("v7PY"),a=n("matE");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var n=t.call(this,!1)||this;return n._decimalPlaces=0,n._value=0,n._inputable=!1,n._inputData=null,n.inputNumberScale=1,n._selected=!1,n.initValue=0,n.angle=0,n.dom.style.borderRadius="2px",n.dom.style.padding="1px 4px 1px 4px",n.color=r.a.toString(r.a.FONT),n.size=12,n.textGlow=e.WHITE_SHADOW,n.borderColor=r.a.toString(a.a.MASTER),n.inputable=!1,n.inputData=null,n.decimalPlaces=0,n.value=0,n}return s(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"RulerInput"},enumerable:!0,configurable:!0}),e.prototype.changeValue=function(){this.value=this.textValue;var t=new i.a(i.a.CHANGE,null,this.value,this.inputData);if(this.inputData){var e=this.inputData.direct;if(e){var n,o=this._value/this.inputNumberScale,r=this.initValue/this.inputNumberScale;n=this.inputData.value?Math.min(o,this.inputData.value)-r:o-r,n<0&&(e.x*=-1,e.y*=-1);var a=Math.abs(n);e.normalize(a),t.changeVector=e}}this.dispatchEvent(t,this)},e.prototype.rotate=function(t){this.angle=t,this.rotation=t},e.prototype.touchStart=function(t){this.dispatchEvent(new i.a(i.a.CLICK,this),this),this.selected=!0},Object.defineProperty(e.prototype,"decimalPlaces",{get:function(){return this._decimalPlaces},set:function(t){this._decimalPlaces=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.textValue=t,this._value=this.textValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputable",{get:function(){return this._inputable},set:function(t){this._inputable=t,1==this._inputable?(this.selected=!1,this.touchEnable=!0):(this.borderThickness=0,this.color=r.a.toString(r.a.FONT),this.textGlow=e.WHITE_SHADOW,this.backgroundColor=r.a.toRGBAstring(0,0),this.touchEnable=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,1==t?(this.borderThickness=1,this.color=r.a.toString(r.a.WHITE),this.textGlow="",this.backgroundColor=r.a.toRGBAstring(a.a.MASTER,1)):(this.borderThickness=1,this.color=r.a.toString(a.a.MASTER),this.textGlow="",this.backgroundColor=r.a.toRGBAstring(r.a.WHITE,1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputData",{get:function(){return this._inputData},set:function(t){this._inputData=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textValue",{get:function(){return Number(Number(this.text).toFixed(this.decimalPlaces))},set:function(t){var e=t.toFixed(this.decimalPlaces);this.text=e,this.x=8*-e.length/2,this.y=-20},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.selected=!1,this.inputable=!1,this.inputData=null,this.value=0,this.initValue=0,this.decimalPlaces=0,this.inputNumberScale=1,this.angle=0,this.rotation=0},e}(o.a);l.WHITE_SHADOW="0px 0px 2px #ffffff , -0px -0px 2px #ffffff"},iwYP:function(t,e,n){"use strict";var o=n("7vHI");n.d(e,"a",function(){return i});var i=function(){function t(){this.selectAll=!1,this.typeDic=new o.a}return t.prototype.reset=function(){this.selectAll=!1,this.typeDic=new o.a},t.prototype.addSelectType=function(t,e){if(void 0===e&&(e=[]),this.typeDic[t]=!0,e&&e.length)for(var n=0,o=e;n<o.length;n++){var i=o[n];this.typeDic[i]=!0}},t.prototype.excludeSelectType=function(t,e){if(this.typeDic[t]=!1,e&&e.length)for(var n=0,o=e;n<o.length;n++){var i=o[n];this.typeDic[i]=!1}},t.prototype.isEffectType=function(t){return(!this.typeDic.hasOwnProperty(t)||0!=this.typeDic[t])&&(!!this.selectAll||!(!this.typeDic.hasOwnProperty(t)||1!=this.typeDic[t]))},t}()},j23w:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.wallLength=24}return t}()},j5mp:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("v7PY");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.color=r.a.toString(r.a.LINE2),o.renderer.setStyle(o.dom,"background-color",o.color),o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},j8JM:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.TOUCH_START="touchstart",o.TOUCH_MOVE="touchmove",o.TOUCH_END="touchend"},jCBq:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{content0:0}),a._13(402653184,2,{content1:0}),a._13(402653184,3,{content2:0}),a._13(402653184,4,{content3:0}),a._13(671088640,5,{labelQueryList:1}),a._13(671088640,6,{buttonQueryList:1}),(t()(),a._15(0,null,null,13,"div",[["class","title"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"label",[["class","titleButton"],["colorStyle","4"],["height","24px"],["text","厅"],["textSize","14"],["width","42px"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,9)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.navigate(0)&&o}return o},l.a,l.b)),a._17(4308992,[[5,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],text:[4,"text"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"label",[["class","titleButton"],["colorStyle","4"],["height","24px"],["text","室"],["textSize","14"],["width","42px"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,12)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.navigate(1)&&o}return o},l.a,l.b)),a._17(4308992,[[5,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],text:[4,"text"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"label",[["class","titleButton"],["colorStyle","4"],["height","24px"],["text","厨卫"],["textSize","14"],["width","42px"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,15)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.navigate(2)&&o}return o},l.a,l.b)),a._17(4308992,[[5,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],text:[4,"text"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"label",[["class","titleButton"],["colorStyle","4"],["height","24px"],["text","其他"],["textSize","14"],["width","42px"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,18)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.navigate(3)&&o}return o},l.a,l.b)),a._17(4308992,[[5,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],colorStyle:[2,"colorStyle"],textSize:[3,"textSize"],text:[4,"text"]},null),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[1,0],["content0",1]],null,13,"div",[["class","content"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","门厅"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,24)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,24).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,24).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,24).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,24).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,24).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,24).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,24).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("门厅")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","客厅"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,27)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,27).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,27).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,27).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,27).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,27).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,27).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,27).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("客厅")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","餐厅"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,30)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,30).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,30).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,30).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,30).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,30).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,30).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,30).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("餐厅")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","客餐厅"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,33)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,33).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,33).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,33).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,33).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,33).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,33).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,33).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("客餐厅")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[2,0],["content1",1]],null,22,"div",[["class","content"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","主卧"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,39)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,39).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,39).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,39).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,39).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,39).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,39).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,39).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("主卧")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","次卧"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,42)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,42).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,42).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,42).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,42).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,42).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,42).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,42).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("次卧")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","书房"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,45)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,45).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,45).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,45).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,45).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,45).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,45).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,45).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("书房")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","儿童房"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,48)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,48).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,48).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,48).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,48).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,48).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,48).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,48).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("儿童房")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","储物室"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,51)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,51).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,51).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,51).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,51).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,51).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,51).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,51).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("储物室")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","多功能室"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,54)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,54).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,54).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,54).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,54).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,54).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,54).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,54).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("多功能室")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","衣帽间"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,57)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,57).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,57).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,57).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,57).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,57).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,57).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,57).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("衣帽间")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[3,0],["content2",1]],null,10,"div",[["class","content"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","厨房"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,63)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,63).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,63).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,63).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,63).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,63).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,63).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,63).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("厨房")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","卫生间"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,66)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,66).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,66).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,66).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,66).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,66).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,66).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,66).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("卫生间")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","盥洗室"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,69)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,69).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,69).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,69).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,69).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,69).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,69).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,69).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("盥洗室")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[4,0],["content3",1]],null,13,"div",[["class","content"]],null,null,null,null,null)),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","玄关"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,75)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,75).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,75).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,75).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,75).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,75).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,75).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,75).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("玄关")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","阳台"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,78)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,78).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,78).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,78).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,78).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,78).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,78).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,78).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("阳台")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","露台"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,81)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,81).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,81).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,81).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,81).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,81).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,81).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,81).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("露台")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n    "])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","roomTypeButton"],["colorStyle","9"],["height","40px"],["label","入户花园"],["radius","7"],["textSize","16"],["width","78px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,84)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,84).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,84).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,84).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,84).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,84).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,84).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,84).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.roomTypeClick("入户花园")&&o}return o},h.a,h.b)),a._17(4308992,[[6,4]],0,c.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],radius:[2,"radius"],colorStyle:[3,"colorStyle"],textSize:[4,"textSize"],label:[5,"label"]},null),(t()(),a._14(null,["\n"]))],function(t,e){t(e,9,0,"42px","24px","4","14","厅");t(e,12,0,"42px","24px","4","14","室");t(e,15,0,"42px","24px","4","14","厨卫");t(e,18,0,"42px","24px","4","14","其他");t(e,24,0,"78px","40px","7","9","16","门厅");t(e,27,0,"78px","40px","7","9","16","客厅");t(e,30,0,"78px","40px","7","9","16","餐厅");t(e,33,0,"78px","40px","7","9","16","客餐厅");t(e,39,0,"78px","40px","7","9","16","主卧");t(e,42,0,"78px","40px","7","9","16","次卧");t(e,45,0,"78px","40px","7","9","16","书房");t(e,48,0,"78px","40px","7","9","16","儿童房");t(e,51,0,"78px","40px","7","9","16","储物室");t(e,54,0,"78px","40px","7","9","16","多功能室");t(e,57,0,"78px","40px","7","9","16","衣帽间");t(e,63,0,"78px","40px","7","9","16","厨房");t(e,66,0,"78px","40px","7","9","16","卫生间");t(e,69,0,"78px","40px","7","9","16","盥洗室");t(e,75,0,"78px","40px","7","9","16","玄关");t(e,78,0,"78px","40px","7","9","16","阳台");t(e,81,0,"78px","40px","7","9","16","露台");t(e,84,0,"78px","40px","7","9","16","入户花园")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"room-setting",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1).touchMove(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).touchStart(n)&&o}return o},o,d)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("XOoE"),a=n("/oeL"),s=n("JCpi"),l=n("/lk0"),u=n("HiNH"),h=n("Esur"),c=n("IO5Z");n.d(e,"b",function(){return d}),e.a=o;var p=[r.a],d=a._11({encapsulation:0,styles:p,data:{}});a._19("room-setting",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},jDyV:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.WALL=101,o.PILLAR=201,o.FLUE=202},jr7g:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.data={},this.position=!1,this.scale=!1,this.rotation=!1}return Object.defineProperty(t.prototype,"position",{get:function(){return this.data[t.POSITION_CHANGE]},set:function(e){this.data[t.POSITION_CHANGE]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.data[t.SCALE_CHANGE]},set:function(e){this.data[t.SCALE_CHANGE]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.data[t.ROTATION_CHANGE]},set:function(e){this.data[t.ROTATION_CHANGE]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this.data[t.ROTATION_X_CHANGE]},set:function(e){this.data[t.ROTATION_X_CHANGE]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this.data[t.ROTATION_Y_CHANGE]},set:function(e){this.data[t.ROTATION_Y_CHANGE]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this.data[t.ROTATION_Z_CHANGE]},set:function(e){this.data[t.ROTATION_Z_CHANGE]=e},enumerable:!0,configurable:!0}),t}();o.POSITION_CHANGE="position",o.SCALE_CHANGE="scale",o.ROTATION_CHANGE="rotation",o.ROTATION_X_CHANGE="rotationX",o.ROTATION_Y_CHANGE="rotationY",o.ROTATION_Z_CHANGE="rotationZ"},jroH:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}()},k4ju:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(671088640,1,{buttonQueryList:1}),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,2,"icon-button",[["class","icon-button"],["height","42px"],["isShowBg","false"],["left","25"],["width","42px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,3)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,3).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,3).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,3).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,3).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,3).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,3).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,3).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.undoHandler()&&o}return o},l.a,l.b)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],left:[2,"left"],iconUp:[3,"iconUp"],iconDown:[4,"iconDown"],isShowBg:[5,"isShowBg"]},null),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,2,"icon-button",[["class","icon-button"],["height","42px"],["isShowBg","false"],["left","92"],["width","42px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,8)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,8).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,8).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,8).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,8).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,8).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,8).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,8).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.redoHandler()&&o}return o},l.a,l.b)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],left:[2,"left"],iconUp:[3,"iconUp"],iconDown:[4,"iconDown"],isShowBg:[5,"isShowBg"]},null),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,2,"icon-button",[["class","icon-button"],["height","42px"],["isShowBg","false"],["right","25"],["width","42px"]],null,[[null,"touchstart"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchend"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,13)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,13).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,13).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,13).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,13).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,13).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,13).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,13).touchEnd(n)&&o}if("touchstart"===e){o=!1!==i.saveHandler()&&o}return o},l.a,l.b)),a._17(4308992,[[1,4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],right:[2,"right"],iconUp:[3,"iconUp"],iconDown:[4,"iconDown"],isShowBg:[5,"isShowBg"]},null),(t()(),a._14(null,["\n"]))],function(t,e){var n=e.component;t(e,3,0,"42px","42px","25",n.undoUp,n.undoDown,"false");t(e,8,0,"42px","42px","92",n.redoUp,n.redoDown,"false");t(e,13,0,"42px","42px","25",n.saveUp,n.saveDown,"false")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"bottom-toolbar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("czmY"),a=n("/oeL"),s=n("l96L"),l=n("0NNx"),u=n("bO4n");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("bottom-toolbar",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},kKgc:function(t,e,n){"use strict";var o=n("SScf"),i=n("j8JM"),r=n("L7Bd"),a=n("+N0H"),s=n("0/et");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(){var e=t.call(this,!1,!1)||this;e.scene=null,e.onTagTouch=function(t){},e.scene=a.a.inst;for(var n in e.scene.walls){var o=e.scene.walls[n];e.drawFacade(o)}return e}return l(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"FacadeTagGroup"},enumerable:!0,configurable:!0}),e.prototype.drawFacade=function(t){if(!t.empty){var e=s.a.rotateVector(t.start.subtract(t.stop),Math.PI/2);e.normalize(12);var n=t.localToSceneMatrix,o=n.transformPoint(t.topLeft),i=n.transformPoint(t.topRight),r=n.transformPoint(t.bottomRight),a=n.transformPoint(t.bottomLeft);t.adjacentRoomCount>0?(t.forwardRoom&&this.add(t.name,o.add(e),i.add(e)),t.backwardRoom&&this.add(t.name,r.subtract(e),a.subtract(e))):(this.add(t.name,o.add(e),i.add(e)),s.a.isNumberEqual(o.subtract(i).length,r.subtract(a).length)||this.add(t.name,r.subtract(e),a.subtract(e)))}},e.prototype.add=function(t,e,n){var o=new r.a(t,e,n);o.addEventListener(i.a.TOUCH_END,this.onTagTouch);var a=1/this.scene.scaleX;o.setScale(a,a),this.addChild(o)},e.prototype.clear=function(){for(var t=0;t<this.numChildren;t++){var e=this.getChildAt(t);e.removeEventListener(i.a.TOUCH_END,this.onTagTouch),this.removeChild(e)}},e}(o.a)},kUfx:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("YihH"),a=n("FtES"),s=n("+ByO");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.closeIconUp="assets/view/settingbars/close_3x.png",o.closeIconDown="assets/view/settingbars/close_3x.png",o}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.width="375px",r.a.inst.addEvent(a.a.SETTINGS_CONFIRM,this.onConfirm,this)},e.prototype.setTargetOpening=function(t){this.targetOpening=t,this.openingWidthInput.finalLabel=Math.round(10*t.realWidth).toString(),this.openingHeightInput.finalLabel=Math.round(10*t.realHeight).toString(),this.openingLengthInput.finalLabel=Math.round(10*t.realLength).toString(),this.openingOffGroundInput.finalLabel=Math.round(10*t.realZ).toString(),this.openingWidthInput.selected=!1,this.openingHeightInput.selected=!1,this.openingLengthInput.selected=!1,this.openingOffGroundInput.selected=!1},e.prototype.showOpeningWidthSetting=function(){1==this.openingWidthInput.editable&&(this.openingWidthInput.selected=!0,this.currentInput=this.openingWidthInput,this.openingHeightInput.selected=!1,this.openingHeightInput.resetLabel(),this.openingLengthInput.selected=!1,this.openingLengthInput.resetLabel(),this.openingOffGroundInput.selected=!1,this.openingOffGroundInput.resetLabel(),r.a.inst.open(this.targetOpening,Math.round(10*this.targetOpening.realWidth)))},e.prototype.showOpeningHeightSetting=function(){1==this.openingHeightInput.editable&&(this.openingHeightInput.selected=!0,this.currentInput=this.openingHeightInput,this.openingWidthInput.selected=!1,this.openingWidthInput.resetLabel(),this.openingLengthInput.selected=!1,this.openingLengthInput.resetLabel(),this.openingOffGroundInput.selected=!1,this.openingOffGroundInput.resetLabel(),r.a.inst.open(this.targetOpening,Math.round(10*this.targetOpening.realHeight)))},e.prototype.showOpeningLengthSetting=function(){1==this.openingLengthInput.editable&&(this.openingLengthInput.selected=!0,this.currentInput=this.openingLengthInput,this.openingWidthInput.selected=!1,this.openingWidthInput.resetLabel(),this.openingHeightInput.selected=!1,this.openingHeightInput.resetLabel(),this.openingOffGroundInput.selected=!1,this.openingOffGroundInput.resetLabel(),r.a.inst.open(this.targetOpening,Math.round(10*this.targetOpening.realLength)))},e.prototype.showOpeningOffGroundSetting=function(){1==this.openingOffGroundInput.editable&&(this.openingOffGroundInput.selected=!0,this.currentInput=this.openingOffGroundInput,this.openingWidthInput.selected=!1,this.openingWidthInput.resetLabel(),this.openingHeightInput.selected=!1,this.openingHeightInput.resetLabel(),this.openingLengthInput.selected=!1,this.openingLengthInput.resetLabel(),r.a.inst.open(this.targetOpening,Math.round(10*this.targetOpening.realZ)))},e.prototype.close=function(){s.a.inst.close()},e.prototype.onConfirm=function(t){var e=t.data,n=e.target,o=e.value;this.targetOpening==n&&this.currentInput&&(this.currentInput==this.openingWidthInput?this.targetOpening.doChangeWidth(Math.round(o/10)):this.currentInput==this.openingHeightInput?this.targetOpening.doChangeHeight(Math.round(o/10)):this.currentInput==this.openingLengthInput?this.targetOpening.doChangeHeight(Math.round(o/10)):this.currentInput==this.openingOffGroundInput&&this.targetOpening.doChangeZ(Math.round(o/10)),this.setTargetOpening(this.targetOpening))},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},kg3E:function(t,e,n){"use strict";var o=n("YDFo");n.d(e,"a",function(){return i});var i=function(){function t(){this.canvas=new o.a}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.copyImage=function(t,e,n){this.canvas.width=e,this.canvas.height=n,this.canvas.beginBitmapFill(t);var o=this.canvas.bitmapdata;return this.clear(),o},t.prototype.copyImage2=function(t,e,n){return this.canvas.width=e,this.canvas.height=n,this.canvas.beginBitmapFill(t),this.canvas},t.prototype.clear=function(){this.canvas.width=0,this.canvas.height=0},t}()},l96L:function(t,e,n){"use strict";var o=n("/oeL"),i=n("+N0H"),r=n("/T2q"),a=n("Dvc5"),s=n("qJEM"),l=n("YihH"),u=n("+ByO"),h=n("PpJG");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.undoUp="",i.undoDown="",i.redoUp="",i.redoDown="",i.saveUp="",i.saveDown="",i.buttons=[],i.undoable=!1,i.redoable=!1,i.savable=!1,e.inst=i,i}return c(e,t),e.prototype.ngOnInit=function(){this.undoUp="assets/view/toolbar/undo_up_3x.png",this.undoDown="assets/view/toolbar/undo_up_3x.png",this.redoUp="assets/view/toolbar/redo_up_3x.png",this.redoDown="assets/view/toolbar/redo_up_3x.png",this.saveUp="assets/view/toolbar/save_up_3x.png",this.saveDown="assets/view/toolbar/save_up_3x.png"},e.prototype.ngAfterViewInit=function(){this.buttons=this.buttonQueryList.toArray(),this.scene=i.a.inst,this.scene.addEvent(r.a.MSCENE_CONTENT_CHANGED,this.onMSceneContentChanged,this),this.update()},e.prototype.onMSceneContentChanged=function(t){this.undoable=this.scene.backup.undoable,this.redoable=this.scene.backup.redoable,this.savable=this.scene.savable,this.update()},e.prototype.update=function(){this.buttons[0].visible=this.undoable+"",this.buttons[1].visible=this.redoable+"",this.buttons[2].visible=this.savable+"",1==this.undoable?this.buttons[1].left=92:this.buttons[1].left=25},e.prototype.saveHandler=function(){this.closeSettingUI(),h.a.inst.save()},e.prototype.undoHandler=function(){this.closeSettingUI(),1==this.undoable&&this.scene.undo()},e.prototype.redoHandler=function(){this.closeSettingUI(),1==this.redoable&&this.scene.redo()},e.prototype.show=function(t){this.visible=1==t?"true":"false"},e.prototype.closeSettingUI=function(){i.a.inst.unfocus(),s.a.inst.close(),l.a.inst.close(),u.a.inst.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(a.a);p.inst=null},lSRa:function(t,e,n){"use strict";var o=n("/gn8"),i=n("0/et"),r=n("lpfp"),a=n("Gd3X"),s=n("J78+"),l=n("aNcW");n.d(e,"a",function(){return u});var u=function(){function t(){this._vertices=null,this._area=0,this._holes=null,this._vertices=[],this._holes=[]}return Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this._vertices.length},enumerable:!0,configurable:!0}),t.prototype.addVertex=function(t){this.addVertexXYZ(t.x,t.y,t.z)},t.prototype.addVertexXYZ=function(t,e,n){this._vertices.push(new o.a(t,e,n))},t.prototype.getVertexAt=function(t){return this._vertices[t]},t.prototype.preVertex=function(t){return this._vertices[i.a.preIndex(t,this.vertexCount)]},t.prototype.nextVertex=function(t){return this._vertices[i.a.nextIndex(t,this.vertexCount)]},Object.defineProperty(t.prototype,"holes",{get:function(){return this._holes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"holeCount",{get:function(){return this._holes.length},enumerable:!0,configurable:!0}),t.prototype.addHole=function(t){0!=t.vertexCount&&this._holes.push(t)},t.prototype.reverse=function(){this.reverseVertices()},t.prototype.reverseVertices=function(){this._vertices=this._vertices.reverse()},t.prototype.faceNormal=function(){return this.autoNormal()},t.prototype.autoNormal=function(){for(var t=this.vertexCount,e=new o.a,n=0;n<t;n++){var i=this._vertices[n].subtract(this.preVertex(n)),r=this.nextVertex(n).subtract(this.preVertex(n)),a=i.crossProd(r);e.x+=a.x,e.y+=a.y,e.z+=a.z}return e.normalize(),e},t.prototype.applyTransform=function(t){for(var e=0;e<this.vertexCount;e++)this._vertices[e]=t.transformPoint(this._vertices[e])},t.prototype.triangulate=function(e){void 0===e&&(e=null),null==e&&(e=new Array);var n=this._vertices[1].subtract(this._vertices[0]);n.normalize();var r=this.faceNormal();r.normalize();var u=n.crossProd(r),h=[u.x,n.x,r.x,this._vertices[0].x,u.y,n.y,r.y,this._vertices[0].y,u.z,n.z,r.z,this._vertices[0].z,0,0,0,1],c=new l.a(h),p=c.clone();p.invert(),p.transpose();for(var d,f,g,m=new s.a,_=0,y=this._vertices;_<y.length;_++){var b=y[_];g=p.transformPoint(b),m.addVertexXY(g.x,g.y)}if(null==(m=i.a.simplifyPolygon(m)))return[];for(var v,w=new Array,O=0,x=e;O<x.length;O++){var E=x[O];for(v=new s.a,d=0;d<E.vertexCount;d++)g=p.transformPoint(E.vertices[d]),v.addVertexXY(g.x,g.y);w.push(v.points)}for(var P=new Array,C=a.a.triangulateSafe(m.points,w),A=0,N=C;A<N.length;A++){for(var S=N[A],M=new t,T=0,L=S;T<L.length;T++){f=L[T];var R=c.transformPoint(new o.a(f.x,f.y,0));M.addVertex(R)}P.push(M)}return P},t.prototype.calVertexUVs=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),n||(n=this._vertices[1].subtract(this._vertices[0])),o||(o=this._vertices[0]),n.normalize();var i=this.autoNormal();i.normalize();var a=n.crossProd(i),u=[a.x,a.y,a.z,0,n.x,n.y,n.z,0,i.x,i.y,i.z,0,0,0,0,1],h=new l.a(u);h.transpose();for(var c=h.transformPoint(o),p=new s.a,d=0,f=this._vertices;d<f.length;d++){var g=f[d],m=h.transformPoint(g);p.addVertexXY(m.x,m.y)}return p.calVertexUVs(t,e,new r.a(c.x,c.y))},t.prototype.generateVertexUVs=function(t,e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),null==n&&(n=this._vertices[1].subtract(this._vertices[0])),null==o&&(o=this._vertices[0]),n.normalize();var i=this.faceNormal();i.normalize();var a=n.crossProd(i),u=[a.x,a.y,a.z,0,n.x,n.y,n.z,0,i.x,i.y,i.z,0,0,0,0,1],h=new l.a(u),c=h.clone();c.transpose(),o=c.transformPoint(o);for(var p=new r.a(o.x,o.y),d=new s.a,f=0,g=this._vertices;f<g.length;f++){var m=g[f],_=c.transformPoint(m);d.addPointXY(_.x,_.y)}return d.generateVertexUVs(t,e,p)},Object.defineProperty(t.prototype,"vertices",{get:function(){return this._vertices},enumerable:!0,configurable:!0}),t.prototype.valid_polygon=function(){for(var e,n=new t,o=this.vertexCount-1;o>=0;o--){e=!1;for(var r=0;r<o;r++)if(i.a.isPoint3DEqual(this.getVertexAt(r),this.getVertexAt(o),.01)){e=!0;break}0==e&&n.addVertex(this.getVertexAt(o))}return n.vertices.reverse(),n},t.prototype.transform=function(e,n){void 0===n&&(n=!1);var o;if(n){for(var i=0,r=this._vertices;i<r.length;i++)o=r[i],o.copyFrom(e.transformPoint(o));return this}for(var a=new t,s=0,l=this._vertices;s<l.length;s++)o=l[s],a.addVertex(e.transformPoint(o));return a},t.transformPolygons=function(t,e,n){void 0===n&&(n=!1);var o;if(n){for(var i=0,r=t;i<r.length;i++)o=r[i],o.transform(e,n);return t}for(var a=new Array,s=0,l=t;s<l.length;s++)o=l[s],a.push(o.transform(e,n));return a},Object.defineProperty(t.prototype,"area",{get:function(){var t=this._vertices[1].subtract(this._vertices[0]);t.normalize();var e=this.faceNormal();e.normalize();var n=t.crossProd(e),o=[n.x,t.x,e.x,this._vertices[0].x,n.y,t.y,e.y,this._vertices[0].y,n.z,t.z,e.z,this._vertices[0].z,0,0,0,1],i=new l.a(o),a=i.clone();a.invert(),a.transpose();for(var u,h=new s.a,c=0,p=this._vertices;c<p.length;c++){var d=p[c];u=a.transformPoint(d),h.addVertex(new r.a(u.x,u.y))}return h.area},enumerable:!0,configurable:!0}),t}()},lbyz:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[""]},lg9f:function(t,e,n){"use strict";var o=n("/gn8"),i=n("0/et");n.d(e,"a",function(){return r});var r=function(){function t(t,e){this._p0=null,this._dir=null,this._p0=t,this._dir=e}return Object.defineProperty(t.prototype,"p0",{get:function(){return this._p0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),t.prototype.intersectionWithPlane=function(t){var e=this.dir.dotProd(t.dir);if(i.a.isNumberEqual(e,0))return null;var n=-this.p0.subtract(t.p0).dotProd(t.dir)/e;return{point:new o.a(this.p0.x+this.dir.x*n,this.p0.y+this.dir.y*n,this.p0.z+this.dir.z*n),t:n}},t.prototype.clone=function(){return new t(this._p0.clone(),this._dir.clone())},t.prototype.transform=function(e){return new t(e.transformPoint(this._p0),e.deltaTransformPoint(this._dir))},t}()},ljPL:function(t,e,n){"use strict";var o=n("lpfp");n.d(e,"a",function(){return i});var i=function(){function t(t){this._mode="",this.target=null,this.value=0,this.maxValue=999999999,this.direct=new o.a,this.mode=t}return Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){var e=new t(this.mode);return e.target=this.target,e.value=this.value,e.maxValue=this.maxValue,e.direct=this.direct,e},t}()},lpfp:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._x=0,this._y=0,this._x=t,this._y=e}return t.prototype.clone=function(){return new t(this._x,this._y)},t.prototype.setTo=function(t,e){this.x=t,this.y=e},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.zero=function(){return this._x=0,this._y=0,this},t.prototype.isZero=function(){return 0==this._x&&0==this._y},Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(t){var e=this.angle;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return Math.atan2(this._y,this._x)},set:function(t){var e=this.length;this._x=Math.cos(t)*e,this._y=Math.sin(t)*e},enumerable:!0,configurable:!0}),t.prototype.rotate=function(t,e){var n=this.subtract(t);return n.angle+=e,t.add(n)},t.prototype.getMidpoint=function(t){return t.add(this).multiply(.5)},t.prototype.getVerticalLine=function(e,n){if(e.equals(n))return e.subtract(this);var o,i=n.subtract(e),r=this.subtract(e),a=t.angleBetween(r,i);return i.length=r.length*Math.cos(a),o=e.add(i).subtract(this),Math.abs(o.x)<.01&&(o.x=0),Math.abs(o.y)<.01&&(o.y=0),o},t.prototype.normalize=function(t){if(void 0===t&&(t=1),0==this.length)return this._x=t,this;var e=this.length;return this.x=this.x/e*t,this.y=this.y/e*t,this},t.prototype.truncate=function(t){return this.length=Math.min(t,this.length),this},t.prototype.reverse=function(){return this._x=-this._x,this._y=-this._y,this},t.prototype.isNormalized=function(){return 1==this.length},t.prototype.dotProd=function(t){return this._x*t.x+this._y*t.y},t.prototype.crossProd=function(t){return this._x*t.y-this._y*t.x},t.angleBetween=function(t,e){t=t.clone().normalize(),e=e.clone().normalize();var n=t.dotProd(e);return n>1&&(n=1),Math.acos(n)},t.prototype.sign=function(t){return this.perp.dotProd(t)<0?-1:1},Object.defineProperty(t.prototype,"perp",{get:function(){return new t(-this._y,this._x)},enumerable:!0,configurable:!0}),t.prototype.dist=function(t){return Math.sqrt(this.distSQ(t))},t.prototype.distSQ=function(t){var e=t.x-this._x,n=t.y-this._y;return e*e+n*n},t.prototype.add=function(e){return new t(this._x+e.x,this._y+e.y)},t.prototype.subtract=function(e){return new t(this._x-e.x,this._y-e.y)},t.prototype.multiply=function(e){return new t(this._x*e,this._y*e)},t.prototype.divide=function(e){return new t(this._x/e,this._y/e)},t.prototype.equals=function(t){return this._x=Math.round(1e4*this._x)/1e4,this._y=Math.round(1e4*this._y)/1e4,t.x=Math.round(1e4*t.x)/1e4,t.y=Math.round(1e4*t.y)/1e4,this._x==t.x&&this._y==t.y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return"x : "+this._x+" ------------ y : "+this._y},t}()},mGOc:function(t,e,n){"use strict";var o=n("+N0H"),i=n("w9Am"),r=n("WFe8"),a=n("PSoK"),s=n("Yyq6"),l=n("12Og"),u=n("Yhhh"),h=n("UPT1"),c=n("IKKv"),p=n("aJ2T"),d=n("ihW0"),f=n("Xx/s"),g=n("CW6F"),m=n("SScf"),_=n("BM0e"),y=n("3V/0"),b=n("lpfp"),v=n("WYR6"),w=n("fzMI"),O=n("0/et");n.d(e,"a",function(){return E});var x=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.scene=null,e.resizeLamda=function(t){return e.resize(t)},e._tmpPoint=new b.a,e.lastMousePoint=new b.a,e.lastMousePoints=[],e.lastScenePoint=new b.a,e.lastScale=1,e.hasMouseDown=!1,e.systemMouseMoveHandlerLamda=function(t){return e.systemMouseMoveHandler(t)},e.systemMouseUpHandlerLamda=function(t){return e.systemMouseUpHandler(t)},e.mouseWheelLambda=function(t){e.mouseWheel(t)},e.gpu=!1,e.name="ViewPort",e.scene=o.a.inst,e.scene.viewPort=e,e.addChild(e.scene),0==_.a.isMobile?e.mouseEnable=!0:e.touchEnable=!0,e.addEventListener(y.a.RESIZE,e.resizeLamda),e.resize(),e.lookAtXY(0,0),e}return x(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"ViewPort"},enumerable:!0,configurable:!0}),e.prototype.onAdd=function(){t.prototype.onAdd.call(this)},e.prototype.resize=function(t){void 0===t&&(t=null),this.width=window.innerWidth,this.height=window.innerHeight},e.prototype.rightClick=function(e){t.prototype.rightClick.call(this,e),e.stopImmediatePropagation()},Object.defineProperty(e.prototype,"lookAtX",{get:function(){return null!=this.scene?(.5*this.width-this.scene.x)/this.scale:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookAtY",{get:function(){return null!=this.scene?(.5*this.height-this.scene.y)/this.scale:0},enumerable:!0,configurable:!0}),e.prototype.lookAtXY=function(t,e){if(null!=this.scene){var n=(window.innerWidth>>1)-t*this.scene.scale,o=(window.innerHeight>>1)-e*this.scene.scale;this.scene.setPosition(n,o)}},e.prototype.lookAt=function(t){this.lookAtXY(t.x,t.y)},Object.defineProperty(e.prototype,"scale",{get:function(){return this.scene.scaleX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRectangle",{get:function(){if(this._viewRectangle||(this._viewRectangle=new v.a),!this.scene)return this._viewRectangle.setEmpty(),this._viewRectangle;var t=this.scene.globalToLocal(this.localToGlobal(new b.a(0,0))),e=this.scene.globalToLocal(this.localToGlobal(new b.a(this.width,this.height)));return this._viewRectangle.setTo(t.x,t.y,e.x-t.x,e.y-t.y),this._viewRectangle},enumerable:!0,configurable:!0}),e.prototype.moveScene=function(t,e){var n=new b.a(t,e);this.scene.setPosition(this.scene.x+n.x-this.lastMousePoint.x,this.scene.y+n.y-this.lastMousePoint.y),this.lastMousePoint.setTo(n.x,n.y)},e.prototype.leftMouseDown=function(e){t.prototype.leftMouseDown.call(this,e);var n=this.scene.getEventTargetRef(e.target);n instanceof r.a||n instanceof a.a||n instanceof s.a||n instanceof l.a||n instanceof u.a||0==c.a.inst.opened&&(this.hasMouseDown=!0,this.lastMousePoint.copyFrom(new b.a(e.clientX,e.clientY)),this.stage.addEventListener(w.a.MOUSE_MOVE,this.systemMouseMoveHandlerLamda),this.stage.addEventListener(w.a.MOUSE_UP,this.systemMouseUpHandlerLamda))},e.prototype.systemMouseMoveHandler=function(t){0!=this.hasMouseDown&&this.moveScene(t.clientX,t.clientY)},e.prototype.systemMouseUpHandler=function(t){this.hasMouseDown=!1,this.stage.removeEventListener(w.a.MOUSE_MOVE,this.systemMouseMoveHandlerLamda),this.stage.removeEventListener(w.a.MOUSE_UP,this.systemMouseUpHandlerLamda)},e.prototype.touchStart=function(t){if(1!=c.a.inst.opened){if(1==t.touches.length){var e=t.touches[0],n=this.scene.getEventTargetRef(e.target);if(n instanceof r.a||n instanceof a.a||n instanceof s.a||n instanceof l.a||n instanceof u.a||n instanceof g.a||n instanceof d.a||n instanceof f.a)return;p.a.inst.unfocus(),this.hasMouseDown=!0,this.touchMoveFrameRate=40,this.lastMousePoint.copyFrom(new b.a(e.clientX,e.clientY)),this.lastScenePoint.setTo(this.scene.x,this.scene.y)}else if(2==t.touches.length){p.a.inst.unfocus(),this.hasMouseDown=!0,this.touchMoveFrameRate=24,this.lastMousePoints=[];for(var o=0;o<t.touches.length;o++){var i=t.touches[o];this.lastMousePoints.push(new b.a(i.clientX,i.clientY))}}this.lastScale=this.scale}},e.prototype.touchMove=function(t){if(1!=c.a.inst.opened&&1==this.hasMouseDown)if(this.scene.removeTempLayers(),p.a.inst.unfocus(),1==t.touches.length){var e=t.touches[0];this.moveScene(e.clientX,e.clientY)}else if(2==t.touches.length&&this.lastMousePoints.length==t.touches.length){var n,i=t.touches[0],r=this.lastMousePoints[0],a=new b.a(i.clientX,i.clientY),s=t.touches[1],l=this.lastMousePoints[1],u=new b.a(s.clientX,s.clientY),h=r.subtract(l).length,d=a.subtract(u).length,f=this.lastScale*Math.sqrt(d/h);n=r.add(l),n=n.multiply(.5),n=this.scene.globalToLocal(n),n.x=Math.min(n.x,o.a.MAX_SIZE),n.x=Math.max(n.x,-o.a.MAX_SIZE),n.y=Math.min(n.y,o.a.MAX_SIZE),n.y=Math.max(n.y,-o.a.MAX_SIZE),this.scene.scaleScene(f,n)}},e.prototype.touchEnd=function(t){this.scene.addTempLayers(),1==this.hasMouseDown&&(0!=O.a.isNumberEqual(this.lastScenePoint.x,this.scene.x,1)&&0!=O.a.isNumberEqual(this.lastScenePoint.y,this.scene.y,1)||p.a.inst.unfocus(),this.lastScale!=this.scale&&(h.a.inst.update(),i.a.inst.update(),p.a.inst.unfocus()),this.hasMouseDown=!1,this.touchMoveFrameRate=24,this.lastMousePoint.setTo(0,0),this.lastMousePoints=[],this.lastScenePoint.setTo(this.scene.x,this.scene.y),this.lastScale=this.scale)},e.prototype.mouseWheel=function(t){var e=this.scale;t.wheelDelta>0?e+=.1:t.wheelDelta<0?e-=.1:t.detail<0?e+=.1:e-=.1;var n=t.clientX,o=t.clientY,r=this.scene.globalToLocal(new b.a(n,o));this.scene.scaleScene(e,r),h.a.inst.update(),i.a.inst.update(),p.a.inst.unfocus()},e}(m.a)},matE:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.MASTER=4017638,o.NORMAL_WALL_FILL_COLOR=11184810,o.BEARING_WALL_FILL_COLOR=0,o.PARAPET_WALL_FILL_COLOR=16777215,o.WALL_HOVER_FILL_COLOR=o.MASTER,o.WALL_FOCUS_FILL_COLOR=o.MASTER,o.WALL_BORDER_COLOR=6710886,o.CORNER_FILL_COLOR=8947848,o.CORNER_HOVER_FILL_COLOR=o.MASTER,o.CORNER_FOCUS_FILL_COLOR=o.MASTER,o.OPENING_FILL_COLOR=16777215,o.OPENING_BORDER_COLOR=6710886,o.OPENING_HOVER_BORDER_COLOR=o.MASTER,o.OPENING_FOCUS_BORDER_COLOR=o.MASTER,o.OPENING_CTRL_FILL_COLOR=16777215,o.OPENING_CTRL_BORDER_COLOR=o.MASTER,o.MODEL_BORDER_COLOR=16777215,o.MODEL_HOVER_BORDER_COLOR=o.MASTER,o.MODEL_FOCUS_BORDER_COLOR=o.MASTER,o.MODEL_BORDER_ALPHA=0,o.MODEL_HOVER_BORDER_ALPHA=1,o.MODEL_FOCUS_BORDER_ALPHA=1,o.STRUCT_BORDER_COLOR=9539985,o.STRUCT_FOCUS_BORDER_COLOR=o.MASTER},mfrV:function(t,e,n){"use strict";var o=n("SScf");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this,!1,!1)||this;return n.editable=!1,n._text="",n.editable=e,n.createTextfieldDom(),n.borderColor="#000000",n.borderThickness=0,n}return i(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"TextField"},enumerable:!0,configurable:!0}),e.prototype.createDom=function(){},e.prototype.createTextfieldDom=function(){1==this.editable?(this._dom=document.createElement("input"),this._dom.setAttribute("type","text")):this._dom=document.createElement("div"),this._dom.style.position="absolute",this._dom.style.borderStyle="solid",this.x=0,this.y=0},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._dom&&(1==this.editable?this._dom.setAttribute("value",t):this._dom.innerHTML=t),this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._dom&&(this._dom.style.height=t.toString()+"px",this._dom.style.lineHeight=t.toString()+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{set:function(t){this.dom.style.color=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(t){this.dom.style.fontSize=t+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textGlow",{set:function(t){this.dom.style.textShadow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderThickness",{set:function(t){this.dom.style.borderWidth=t+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{set:function(t){this.dom.style.borderColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{set:function(t){this.dom.style.backgroundColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{set:function(t){this.dom.style.textAlign=t},enumerable:!0,configurable:!0}),e}(o.a)},mxvy:function(t,e,n){"use strict";var o=n("SScf"),i=n("fpug"),r=n("elDA"),a=n("EetR"),s=n("+N0H"),l=n("kKgc");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.walls=[],e.openings=[],e.roomTags=[],e.gpu=!0,e}return u(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"scene2d"},enumerable:!0,configurable:!0}),e.prototype.open=function(){this.mscene=s.a.inst;for(var t in this.mscene.walls){var e=this.mscene.walls[t],n=new i.a(e);this.addChild(n),this.walls.push(n)}for(var t in this.mscene.openings){var o=this.mscene.openings[t],u=new r.a(o);this.addChild(u),this.openings.push(u)}for(var t in this.mscene.rooms){var h=this.mscene.rooms[t],c=new a.a(h);this.addChild(c),this.roomTags.push(c)}this.tagGroup=new l.a},e.prototype.setScale=function(e,n){t.prototype.setScale.call(this,e,n);for(var o=0,i=this.roomTags;o<i.length;o++){i[o].setScale(1/e,1/e)}},Object.defineProperty(e.prototype,"scale",{get:function(){return this.scaleX},enumerable:!0,configurable:!0}),e}(o.a)},nPVZ:function(t,e,n){"use strict";function o(t){return r._12(0,[],null,null)}function i(t){return r._12(0,[(t()(),r._15(16777216,null,null,1,"line",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==r._16(t,1)._touchMove(n)&&o}return o},o,l)),r._17(4308992,null,0,a.a,[r.Q,r._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("/oeL"),a=n("j5mp");n.d(e,"b",function(){return l}),e.a=o;var s=[],l=r._11({encapsulation:2,styles:s,data:{}});r._19("line",a.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",color:"color"},{},[])},nVSV:function(t,e,n){"use strict";var o=n("/oeL"),i=n("v7PY"),r=n("5ZTi");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.arrowUp="assets/view/toolbar/arrow_up.png",o.arrowOver="assets/view/toolbar/arrow_over.png",o.arrowDown="assets/view/toolbar/arrow_over.png",o.textUp=i.a.toString(i.a.FONT),o.textOver=i.a.toString(i.a.FONT2),o.textDown=i.a.toString(i.a.FONT2),o.hasArrow="false",o}return a(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.imageDom=this.imageRef.nativeElement,this.labelDom=this.labelRef.nativeElement,this.arrowDom=this.arrowRef.nativeElement,"true"==this.hasArrow?(this.arrowDom.style.visibility="visible",this.arrowDom.style.position="relative"):(this.arrowDom.style.visibility="hidden",this.arrowDom.style.position="absolute",this.labelDom.style.width="100%"),this.upStyle()},e.prototype.upStyle=function(){this.imageDom.style.backgroundImage="url("+this.iconUp+")",this.labelDom.style.color=this.textUp,"true"==this.hasArrow&&(this.arrowDom.style.backgroundImage="url("+this.arrowUp+")")},e.prototype.overStyle=function(){this.imageDom.style.backgroundImage="url("+this.iconOver+")",this.labelDom.style.color=this.textOver,"true"==this.hasArrow&&(this.arrowDom.style.backgroundImage="url("+this.arrowOver+")")},e.prototype.downStyle=function(){this.imageDom.style.backgroundImage="url("+this.iconDown+")",this.labelDom.style.color=this.textDown,"true"==this.hasArrow&&(this.arrowDom.style.backgroundImage="url("+this.arrowDown+")")},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(r.a)},nXSw:function(t,e,n){"use strict";function o(t){return s._12(0,[(t()(),s._15(0,null,null,32,"div",[["class","record"]],null,null,null,null,null)),(t()(),s._14(null,["\n            "])),(t()(),s._15(0,null,null,4,"div",[["class","title"]],null,null,null,null,null)),(t()(),s._14(null,["\n                "])),(t()(),s._15(0,null,null,1,"div",[],[[8,"className",0]],null,null,null,null)),(t()(),s._14(null,["",""])),(t()(),s._14(null,["\n            "])),(t()(),s._14(null,["\n            "])),(t()(),s._15(0,null,null,23,"div",[["class","content"]],null,null,null,null,null)),(t()(),s._14(null,["\n                "])),(t()(),s._15(0,null,null,3,"div",[["class","floor-area"]],null,null,null,null,null)),(t()(),s._14(null,["地面面积: "])),(t()(),s._15(0,null,null,1,"font",[["color","#3D4DE6"],["size","3"]],null,null,null,null,null)),(t()(),s._14(null,["","m²"])),(t()(),s._14(null,["\n                "])),(t()(),s._15(0,null,null,3,"div",[["class","wall-area"]],null,null,null,null,null)),(t()(),s._14(null,["墙面面积: "])),(t()(),s._15(0,null,null,1,"font",[["color","#3D4DE6"],["size","3"]],null,null,null,null,null)),(t()(),s._14(null,["","m²"])),(t()(),s._14(null,["\n                "])),(t()(),s._15(0,null,null,0,"div",[["class","line"]],null,null,null,null,null)),(t()(),s._14(null,["\n                "])),(t()(),s._15(0,null,null,3,"div",[["class","floor-length"]],null,null,null,null,null)),(t()(),s._14(null,["地面周长: "])),(t()(),s._15(0,null,null,1,"font",[["color","#3D4DE6"],["size","3"]],null,null,null,null,null)),(t()(),s._14(null,["","m"])),(t()(),s._14(null,["\n                "])),(t()(),s._15(0,null,null,3,"div",[["class","ceiling-length"]],null,null,null,null,null)),(t()(),s._14(null,["顶面周长: "])),(t()(),s._15(0,null,null,1,"font",[["color","#3D4DE6"],["size","3"]],null,null,null,null,null)),(t()(),s._14(null,["","m"])),(t()(),s._14(null,["\n            "])),(t()(),s._14(null,["\n        "]))],null,function(t,e){t(e,4,0,s._21(1,"","title-text-"+(0==e.context.index?"1":"2"),"")),t(e,5,0,e.context.$implicit.title),t(e,13,0,e.context.$implicit.floorArea),t(e,18,0,e.context.$implicit.wallArea),t(e,25,0,e.context.$implicit.floorLength),t(e,30,0,e.context.$implicit.ceilingLength)})}function i(t){return s._12(0,[s._13(402653184,1,{wrapRef:0}),(t()(),s._15(0,null,null,7,"div",[["class","bg"]],null,null,null,null,null)),(t()(),s._14(null,["\n    "])),(t()(),s._15(0,[[1,0],["wrap",1]],null,4,"div",[["class","wrap"]],null,null,null,null,null)),(t()(),s._14(null,["\n        "])),(t()(),s._20(16777216,null,null,1,null,o)),s._17(802816,null,0,l.h,[s.Q,s.S,s.m],{ngForOf:[0,"ngForOf"]},null),(t()(),s._14(null,["\n    "])),(t()(),s._14(null,["\n"]))],function(t,e){t(e,6,0,e.component.dataList)},null)}function r(t){return s._12(0,[(t()(),s._15(16777216,null,null,1,"area-list-window",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==s._16(t,1)._touchMove(n)&&o}return o},i,c)),s._17(114688,null,0,u.a,[s.Q,s._18],null,null)],function(t,e){t(e,1,0)},null)}var a=n("c9n0"),s=n("/oeL"),l=n("qbdv"),u=n("EjX+");n.d(e,"a",function(){return p});var h=[a.a],c=s._11({encapsulation:0,styles:h,data:{}}),p=s._19("area-list-window",u.a,r,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},nhaO:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{labelRef:0}),(t()(),a._15(0,[[1,0],["lb",1]],null,0,"div",[["class","label"]],null,null,null,null,null))],null,null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"virtual-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("MbY0"),a=n("/oeL"),s=n("Jj2e");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("virtual-input",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode",textalign:"textalign"},{},[])},nxKL:function(t,e,n){"use strict";var o=n("7vVH"),i=n("3V/0");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(){var e=t.call(this)||this;return e.onImageLoadedLamda=function(t){return e.onImageLoaded(t)},e.img.crossOrigin="",e.img.draggable=!1,e}return r(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Img"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"img",{get:function(){return this.dom},enumerable:!0,configurable:!0}),e.prototype.load=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.loadedCallback=e,this.thisObj=n,this.img.src=t,this.img.addEventListener(i.a.IMAGE_LOADED,this.onImageLoadedLamda)},e.prototype.onImageLoaded=function(t){this.img.removeEventListener(i.a.IMAGE_LOADED,this.onImageLoadedLamda),0==this.width&&0==this.height&&(this.width=this.img.width,this.height=this.img.height),this.loadedCallback&&this.loadedCallback.call(this.thisObj,this),this.loadedCallback=null,this.thisObj=null},e.prototype.dispose=function(){this.img.src="",this.loadedCallback=null,this.thisObj=null},e}(o.a)},nz8J:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{areaLabel:0}),a._13(402653184,2,{quitDrawButton:0}),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"icon-button",[["class","areaIcon"],["height","14px"],["iconDown","assets/view/toolbar/edit_area_icon_3x.png"],["iconUp","assets/view/toolbar/edit_area_icon_3x.png"],["isShowBg","false"],["width","14px"]],null,[[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"],[null,"touchend"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,4)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,4).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,4).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,4).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,4).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,4).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,4).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,4).touchEnd(n)&&o}return o},s.a,s.b)),a._17(4308992,null,0,l.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],iconUp:[2,"iconUp"],iconDown:[3,"iconDown"],isShowBg:[4,"isShowBg"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"label",[["class","areaLabel"],["colorStyle","4"],["text","户型面积：0m²"],["textAlign","left"],["textSize","14"]],null,[[null,"touchend"],[null,"touchmove"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,7)._touchMove(n)&&o}if("touchend"===e){o=!1!==i.areaClick()&&o}return o},h.a,h.b)),a._17(4308992,[[1,4],["areaLabel",4]],0,c.a,[a.Q,a._18],{colorStyle:[0,"colorStyle"],textSize:[1,"textSize"],text:[2,"text"],textAlign:[3,"textAlign"]},null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"custom-button",[["class","quitDrawButton"],["colorStyle","8"],["height","50px"],["label","退出绘制"],["radius","25"],["textSize","14"],["visible","false"],["width","50px"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,11)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,11).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,11).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,11).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,11).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,11).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,11).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,11).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.quitDrawClick()&&o}return o},p.a,p.b)),a._17(4308992,[[2,4],["quitDrawButton",4]],0,d.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],visible:[2,"visible"],radius:[3,"radius"],colorStyle:[4,"colorStyle"],textSize:[5,"textSize"],label:[6,"label"]},null)],function(t,e){t(e,4,0,"14px","14px","assets/view/toolbar/edit_area_icon_3x.png","assets/view/toolbar/edit_area_icon_3x.png","false");t(e,7,0,"4","14","户型面积：0m²","left");t(e,11,0,"50px","50px","false","25","8","14","退出绘制")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"editor2d",[],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}if("touchstart"===e){o=!1!==a._16(t,1).globalClick(n)&&o}return o},o,g)),a._17(4308992,null,0,u.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("1iia"),a=n("/oeL"),s=n("0NNx"),l=n("bO4n"),u=n("EGQA"),h=n("/lk0"),c=n("HiNH"),p=n("Esur"),d=n("IO5Z");n.d(e,"b",function(){return g}),e.a=o;var f=[r.a],g=a._11({encapsulation:0,styles:f,data:{}});a._19("editor2d",u.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},oSDI:function(t,e,n){"use strict";var o=n("lpfp");n.d(e,"a",function(){return i});var i=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=1),this.radius=0,this.center=null,t||(t=new o.a),this.radius=e,this.center=t}return t.prototype.isInCircle=function(t){return this.center.subtract(t).length<this.radius},t.prototype.transform=function(e){return new t(e.transformPoint(this.center),this.radius)},t}()},"oV/x":function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("nxKL"),a=n("MGNB");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.buttonMode=!0,o.dom.style.position="",o}return s(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.width="40px",this.height="60px",this.updateComponentProperty(),this.renderer.setStyle(this.dom,"float","left"),this.renderer.setStyle(this.dom,"margin-right","30px"),this.renderer.setStyle(this.dom,"margin-top","15px"),this.imageDom=this.image.nativeElement,this.imageDom&&this.structVO&&(this.renderer.setStyle(this.imageDom,"background-image","url("+this.structVO.imageUrl+")"),this.renderer.setStyle(this.imageDom,"background-size","100% 100%"))},e.prototype.touchStart=function(t){var e=t.touches[0],n=new r.a;n.load(this.structVO.imageUrl),n.width=100,n.height=100,a.a.inst.startDrag(this.structVO,n,e.clientX,e.clientY),t.stopImmediatePropagation(),t.preventDefault()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},"oX+v":function(t,e,n){"use strict";var o=n("SScf"),i=n("v8gm");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(){return t.call(this,!0,!0)||this}return r(e,t),e.prototype.drawPolygon=function(t){t.vertexCount<3||i.a.drawPath(this.graphics,t.vertices,!0)},e.prototype.draw=function(){},e}(o.a)},oZ4L:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{webglCanvas:0}),(t()(),a._15(0,[[1,0],["webglCanvas",1]],null,0,"canvas",[["class","webglCanvas"]],null,null,null,null,null))],null,null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"editor3d",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,u)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("TiI6"),a=n("/oeL"),s=n("CUWI");n.d(e,"b",function(){return u}),e.a=o;var l=[r.a],u=a._11({encapsulation:0,styles:l,data:{}});a._19("editor3d",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},oipt:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return i});var o=function(){function t(){}return Object.defineProperty(t,"cursor",{get:function(){return t._cursor},set:function(e){t._cursor=e,document.body.style.cursor=e},enumerable:!0,configurable:!0}),t.setDomCursor=function(t,e){t.style.cursor=e},t}();o._cursor="auto";var i=function(){function t(){}return t.rotationArrowCursor=function(e){return e>45&&e<135?t.HARROW:e>-135&&e<-45?t.HARROW:t.VARROW},t}();i.AUTO="auto",i.ARROW="default",i.BUTTON="pointer",i.IBEAM="pointer",i.HAND="url(assets/cursor/hand.cur) , default",i.DRAW="crosshair",i.DOT="move",i.HARROW="e-resize",i.VARROW="n-resize",i.MEASURE="url(assets/cursor/measure.png) , default"},omsS:function(t,e,n){"use strict";var o=n("3BIX"),i=n("MkTd"),r=n("3Gk7"),a=n("0/et"),s=n("C+EA"),l=n("YSA8");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e){var n=t.call(this)||this;return n.room=e,n.init(),n}return u(e,t),e.prototype.init=function(){var t=new Array;for(var e in this.room.walls){var n=this.room.walls[e],l=n.polygon.transform(n.localToSceneMatrix).toPolygon3D(n.height),u=l.triangulate();a.a.mergeTwoArray(t,r.a.polygon3ds2vertices(u),!0)}var h;for(h=0;h<t.length/3;h++)t[3*h+1]=-t[3*h+1];var c=r.a.createMesh(t,null,null,r.a.createTriangleIndices(t.length/9),null);for(c.material=s.a.getDiffuseMtlByKey("roof"),this.add(c),h=0;h<t.length/3;h++)t[3*h+2]=.1;var p=r.a.createMesh(t,null,null,r.a.createTriangleIndices(t.length/9),null);p.position.z=-1,p.material=s.a.getDiffuseMtlByKey("roof"),this.add(p),this.floor=new o.a(this.room),this.add(this.floor),this.ceiling=new i.a(this.room),this.add(this.ceiling)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.roof&&this.roof.dispose(),this.roof=null,this.bottom&&this.bottom.dispose(),this.bottom=null,this.floor&&this.floor.dispose(),this.floor=null,this.ceiling&&this.ceiling.dispose(),this.ceiling=null,this.room=null},e}(l.a);h.offset=1},"ot+B":function(t,e,n){"use strict";var o=n("1LGZ"),i=n("eUeh"),r=n("s4dp"),a=n("6xdJ"),s=n("Etka"),l=n("tEbb"),u=n("LxKY"),h=n("ECac"),c=n("MPvg"),p=n("4zkP");n.d(e,"a",function(){return f}),n.d(e,"b",function(){return m});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(e,n,o){void 0===n&&(n=!0),void 0===o&&(o=null);var a=t.call(this)||this;return a.no="",a.goodsNo="",a.id=0,a.av=20180914,a.width=0,a.length=0,a.height=0,a.flatHeight=0,a.trimWidth=0,a.trimLength=0,a.trimHeight=0,a.productName="",a.productBrand="",a.productNo="",a.productSeries="",a.price=0,a.productLink="",a.systemType=g.DEFAULT,a.innerType=_.MODEL,a.subType=m.MODEL_COMMON,a.saleCount=0,a.salable=!1,a.photoScale=1,a.isPublic=1,a.favorited=!1,a.scalable=!1,a.directScalable=!1,a.replaceable=!1,a.cargoNo="",a.discountPrice=0,a.previewUrl="",a.categoryID=0,a._assets=new i.a,a.autoLoad=!0,a.autoMesh=!0,a.timestamp=0,a.mapsTotal=0,a.onMeshParse=function(t){if(t instanceof r.a)a._parser=t;else{var e=new r.a;e.copyFrom(t),a._parser=e}var n=a._parser.getMapUrls();if(n.length>0){a.assets.maps=[],a.mapsTotal=n.length;for(var o=0,i=n;o<i.length;o++){var s=i[o],l=(new c.e).load(a.getMapUrl(s),a.requestMapsCompleteHandlerLambda);a.assets.maps.push(l)}}else a.meshIsReady()},a.requestMapsCompleteHandlerLambda=function(t){return a.requestMapsCompleteHandler(t)},a.no=e,a.autoLoad=n,a._detailReady=!1,a._detailFailed=!1,a._resourceReady=!1,a._resourceFailed=!1,a._meshReady=!1,a.timestamp=(new Date).getTime(),o?(a.copyFrom(o),a._detailReady=!0,a.autoLoad&&a.requestAssets()):a.requestDetail(),a}return d(e,t),e.prototype.requestDetail=function(){l.a.inst.get(u.a.GOODS_DETAIL,{no:this.no},this.requestDataResultHandler,this.requestDataErrorHandler,this)},e.prototype.requestDataResultHandler=function(t){this.copyFrom(t.record),this.dispatchEvent(new o.a(o.a.DESIGN_ITEM_DETAIL_READY,this.no),this),this._detailReady=!0,this.autoLoad&&this.requestAssets()},e.prototype.requestDataErrorHandler=function(t){console.log("load error: "+t+", "+this.no)},e.prototype.requestAssets=function(){var t=this,e=(new c.e).load(this.topUrl,function(e){t.requestAssetsCompleteHandler()});this.assets.top=e},e.prototype.requestAssetsCompleteHandler=function(){this._resourceReady=!0,this.dispatchEvent(new o.a(o.a.DESIGN_ITEM_ASSET_READY,this.no),this),1==this.autoMesh&&this.requestMesh()},e.prototype.requestMesh=function(){if(this.use3DMesh){l.a.inst.getBinary(this.meshUrl,null,this.requestMeshCompleteHandler,null,this)}},e.prototype.requestMeshCompleteHandler=function(t){var n=new h.a(t);this.assets.mesh=n,1==e.ALLOW_WORKER&&1==p.a.inst.supported?p.a.inst.sendMessage("parse_hljm",t,this.onMeshParse):this.onMeshParse(new r.a(n))},e.prototype.requestMapsCompleteHandler=function(t){if(--this.mapsTotal<=0){var e=this._parser.getMapUrls(),n=this.assets.maps;this._parser.setTextures(e,n),this.meshIsReady()}},e.prototype.meshIsReady=function(){this._meshReady=!0,this._meshes=this._parser.getResult(),this.dispatchEvent(new o.a(o.a.DESIGN_ITEM_MESH_READY,this.no),this)},Object.defineProperty(e.prototype,"detailReady",{get:function(){return this._detailReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detailFailed",{get:function(){return this._detailFailed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceReady",{get:function(){return this._resourceReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceFailed",{get:function(){return this._resourceFailed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meshReady",{get:function(){return this._meshReady},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meshes",{get:function(){return this._meshes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assets",{get:function(){return this._assets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser},enumerable:!0,configurable:!0}),e.prototype.getAsset=function(t){return this.assets[t]?this.assets[t]:null},Object.defineProperty(e.prototype,"topBMD",{get:function(){return this.assets.top?this.assets.top:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetRootUrl",{get:function(){return e.ASSET_ROOT+this.no+"/"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topUrl",{get:function(){return this.assetRootUrl+"top.png?av="+this.av},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frontUrl",{get:function(){return this.assetRootUrl+"front.png?av="+this.av},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backUrl",{get:function(){return this.assetRootUrl+"back.png?av="+this.av},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"meshUrl",{get:function(){return this.assetRootUrl+"item.hljm?av="+this.av},enumerable:!0,configurable:!0}),e.prototype.getMapUrl=function(t){return this.assetRootUrl+t},Object.defineProperty(e.prototype,"systemGroup",{get:function(){switch(this.systemType){case g.DEFAULT:return g.DEFAULT;case g.TILER:case g.TILER_CERAMIC:case g.TILER_WOOD:case g.TILER_BOUNDARY:case g.TILER_PATTERN:return g.TILER}return g.DEFAULT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBackendModel",{get:function(){return this.subType==m.MODEL_BACKEND},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoofModel",{get:function(){return this.subType==m.MODEL_ROOF||this.subType==m.MODEL_CEILING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMaterial",{get:function(){return this.innerType==_.MATERIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isModel",{get:function(){return this.innerType==_.MODEL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpening",{get:function(){return this.innerType==_.DOOR||this.innerType==_.WINDOW},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"use3DMesh",{get:function(){return this.isOpening||this.isModel},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){if(t instanceof e){var n=t;this.id=n.id,this.goodsNo=n.goodsNo,this.av=n.av,this.innerType=n.innerType,this.subType=n.subType,this.width=n.width,this.length=n.length,this.height=n.height,this.flatHeight=n.flatHeight,this.trimWidth=n.trimWidth,this.trimLength=n.trimLength,this.trimHeight=n.trimHeight,this.photoScale=n.photoScale,this.isPublic=n.isPublic,this.scalable=n.scalable,this.productName=n.productName,this.productBrand=n.productBrand,this.price=n.price,this.productLink=n.productLink,this.saleCount=n.saleCount,this.salable=n.salable,this.directScalable=n.directScalable,this.previewUrl=n.previewUrl,t.hasOwnProperty("system_type")&&(this.systemType=t.system_type)}else this.id=t.id,this.goodsNo=t.goods_no,this.av=t.av,this.innerType=t.inner_type,this.subType=t.sub_type,this.width=t.width,this.length=t.length,this.height=t.height,this.flatHeight=t.flat_height,this.trimWidth=t.trim_width,this.trimLength=t.trim_length,this.trimHeight=t.trim_height,this.photoScale=t.photo_scale,this.isPublic=t.is_public,this.scalable=1==t.scalable,this.productName=t.product_name,this.productBrand=t.product_brand,this.price=t.price,this.productLink=s.a.trim(t.product_link),this.saleCount=t.sale_count,this.salable=1==t.salable,this.directScalable=1==t.direct_scalable,this.previewUrl=t.preview_url,t.hasOwnProperty("system_type")&&(this.systemType=t.system_type)},e}(a.a);f.ASSET_ROOT=u.a.MEDIA_ROOT+"deco/item/",f.ALLOW_WORKER=!1;var g=function(){function t(){}return t}();g.DEFAULT=0,g.CEILING=200,g.CEILING_JIAOXIAN=201,g.TILER=500,g.TILER_CERAMIC=501,g.TILER_WOOD=502,g.TILER_BOUNDARY=505,g.TILER_PATTERN=510;var m=function(){function t(){}return t}();m.MODEL_COMMON=101,m.MODEL_BACKEND=104,m.MODEL_FLOOR=105,m.MODEL_ROOF=110,m.MODEL_CEILING=111,m.DOOR_COMMON=201,m.DOOR_DOUBLE=202,m.DOOR_SLIDING=203,m.WINDOW_COMMON=301,m.WINDOW_BAY=302,m.WINDOW_FRENCH=303,m.MATERIAL_COMMON=401,m.MATERIAL_SKIRTING=410;var _=function(){function t(){}return t}();_.MODEL=1,_.DOOR=2,_.WINDOW=3,_.MATERIAL=4},p5Ee:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},q3oq:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{position:absolute;width:335px;height:250px;background-color:#fff;border-radius:8px}.title[_ngcontent-%COMP%]{top:20px;height:25px;line-height:25px;color:#333}.desc[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{position:absolute;width:100%;font-size:16px;text-align:center}.desc[_ngcontent-%COMP%]{top:59px;height:22px;line-height:22px;color:#999}.close[_ngcontent-%COMP%]{position:absolute;top:24px;right:20px;width:18px;height:18px}.clearInput[_ngcontent-%COMP%]{position:absolute;top:114px;right:35px;width:20px;height:20px}.areaInput[_ngcontent-%COMP%]{position:absolute;top:99px;left:20px;width:275px;height:50px;background-color:#f8f8f8;border-radius:8px;border:0 solid #fff;padding-left:20px;color:#333;font-size:16px;text-align:left;line-height:50px}.saveButton[_ngcontent-%COMP%]{position:absolute;left:107px;bottom:30px}"]},q4dy:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{toolbar:0}),a._13(402653184,2,{bottombar:0}),a._13(402653184,3,{huxingResource:0}),a._13(402653184,4,{editor2d:0}),a._13(402653184,5,{editor3d:0}),a._13(402653184,6,{alert:0}),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"editor2d",[["id","editor2d"]],null,[[null,"touchmove"],[null,"touchstart"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,8)._touchMove(n)&&o}if("touchstart"===e){o=!1!==a._16(t,8).globalClick(n)&&o}return o},s.a,s.b)),a._17(4308992,[[4,4],["editor2d",4]],0,l.a,[a.Q,a._18],null,null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"editor3d",[["id","editor3d"],["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,12)._touchMove(n)&&o}return o},u.a,u.b)),a._17(4308992,[[5,4],["editor3d",4]],0,h.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"huxing-toolbar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,16)._touchMove(n)&&o}return o},c.a,c.b)),a._17(4308992,[[1,4],["toolbar",4]],0,p.a,[a.Q,a._18],null,null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"bottom-toolbar",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,20)._touchMove(n)&&o}return o},d.a,d.b)),a._17(4308992,[[2,4],["bottombar",4]],0,f.a,[a.Q,a._18],null,null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"huxing-resource",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,26)._touchMove(n)&&o}return o},g.a,g.b)),a._17(4308992,[[3,4],["huxingResource",4]],0,m.a,[a.Q,a._18],null,null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"operator",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,30)._touchMove(n)&&o}return o},_.a,_.b)),a._17(4308992,[["operator",4]],0,y.a,[a.Q,a._18],null,null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"setting-bars",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,34)._touchMove(n)&&o}return o},b.a,b.b)),a._17(4308992,[["settingbars",4]],0,v.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"settings",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,38)._touchMove(n)&&o}return o},w.a,w.b)),a._17(4308992,[["settings",4]],0,O.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"option-setting",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,42)._touchMove(n)&&o}return o},x.a,x.b)),a._17(4308992,[["optionSetting",4]],0,E.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"window-manager",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,48)._touchMove(n)&&o}return o},P.a,P.b)),a._17(4308992,[["windowManager",4]],0,C.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n\n"])),(t()(),a._14(null,["\n"])),(t()(),a._15(16777216,null,null,1,"alert",[["visible","false"]],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,52)._touchMove(n)&&o}return o},A.a,A.b)),a._17(4308992,[[6,4],["alert",4]],0,N.a,[a.Q,a._18],{visible:[0,"visible"]},null),(t()(),a._14(null,["\n"]))],function(t,e){t(e,8,0);t(e,12,0,"false"),t(e,16,0),t(e,20,0),t(e,26,0),t(e,30,0);t(e,34,0,"false");t(e,38,0,"false");t(e,42,0,"false");t(e,48,0,"false");t(e,52,0,"false")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"app-root",[],null,null,null,o,L)),a._17(4243456,null,0,S.a,[M.m,a.e,a.Q],null,null)],null,null)}var r=n("NhKt"),a=n("/oeL"),s=n("nz8J"),l=n("EGQA"),u=n("oZ4L"),h=n("CUWI"),c=n("5Xko"),p=n("X973"),d=n("k4ju"),f=n("l96L"),g=n("3arc"),m=n("wzWt"),_=n("39l8"),y=n("qJEM"),b=n("4L4I"),v=n("+ByO"),w=n("5mVj"),O=n("YihH"),x=n("cNiI"),E=n("6p4A"),P=n("fgvt"),C=n("LF0A"),A=n("1jxk"),N=n("sA2y"),S=n("wQAS"),M=n("XKz0");n.d(e,"a",function(){return R});var T=[r.a],L=a._11({encapsulation:0,styles:T,data:{}}),R=a._19("app-root",S.a,i,{},{},[])},qJEM:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5"),r=n("yPN6"),a=n("fzMI"),s=n("s/43"),l=n("nVSV"),u=n("v7PY");n.d(e,"a",function(){return c});var h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(n,o){var i=t.call(this,n,o)||this;return i.icons=[],i.iconClickLamda=function(t){return i.iconClick(t)},e._instance=i,i}return h(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.prototype.open=function(t,e,n,o,i){void 0===o&&(o=15),void 0===i&&(i=-30),this.close(),this.visible="true",this.updateComponentProperty();var r=0;this.target=e,this.actions=n;for(var h=0;h<n.length;h++){var c=n[h],p=s.a.inst.createComponent(l.a,this.container),d=p.instance;d.position="absolute",d.width="35px",d.height="40px",d.iconUp=c.icon,d.iconDown=c.icon,d.tooltip=c.toolTip,d.label=c.toolTip,d.textUp=u.a.toString(u.a.FONT5),d.textOver=u.a.toString(u.a.MASTER),d.textDown=u.a.toString(u.a.MASTER),d.left=5,d.top=12+66*h,d.addEventListener(a.a.CLICK,this.iconClickLamda),this.icons.push(p),r+=66}this.height=24+r-26+"px"},e.prototype.close=function(){for(var t=0;t<this.icons.length;t++){this.icons[t].instance.removeEventListener(a.a.CLICK,this.iconClickLamda),this.icons[t].destroy()}this.icons=[],this.visible="false",this.container.clear()},e.prototype.iconClick=function(t){for(var e,n=0;n<this.icons.length;n++){if(1==this.icons[n].instance.dom.contains(t.target)){e=this.actions[n];break}}if(e){var o={};o.actionType=e.type,o.actionTarget=this.target,this.dispatchEvent(new r.a(r.a.OPERATOR_ACTION,o),this),1==e.isHideAfterClick&&this.close()}},e.prototype.targetFocusOutHandler=function(t){this.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},qtrl:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="qtrl"},qzI0:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.ROOM=10,o.WALL=20,o.OPENING=30,o.ROOM_TAG=40,o.FACADE_TAG=50},r4QP:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return t}();o.HOLE=0,o.DOOR_COMMON=201,o.DOOR_DOUBLE=202,o.DOOR_SLIDING=203,o.WINDOW_COMMON=301,o.WINDOW_BAY=302,o.WINDOW_FRENCH=303},r4pW:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[""]},rFe8:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".title[_ngcontent-%COMP%]{position:absolute;width:100%;height:50px;padding-left:18px;border-bottom:1px solid #ccc}.titleButton[_ngcontent-%COMP%]{float:left;margin-right:13px;margin-top:13px}.view[_ngcontent-%COMP%]{position:absolute;top:50px;width:100%;height:100%}.container[_ngcontent-%COMP%]{float:left;margin-left:20px;margin-top:0;width:100%;height:129px}"]},riTu:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{width:255px;background-color:rgba(0,0,0,.6);border-top-left-radius:2px;border-bottom-left-radius:2px}.bg[_ngcontent-%COMP%], .editArea[_ngcontent-%COMP%]{float:left;height:100%}.editArea[_ngcontent-%COMP%]{margin-left:20px}.label[_ngcontent-%COMP%]{float:left;margin-right:8px;height:100%;line-height:40px;font-size:14px;text-align:center;color:#fff}.virtualInput[_ngcontent-%COMP%]{float:left;margin-top:8px;font-size:16px;color:#000;border-radius:2px;border-width:2px;border-style:solid;border-color:#fff;background-color:#fff}"]},rvvW:function(t,e,n){"use strict";var o=n("3mMQ");n.d(e,"a",function(){return i});var i=function(){function t(e){switch(void 0===e&&(e="OperatorActionSetting"),this.type=e,this.type){case o.a.ROTATE:this._icon=t.rotateIcon,this.autoClose=!1,this.toolTip="旋转";break;case o.a.DELETE:this._icon=t.deleteIcon,this.autoClose=!0,this.toolTip="删除";break;case o.a.SPLIT:this._icon=t.splitIcon,this.autoClose=!0,this.toolTip="拆分";break;case o.a.CLEAR:this._icon=t.clearIcon,this.autoClose=!0,this.toolTip="清理";break;case o.a.NAME:this._icon=t.nameIcon,this.autoClose=!0,this.toolTip="命名";break;case o.a.MIRROR:this._icon=t.turnIcon,this.autoClose=!1,this.toolTip="镜像";break;case o.a.HOLE:this._icon=t.holeIcon,this.autoClose=!0,this.toolTip="墙洞";break;default:this._icon="",this.autoClose=!0,this.toolTip=""}}return Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoClose",{get:function(){return this._autoClose},set:function(t){this._autoClose=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toolTip",{get:function(){return this._toolTip},set:function(t){this._toolTip=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHideAfterClick",{get:function(){return this.type!=o.a.ROTATE},enumerable:!0,configurable:!0}),t}();i.BASE_URL="assets/components/operator/",i.rotateIcon=i.BASE_URL+"rotate_3x.png",i.deleteIcon=i.BASE_URL+"delete_3x.png",i.splitIcon=i.BASE_URL+"split_3x.png",i.clearIcon=i.BASE_URL+"new_clear_up.png",i.nameIcon=i.BASE_URL+"name_3x.png",i.turnIcon=i.BASE_URL+"new_turn_up.png",i.holeIcon=i.BASE_URL+"hole_3x.png"},"s/43":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(t,e,n){this.app=t,this.view=e,this.componentResolver=n},t.prototype.createComponent=function(t,e){var n=this.componentResolver.resolveComponentFactory(t);return e.createComponent(n)},t}()},s4dp:function(t,e,n){"use strict";var o=n("6xdJ"),i=n("0/et"),r=n("3Gk7"),a=n("C+EA"),s=n("MPvg"),l=n("/gn8");n.d(e,"a",function(){return h});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.objects=[],n.mtls=[],n.data=e,n.data&&(n.parse(e.position,e.bytesAvailable),n.merge()),n}return u(e,t),e.prototype.copyFrom=function(t){var e=t.objects;if(e)for(var n=0,o=e;n<o.length;n++){var i=o[n],r=new d;r.copyFrom(i),this.objects.push(r)}var a=t.mtls;if(a)for(var s=0,l=a;s<l.length;s++){var u=l[s],h=new p;h.copyFrom(u),this.mtls.push(h)}},e.prototype.getMapUrls=function(){for(var t=new Array,e=0,n=this.mtls;e<n.length;e++){var o=n[e];0==i.a.isStringEmptyOrNull(o.diffuseMapUrl)&&t.push(o.diffuseMapUrl)}return t},e.prototype.setTextures=function(t,e){for(var n=0,o=this.mtls;n<o.length;n++)for(var i=o[n],r=0;r<t.length;r++)if(i.diffuseMapUrl==t[r]){i.texture=e[r];break}},e.prototype.getResult=function(){for(var t=new Array,e=0,n=this.objects;e<n.length;e++){var o=n[e];o.isEmpty()||t.push(this.generateMesh(o))}return t},e.prototype.geDebugInfo=function(t){for(var e="",n=0,o=0,r=this.objects;o<r.length;o++){var a=r[o];e=e+"物体："+String(n++)+"\n",e=e+"\t顶点个数："+a.numVertices+"\n",e=e+"\t三角形个数："+a.indices.length/3+"\n",e=e+"\t材质："+a.materialName+"\n",e+="\n"}e+="\n";for(var s=0,l=this.mtls;s<l.length;s++){var u=l[s];e=e+"材质："+u.name+"\n",e=e+"\t颜色：0x"+u.diffuseColor.toString(16)+"\n",i.a.isStringEmptyOrNull(u.diffuseMapUrl)||(e=e+"\t贴图："+t+u.diffuseMapUrl+"\n"),e=e+"\t透明度："+u.opacity+"\n",e+="\n"}return e},e.prototype.getOBJ=function(){for(var t=new Array,e=new Array,n=new Array,o=0,r=0;r<this.objects.length;r++){var a=this.objects[r];t=t.concat(a.vertices),e=e.concat(a.uvs);for(var s=0,l=a.indices;s<l.length;s++){var u=l[s];n.push(u+o)}o+=a.numVertices}return i.a.convert2OBJ(t,e,n)},e.prototype.readChunkInfo=function(t){this.data.position=t;var e=new c;return e.id=this.data.readUnsignedShort(),e.size=this.data.readUnsignedInt(),e.dataSize=e.size-6,e.dataPosition=this.data.position,e.nextChunkPosition=t+e.size,e},e.prototype.merge=function(){for(var t,e={},n=0,o=this.objects;n<o.length;n++)t=o[n],e[t.materialName]||(e[t.materialName]=new Array),e[t.materialName].push(t);this.objects.length=0;var i;for(var r in e){i=e[r];var a=i[0];if(i.length>1)for(var s=i.length,l=1;l<s;l++){var u=a.numVertices;if(u+i[l].numVertices>65530)this.objects.push(a),a=i[l];else{a.vertices=a.vertices.concat(i[l].vertices),a.uvs=a.uvs.concat(i[l].uvs),a.normals=a.normals.concat(i[l].normals);for(var h=0,c=i[l].indices;h<c.length;h++){var p=c[h];a.indices.push(p+u)}}}this.objects.push(a)}e=null},e.prototype.parse=function(t,n){for(;n>=6;){var o=this.readChunkInfo(t);switch(o.id){case e.CHUNK_MESH_ID:this.currentObject=new d,this.objects.push(this.currentObject),this.parseMesh(o.dataPosition,o.dataSize);break;case e.CHUNK_MTL_ID:this.currentMtl=new p,this.mtls.push(this.currentMtl),this.parseMaterial(o.dataPosition,o.dataSize);break;default:console.debug("未识别的chunk id："+o.id)}t=o.nextChunkPosition,n-=o.size}},e.prototype.parseMesh=function(t,n){for(;n>=6;){var o=this.readChunkInfo(t);switch(o.id){case e.CHUNK_MESH_VERTEX_ID:this.readVertices(o.dataSize);break;case e.CHUNK_MESH_UV_ID:this.readUvs(o.dataSize);break;case e.CHUNK_MESH_FACE_ID:this.parseFace(o.dataSize);break;case e.CHUNK_MESH_MATERIAL_NAME:this.currentObject.materialName=this.readName(o.dataSize);break;case e.CHUNK_MESH_NORMAL_ID:this.readNormals(o.dataSize);break;default:console.debug("未识别的chunk id："+o.id)}t=o.nextChunkPosition,n-=o.size}},e.prototype.parseFace=function(t){for(var e=0;e<t/2;e++)this.currentObject.indices.push(this.data.readUnsignedShort())},e.prototype.parseMaterial=function(t,n){for(;n>=6;){var o=this.readChunkInfo(t);switch(o.id){case e.CHUNK_MTL_DIFFUSE_COLOR_ID:this.currentMtl.diffuseColor=this.data.readUnsignedInt();break;case e.CHUNK_MTL_DIFFUSE_MAP_ID:for(var i="",r=0;r<o.dataSize;r++)i+=String.fromCharCode(this.data.readUnsignedByte());i=i.replace("\\","/");var a=i.split(".");a.length>1&&(a[a.length-1]=String(a[a.length-1]).toLowerCase(),i=a.join(".")),this.currentMtl.diffuseMapUrl=i;break;case e.CHUNK_MTL_OPACITY_ID:this.currentMtl.opacity=this.data.readFloat();break;case e.CHUNK_MTL_NAME:this.currentMtl.name=this.readName(o.dataSize);break;case e.CHUNK_MTL_DIFFUSE_MAP_UV_TRANSFORM:break;default:console.debug("未识别的chunk id："+o.id)}t=o.nextChunkPosition,n-=o.size}},e.prototype.parseNormals=function(){for(var t=0,e=this.objects;t<e.length;t++){var n=e[t];n.normals.length!=n.vertices.length&&(n.normals=r.a.calculateNormals(n.vertices,n.indices))}},e.prototype.parseTangents=function(){for(var t=0,e=this.objects;t<e.length;t++){var n=e[t];if(3*n.uvs.length==2*n.vertices.length){var o,i,r=[],a=n.vertices,s=n.indices,u=n.uvs,h=n.normals,c=s.length;for(i=0;i<c;i+=3){var p=s[i],d=s[i+1],f=s[i+2],g=a[3*p],m=a[3*p+1],_=a[3*p+2],y=a[3*d],b=a[3*d+1],v=a[3*d+2],w=a[3*f],O=a[3*f+1],x=a[3*f+2],E=u[2*p],P=u[2*p+1],C=u[2*d],A=u[2*d+1],N=u[2*f],S=u[2*f+1],M=h[3*p],T=h[3*p+1],L=h[3*p+2],R=h[3*d],I=h[3*d+1],D=h[3*d+2],k=h[3*f],j=h[3*f+1],U=h[3*f+2],W=y-g,H=b-m,F=v-_,B=w-g,G=O-m,X=x-_,Y=C-E,z=A-P,V=N-E,q=S-P,Z=1/(Y*q-V*z),Q=Z*(q*W-B*z),K=Z*(q*H-z*G),J=Z*(q*F-z*X);o=r[p],null==o?r[p]=new l.a(Q-M*(M*Q+T*K+L*J),K-T*(M*Q+T*K+L*J),J-L*(M*Q+T*K+L*J)):(o.x+=Q-M*(M*Q+T*K+L*J),o.y+=K-T*(M*Q+T*K+L*J),o.z+=J-L*(M*Q+T*K+L*J)),o=r[d],null==o?r[d]=new l.a(Q-R*(R*Q+I*K+D*J),K-I*(R*Q+I*K+D*J),J-D*(R*Q+I*K+D*J)):(o.x+=Q-R*(R*Q+I*K+D*J),o.y+=K-I*(R*Q+I*K+D*J),o.z+=J-D*(R*Q+I*K+D*J)),o=r[f],null==o?r[f]=new l.a(Q-k*(k*Q+j*K+U*J),K-j*(k*Q+j*K+U*J),J-U*(k*Q+j*K+U*J)):(o.x+=Q-k*(k*Q+j*K+U*J),o.y+=K-j*(k*Q+j*K+U*J),o.z+=J-U*(k*Q+j*K+U*J)),n.tangents=r}}}},e.prototype.readVertices=function(t){for(var e=0;e<t/4;e++)this.currentObject.vertices.push(this.data.readFloat())},e.prototype.readName=function(t){for(var e="",n=0;n<t;n++)e+=String.fromCharCode(this.data.readUnsignedByte());return e},e.prototype.readUvs=function(t){for(var e=0;e<t/8;e++)this.currentObject.uvs.push(this.data.readFloat()),this.currentObject.uvs.push(1-this.data.readFloat())},e.prototype.readNormals=function(t){for(var e=0;e<t/4;e++)this.currentObject.normals.push(this.data.readFloat())},e.prototype.getMtlByName=function(t){for(var e=0,n=this.mtls;e<n.length;e++){var o=n[e];if(o.name==t)return o}return null},e.prototype.generateMesh=function(t){0==t.uvs.length&&(t.uvs=null);var e,n,o=this.getMtlByName(t.materialName);if(o)o.texture?(e=r.a.createMesh(t.vertices,t.uvs,null,t.indices),n=a.a.createStandardMaterial(o.texture)):(e=r.a.createMesh(t.vertices,null,null,t.indices),n=a.a.createStandardMaterial(a.a.createColorTexture(o.diffuseColor))),o.opacity<.99&&(n.transparent=!0,n.opacity=o.opacity);else{e=r.a.createMesh(t.vertices,null,null,t.indices);var i=a.a.createColorTexture(8355711);i.wrapS=s.f,i.wrapT=s.f,n=a.a.createStandardMaterial(i)}return e.material=n,e.material.needsUpdate=!0,e},e}(o.a);h.CHUNK_MESH_ID=1,h.CHUNK_MESH_VERTEX_ID=11,h.CHUNK_MESH_UV_ID=12,h.CHUNK_MESH_FACE_ID=13,h.CHUNK_MESH_FACE_SUB_ID=131,h.CHUNK_MESH_MATERIAL_NAME=14,h.CHUNK_MESH_NORMAL_ID=15,h.CHUNK_MTL_ID=2,h.CHUNK_MTL_DIFFUSE_COLOR_ID=21,h.CHUNK_MTL_DIFFUSE_MAP_ID=22,h.CHUNK_MTL_OPACITY_ID=23,h.CHUNK_MTL_NAME=24,h.CHUNK_MTL_DIFFUSE_MAP_UV_TRANSFORM=25,h.CHUNK_MTL_DIFFUSE_MAP_UV_SCALE=251,h.CHUNK_MTL_DIFFUSE_MAP_UV_ROTATE=252,h.CHUNK_MTL_DIFFUSE_MAP_UV_OFFSET=253;var c=function(){function t(){}return t}(),p=function(){function t(){this.opacity=1}return t.prototype.copyFrom=function(t){this.name=t.name,this.diffuseColor=t.diffuseColor,this.diffuseMapUrl=t.diffuseMapUrl,this.diffuseATFMapUrl=t.diffuseATFMapUrl,this.opacity=t.opacity},t}(),d=function(){function t(){this.vertices=new Array,this.uvs=new Array,this.indices=new Array,this.normals=new Array,this.tangents=[]}return t.prototype.isEmpty=function(){return 0==this.vertices.length||0==this.indices.length},Object.defineProperty(t.prototype,"numVertices",{get:function(){return this.vertices.length/3},enumerable:!0,configurable:!0}),t.prototype.copyFrom=function(t){this.vertices=t.vertices,this.uvs=t.uvs,this.indices=t.indices,this.normals=t.normals,this.tangents=t.tangents,this.materialName=t.materialName},t.prototype.findUnusedVertex=function(){for(var t,e=new Array(this.numVertices),n=0,o=this.indices;n<o.length;n++)t=o[n],e[t]=!0;for(var i=0;i<e.length;i++)e[i]||console.debug("        未使用点："+i)},t}()},sA2y:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.warningIcon="assets/components/alert/warning_3x.png",o.buttons=[],o.alertData1=null,o.alertData2=null,o.message="",o.warningTimerId=null,o}return r(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.bg=this.bgRef.nativeElement,this.buttons=this.buttonQueryList.toArray(),this.icon=this.iconRef.nativeElement,this.renderer.setStyle(this.icon,"background-image","url("+this.warningIcon+")"),this.label=this.labelRef.nativeElement},e.prototype.dialog=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.show(t,!0,e,n)},e.prototype.waiting=function(t){this.show(t,!0)},e.prototype.warning=function(t){var e=this;this.warningTimerId&&(clearTimeout(this.warningTimerId),this.close()),this.show(t),this.warningTimerId=setTimeout(function(){e.close()},3e3)},e.prototype.show=function(t,e,n,o){void 0===e&&(e=!1),void 0===n&&(n=null),void 0===o&&(o=null),this.visible="true",this.line.visible="false",1==e?this.renderer.setStyle(this.dom,"pointer-events","auto"):this.renderer.setStyle(this.dom,"pointer-events","none"),this.message=t,this.label.innerHTML=this.message,this.renderer.setStyle(this.bg,"visible",""!=t?"true":"false");var i=60+12*t.length;n&&(this.buttons[0].label=n.label,this.alertData1=n,i+=20+12*n.label.length),o&&(this.line.visible="true",this.buttons[1].label=o.label,this.alertData2=o,i+=35+12*n.label.length),this.renderer.setStyle(this.label,"width",12*t.length+"px"),this.renderer.setStyle(this.bg,"left",.5*(window.innerWidth-i)+"px"),this.renderer.setStyle(this.bg,"width",i+"px")},e.prototype.click1=function(){this.alertData1&&this.alertData1.callback&&this.alertData1.callback.call(this.alertData1.thisObj),this.close()},e.prototype.click2=function(){this.alertData2&&this.alertData2.callback&&this.alertData2.callback.call(this.alertData2.thisObj),this.close()},e.prototype.close=function(){this.warningTimerId=null,this.alertData1=null,this.alertData2=null,this.line.visible="false",this.visible="false"},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a)},sOyH:function(t,e,n){"use strict";var o=n("ihW0"),i=n("lpfp"),r=n("0/et"),a=n("J78+"),s=n("v7PY"),l=n("v8gm"),u=n("SScf"),h=n("PbJf");n.d(e,"a",function(){return p});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(){var e=t.call(this,!0,!0)||this;return e.rulerInput=null,e.start=null,e.stop=null,e.globalStart=new i.a,e.globalStop=new i.a,e.delete=!1,e.gpu=!0,e.rulerInput=new o.a,e.start=new i.a(0,0),e.stop=new i.a(0,0),e.addChild(e.rulerInput),e}return c(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Ruler"},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,e,n,o){void 0===o&&(o=h.a.MM),this.globalStart=t,this.globalStop=e;var i=t.add(e).multiply(.5);this.setXY(i.x,i.y),this.start=t.subtract(i),this.stop=e.subtract(i);var r=0,a=1;o==h.a.MM?(r=0,a=10):o==h.a.CM?(r=1,a=1):(r=2,a=.01);var s=this.start.subtract(this.stop).length*a;this.rulerInput.value=s,this.rulerInput.decimalPlaces=r,this.rulerInput.inputNumberScale=a,this.rulerInput.setScale(n,n),this.rulerInput.inputData&&(this.rulerInput.inputData.value=s),this.draw()},Object.defineProperty(e.prototype,"value",{get:function(){return this.rulerInput.value},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.name="",this.globalStart.setTo(0,0),this.globalStop.setTo(0,0),this.delete=!1,this.start.setTo(0,0),this.stop.setTo(0,0),this.depth=0,this.rulerInput.clear()},e.prototype.draw=function(){if(this.stage){this.graphics.clear();var t=r.a.rotateVector(this.start.subtract(this.stop),.5*Math.PI),e=r.a.rotateVector(this.start.subtract(this.stop),-.5*Math.PI);t=t.normalize().multiply(10),e=e.normalize().multiply(10);var n,o,i,u;n=this.start.add(t),o=this.start.add(e),i=this.stop.add(t),u=this.stop.add(e);var h,c,p,d;t=r.a.rotateVector(this.start.subtract(this.stop),Math.PI/3),e=r.a.rotateVector(this.start.subtract(this.stop),Math.PI/3+Math.PI),t=t.normalize().multiply(5),e=e.normalize().multiply(5),h=this.start.add(t),c=this.start.add(e),p=this.stop.add(t),d=this.stop.add(e);var f=[this.start,this.stop,n,o,i,u,h,c,p,d],g=new a.a;g.addPoints(f);var m=g.boundRect;this.graphics.width=m.width>>1,this.graphics.height=m.height>>1,this.graphics.lineStyle(1,s.a.RULER_SUBLINE,1),l.a.drawLine(this.graphics,this.start,this.stop),l.a.drawLine(this.graphics,n,o),l.a.drawLine(this.graphics,i,u),l.a.drawLine(this.graphics,h,c),l.a.drawLine(this.graphics,p,d),this.graphics.endStroke();var _=r.a.vectorAngle(this.start,this.stop);_<-90?_+=180:_>90&&(_-=180),this.rulerInput.rotate(_%180)}},e}(u.a)},tEbb:function(t,e,n){"use strict";var o=n("9AqS"),i=n("uG74"),r=n.n(i);n.d(e,"a",function(){return a});var a=function(){function t(){this.headers={},this.headersPost={}}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(){this.headers={},this.headersPost={"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}},t.prototype.get=function(e,n,o,i,a,s){var l=this;void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),void 0===s&&(s=!1),n=this.addToken(n);var u={params:n,headers:this.headers,withCredentials:t.WITH_CREDENTIALS,responseType:"json"};r.a.get(e,u).then(function(t){l.successCalblack(t.data,o,i,a,s)}).catch(function(t){l.errorCalblack(e,t,i,a)})},t.prototype.getBinary=function(t,e,n,o,i){var a=this;void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null),e=this.addToken(e);var s={params:e,headers:this.headers,withCredentials:!1,responseType:"arraybuffer"};r.a.get(t,s).then(function(t){n&&n.call(i,t.data)}).catch(function(e){a.errorCalblack(t,e,o,i)})},t.prototype.getText=function(e,n,o,i,a){var s=this;void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),n=this.addToken(n);var l={params:n,headers:this.headers,withCredentials:t.WITH_CREDENTIALS,responseType:"text"};r.a.get(e,l).then(function(t){s.successCalblack(t.data,o,i,a,!1)}).catch(function(t){s.errorCalblack(e,t,i,a)})},t.prototype.post=function(e,n,o,i,a){var s=this;void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null),void 0===a&&(a=null),n=this.addToken(n);var l={headers:this.headersPost,withCredentials:t.WITH_CREDENTIALS,responseType:"json"},u=this.createHttpParamsString(n);r.a.post(e,u,l).then(function(t){s.successCalblack(t.data,o,i,a,!1)}).catch(function(t){s.errorCalblack(e,t,i,a)})},t.prototype.addToken=function(e){return e&&(t.USER_ID&&(e.user_id=t.USER_ID),t.USER_ID&&(e.user_token=t.TOKEN)),e},t.prototype.createHttpParamsString=function(t){void 0===t&&(t=null);var e="";for(var n in t){var o=t[n];"string"==typeof o&&(o=o.replace(/\+/g,"%2B"),o=o.replace(/&/g,"%26")),e+=n+"="+o+"&"}return e.length>0&&(e=e.substring(0,e.length-1)),e},t.prototype.successCalblack=function(t,e,n,i,r){if(void 0===i&&(i=null),void 0===r&&(r=!1),null!=t){if(1==t.hasOwnProperty("code")){var a=t.code,s=t.msg;if(1e4!=a&&"10000"!=a&&s)return void(n&&n.call(i,a,s))}if(e){var l;if(1==t.hasOwnProperty("data"))if(1!=r&&1!=t.encrypt||"string"!=typeof t.data)l=t.data;else{var u=t.data,h=u.replace(/\n/gi,"");l=JSON.parse(o.a.decrypt(h))}e.call(i,l)}}},t.prototype.errorCalblack=function(t,e,n,o){void 0===o&&(o=null),console.error(e),n&&n.call(o,t,String(e))},t}();a.TOKEN="",a.USER_ID="",a.WITH_CREDENTIALS=!0},u8Vu:function(t,e,n){"use strict";var o=n("SScf"),i=n("mfrV"),r=n("0/et"),a=n("v8gm");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(e,n,o){var r=t.call(this,!0,!0)||this;r.start=e,r.stop=n;var a=e.add(n).multiply(.5);return r.setXY(a.x,a.y),r.rotation=180*n.subtract(e).angle/Math.PI,r.localStart=e.subtract(a),r.localStop=n.subtract(a),r.localStart.angle-=r.rotation*Math.PI/180,r.localStop.angle-=r.rotation*Math.PI/180,r.width=n.subtract(e).length/2+2,r.height=12,r.label=new i.a(!1),r.label.text=Math.round(10*n.subtract(e).length).toString(),r.label.size=12,r.label.setXY(-40,12),r.label.width=80,r.label.height=20,r.label.color="#333333",r.label.align="center",r.label.setScale(o,o),r.addChild(r.label),r.draw(),r}return s(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"FacadeRuler"},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this.graphics.clear();var t=r.a.rotateVector(this.localStart.subtract(this.localStop),.5*Math.PI),e=r.a.rotateVector(this.localStart.subtract(this.localStop),-.5*Math.PI);t=t.normalize().multiply(10),e=e.normalize().multiply(10);var n,o,i,s;n=this.localStart.add(t),o=this.localStart.add(e),i=this.localStop.add(t),s=this.localStop.add(e),this.graphics.lineStyle(2,3355443),a.a.drawLine(this.graphics,this.localStart,this.localStop),a.a.drawLine(this.graphics,n,o),a.a.drawLine(this.graphics,i,s),this.graphics.endStroke()},e}(o.a)},ul9E:function(t,e,n){"use strict";var o=n("sA2y"),i=n("+N0H"),r=n("lpfp"),a=n("PpJG"),s=n("DMQW"),l=n("LF0A"),u=n("wQAS"),h=n("EjX+"),c=n("9AqS"),p=n("FthM");n.d(e,"a",function(){return d});var d=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.register=function(){CallJS.addCallback("app_js_openHuxing",this.app_js_openHuxing,this),CallJS.addCallback("app_js_loadPath",this.app_js_loadPath,this),CallJS.addCallback("app_js_save",this.app_js_save,this),CallJS.addCallback("app_js_showDefault",this.app_js_showDefault,this),CallJS.addCallback("app_js_showFacade",this.app_js_showFacade,this),CallJS.addCallback("app_js_show3d",this.app_js_show3d,this),CallJS.addCallback("app_js_showAreaList",this.app_js_showAreaList,this)},t.prototype.app_js_openHuxing=function(t){var e="",n=null;if("string"==typeof t)try{var r=t.replace(/\n/gi,""),a=c.a.decrypt(r),s=JSON.parse(a),l=s.record;e=l.no,n=JSON.parse(l.data)}catch(t){return o.a.inst.warning(t),"false"}else n=t;var u=!1;return n?u=i.a.inst.open(e,n):o.a.inst.warning("户型数据解析失败!"),1==u?"true":"false"},t.prototype.app_js_loadPath=function(t){var e=null;try{var n=decodeURI(t);e=JSON.parse(n)}catch(n){e=t}for(var o,a=[],l=0,u=e;l<u.length;l++){var h=u[l];o=[];for(var c=0,p=h;c<p.length;c++){var d=p[c];o.push(new r.a(Math.ceil(d.x),Math.ceil(d.y)))}a.push(o)}var f=new s.a(a);f.makeupWalls(),f.correct();for(var g=f.dumpData(),m=0,_=g;m<_.length;m++)for(var y=_[m],b=0,v=y;b<v.length;b++){var w=v[b];i.a.inst.addPath(w.start,w.stop,w.wallLength)}i.a.inst.updateAfterWallChange(),i.a.inst.moveHuxingToCenter(),i.a.inst.center(),i.a.inst.change(!0,!1)},t.prototype.app_js_showDefault=function(){l.a.inst.closeAll(),u.a.inst.changeView(0)},t.prototype.app_js_showFacade=function(){l.a.inst.closeAll(),u.a.inst.changeView(0);for(var t in i.a.inst.rooms){var e=i.a.inst.rooms[t],n={};return n.wall=e.walls[0],n.isForward=!1,void l.a.inst.open(p.a,n)}},t.prototype.app_js_show3d=function(){l.a.inst.closeAll(),u.a.inst.changeView(1)},t.prototype.app_js_showAreaList=function(){l.a.inst.closeAll(),u.a.inst.changeView(0),l.a.inst.open(h.a)},t.prototype.app_js_save=function(){return a.a.inst.save()},t.prototype.pageLoaded=function(){CallJS.js_app_pageLoaded()},t.prototype.save=function(t){CallJS.js_app_save(t)},t.prototype.maidian=function(t){CallJS.js_app_maidian(t)},t.prototype.measure=function(){CallJS.js_app_measure()},t}();d._instance=null,d.SPLIT_STR="ehousechina"},v7PY:function(t,e,n){"use strict";var o=n("aI2X");n.d(e,"a",function(){return i});var i=function(){function t(){}return t.toRGBA=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.fromRGBA=function(t){var e=t[0],n=t[1];t[2];return(e<<24)+(n<<16)+(e<<8)+t[3]},t.toRGB=function(t){return[t>>16&255,t>>8&255,255&t]},t.fromRGB=function(t){var e=t[0],n=t[1];t[2];return(e<<16)+(n<<8)+e},t.toString=function(t){return"#"+o.a.completion(t.toString(16),6)},t.toRGBstring=function(e){return"rgb("+t.toRGB(e).join(",")+")"},t.toRGBAstring=function(e,n){var o=t.toRGB(e),i=o.join(",");return"rgba("+(i+=","+n)+")"},t}();i.MASTER=16764416,i.MASTER2=56034,i.WHITE=16777215,i.BLACK=0,i.ORANGE=16424226,i.GRAY=10066329,i.GRAY2=15461355,i.RED=15597568,i.BLUE=4886754,i.BLUE2=5349887,i.BLUE_GREEN=56034,i.YELLOW=16770099,i.FONT=3355443,i.FONT2=10066329,i.FONT3=4868682,i.FONT4=0,i.FONT5=16777215,i.YELLOW_BUTTON_UP=16770099,i.YELLOW_BUTTON_OVER=16770099,i.YELLOW_BUTTON_DOWN=16776994,i.WHITE_GRAY_BUTTON_UP=15198183,i.WHITE_GRAY_BUTTON_OVER=14540253,i.WHITE_GRAY_BUTTON_DOWN=14474460,i.BLACK_GRAY_BUTTON_UP=10197915,i.BLACK_GRAY_BUTTON_OVER=9342606,i.BLACK_GRAY_BUTTON_DOWN=8421504,i.BORDER=13421772,i.LINE=9934743,i.LINE2=15263976,i.WARNING=12071425,i.RULER_SUBLINE=6710886,i.HEAD=3749704,i.HEAD_FONT=12434877,i.TOOLBAR_BG=16119285,i.NORMAL_WALL_FILL_COLOR=11184810,i.BEARING_WALL_FILL_COLOR=0,i.PARAPET_WALL_FILL_COLOR=16777215,i.WALL_HOVER_FILL_COLOR=i.BLUE2,i.WALL_FOCUS_FILL_COLOR=i.BLUE2,i.WALL_BORDER_COLOR=6710886,i.CORNER_FILL_COLOR=8947848,i.CORNER_HOVER_FILL_COLOR=i.BLUE2,i.CORNER_FOCUS_FILL_COLOR=i.BLUE2,i.OPENING_FILL_COLOR=16777215,i.OPENING_BORDER_COLOR=6710886,i.OPENING_HOVER_BORDER_COLOR=i.BLUE2,i.OPENING_FOCUS_BORDER_COLOR=i.BLUE2,i.OPENING_CTRL_FILL_COLOR=16777215,i.OPENING_CTRL_BORDER_COLOR=i.BLUE2,i.MODEL_BORDER_COLOR=16777215,i.MODEL_HOVER_BORDER_COLOR=i.BLUE2,i.MODEL_FOCUS_BORDER_COLOR=i.BLUE2,i.MODEL_BORDER_ALPHA=0,i.MODEL_HOVER_BORDER_ALPHA=1,i.MODEL_FOCUS_BORDER_ALPHA=1,i.STRUCT_BORDER_COLOR=9539985,i.STRUCT_FOCUS_BORDER_COLOR=i.BLUE2},v8gm:function(t,e,n){"use strict";var o=n("0/et");n.d(e,"a",function(){return i});var i=function(){function t(){}return t.drawLine=function(t,e,n){t.moveTo(e.x,e.y),t.lineTo(n.x,n.y)},t.drawPath=function(t,e,n){if(void 0===n&&(n=!1),0!=e.length){t.moveTo(e[0].x,e[0].y);for(var o=1;o<e.length;o++)t.lineTo(e[o].x,e[o].y);n&&t.lineTo(e[0].x,e[0].y)}},t.drawRect=function(t,e){t.drawRect(e.x,e.y,e.width,e.height)},t.drawTransparentRect=function(t,e){t.beginFill(16777215,0),this.lineStyleEmpty(t),t.drawRect(e.x,e.y,e.width,e.height),t.endFill()},t.drawAuxiliary=function(t,e,n,i,r,a){void 0===r&&(r=3355443),void 0===a&&(a=75),o.a.isPointEqual(e,n)||(t.beginFill(r,.5),t.lineStyle(2,0,1),t.drawCircle(e.x,e.y,a),t.endFill(),t.lineStyle(2,r,1),o.a.isNumberEqual(e.x,n.x,.1)||(t.moveTo(e.x,i.top),t.lineTo(e.x,i.bottom)),o.a.isNumberEqual(e.y,n.y,.1)||(t.moveTo(i.left,e.y),t.lineTo(i.right,e.y)),t.endStroke())},t.lineStyleEmpty=function(t){t.lineStyle()},t}()},vcEh:function(t,e,n){"use strict";var o=n("FC3T"),i=n("J78+"),r=n("lpfp"),a=n("/LiK"),s=n("BGKY"),l=n("lSRa"),u=n("/gn8"),h=n("0/et"),c=n("aNcW"),p=n("GJSB");n.d(e,"a",function(){return f});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(e,n,o,s){void 0===s&&(s=!1);var l=t.call(this)||this;return l.structType=101,l._localStart=new r.a,l._localStop=new r.a,l._openingObjects=new Array,l._startLocal=new r.a,l._stopLocal=new r.a,l.polygon=new i.a,l.forwardName=a.a.createPureUID(),l.backwardName=a.a.createPureUID(),l.startName=a.a.createPureUID(),l.stopName=a.a.createPureUID(),l._length=o,l.startCornerName=e,l.stopCornerName=n,l._bearing=s,l._forwardRoomName="",l._backwardRoomName="",l._aloneRoomName="",l._forwardMaterialNo="",l._backwardMaterialNo="",l._startMaterialNo="",l._stopMaterialNo="",l._forwardSkirtingNo="",l._backwardSkirtingNo="",l._startSkirtingNo="",l._stopSkirtingNo="",l._topLeft=new r.a(l.localStart.x,-.5*l.length),l._bottomLeft=new r.a(l.localStart.x,.5*l.length),l._topRight=new r.a(l.localStop.x,-.5*l.length),l._bottomRight=new r.a(l.localStop.x,.5*l.length),l._arcType=0,l}return d(e,t),Object.defineProperty(e.prototype,"forwardName",{get:function(){return this._forwardName},set:function(t){this._forwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardName",{get:function(){return this._backwardName},set:function(t){this._backwardName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startName",{get:function(){return this._startName},set:function(t){this._startName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopName",{get:function(){return this._stopName},set:function(t){this._stopName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasForward",{get:function(){return 0==this.roomCount||null!=this.forwardRoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBackward",{get:function(){return 0==this.roomCount||null!=this.backwardRoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasStart",{get:function(){return 1==this.startCorner.connectedWallObjects.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasStop",{get:function(){return 1==this.stopCorner.connectedWallObjects.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasForwardSkirting",{get:function(){return this.hasForward&&!h.a.isStringEmptyOrNull(this.forwardSkirtingNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasBackwardSkirting",{get:function(){return this.hasBackward&&!h.a.isStringEmptyOrNull(this.backwardSkirtingNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasStartSkirting",{get:function(){return this.hasStart&&!h.a.isStringEmptyOrNull(this.startSkirtingNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasStopSkirting",{get:function(){return this.hasStop&&!h.a.isStringEmptyOrNull(this.stopSkirtingNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardMaterialNo",{get:function(){return this._forwardMaterialNo},set:function(t){this._forwardMaterialNo!=t&&(this._forwardMaterialNo=t,this.dispatchEvent(new s.a(s.a.FORWARD_MATERIAL_CHANGE),this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardMaterialNo",{get:function(){return this._backwardMaterialNo},set:function(t){this._backwardMaterialNo!=t&&(this._backwardMaterialNo=t,this.dispatchEvent(new s.a(s.a.BACKWARD_MATERIAL_CHANGE),this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startMaterialNo",{get:function(){return this._startMaterialNo},set:function(t){this._startMaterialNo!=t&&(this._startMaterialNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopMaterialNo",{get:function(){return this._stopMaterialNo},set:function(t){this._stopMaterialNo!=t&&(this._stopMaterialNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardSkirtingNo",{get:function(){return this._forwardSkirtingNo},set:function(t){this._forwardSkirtingNo!=t&&(this._forwardSkirtingNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardSkirtingNo",{get:function(){return this._backwardSkirtingNo},set:function(t){this._backwardSkirtingNo!=t&&(this._backwardSkirtingNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startSkirtingNo",{get:function(){return this._startSkirtingNo},set:function(t){this._startSkirtingNo!=t&&(this._startSkirtingNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopSkirtingNo",{get:function(){return this._stopSkirtingNo},set:function(t){this._stopSkirtingNo!=t&&(this._stopSkirtingNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCornerName",{get:function(){return this._startCornerName},set:function(t){this._startCornerName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCornerName",{get:function(){return this._stopCornerName},set:function(t){this._stopCornerName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCorner",{get:function(){return this.sceneObject.getCornerObjectByName(this.startCornerName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopCorner",{get:function(){return this.sceneObject.getCornerObjectByName(this.stopCornerName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this.startCorner.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stop",{get:function(){return this.stopCorner.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStart",{get:function(){return this._localStart.setTo(-.5*this.width,0),this._localStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStop",{get:function(){return this._localStop.setTo(.5*this.width,0),this._localStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return this._bottomLeft},set:function(t){this._bottomLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return this._bottomRight},set:function(t){this._bottomRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return this._topLeft},set:function(t){this._topLeft=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return this._topRight},set:function(t){this._topRight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalTopLeft",{get:function(){return this.localToScene(this.topLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalTopRight",{get:function(){return this.localToScene(this.topRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalBottomLeft",{get:function(){return this.localToScene(this.bottomLeft)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalBottomRight",{get:function(){return this.localToScene(this.bottomRight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){var t=this.stop.subtract(this.start);return t.normalize(),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return.5*(this.startCorner.x+this.stopCorner.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return.5*(this.startCorner.y+this.stopCorner.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.sqrt((this.startCorner.x-this.stopCorner.x)*(this.startCorner.x-this.stopCorner.x)+(this.startCorner.y-this.stopCorner.y)*(this.startCorner.y-this.stopCorner.y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return 180*Math.atan2(this.stopCorner.y-this.startCorner.y,this.stopCorner.x-this.startCorner.x)/Math.PI},enumerable:!0,configurable:!0}),e.prototype.getForwardPolygon=function(t){return void 0===t&&(t=!0),this._forwardPolygon||(this._forwardPolygon=new i.a),(0==this._forwardPolygon.vertexCount||t)&&(this._forwardPolygon.clear(),this._forwardPolygon.addVertexXY(this.topRight.x-.5*(this.topLeft.x+this.topRight.x),-.5*this.height),this._forwardPolygon.addVertexXY(this.topLeft.x-.5*(this.topLeft.x+this.topRight.x),-.5*this.height),this._forwardPolygon.addVertexXY(this.topLeft.x-.5*(this.topLeft.x+this.topRight.x),.5*this.height),this._forwardPolygon.addVertexXY(this.topRight.x-.5*(this.topLeft.x+this.topRight.x),.5*this.height)),this._forwardPolygon},e.prototype.getForwardOpeningPolygons=function(){this._forwardOpeningPolygons||(this._forwardOpeningPolygons=new Array),this._forwardOpeningPolygons.length=0;for(var t=.5*(this.topLeft.x+this.topRight.x),e=.5*this.height,n=this.openingObjects,o=0,r=n;o<r.length;o++){var a=r[o],s=new i.a;s.addVertexXY(-(a.startWallX-t),-(a.z+a.height-e)),s.addVertexXY(-(a.stopWallX-t),-(a.z+a.height-e)),s.addVertexXY(-(a.stopWallX-t),-(a.z-e)),s.addVertexXY(-(a.startWallX-t),-(a.z-e)),this._forwardOpeningPolygons.push(s)}return this._forwardOpeningPolygons},Object.defineProperty(e.prototype,"forwardMatrix3D",{get:function(){var t=new c.a;return t.appendRotation(180,u.a.Z_AXIS),t.appendRotation(-90,u.a.X_AXIS),t.appendTranslation(.5*(this.topLeft.x+this.topRight.x),.5*this.length,.5*this.height),t},enumerable:!0,configurable:!0}),e.prototype.getForwardPolygon3D=function(t){void 0===t&&(t=!1);for(var e,n=this.forwardMatrix3D,o=this.getForwardPolygon().toPolygon3D(),i=0,r=o.vertices;i<r.length;i++)e=r[i],e.y=-e.y;if(o.applyTransform(n),t)for(var a=0,s=this.getForwardOpeningPolygons();a<s.length;a++){for(var l=s[a],u=l.toPolygon3D(),h=0,c=u.vertices;h<c.length;h++)e=c[h],e.y=-e.y;u.applyTransform(n),o.addHole(u)}return o},e.prototype.getBackwardPolygon=function(t){return void 0===t&&(t=!0),this._backwardPolygon||(this._backwardPolygon=new i.a),(0==this._backwardPolygon.vertexCount||t)&&(this._backwardPolygon.clear(),this._backwardPolygon.addVertexXY(this.bottomRight.x-.5*(this.bottomRight.x+this.bottomLeft.x),-.5*this.height),this._backwardPolygon.addVertexXY(this.bottomLeft.x-.5*(this.bottomRight.x+this.bottomLeft.x),-.5*this.height),this._backwardPolygon.addVertexXY(this.bottomLeft.x-.5*(this.bottomRight.x+this.bottomLeft.x),.5*this.height),this._backwardPolygon.addVertexXY(this.bottomRight.x-.5*(this.bottomRight.x+this.bottomLeft.x),.5*this.height)),this._backwardPolygon},e.prototype.getBackwardOpeningPolygons=function(){this._backwardOpeningPolygons||(this._backwardOpeningPolygons=new Array),this._backwardOpeningPolygons.length=0;for(var t=.5*(this.bottomRight.x+this.bottomLeft.x),e=.5*this.height,n=this.openingObjects,o=0,r=n;o<r.length;o++){var a=r[o],s=new i.a;s.addVertexXY(a.stopWallX-t,-(a.z+a.height-e)),s.addVertexXY(a.startWallX-t,-(a.z+a.height-e)),s.addVertexXY(a.startWallX-t,-(a.z-e)),s.addVertexXY(a.stopWallX-t,-(a.z-e)),this._backwardOpeningPolygons.push(s)}return this._backwardOpeningPolygons},Object.defineProperty(e.prototype,"backwardMatrix3D",{get:function(){var t=new c.a;return t.appendRotation(90,u.a.X_AXIS),t.appendTranslation(.5*(this.bottomRight.x+this.bottomLeft.x),-.5*this.length,.5*this.height),t},enumerable:!0,configurable:!0}),e.prototype.getBackwardPolygon3D=function(t){void 0===t&&(t=!1);for(var e,n=this.backwardMatrix3D,o=this.getBackwardPolygon().toPolygon3D(),i=0,r=o.vertices;i<r.length;i++)e=r[i],e.y=-e.y;if(o.applyTransform(n),t)for(var a=0,s=this.getBackwardOpeningPolygons();a<s.length;a++){for(var l=s[a],u=l.toPolygon3D(),h=0,c=u.vertices;h<c.length;h++)e=c[h],e.y=-e.y;u.applyTransform(n),o.addHole(u)}return o},Object.defineProperty(e.prototype,"cachedGlobalPolygon",{get:function(){return this._cachedGlobalPolygon||(this._cachedGlobalPolygon=this.polygon.transform(this.localToSceneMatrix)),this._cachedGlobalPolygon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return h.a.isNumberEqual(this.width,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardRoomName",{get:function(){return this._forwardRoomName},set:function(t){this._forwardRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardRoomName",{get:function(){return this._backwardRoomName},set:function(t){this._backwardRoomName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aloneRoomName",{get:function(){return this._aloneRoomName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardRoom",{get:function(){return this.sceneObject.getRoomObjectByName(this.forwardRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardRoom",{get:function(){return this.sceneObject.getRoomObjectByName(this.backwardRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aloneRoom",{get:function(){return this.sceneObject.getRoomObjectByName(this.aloneRoomName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomCount",{get:function(){return this.forwardRoom&&this.backwardRoom?2:this.forwardRoom||this.backwardRoom?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArcwall",{get:function(){return null!=this._anchor&&!h.a.isNumberEqual(this._anchor.y,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor?this._anchor.copyFrom(t):this._anchor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arcType",{get:function(){return this._arcType},set:function(t){this._arcType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bearing",{get:function(){return this._bearing},set:function(t){this._bearing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openingObjects",{get:function(){this._openingObjects.length=0;for(var t in this.sceneObject.openingObjects){var e=this.sceneObject.openingObjects[t];e.wallName==this.name&&this._openingObjects.push(e)}return this._openingObjects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openingsData",{get:function(){for(var t=this.openingObjects,e=[],n=0,o=t;n<o.length;n++){var i=o[n];e.push({width:i.width,height:i.height,openHeight:i.openHeight,z:i.z,wallX:i.wallX,wallY:i.wallY,archHeight:i.archHeight,archAngle:i.archAngle,archRadius:i.archRadius,opening:i})}return e.sort(function(t,e){var n=t.wallX,o=e.wallX;return n>o?1:n<o?-1:0}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startLocal",{get:function(){return this._startLocal.setTo(-.5*this.width,0),this._startLocal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopLocal",{get:function(){return this._stopLocal.setTo(.5*this.width,0),this._stopLocal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excenter",{get:function(){return h.a.calculateExcenter(this.startLocal,this.stopLocal,this.anchor)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return h.a.calculateCircumcircleRadius(this.startLocal,this.stopLocal,this.anchor)},enumerable:!0,configurable:!0}),e.prototype.getArcWallRealWidth=function(){var t=this.excenter,e=this.radius;if(null==t||-1==e)return this.width;var n=this.startLocal.clone().subtract(t),o=this.stopLocal.clone().subtract(t),i=h.a.computeTwoVectorAngle(n,o);return t.y<0&&this.anchor.y<0||t.y>0&&this.anchor.y>0?(2*Math.PI-i)*e:i*e},Object.defineProperty(e.prototype,"minOpeningStartX",{get:function(){return Math.max(this.topLeft.x,this.bottomLeft.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxOpeningStopX",{get:function(){return Math.min(this.topRight.x,this.bottomRight.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardMaterial",{get:function(){return p.a.getInstance().getItemByNo(this.forwardMaterialNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardMaterial",{get:function(){return p.a.getInstance().getItemByNo(this.backwardMaterialNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startMaterial",{get:function(){return p.a.getInstance().getItemByNo(this.startMaterialNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopMaterial",{get:function(){return p.a.getInstance().getItemByNo(this.stopMaterialNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forwardSkirting",{get:function(){return p.a.getInstance().getItemByNo(this.forwardSkirtingNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backwardSkirting",{get:function(){return p.a.getInstance().getItemByNo(this.backwardSkirtingNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startSkirting",{get:function(){return p.a.getInstance().getItemByNo(this.startSkirtingNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopSkirting",{get:function(){return p.a.getInstance().getItemByNo(this.stopSkirtingNo)},enumerable:!0,configurable:!0}),e.prototype.resumeCorner=function(t){this.startCorner==t?(this._topLeft=new r.a(this.localStart.x,-.5*this.length),this._bottomLeft=new r.a(this.localStart.x,.5*this.length)):this.stopCorner==t&&(this._topRight=new r.a(this.localStop.x,-.5*this.length),this._bottomRight=new r.a(this.localStop.x,.5*this.length))},e.prototype.updateBoundPolygon=function(){this.polygon.clear(),this.polygon.addPoint(this.topLeft),this.polygon.addPoint(this.startLocal),this.polygon.addPoint(this.bottomLeft),this.polygon.addPoint(this.bottomRight),this.polygon.addPoint(this.stopLocal),this.polygon.addPoint(this.topRight)},e.prototype.findAloneRoom=function(){if(0==this.roomCount)for(var t in this.sceneObject.roomObjects){var e=this.sceneObject.roomObjects[t];if(e.polygon.containsInXY(this.x,this.y)){this._aloneRoomName=e.name;break}}},e.prototype.forwardPolygon=function(t){var e=new l.a;return e.addVertexXYZ(this.topLeft.x,this.length/2,0),e.addVertexXYZ(this.topLeft.x,this.length/2,t),e.addVertexXYZ(this.topRight.x,this.length/2,t),e.addVertexXYZ(this.topRight.x,this.length/2,0),e},e.prototype.backwardPolygon=function(t){var e=new l.a;return e.addVertexXYZ(this.bottomLeft.x,-this.length/2,t),e.addVertexXYZ(this.bottomLeft.x,-this.length/2,0),e.addVertexXYZ(this.bottomRight.x,-this.length/2,0),e.addVertexXYZ(this.bottomRight.x,-this.length/2,t),e},e.prototype.startPolygon=function(t){var e=new l.a;return e.addVertexXYZ(this.bottomLeft.x,-this.bottomLeft.y,0),e.addVertexXYZ(this.bottomLeft.x,-this.bottomLeft.y,t),e.addVertexXYZ(this.topLeft.x,-this.topLeft.y,t),e.addVertexXYZ(this.topLeft.x,-this.topLeft.y,0),e},e.prototype.stopPolygon=function(t){var e=new l.a;return e.addVertexXYZ(this.topRight.x,-this.topRight.y,0),e.addVertexXYZ(this.topRight.x,-this.topRight.y,t),e.addVertexXYZ(this.bottomRight.x,-this.bottomRight.y,t),e.addVertexXYZ(this.bottomRight.x,-this.bottomRight.y,0),e},Object.defineProperty(e.prototype,"openingPolygons",{get:function(){for(var t=new Array,e=0,n=this.openingObjects;e<n.length;e++){for(var o=n[e],i=o.framePolygon,r=o.wallX,a=0,s=i.vertices;a<s.length;a++){var l=s[a];l.x+=r,l.z+=o.z}t.push(i)}return t},enumerable:!0,configurable:!0}),e.prototype.copyFromData=function(t){this.forwardMaterialNo!=t.forwardMaterialNo&&(this.forwardMaterialNo=t.forwardMaterialNo),this.backwardMaterialNo!=t.backwardMaterialNo&&(this.backwardMaterialNo=t.backwardMaterialNo),this.startMaterialNo!=t.startMaterialNo&&(this.startMaterialNo=t.startMaterialNo),this.stopMaterialNo!=t.stopMaterialNo&&(this.stopMaterialNo=t.stopMaterialNo),this.forwardSkirtingNo!=t.forwardSkirtingNo&&(this.forwardSkirtingNo=t.forwardSkirtingNo),this.backwardSkirtingNo!=t.backwardSkirtingNo&&(this.backwardSkirtingNo=t.backwardSkirtingNo),this.startSkirtingNo!=t.startSkirtingNo&&(this.startSkirtingNo=t.startSkirtingNo),this.stopSkirtingNo!=t.stopSkirtingNo&&(this.stopSkirtingNo=t.stopSkirtingNo)},e.prototype.dumpData=function(){var t={};return t.name=this.name,t.forwardName=this.forwardName,t.backwardName=this.backwardName,t.startName=this.startName,t.stopName=this.stopName,t.startCornerName=this.startCornerName,t.stopCornerName=this.stopCornerName,t.bearing=1==this.bearing?1:0,t.length=this.length,t.height=this.height,t.forwardRoomName=this.forwardRoomName,t.backwardRoomName=this.backwardRoomName,t.forwardMaterialNo=this.forwardMaterialNo,t.backwardMaterialNo=this.backwardMaterialNo,t.startMaterialNo=this.startMaterialNo,t.stopMaterialNo=this.stopMaterialNo,t.forwardSkirtingNo=this.forwardSkirtingNo,t.backwardSkirtingNo=this.backwardSkirtingNo,t.startSkirtingNo=this.startSkirtingNo,t.stopSkirtingNo=this.stopSkirtingNo,this.anchor&&(t.anchor={x:this.anchor.x,y:this.anchor.y}),t},e.loadData=function(t){if(t.startCornerName==t.stopCornerName)return null;var n=new e(t.startCornerName,t.stopCornerName,t.length,Boolean(t.bearing));return n.name=t.name,t.hasOwnProperty("structType")&&(n.structType=t.structType),t.hasOwnProperty("forwardName")&&(n.forwardName=t.forwardName),t.hasOwnProperty("backwardName")&&(n.backwardName=t.backwardName),t.hasOwnProperty("startName")&&(n.startName=t.startName),t.hasOwnProperty("stopName")&&(n.stopName=t.stopName),t.hasOwnProperty("startName")&&(n.startName=t.startName),t.hasOwnProperty("stopName")&&(n.stopName=t.stopName),n.forwardRoomName=t.forwardRoomName,n.backwardRoomName=t.backwardRoomName,t.hasOwnProperty("height")&&(n._height=t.height),t.hasOwnProperty("anchor")&&(n.anchor=new r.a(t.anchor.x,t.anchor.y)),t.hasOwnProperty("forwardMaterialNo")&&null!=t.forwardMaterialNo&&(n._forwardMaterialNo=t.forwardMaterialNo),t.hasOwnProperty("backwardMaterialNo")&&null!=t.backwardMaterialNo&&(n._backwardMaterialNo=t.backwardMaterialNo),t.hasOwnProperty("startMaterialNo")&&null!=t.startMaterialNo&&(n._startMaterialNo=t.startMaterialNo),t.hasOwnProperty("stopMaterialNo")&&null!=t.stopMaterialNo&&(n._stopMaterialNo=t.stopMaterialNo),t.hasOwnProperty("forwardSkirtingNo")&&null!=t.forwardSkirtingNo&&(n._forwardSkirtingNo=t.forwardSkirtingNo),t.hasOwnProperty("backwardSkirtingNo")&&null!=t.backwardSkirtingNo&&(n._backwardSkirtingNo=t.backwardSkirtingNo),t.hasOwnProperty("startSkirtingNo")&&null!=t.startSkirtingNo&&(n._startSkirtingNo=t.startSkirtingNo),t.hasOwnProperty("stopSkirtingNo")&&null!=t.stopSkirtingNo&&(n._stopSkirtingNo=t.stopSkirtingNo),n},e}(o.a);f.FORWARD_WALL="FORWARD_WALL",f.BACKWARD_WALL="BACKWARD_WALL",f.START_WALL="START_WALL",f.STOP_WALL="STOP_WALL",f.FORWARD_SKIRTING="FORWARD_SKIRTING",f.BACKWARD_SKIRTING="BACKWARD_SKIRTING",f.START_SKIRTING="START_SKIRTING",f.STOP_SKIRTING="STOP_SKIRTING"},vqfy:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Jj2e"),r=n("bDfz"),a=n("Dvc5"),s=n("ul9E");n.d(e,"a",function(){return u});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),u=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.removeIconUp="assets/components/virtualboard/remove_up_3x.png",o.removeIconDown="assets/components/virtualboard/remove_up_3x.png",o.confirmIconUp="assets/components/virtualboard/confirm_up_3x.png",o.confirmIconDown="assets/components/virtualboard/confirm_up_3x.png",o}return l(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty()},e.prototype.updateSize=function(t,e){this.width=t+"px",this.height=e+"px";var n=Math.floor(t/4-1),o=Math.floor(.47*n),i=n+"px",r=o+"px";this.key0.width=i,this.key0.height=r,this.key1.width=i,this.key1.height=r,this.key2.width=i,this.key2.height=r,this.key3.width=i,this.key3.height=r,this.key4.width=i,this.key4.height=r,this.key5.width=i,this.key5.height=r,this.key6.width=i,this.key6.height=r,this.key7.width=i,this.key7.height=r,this.key8.width=i,this.key8.height=r,this.key9.width=i,this.key9.height=r;var a=n+"px",s=o+"px";this.removeKey.width=a,this.removeKey.iconWidth=Math.floor(n/1.2)+"px",this.removeKey.height=s,this.removeKey.iconHeight=Math.floor(n/1.2)+"px",this.confirmKey.width=a,this.confirmKey.height=s},e.prototype.open=function(t){this.targetInput.finalLabel=t.toString(),CallJS.clearCallback("app_js_measure"),CallJS.addCallback("app_js_measure",this.app_js_measure,this)},e.prototype.add=function(t){if(this.targetInput){var e,n=this.targetInput.label;e="0"==t&&"0"==n?"0":n+t,parseInt(e)>i.a.MAX_NUM&&(e=n),this.targetInput.label=parseInt(e).toString()}},e.prototype.remove=function(){if(this.targetInput){var t,e=this.targetInput.label;t=e.length>1?e.substr(0,e.length-1):"0",this.targetInput.label=parseInt(t).toString()}},e.prototype.confirm=function(){if(this.targetInput){var t=this.targetInput.label;parseInt(t)>i.a.MAX_NUM&&(t=i.a.MAX_NUM.toString()),parseInt(t)<i.a.MIM_NUM&&(t=i.a.MIM_NUM.toString()),this.targetInput.finalLabel=t,this.dispatchEvent(new r.a(r.a.VIRTUAL_NUMBER_BOARD_CONFIRM,parseInt(t)),this)}},e.prototype.measure=function(){CallJS.clearCallback("app_js_measure"),CallJS.addCallback("app_js_measure",this.app_js_measure,this),s.a.inst.measure()},e.prototype.app_js_measure=function(t){if(t){var e=Math.round(1e3*t);this.targetInput.finalLabel=e.toString()}},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(a.a)},w9Am:function(t,e,n){"use strict";var o=n("Eezr"),i=n("zj8U"),r=n("SScf"),a=n("+N0H");n.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function e(){var e=t.call(this,!1,!1)||this;return e.depth=o.a.TAG,e.mouseEventEnable=!1,e}return s(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return"TagGroup"},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var t=0;t<this.numChildren;t++){this.getChildAt(t).visible=!1}},e.prototype.fetchIdleTag=function(){for(var t,e=0;e<this.numChildren;e++)if(t=this.getChildAt(e),0==t.visible)return t;return null},e.prototype.addTag=function(t,e,n,o){void 0===n&&(n=""),void 0===o&&(o=0);var r=this.fetchIdleTag();r?r.visible=!0:(r=new i.a,this.addChild(r));var s=a.a.inst,l=1/s.scale;r.setScale(l,l),r.setData(t,e,s.scale,n,o)},e.prototype.update=function(){this.clear();var t,e=a.a.inst.rooms;for(var n in e){var o=e[n];t=o.boundPolygon.center,this.addTag(t.x,t.y,o.tag,o.calcPureArea())}},e}(r.a);l._instance=null},wKgg:function(t,e,n){"use strict";var o=n("lpfp"),i=n("J78+"),r=n("DFUe");n.n(r);n.d(e,"a",function(){return a});var a=function(){function t(e,n){void 0===e&&(e=t.SCALE),void 0===n&&(n=0),this.scale=e,this.clipper=new r.Clipper}return t.prototype.addPath=function(t,e,n){void 0===n&&(n=!0);for(var o=[],i=0,a=t;i<a.length;i++){var s=a[i];o.push(new r.IntPoint(Math.round(s.x*this.scale),Math.round(s.y*this.scale)))}this.clipper.AddPolygon(o,e,n)},t.prototype.addPaths=function(t,e,n){void 0===n&&(n=!0);for(var o=[],i=0,a=t;i<a.length;i++){for(var s=a[i],l=[],u=0,h=s;u<h.length;u++){var c=h[u];l.push(new r.IntPoint(Math.round(c.x*this.scale),Math.round(c.y*this.scale)))}o.push(l)}this.clipper.AddPolygons(o,e)},t.prototype.execute=function(e,n,i){void 0===n&&(n=t.PFT_EVEN_ODD),void 0===i&&(i=t.PFT_EVEN_ODD);var r=[];this.clipper.Execute(e,r,n,i);for(var a=[],s=0,l=r;s<l.length;s++){for(var u=l[s],h=[],c=0,p=u;c<p.length;c++){var d=p[c];h.push(new o.a(d.X/this.scale,d.Y/this.scale))}a.push(h)}return a},t.prototype.orientation=function(t){for(var e=new i.a,n=0,o=t;n<o.length;n++){var r=o[n];e.addVertex(r)}return e.area>=0},t}();a.SCALE=1e5,a.PFT_EVEN_ODD=r.PolyFillType.pftEvenOdd,a.PFT_NON_ZERO=r.PolyFillType.pftNonZero,a.PFT_POSITIVE=r.PolyFillType.pftPositive,a.PFT_NEGATIVE=r.PolyFillType.pftNegative,a.PT_SUBJECT=r.PolyType.ptSubject,a.PT_CLIP=r.PolyType.ptClip,a.CT_INTERSECTION=r.ClipType.ctIntersection,a.CT_UNION=r.ClipType.ctUnion,a.CT_DIFFERENCE=r.ClipType.ctDifference,a.CT_XOR=r.ClipType.ctXor},wP5k:function(t,e,n){"use strict";var o=n("0/et"),i=n("4tk/"),r=n("FIP8");n.d(e,"a",function(){return a});var a=function(){function t(t,e,n){this.p0=null,this.p1=null,this.p2=null,this._p3=null,this._dir=null,this.p0=t,this.p1=e,this.p2=n}return Object.defineProperty(t.prototype,"p3",{get:function(){return this._p3||(this._p3=this.p2.add(this.p1.subtract(this.p0))),this._p3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir||(this._dir=this.p1.subtract(this.p0).crossProd(this.p2.subtract(this.p0))),this._dir},enumerable:!0,configurable:!0}),t.prototype.toPlane=function(){return new i.a(this.p0,this.dir)},t.prototype.hasIntersectionWithRectFace=function(t){var e,n;return e=t.p1.subtract(t.p0),n=e.length,e.normalize(),!!this.hasIntersectionWithRay(new r.a(t.p0,e),n)||(!!this.hasIntersectionWithRay(new r.a(t.p2,e),n)||(e=t.p2.subtract(t.p0),n=e.length,e.normalize(),!!this.hasIntersectionWithRay(new r.a(t.p0,e),n)||(!!this.hasIntersectionWithRay(new r.a(t.p1,e),n)||(e=this.p1.subtract(this.p0),n=e.length,e.normalize(),!!t.hasIntersectionWithRay(new r.a(this.p0,e),n)||(!!t.hasIntersectionWithRay(new r.a(this.p2,e),n)||(e=this.p2.subtract(this.p0),n=e.length,e.normalize(),!!t.hasIntersectionWithRay(new r.a(this.p0,e),n)||!!t.hasIntersectionWithRay(new r.a(this.p1,e),n)))))))},t.prototype.hasIntersectionWithRay=function(t,e){var n=o.a.rayRectFaceIntersect(t,this,!1,!1);return!!n&&n.subtract(t.p0).length<=e},t}()},wQAS:function(t,e,n){"use strict";var o=n("/oeL"),i=n("XKz0"),r=n("ul9E"),a=n("MIhx"),s=n("sA2y"),l=n("tEbb"),u=n("s/43"),h=n("LxKY"),c=n("ot+B");n.d(e,"a",function(){return p});var p=function(){function t(e,n,o){t.inst=this,u.a.inst.register(this,o,n),r.a.inst.register(),h.a.MEDIA_ROOT="assets/local/",h.a.register(),c.a.ASSET_ROOT=h.a.MEDIA_ROOT+"3d/models/",a.a.inst.register(),l.a.inst.register()}return t.prototype.ngAfterViewInit=function(){s.a.inst=this.alert,r.a.inst.pageLoaded()},t.prototype.changeView=function(t){0==t?(this.toolbar.visible="true",this.bottombar.visible="true",this.huxingResource.visible="true",this.editor2d.show(!0),this.editor3d.show(!1)):(this.toolbar.moveHandler(),this.toolbar.visible="false",this.bottombar.visible="false",this.huxingResource.visible="false",this.editor2d.show(!1),this.editor3d.show(!0))},t.ctorParameters=function(){return[{type:i.m},{type:o.e},{type:o.Q}]},t}()},wRF1:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.OPTION_SETTING_INPUT_CHANGE="OPTION_SETTING_INPUT_CHANGE"},whOH:function(t,e,n){"use strict";var o=n("FC3T"),i=n("KpE8"),r=n("BGKY"),a=n("lSRa"),s=n("lpfp"),l=n("0/et"),u=n("J78+"),h=n("ot+B"),c=n("GJSB");n.d(e,"a",function(){return d});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d=function(t){function e(){var e=t.call(this)||this;return e.type=i.a.HOLE,e._itemNo="",e._wallName="",e}return p(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemNo",{get:function(){return this._itemNo},set:function(t){if(this._itemNo!=t){switch(this.dispatchEvent(new r.a(r.a.BEFORE_ITEM_NO_CHANGE),this),this._itemNo=t,this.item.subType){case h.b.DOOR_COMMON:this.type=i.a.DOOR_COMMON;break;case h.b.DOOR_DOUBLE:this.type=i.a.DOOR_DOUBLE;break;case h.b.DOOR_SLIDING:this.type=i.a.DOOR_SLIDING;break;case h.b.WINDOW_BAY:this.type=i.a.WINDOW_BAY;break;case h.b.WINDOW_COMMON:this.type=i.a.WINDOW_COMMON;break;case h.b.WINDOW_FRENCH:this.type=i.a.WINDOW_FRENCH}this.dispatchEvent(new r.a(r.a.AFTER_ITEM_NO_CHANGE),this)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"goodsNo",{get:function(){return this._goodsNo},set:function(t){this._goodsNo!=t&&(this._goodsNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallName",{get:function(){return this._wallName},set:function(t){this._wallName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"materialNo",{get:function(){return this._materialNo},set:function(t){this._materialNo!=t&&(this._materialNo=t,this.dispatchEvent(new r.a(r.a.OPENING_MATERIAL_CHANGE),this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomMaterialNo",{get:function(){return this._bottomMaterialNo},set:function(t){this._bottomMaterialNo!=t&&(this._bottomMaterialNo=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallX",{get:function(){return this.wall?this.wall.sceneToLocal(new s.a(this.x,this.y)).x:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallY",{get:function(){return this.wall?this.wall.sceneToLocal(new s.a(this.x,this.y)).y:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archHeight",{get:function(){return this._archHeight},set:function(t){this._archHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStartX",{get:function(){return-.5*this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localStopX",{get:function(){return.5*this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wall",{get:function(){return this.sceneObject.getWallObjectByName(this.wallName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWallX",{get:function(){return this.wallX-.5*this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopWallX",{get:function(){return this.wallX+.5*this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this.isHole?1:this.width/this.item.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this.isHole?1:this.length/this.item.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this.isHole?1:this.height/this.item.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHole",{get:function(){return this.type==i.a.HOLE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBayWindow",{get:function(){return this.type==i.a.WINDOW_BAY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDoor",{get:function(){return this.type==i.a.DOOR_COMMON||this.type==i.a.DOOR_DOUBLE||this.type==i.a.DOOR_SLIDING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isArchOpening",{get:function(){return l.a.greater(this.archHeight,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return 1==this.isHole?null:c.a.getInstance().getItemByNo(this.itemNo)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openHeight",{get:function(){return this.width-this.archHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxArchHeight",{get:function(){return Math.floor(Math.min(.5*this.width,this.height))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archAngle",{get:function(){return 0==this.archHeight?0:2*l.a.asin(.5*this.width/this.archRadius)*180/Math.PI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"archRadius",{get:function(){return 0==this.archHeight?Number.MAX_VALUE:(.5*this.width*.5*this.width+this.archHeight*this.archHeight)/(2*this.archHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wallLength",{get:function(){return this.wall?this.wall.length:this.sceneObject.settingsWallLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transparent",{get:function(){return-1!=[i.a.HOLE,i.a.WINDOW_COMMON,i.a.WINDOW_BAY,i.a.WINDOW_FRENCH,i.a.DOOR_SLIDING].indexOf(this.type)},enumerable:!0,configurable:!0}),e.prototype.rotate=function(){this.isHole||(this.type==i.a.DOOR_COMMON?this.mirror?(this.mirror=!1,this.rotationZ+=180):this.mirror=!0:this.rotationZ+=180)},Object.defineProperty(e.prototype,"framePolygon",{get:function(){var t=new a.a;if(this.isArchOpening){for(var e=l.a.calcArcPath(new s.a(this.width/2,this.height-this.archHeight),new s.a(-this.width/2,this.height-this.archHeight),new s.a(0,this.height),3),n=0,o=e;n<o.length;n++){var i=o[n];t.addVertexXYZ(i.x,0,i.y)}t.addVertexXYZ(-.5*this.width,0,0),t.addVertexXYZ(.5*this.width,0,0)}else t.addVertexXYZ(.5*this.width,0,this.height),t.addVertexXYZ(-.5*this.width,0,this.height),t.addVertexXYZ(-.5*this.width,0,0),t.addVertexXYZ(.5*this.width,0,0);return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLegal",{get:function(){var t,e,n=new Array,o=new u.a;o.addVertexXY(Math.max(this.wall.topLeft.x,this.wall.bottomLeft.x),this.wall.height),o.addVertexXY(Math.max(this.wall.topLeft.x,this.wall.bottomLeft.x),0),o.addVertexXY(Math.min(this.wall.topRight.x,this.wall.bottomRight.x),0),o.addVertexXY(Math.min(this.wall.topRight.x,this.wall.bottomRight.x),this.wall.height);for(var i in this.wall.openingObjects){var r=this.wall.openingObjects[i];e=new u.a;var a=r.wallX;e.addVertexXY(.5*r.width+a,r.height+r.z),e.addVertexXY(-.5*r.width+a,r.height+r.z),e.addVertexXY(-.5*r.width+a,0+r.z),e.addVertexXY(.5*r.width+a,0+r.z),r==this?t=e:n.push(e)}if(!o.containsOnPolygon(t))return!1;for(var s=0,l=n;s<l.length;s++)if(e=l[s],t.intersect(e))return!1;return!0},enumerable:!0,configurable:!0}),e.prototype.tryMovement=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,!!this.isLegal||(this.z-=t.z,!!this.isLegal||(this.x-=t.x,this.y-=t.y,this.z+=t.z,!!this.isLegal||(this.z-=t.z,!1)))},e.prototype.copyFromData=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.rotationZ=t.rotationZ,this.width=t.width,this.length=t.length,this.height=t.height,this.mirror=t.mirror,this.itemNo=t.itemNo,this.goodsNo=t.goodsNo,this.materialNo=t.materialNo,this.bottomMaterialNo=t.bottomMaterialNo},e.prototype.dumpData=function(){var t=new Object;return t.name=this.name,t.type=this.type,t.itemNo=this.itemNo,t.goodsNo=this.goodsNo,t.wallName=this.wallName,t.x=this.x,t.y=this.y,t.z=this.z,t.rotationZ=this.rotationZ,t.width=this.width,t.height=this.height,t.length=this.length,t.archHeight=this.archHeight,t.materialNo=this.materialNo,t.bottomMaterialNo=this.bottomMaterialNo,t.mirror=1==this.mirror?1:0,t},e.loadData=function(t){var n=new e;return n.name=t.name,n.type=t.type,n._itemNo=t.itemNo,n._goodsNo=t.hasOwnProperty("goodsNo")?t.goodsNo:t.itemNo,n.wallName=t.wallName,n._x=t.x,n._y=t.y,n._z=t.z,n._rotationZ=t.rotationZ,n._width=t.width,n._length=t.length,n._height=t.height,n._mirror=Boolean(t.mirror),n.archHeight=t.archHeight,t.hasOwnProperty("materialNo")&&null!=t.materialNo&&(n._materialNo=t.materialNo),t.hasOwnProperty("bottomMaterialNo")&&null!=t.bottomMaterialNo&&(n._bottomMaterialNo=t.bottomMaterialNo),n},e}(o.a);d.MIN_WIDTH=10,d.MIN_LENGTH=10,d.MIN_HEIGHT=10,d.DEFAULT_WIDTH=100,d.DEFAULT_LENGTH=12,d.DEFAULT_HEIGHT=200},wzWt:function(t,e,n){"use strict";var o=n("/oeL"),i=n("Dvc5");n.d(e,"a",function(){return a});var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(t){function e(n,o){var i=t.call(this,n,o)||this;return e._instance=i,i}return r(e,t),Object.defineProperty(e,"inst",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.updateComponentProperty(),this.structView.close(),this.structView.parent=this},e.prototype.addStructHandler=function(){this.structView.open()},e.prototype.close=function(){this.structView.close()},e.ctorParameters=function(){return[{type:o.Q},{type:o._18}]},e}(i.a);a._instance=null},xBDO:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".bg[_ngcontent-%COMP%]{height:40px}.settingbar[_ngcontent-%COMP%]{height:100%}"]},xijU:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.HUXING_ITEM_ASSET_READY="HUXING_ITEM_ASSET_READY"},yOTB:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=function(){function t(){this.tagPool={},this.relationPool={}}return t.prototype.UpdateFlag=function(){},t.prototype.addTag=function(t,e){void 0===e&&(e=null);for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.tagPool.hasOwnProperty(t))return void console.error("添加重复，错误: "+t);this.tagPool[t]=!0;var i=[];null!=e&&i.push(e),i=i.concat(n);for(var r=0,a=i;r<a.length;r++){var s=a[r];this.relationPool.hasOwnProperty(s)||(this.relationPool[s]=[]);var l=this.relationPool[s];-1==l.indexOf(t)&&l.push(t)}},t.prototype.hasTag=function(t){return this.tagPool.hasOwnProperty(t)},t.prototype.getValue=function(t){return this.tagPool[t]},t.prototype.setValue=function(t,e){if(!this.hasTag(t))return void console.error("没有这个tag ： "+t);if(this.tagPool[t]=e,e&&this.relationPool.hasOwnProperty(t))for(var n=0,o=this.relationPool[t];n<o.length;n++){var i=o[n];this.setValue(i,e)}},t}();o.TAG_POSITION="position",o.TAG_POLYGON="polygon",o.TAG_BOUNDARY="boundary",o.TAG_ROOM="room"},yPN6:function(t,e,n){"use strict";var o=n("Qn0l");n.d(e,"a",function(){return r});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=function(t){function e(e,n){return void 0===n&&(n=null),t.call(this,e,n)||this}return i(e,t),e}(o.a);r.OPERATOR_ACTION="OPERATOR_ACTION"},z4kl:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o=[".textInput[_ngcontent-%COMP%]{float:left;margin-right:6px;width:100%;height:40px;padding-left:15px;color:#333;font-size:14px;text-align:left;line-height:40px;border:0 solid #000;border-top:1px solid #f6f6f6;outline-width:0}"]},zJDb:function(t,e,n){"use strict";function o(t){return a._12(0,[a._13(402653184,1,{slideBox:0}),a._13(402653184,2,{textInputRef:0}),(t()(),a._15(16777216,null,null,1,"slide-box",[["backColorOn","#3d4de6"],["class","slideBox"],["height","42px"],["label","手动输入"],["textSize","14"],["width","100%"]],null,[[null,"touchend"],[null,"touchmove"],[null,"mouseenter"],[null,"mouseleave"],[null,"mousedown"],[null,"mouseup"],[null,"click"],[null,"touchstart"]],function(t,e,n){var o=!0,i=t.component;if("touchmove"===e){o=!1!==a._16(t,3)._touchMove(n)&&o}if("mouseenter"===e){o=!1!==a._16(t,3).mouseOver(n)&&o}if("mouseleave"===e){o=!1!==a._16(t,3).mouseOut(n)&&o}if("mousedown"===e){o=!1!==a._16(t,3).mouseDown(n)&&o}if("mouseup"===e){o=!1!==a._16(t,3).mouseUp(n)&&o}if("click"===e){o=!1!==a._16(t,3).mouseClick(n)&&o}if("touchstart"===e){o=!1!==a._16(t,3).touchStart(n)&&o}if("touchend"===e){o=!1!==a._16(t,3).touchEnd(n)&&o}if("touchend"===e){o=!1!==i.slideClick()&&o}return o},l.a,l.b)),a._17(4308992,[[1,4],["slideBox",4]],0,u.a,[a.Q,a._18],{width:[0,"width"],height:[1,"height"],label:[2,"label"],backColorOn:[3,"backColorOn"],textSize:[4,"textSize"]},null),(t()(),a._14(null,["\n"])),(t()(),a._15(0,[[2,0],["textInput",1]],null,0,"input",[["autocomplete","off"],["class","textInput"],["type","number"],["value",""]],null,null,null,null,null))],function(t,e){t(e,3,0,"100%","42px","手动输入","#3d4de6","14")},null)}function i(t){return a._12(0,[(t()(),a._15(16777216,null,null,1,"option-input",[],null,[[null,"touchmove"]],function(t,e,n){var o=!0;if("touchmove"===e){o=!1!==a._16(t,1)._touchMove(n)&&o}return o},o,c)),a._17(4308992,null,0,s.a,[a.Q,a._18],null,null)],function(t,e){t(e,1,0)},null)}var r=n("z4kl"),a=n("/oeL"),s=n("Luvd"),l=n("Tt+v"),u=n("OezV");n.d(e,"b",function(){return c}),e.a=o;var h=[r.a],c=a._11({encapsulation:0,styles:h,data:{}});a._19("option-input",s.a,i,{position:"position",width:"width",height:"height",left:"left",top:"top",right:"right",bottom:"bottom",visible:"visible",alpha:"alpha",depth:"depth",rotation:"rotation",scalex:"scalex",scaley:"scaley",tooltip:"tooltip",backgroundcolor:"backgroundcolor",filter:"filter",buttonMode:"buttonMode"},{},[])},zj8U:function(t,e,n){"use strict";var o=n("mfrV"),i=n("v7PY"),r=n("SScf");n.d(e,"a",function(){return s});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(t){function e(){var n=t.call(this,!1,!1)||this;return n.gpu=!0,n.mouseEventEnable=!1,n.roomNameLabel=new o.a,n.roomNameLabel.y=-9,n.roomNameLabel.width=50,n.roomNameLabel.height=20,n.roomNameLabel.text="未命名",n.roomNameLabel.size=10,n.roomNameLabel.color=i.a.toString(i.a.FONT),n.roomNameLabel.textGlow="0px 0px 2px #eeeeee , -0px -0px 2px #eeeeee",n.roomNameLabel.align="center",n.addChild(n.roomNameLabel),n.areaLabel=new o.a,n.areaLabel.y=9,n.areaLabel.width=50,n.areaLabel.height=20,n.areaLabel.text="0"+e.AREA_UNIT,n.areaLabel.size=10,n.areaLabel.color=i.a.toString(i.a.FONT),n.areaLabel.textGlow="0px 0px 2px #eeeeee , -0px -0px 2px #eeeeee",n.areaLabel.align="center",n.addChild(n.areaLabel),n}return a(e,t),Object.defineProperty(e.prototype,"tagName",{get:function(){return"Tag"},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,n,o,i,r){void 0===i&&(i=""),void 0===r&&(r=0);var a=Math.max(this.roomNameLabel.width,this.areaLabel.width),s=this.roomNameLabel.height+this.areaLabel.height,l=t-.5*a/o,u=n-.5*s/o;this.setXY(l,u),this.roomNameLabel.text=""==i||null==i?"未命名":i,r=Math.round(100*r)/100,this.areaLabel.text=r+e.AREA_UNIT},e}(r.a);s.AREA_UNIT="m²"}},[0]);